{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","lib/Modeler.js","lib/Viewer.js","lib/core/index.js","lib/draw/DmnRenderer.js","lib/draw/index.js","lib/features/annotations/Annotations.js","lib/features/annotations/AnnotationsRenderer.js","lib/features/annotations/index.js","lib/features/context-menu/ContextMenu.js","lib/features/context-menu/index.js","lib/features/editor-actions/DmnEditorActions.js","lib/features/editor-actions/index.js","lib/features/factory/DmnFactory.js","lib/features/factory/ElementFactory.js","lib/features/factory/index.js","lib/features/hide-tech-control/HideTechControl.js","lib/features/hide-tech-control/index.js","lib/features/hit-policy/HitPolicy.js","lib/features/hit-policy/HitPolicyRenderer.js","lib/features/hit-policy/index.js","lib/features/io-label/IoLabel.js","lib/features/io-label/IoLabelRenderer.js","lib/features/io-label/IoLabelRules.js","lib/features/io-label/index.js","lib/features/mappings-row/MappingsRow.js","lib/features/mappings-row/MappingsRowRenderer.js","lib/features/mappings-row/index.js","lib/features/modeling/DmnUpdater.js","lib/features/modeling/Modeling.js","lib/features/modeling/cmd/ClearRowHandler.js","lib/features/modeling/cmd/EditCellHandler.js","lib/features/modeling/cmd/EditHitPolicyHandler.js","lib/features/modeling/cmd/EditIdHandler.js","lib/features/modeling/cmd/EditInputMappingHandler.js","lib/features/modeling/cmd/EditTypeHandler.js","lib/features/modeling/index.js","lib/features/table-name/TableName.js","lib/features/table-name/index.js","lib/features/type-row/TypeRow.js","lib/features/type-row/TypeRowRenderer.js","lib/features/type-row/index.js","lib/import/DmnImporter.js","lib/import/DmnTreeWalker.js","lib/import/Importer.js","lib/import/Util.js","lib/import/index.js","lib/util/SelectionUtil.js","node_modules/diagram-js/lib/command/CommandInterceptor.js","node_modules/diagram-js/lib/features/rules/RuleProvider.js","node_modules/diagram-js/lib/util/IdGenerator.js","node_modules/diagram-js/node_modules/inherits/inherits_browser.js","node_modules/diagram-js/node_modules/lodash/collection/forEach.js","node_modules/diagram-js/node_modules/lodash/internal/arrayEach.js","node_modules/diagram-js/node_modules/lodash/internal/baseEach.js","node_modules/diagram-js/node_modules/lodash/internal/baseFor.js","node_modules/diagram-js/node_modules/lodash/internal/baseForOwn.js","node_modules/diagram-js/node_modules/lodash/internal/baseIsFunction.js","node_modules/diagram-js/node_modules/lodash/internal/baseProperty.js","node_modules/diagram-js/node_modules/lodash/internal/baseToString.js","node_modules/diagram-js/node_modules/lodash/internal/bindCallback.js","node_modules/diagram-js/node_modules/lodash/internal/createBaseEach.js","node_modules/diagram-js/node_modules/lodash/internal/createBaseFor.js","node_modules/diagram-js/node_modules/lodash/internal/createForEach.js","node_modules/diagram-js/node_modules/lodash/internal/getLength.js","node_modules/diagram-js/node_modules/lodash/internal/getNative.js","node_modules/diagram-js/node_modules/lodash/internal/isArrayLike.js","node_modules/diagram-js/node_modules/lodash/internal/isIndex.js","node_modules/diagram-js/node_modules/lodash/internal/isLength.js","node_modules/diagram-js/node_modules/lodash/internal/isObjectLike.js","node_modules/diagram-js/node_modules/lodash/internal/shimKeys.js","node_modules/diagram-js/node_modules/lodash/internal/toObject.js","node_modules/diagram-js/node_modules/lodash/lang/isArguments.js","node_modules/diagram-js/node_modules/lodash/lang/isArray.js","node_modules/diagram-js/node_modules/lodash/lang/isFunction.js","node_modules/diagram-js/node_modules/lodash/lang/isNative.js","node_modules/diagram-js/node_modules/lodash/lang/isNumber.js","node_modules/diagram-js/node_modules/lodash/lang/isObject.js","node_modules/diagram-js/node_modules/lodash/object/keys.js","node_modules/diagram-js/node_modules/lodash/object/keysIn.js","node_modules/diagram-js/node_modules/lodash/string/escapeRegExp.js","node_modules/diagram-js/node_modules/lodash/utility/identity.js","node_modules/dmn-moddle/index.js","node_modules/dmn-moddle/lib/dmn-moddle.js","node_modules/dmn-moddle/lib/id-support.js","node_modules/dmn-moddle/lib/simple.js","node_modules/dmn-moddle/node_modules/lodash/function/restParam.js","node_modules/dmn-moddle/node_modules/lodash/internal/assignWith.js","node_modules/dmn-moddle/node_modules/lodash/internal/baseAssign.js","node_modules/dmn-moddle/node_modules/lodash/internal/baseCopy.js","node_modules/dmn-moddle/node_modules/lodash/internal/createAssigner.js","node_modules/dmn-moddle/node_modules/lodash/internal/isIterateeCall.js","node_modules/dmn-moddle/node_modules/lodash/lang/isFunction.js","node_modules/dmn-moddle/node_modules/lodash/lang/isString.js","node_modules/dmn-moddle/node_modules/lodash/object/assign.js","node_modules/dmn-moddle/node_modules/moddle-xml/lib/common.js","node_modules/dmn-moddle/node_modules/moddle-xml/lib/reader.js","node_modules/dmn-moddle/node_modules/moddle-xml/lib/writer.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/array/last.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/collection/filter.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/collection/find.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/collection/map.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/collection/reduce.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/function/defer.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/internal/arrayFilter.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/internal/arrayMap.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/internal/arrayReduce.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/internal/arraySome.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/internal/baseCallback.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/internal/baseDelay.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/internal/baseFilter.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/internal/baseFind.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/internal/baseFindIndex.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/internal/baseGet.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/internal/baseIsEqual.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/internal/baseIsEqualDeep.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/internal/baseIsMatch.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/internal/baseMap.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/internal/baseMatches.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/internal/baseMatchesProperty.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/internal/basePropertyDeep.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/internal/baseReduce.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/internal/baseSlice.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/internal/createFind.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/internal/createReduce.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/internal/equalArrays.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/internal/equalByTag.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/internal/equalObjects.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/internal/getMatchData.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/internal/isKey.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/internal/isStrictComparable.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/internal/toPath.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/lang/isTypedArray.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/object/pairs.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/lodash/utility/property.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/moddle/index.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/moddle/lib/base.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/moddle/lib/descriptor-builder.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/moddle/lib/factory.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/moddle/lib/moddle.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/moddle/lib/ns.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/moddle/lib/properties.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/moddle/lib/registry.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/moddle/lib/types.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/moddle/node_modules/lodash/internal/baseFlatten.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/moddle/node_modules/lodash/internal/baseForIn.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/moddle/node_modules/lodash/internal/pickByArray.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/moddle/node_modules/lodash/internal/pickByCallback.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/moddle/node_modules/lodash/object/pick.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/sax/lib/sax.js","node_modules/dmn-moddle/node_modules/moddle-xml/node_modules/tiny-stack/lib/tiny-stack.js","node_modules/dmn-moddle/resources/dmn/json/dmn.json","node_modules/ids/index.js","node_modules/ids/node_modules/hat/index.js","node_modules/lodash/array/union.js","node_modules/lodash/collection/forEachRight.js","node_modules/lodash/function/restParam.js","node_modules/lodash/internal/SetCache.js","node_modules/lodash/internal/arrayEachRight.js","node_modules/lodash/internal/arrayPush.js","node_modules/lodash/internal/baseDifference.js","node_modules/lodash/internal/baseEachRight.js","node_modules/lodash/internal/baseFlatten.js","node_modules/lodash/internal/baseForOwnRight.js","node_modules/lodash/internal/baseForRight.js","node_modules/lodash/internal/baseIndexOf.js","node_modules/lodash/internal/baseUniq.js","node_modules/lodash/internal/cacheIndexOf.js","node_modules/lodash/internal/cachePush.js","node_modules/lodash/internal/createAssigner.js","node_modules/lodash/internal/createCache.js","node_modules/lodash/internal/indexOfNaN.js","node_modules/lodash/internal/isIndex.js","node_modules/lodash/internal/isLength.js","node_modules/lodash/lang/isArguments.js","node_modules/lodash/lang/isArray.js","node_modules/lodash/lang/isFunction.js","node_modules/lodash/lang/isNative.js","node_modules/lodash/lang/isNumber.js","node_modules/lodash/lang/isString.js","node_modules/lodash/object/assign.js","node_modules/lodash/object/keys.js","node_modules/lodash/object/omit.js","node_modules/min-dom/lib/classes.js","node_modules/min-dom/lib/domify.js","node_modules/min-dom/lib/query.js","node_modules/min-dom/lib/remove.js","node_modules/min-dom/node_modules/component-classes/index.js","node_modules/min-dom/node_modules/component-classes/node_modules/component-indexof/index.js","node_modules/min-dom/node_modules/component-query/index.js","node_modules/min-dom/node_modules/domify/index.js","node_modules/table-js/index.js","node_modules/table-js/lib/Table.js","node_modules/table-js/lib/core/ElementFactory.js","node_modules/table-js/lib/core/ElementRegistry.js","node_modules/table-js/lib/core/GraphicsFactory.js","node_modules/table-js/lib/core/Sheet.js","node_modules/table-js/lib/core/index.js","node_modules/table-js/lib/draw/Renderer.js","node_modules/table-js/lib/draw/index.js","node_modules/table-js/lib/features/add-row/AddRow.js","node_modules/table-js/lib/features/add-row/AddRowRenderer.js","node_modules/table-js/lib/features/add-row/index.js","node_modules/table-js/lib/features/change-support/ChangeSupport.js","node_modules/table-js/lib/features/change-support/index.js","node_modules/table-js/lib/features/combo-box/index.js","node_modules/table-js/lib/features/complex-cell/ComplexCell.js","node_modules/table-js/lib/features/complex-cell/index.js","node_modules/table-js/lib/features/controls/Controls.js","node_modules/table-js/lib/features/controls/index.js","node_modules/table-js/lib/features/editing/EditBehavior.js","node_modules/table-js/lib/features/editing/EditRenderer.js","node_modules/table-js/lib/features/editing/Selection.js","node_modules/table-js/lib/features/editing/index.js","node_modules/table-js/lib/features/editor-actions/EditorActions.js","node_modules/table-js/lib/features/editor-actions/index.js","node_modules/table-js/lib/features/interaction-events/InteractionEvents.js","node_modules/table-js/lib/features/interaction-events/index.js","node_modules/table-js/lib/features/keyboard/Keyboard.js","node_modules/table-js/lib/features/keyboard/index.js","node_modules/table-js/lib/features/line-numbers/LineNumbers.js","node_modules/table-js/lib/features/line-numbers/index.js","node_modules/table-js/lib/features/modeling/Modeling.js","node_modules/table-js/lib/features/modeling/cmd/ClearRowHandler.js","node_modules/table-js/lib/features/modeling/cmd/CreateColumnHandler.js","node_modules/table-js/lib/features/modeling/cmd/CreateRowHandler.js","node_modules/table-js/lib/features/modeling/cmd/DeleteColumnHandler.js","node_modules/table-js/lib/features/modeling/cmd/DeleteRowHandler.js","node_modules/table-js/lib/features/modeling/cmd/EditCellHandler.js","node_modules/table-js/lib/features/modeling/cmd/EditNameHandler.js","node_modules/table-js/lib/features/modeling/cmd/MoveRowHandler.js","node_modules/table-js/lib/features/modeling/index.js","node_modules/table-js/lib/features/popup-menu/PopupMenu.js","node_modules/table-js/lib/features/popup-menu/index.js","node_modules/table-js/lib/features/row-drag/DragRenderer.js","node_modules/table-js/lib/features/row-drag/RowDrag.js","node_modules/table-js/lib/features/row-drag/index.js","node_modules/table-js/lib/features/table-name/TableName.js","node_modules/table-js/lib/features/utility-column/UtilityColumn.js","node_modules/table-js/lib/features/utility-column/UtilityColumnRenderer.js","node_modules/table-js/lib/features/utility-column/UtilityColumnRules.js","node_modules/table-js/lib/features/utility-column/index.js","node_modules/table-js/lib/model/index.js","node_modules/table-js/lib/util/StringUtils.js","node_modules/table-js/node_modules/diagram-js/lib/command/CommandStack.js","node_modules/table-js/node_modules/diagram-js/lib/command/index.js","node_modules/table-js/node_modules/diagram-js/lib/core/EventBus.js","node_modules/table-js/node_modules/diagram-js/lib/features/rules/Rules.js","node_modules/table-js/node_modules/diagram-js/lib/features/rules/index.js","node_modules/table-js/node_modules/diagram-js/lib/util/Event.js","node_modules/table-js/node_modules/diagram-js/lib/util/Mouse.js","node_modules/table-js/node_modules/diagram-js/lib/util/Platform.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/array/uniq.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/array/unique.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/chain/lodash.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/date/now.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/function/bind.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/internal/LazyWrapper.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/internal/LodashWrapper.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/internal/SetCache.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/internal/arrayCopy.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/internal/baseCreate.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/internal/baseLodash.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/internal/baseSetData.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/internal/baseUniq.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/internal/composeArgs.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/internal/composeArgsRight.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/internal/createBindWrapper.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/internal/createCache.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/internal/createCtorWrapper.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/internal/createHybridWrapper.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/internal/createPartialWrapper.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/internal/createWrapper.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/internal/getData.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/internal/getFuncName.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/internal/isLaziable.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/internal/mergeData.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/internal/metaMap.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/internal/realNames.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/internal/reorder.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/internal/replaceHolders.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/internal/setData.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/internal/sortedUniq.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/internal/wrapperClone.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/lang/isFunction.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/utility/constant.js","node_modules/table-js/node_modules/diagram-js/node_modules/lodash/utility/noop.js","node_modules/table-js/node_modules/didi/lib/annotation.js","node_modules/table-js/node_modules/didi/lib/index.js","node_modules/table-js/node_modules/didi/lib/injector.js","node_modules/table-js/node_modules/didi/lib/module.js","node_modules/table-js/node_modules/lodash/collection/every.js","node_modules/table-js/node_modules/lodash/function/debounce.js","node_modules/table-js/node_modules/lodash/internal/arrayEvery.js","node_modules/table-js/node_modules/lodash/internal/baseEvery.js","node_modules/table-js/node_modules/min-dom/lib/attr.js","node_modules/table-js/node_modules/min-dom/lib/delegate.js","node_modules/table-js/node_modules/min-dom/lib/event.js","node_modules/table-js/node_modules/min-dom/lib/matches.js","node_modules/table-js/node_modules/min-dom/node_modules/component-closest/index.js","node_modules/table-js/node_modules/min-dom/node_modules/component-delegate/index.js","node_modules/table-js/node_modules/min-dom/node_modules/component-event/index.js","node_modules/table-js/node_modules/min-dom/node_modules/component-matches-selector/index.js","node_modules/table-js/node_modules/min-dom/node_modules/domify/index.js"],"names":[],"mappings":";;;;;;;;;;;;;AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5TA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzIA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3DA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrEA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACppBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACr4CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC/CA;;ACAA;;ACAA;;ACAA;AACA;AACA;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3LA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChHA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvGA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/DA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnNA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpIA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrPA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzYA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/cA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC7YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrCA;AACA;AACA;AACA;AACA;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvEA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC3HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACtFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChDA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AC3LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACxBA;;;;ACAA;;ACAA;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\r\n\r\nvar inherits = require(342);\r\n\r\nvar Viewer = require(2);\r\n\r\nvar initialTemplate = [\r\n  '<?xml version=\"1.0\" encoding=\"UTF-8\"?>',\r\n  '<definitions xmlns=\"http://www.omg.org/spec/DMN/20151101/dmn11.xsd\"',\r\n               'id=\"definitions\"',\r\n               'name=\"definitions\"',\r\n               'namespace=\"http://camunda.org/schema/1.0/dmn\">',\r\n    '<decision id=\"decision\" name=\"\">',\r\n      '<decisionTable id=\"decisionTable\">',\r\n        '<input id=\"input1\" label=\"\">',\r\n          '<inputExpression id=\"inputExpression1\" typeRef=\"string\">',\r\n            '<text></text>',\r\n          '</inputExpression>',\r\n        '</input>',\r\n        '<output id=\"output1\" label=\"\" name=\"\" typeRef=\"string\">',\r\n        '</output>',\r\n      '</decisionTable>',\r\n    '</decision>',\r\n  '</definitions>'\r\n].join('/n');\r\n\r\n/**\r\n * A modeler for DMN tables.\r\n *\r\n *\r\n * ## Extending the Modeler\r\n *\r\n * In order to extend the viewer pass extension modules to bootstrap via the\r\n * `additionalModules` option. An extension module is an object that exposes\r\n * named services.\r\n *\r\n * The following example depicts the integration of a simple\r\n * logging component that integrates with interaction events:\r\n *\r\n *\r\n * ```javascript\r\n *\r\n * // logging component\r\n * function InteractionLogger(eventBus) {\r\n *   eventBus.on('element.hover', function(event) {\r\n *     console.log()\r\n *   })\r\n * }\r\n *\r\n * InteractionLogger.$inject = [ 'eventBus' ]; // minification save\r\n *\r\n * // extension module\r\n * var extensionModule = {\r\n *   __init__: [ 'interactionLogger' ],\r\n *   interactionLogger: [ 'type', InteractionLogger ]\r\n * };\r\n *\r\n * // extend the viewer\r\n * var dmnModeler = new Modeler({ additionalModules: [ extensionModule ] });\r\n * dmnModeler.importXML(...);\r\n * ```\r\n *\r\n *\r\n * ## Customizing / Replacing Components\r\n *\r\n * You can replace individual table components by redefining them in override modules.\r\n * This works for all components, including those defined in the core.\r\n *\r\n * Pass in override modules via the `options.additionalModules` flag like this:\r\n *\r\n * ```javascript\r\n * function CustomContextPadProvider(contextPad) {\r\n *\r\n *   contextPad.registerProvider(this);\r\n *\r\n *   this.getContextPadEntries = function(element) {\r\n *     // no entries, effectively disable the context pad\r\n *     return {};\r\n *   };\r\n * }\r\n *\r\n * CustomContextPadProvider.$inject = [ 'contextPad' ];\r\n *\r\n * var overrideModule = {\r\n *   contextPadProvider: [ 'type', CustomContextPadProvider ]\r\n * };\r\n *\r\n * var dmnModeler = new Modeler({ additionalModules: [ overrideModule ]});\r\n * ```\r\n *\r\n * @param {Object} [options] configuration options to pass to the viewer\r\n * @param {DOMElement} [options.container] the container to render the viewer in, defaults to body.\r\n * @param {String|Number} [options.width] the width of the viewer\r\n * @param {String|Number} [options.height] the height of the viewer\r\n * @param {Object} [options.moddleExtensions] extension packages to provide\r\n * @param {Array<didi.Module>} [options.modules] a list of modules to override the default modules\r\n * @param {Array<didi.Module>} [options.additionalModules] a list of modules to use with the default modules\r\n */\r\nfunction Modeler(options) {\r\n  Viewer.call(this, options);\r\n}\r\n\r\ninherits(Modeler, Viewer);\r\n\r\nModeler.prototype.createTemplate = function(done) {\r\n  this.importXML(initialTemplate, done);\r\n};\r\n\r\nModeler.prototype._modelingModules = [\r\n  // modeling components\r\n  require(429),\r\n  require(12),\r\n  require(36),\r\n  require(10),\r\n  require(435),\r\n  require(452)\r\n];\r\n\r\n\r\n// modules the modeler is composed of\r\n//\r\n// - viewer modules\r\n// - interaction modules\r\n// - modeling modules\r\n\r\nModeler.prototype._modules = [].concat(\r\n  Modeler.prototype._modules,\r\n  Modeler.prototype._modelingModules);\r\n\r\n\r\nmodule.exports = Modeler;\r\n","'use strict';\r\n\r\nvar assign = require(394),\r\n    omit = require(397),\r\n    isString = require(393),\r\n    isNumber = require(391);\r\n\r\nvar domify = require(400),\r\n    domQuery = require(401),\r\n    domRemove = require(402);\r\n\r\nvar Table = require(407),\r\n    DmnModdle = require(82);\r\n\r\nvar IdSupport = require(84),\r\n    Ids = require(340);\r\n\r\nvar Importer = require(44);\r\n\r\nvar ComboBox = require(421);\r\n\r\n\r\nfunction initListeners(table, listeners) {\r\n  var events = table.get('eventBus');\r\n\r\n  listeners.forEach(function(l) {\r\n    events.on(l.event, l.handler);\r\n  });\r\n\r\n  events.on('table.destroy', function() {\r\n    if (ComboBox.prototype._openedDropdown) {\r\n      ComboBox.prototype._openedDropdown._closeDropdown();\r\n    }\r\n  });\r\n}\r\n\r\nfunction checkValidationError(err) {\r\n\r\n  // check if we can help the user by indicating wrong DMN xml\r\n  // (in case he or the exporting tool did not get that right)\r\n\r\n  var pattern = /unparsable content <([^>]+)> detected([/s/S]*)$/;\r\n  var match = pattern.exec(err.message);\r\n\r\n  if (match) {\r\n    err.message =\r\n      'unparsable content <' + match[1] + '> detected; ' +\r\n      'this may indicate an invalid DMN file' + match[2];\r\n  }\r\n\r\n  return err;\r\n}\r\n\r\nvar DEFAULT_OPTIONS = {\r\n  width: '100%',\r\n  position: 'relative',\r\n  container: 'body'\r\n};\r\n\r\n\r\n/**\r\n * Ensure the passed argument is a proper unit (defaulting to px)\r\n */\r\nfunction ensureUnit(val) {\r\n  return val + (isNumber(val) ? 'px' : '');\r\n}\r\n\r\n/**\r\n * A viewer for DMN tables.\r\n *\r\n *\r\n * ## Extending the Viewer\r\n *\r\n * In order to extend the viewer pass extension modules to bootstrap via the\r\n * `additionalModules` option. An extension module is an object that exposes\r\n * named services.\r\n *\r\n * The following example depicts the integration of a simple\r\n * logging component that integrates with interaction events:\r\n *\r\n *\r\n * ```javascript\r\n *\r\n * // logging component\r\n * function InteractionLogger(eventBus) {\r\n *   eventBus.on('element.hover', function(event) {\r\n *     console.log()\r\n *   })\r\n * }\r\n *\r\n * InteractionLogger.$inject = [ 'eventBus' ]; // minification save\r\n *\r\n * // extension module\r\n * var extensionModule = {\r\n *   __init__: [ 'interactionLogger' ],\r\n *   interactionLogger: [ 'type', InteractionLogger ]\r\n * };\r\n *\r\n * // extend the viewer\r\n * var dmnViewer = new Viewer({ additionalModules: [ extensionModule ] });\r\n * dmnViewer.importXML(...);\r\n * ```\r\n *\r\n * @param {Object} [options] configuration options to pass to the viewer\r\n * @param {DOMElement} [options.container] the container to render the viewer in, defaults to body.\r\n * @param {String|Number} [options.width] the width of the viewer\r\n * @param {String|Number} [options.height] the height of the viewer\r\n * @param {Object} [options.moddleExtensions] extension packages to provide\r\n * @param {Array<didi.Module>} [options.modules] a list of modules to override the default modules\r\n * @param {Array<didi.Module>} [options.additionalModules] a list of modules to use with the default modules\r\n */\r\nfunction Viewer(options) {\r\n\r\n  this.options = options = assign({}, DEFAULT_OPTIONS, options || {});\r\n\r\n  var parent = options.container;\r\n\r\n  // support jquery element\r\n  // unwrap it if passed\r\n  if (parent.get) {\r\n    parent = parent.get(0);\r\n  }\r\n\r\n  // support selector\r\n  if (isString(parent)) {\r\n    parent = domQuery(parent);\r\n  }\r\n\r\n  var container = this.container = domify('<div class=\"dmn-table\"></div>');\r\n  parent.appendChild(container);\r\n\r\n  assign(container.style, {\r\n    width: ensureUnit(options.width),\r\n    height: ensureUnit(options.height),\r\n    position: options.position\r\n  });\r\n}\r\n\r\nViewer.prototype.importXML = function(xml, done) {\r\n\r\n  var self = this;\r\n\r\n  this.moddle = this.createModdle();\r\n\r\n  this.moddle.fromXML(xml, 'dmn:Definitions', function(err, definitions, context) {\r\n    if (err) {\r\n      err = checkValidationError(err);\r\n      return done(err);\r\n    }\r\n\r\n    var parseWarnings = context.warnings;\r\n\r\n    self.importDefinitions(definitions, function(err, importWarnings) {\r\n      if (err) {\r\n        return done(err);\r\n      }\r\n\r\n      done(null, parseWarnings.concat(importWarnings || []));\r\n    });\r\n  });\r\n};\r\n\r\nViewer.prototype.saveXML = function(options, done) {\r\n\r\n  if (!done) {\r\n    done = options;\r\n    options = {};\r\n  }\r\n\r\n  var definitions = this.definitions;\r\n\r\n  if (!definitions) {\r\n    return done(new Error('no definitions loaded'));\r\n  }\r\n\r\n  this.moddle.toXML(definitions, options, done);\r\n};\r\n\r\nViewer.prototype.createModdle = function() {\r\n  var moddle = new DmnModdle(this.options.moddleExtensions);\r\n\r\n  IdSupport.extend(moddle, new Ids([ 32, 36, 1 ]));\r\n\r\n  return moddle;\r\n};\r\n\r\nViewer.prototype.get = function(name) {\r\n\r\n  if (!this.table) {\r\n    throw new Error('no table loaded');\r\n  }\r\n\r\n  return this.table.get(name);\r\n};\r\n\r\nViewer.prototype.invoke = function(fn) {\r\n\r\n  if (!this.table) {\r\n    throw new Error('no table loaded');\r\n  }\r\n\r\n  return this.table.invoke(fn);\r\n};\r\n\r\nViewer.prototype.importDefinitions = function(definitions, done) {\r\n\r\n  // use try/catch to not swallow synchronous exceptions\r\n  // that may be raised during model parsing\r\n  try {\r\n    if (this.table) {\r\n      this.clear();\r\n    }\r\n\r\n    this.definitions = definitions;\r\n\r\n    var table = this.table = this._createTable(this.options);\r\n\r\n    this._init(table);\r\n\r\n    Importer.importDmnTable(table, definitions, done);\r\n  } catch (e) {\r\n    done(e);\r\n  }\r\n};\r\n\r\nViewer.prototype._init = function(table) {\r\n  initListeners(table, this.__listeners || []);\r\n};\r\n\r\nViewer.prototype._createTable = function(options) {\r\n\r\n  var modules = [].concat(options.modules || this.getModules(), options.additionalModules || []);\r\n\r\n  // add self as an available service\r\n  modules.unshift({\r\n    dmnjs: [ 'value', this ],\r\n    moddle: [ 'value', this.moddle ]\r\n  });\r\n\r\n  options = omit(options, 'additionalModules');\r\n\r\n  options = assign(options, {\r\n    sheet: { container: this.container },\r\n    modules: modules\r\n  });\r\n\r\n  return new Table(options);\r\n};\r\n\r\n\r\nViewer.prototype.getModules = function() {\r\n  return this._modules;\r\n};\r\n\r\n/**\r\n * Remove all drawn elements from the viewer.\r\n *\r\n * After calling this method the viewer can still\r\n * be reused for opening another table.\r\n */\r\nViewer.prototype.clear = function() {\r\n  var table = this.table;\r\n\r\n  if (table) {\r\n    table.destroy();\r\n  }\r\n\r\n  delete this.table;\r\n};\r\n\r\n/**\r\n * Destroy the viewer instance and remove all its remainders\r\n * from the document tree.\r\n */\r\nViewer.prototype.destroy = function() {\r\n  // clear underlying diagram\r\n  this.clear();\r\n\r\n  // remove container\r\n  domRemove(this.container);\r\n};\r\n\r\n/**\r\n * Register an event listener on the viewer\r\n *\r\n * @param {String} event\r\n * @param {Function} handler\r\n */\r\nViewer.prototype.on = function(event, handler) {\r\n  var table = this.table,\r\n      listeners = this.__listeners = this.__listeners || [];\r\n\r\n  listeners.push({ event: event, handler: handler });\r\n\r\n  if (table) {\r\n    table.get('eventBus').on(event, handler);\r\n  }\r\n};\r\n\r\n// modules the viewer is composed of\r\nViewer.prototype._modules = [\r\n  require(3),\r\n  require(437),\r\n  require(24),\r\n  require(38),\r\n  require(8),\r\n  require(27),\r\n  require(41),\r\n  require(17),\r\n  require(20),\r\n  require(433),\r\n  require(425),\r\n  require(423)\r\n];\r\n\r\nmodule.exports = Viewer;\r\n","module.exports = {\r\n  __depends__: [\r\n    require(46),\r\n    require(5)\r\n  ]\r\n};\r\n","'use strict';\r\n\r\nvar domClasses = require(399);\r\n\r\nfunction DmnRenderer(eventBus) {\r\n\r\n  eventBus.on('row.render', function(event) {\r\n    if(event.data.isClauseRow) {\r\n      domClasses(event.gfx).add('labels');\r\n    }\r\n  });\r\n\r\n  eventBus.on('cell.render', function(event) {\r\n    var data = event.data,\r\n        gfx  = event.gfx;\r\n\r\n    if(!data.column.businessObject) {\r\n      return;\r\n    }\r\n\r\n    if(data.row.isClauseRow) {\r\n      // clause names\r\n      gfx.childNodes[0].textContent = data.column.businessObject.label;\r\n    } else if(data.content) {\r\n      if(!data.content.tagName && data.row.businessObject) {\r\n        // input and output entries\r\n        gfx.childNodes[0].textContent = data.content.text;\r\n      }\r\n    }\r\n    if(!data.row.isFoot) {\r\n      if(!!data.column.businessObject.inputExpression) {\r\n        domClasses(gfx).add('input');\r\n      } else {\r\n        domClasses(gfx).add('output');\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nDmnRenderer.$inject = [ 'eventBus' ];\r\n\r\nmodule.exports = DmnRenderer;\r\n","module.exports = {\r\n  __init__: [ 'dmnRenderer' ],\r\n  dmnRenderer: [ 'type', require(4) ]\r\n};\r\n","'use strict';\r\n\r\nvar domify = require(400);\r\n\r\n/**\r\n * Adds an annotation column to the table\r\n *\r\n * @param {EventBus} eventBus\r\n */\r\nfunction Annotations(eventBus, sheet, elementRegistry, graphicsFactory, hideTechControl) {\r\n\r\n  this.column = null;\r\n\r\n  var self = this;\r\n\r\n  var labelCell;\r\n\r\n  eventBus.on('import.success', function(event) {\r\n\r\n    eventBus.fire('annotations.add', event);\r\n\r\n    self.column = sheet.addColumn({\r\n      id: 'annotations',\r\n      isAnnotationsColumn: true\r\n    });\r\n\r\n    labelCell = elementRegistry.filter(function(element) {\r\n        return element._type === 'cell' && element.column === self.column && element.row.isLabelRow;\r\n      })[0];\r\n    labelCell.rowspan = hideTechControl.isHidden() ? 2 : 4;\r\n    /**\r\n     * The code in the <project-logo></project-logo> area\r\n     * must not be changed, see http://bpmn.io/license for more information\r\n     *\r\n     * <project-logo>\r\n     */\r\n\r\n    labelCell.content = domify('<a href=\"http://bpmn.io\" class=\"dmn-js-logo\"></a>Annotation');\r\n\r\n    /* </project-logo> */\r\n\r\n    graphicsFactory.update('column', self.column, elementRegistry.getGraphics(self.column.id));\r\n\r\n    eventBus.fire('annotations.added', self.column);\r\n  });\r\n\r\n  eventBus.on('details.hidden', function() {\r\n    if(labelCell) {\r\n      labelCell.rowspan = 2;\r\n      graphicsFactory.update('column', self.column, elementRegistry.getGraphics(self.column.id));\r\n    }\r\n  });\r\n  eventBus.on('details.shown', function() {\r\n    if(labelCell) {\r\n      labelCell.rowspan = 4;\r\n      graphicsFactory.update('column', self.column, elementRegistry.getGraphics(self.column.id));\r\n    }\r\n  });\r\n\r\n  eventBus.on('sheet.destroy', function(event) {\r\n\r\n    eventBus.fire('annotations.destroy', self.column);\r\n\r\n    sheet.removeColumn({\r\n      id: 'annotations'\r\n    });\r\n\r\n    eventBus.fire('annotations.destroyed', self.column);\r\n  });\r\n}\r\n\r\nAnnotations.$inject = [ 'eventBus', 'sheet', 'elementRegistry', 'graphicsFactory', 'hideTechControl' ];\r\n\r\nmodule.exports = Annotations;\r\n\r\nAnnotations.prototype.getColumn = function() {\r\n  return this.column;\r\n};\r\n","'use strict';\r\n\r\nvar domClasses = require(399);\r\n\r\nfunction AnnotationsRenderer(\r\n    eventBus,\r\n    annotations) {\r\n\r\n  eventBus.on('cell.render', function(event) {\r\n    if(event.data.column === annotations.getColumn() && !event.data.row.isFoot) {\r\n      domClasses(event.gfx).add('annotation');\r\n      if(!event.data.row.isHead) {\r\n        // render the description of the rule inside the cell\r\n        event.gfx.childNodes[0].textContent = event.data.row.businessObject.description || '';\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nAnnotationsRenderer.$inject = [\r\n  'eventBus',\r\n  'annotations'\r\n];\r\n\r\nmodule.exports = AnnotationsRenderer;\r\n","module.exports = {\r\n  __init__: [ 'annotations', 'annotationsRenderer'],\r\n  __depends__: [\r\n  ],\r\n  annotations: [ 'type', require(6) ],\r\n  annotationsRenderer: [ 'type', require(7) ]\r\n};\r\n","'use strict';\r\n\r\nvar getEntriesType = require(47).getEntriesType;\r\n\r\nfunction ContextMenu(popupMenu, eventBus, modeling, elementRegistry, editorActions, selection) {\r\n\r\n  this._popupMenu = popupMenu;\r\n  this._eventBus = eventBus;\r\n  this._modeling = modeling;\r\n  this._elementRegistry = elementRegistry;\r\n  this._editorActions = editorActions;\r\n\r\n  var self = this;\r\n\r\n  eventBus.on('element.contextmenu', function(evt) {\r\n    // Do not open context menu on table footer\r\n    if(!evt.element.row.isFoot) {\r\n      evt.preventDefault();\r\n      evt.gfx.firstChild.focus();\r\n      self.open(evt.originalEvent.pageX, evt.originalEvent.pageY, evt.element);\r\n    }\r\n  });\r\n\r\n  var preventFunction = function(evt) {\r\n    evt.preventDefault();\r\n  };\r\n  eventBus.on('popupmenu.open', function(evt) {\r\n    evt.container.addEventListener('contextmenu', preventFunction);\r\n  });\r\n\r\n  eventBus.on('popupmenu.close', function(evt) {\r\n    evt.container.removeEventListener('contextmenu', preventFunction);\r\n  });\r\n\r\n\r\n  document.addEventListener('click', function(evt) {\r\n    self.close();\r\n  });\r\n\r\n}\r\n\r\nContextMenu.$inject = [ 'popupMenu', 'eventBus', 'modeling', 'elementRegistry', 'editorActions' ];\r\n\r\nmodule.exports = ContextMenu;\r\n\r\nContextMenu.prototype.getRuleActions = function(context) {\r\n  return { id: 'rule', content: {label: 'Rule', linkClass: 'disabled', entries: [\r\n          {id: 'ruleAdd', action: this.ruleAddAction.bind(this),\r\n           content: {label: 'add', icon: 'plus', entries: [\r\n            {id: 'ruleAddAbove', content: {label: '', icon: 'above'},\r\n            action: this.ruleAddAction.bind(this, 'above')},\r\n            {id: 'ruleAddBelow', content: {label: '', icon: 'below'},\r\n            action: this.ruleAddAction.bind(this, 'below')}\r\n          ]}},\r\n          {id: 'ruleRemove', content: {label: 'remove', icon: 'minus'},\r\n            action: this.ruleRemoveAction.bind(this)},\r\n          {id: 'ruleClear', content: {label: 'clear', icon: 'clear'},\r\n            action: this.ruleClearAction.bind(this)}\r\n        ]}};\r\n};\r\n\r\nvar isLastColumn = function(column) {\r\n  var type = column.businessObject.$type;\r\n\r\n  // return false when the previous or the next column is of the same type\r\n  return !(column.next.businessObject     && column.next.businessObject.$type === type ||\r\n           column.previous.businessObject && column.previous.businessObject.$type === type);\r\n},\r\nnoop = function(){};\r\n\r\n\r\nContextMenu.prototype.getInputActions = function(context) {\r\n  var lastColumn = isLastColumn(context.column);\r\n  return { id: 'clause', content: {label: 'Input', linkClass: 'disabled', icon:'input', entries: [\r\n          {id: 'clauseAdd', action: this.clauseAddInput.bind(this),\r\n           content: {label: 'add', icon:'plus', entries: [\r\n            {id: 'clauseAddLeft', content: {label: '', icon: 'left'},\r\n            action: this.clauseAddAction.bind(this, 'left')},\r\n            {id: 'clauseAddRight', content: {label: '', icon: 'right'},\r\n            action: this.clauseAddAction.bind(this, 'right')}\r\n          ]}},\r\n          {id: 'clauseRemove', content: {label: 'remove', icon: 'minus', linkClass: lastColumn ? 'disabled' : ''},\r\n            action: lastColumn ? noop : this.clauseRemoveAction.bind(this)}\r\n        ]}};\r\n};\r\n\r\nContextMenu.prototype.getOutputActions = function(context) {\r\n  var lastColumn = isLastColumn(context.column);\r\n  return { id: 'clause', content: {label: 'Output', linkClass: 'disabled', icon:'output', entries: [\r\n          {id: 'clauseAdd', action: this.clauseAddOutput.bind(this),\r\n           content: {label: 'add', icon:'plus', entries: [\r\n            {id: 'clauseAddLeft', content: {label: '', icon: 'left'},\r\n            action: this.clauseAddAction.bind(this, 'left')},\r\n            {id: 'clauseAddRight', content: {label: '', icon: 'right'},\r\n            action: this.clauseAddAction.bind(this, 'right')}\r\n          ]}},\r\n          {id: 'clauseRemove', content: {label: 'remove', icon: 'minus', linkClass: lastColumn ? 'disabled' : ''},\r\n            action: lastColumn ? noop : this.clauseRemoveAction.bind(this)}\r\n        ]}};\r\n};\r\n\r\nContextMenu.prototype.getActions = function(context) {\r\n  var activeEntriesType = getEntriesType(context),\r\n      out = [];\r\n\r\n  if (activeEntriesType.rule) {\r\n    out.push(this.getRuleActions(context));\r\n  }\r\n\r\n  if (activeEntriesType.input) {\r\n    out.push(this.getInputActions(context));\r\n  }\r\n\r\n  if (activeEntriesType.output) {\r\n    out.push(this.getOutputActions(context));\r\n  }\r\n  return out;\r\n};\r\n\r\nContextMenu.prototype.open = function(x, y, context) {\r\n  var actions = this.getActions(context);\r\n\r\n  if(actions.length > 0) {\r\n    this._popupMenu.open({\r\n      position: { x: x, y: y },\r\n      entries: actions\r\n    });\r\n  }\r\n};\r\n\r\nContextMenu.prototype.close = function() {\r\n  this._popupMenu.close();\r\n};\r\n\r\nContextMenu.prototype.clauseRemoveAction = function() {\r\n  this._editorActions.trigger('clauseRemove');\r\n\r\n  this.close();\r\n};\r\n\r\nContextMenu.prototype.clauseAddInput = function() {\r\n  this._editorActions.trigger('clauseAdd', 'input');\r\n\r\n  this.close();\r\n};\r\n\r\nContextMenu.prototype.clauseAddOutput = function() {\r\n  this._editorActions.trigger('clauseAdd', 'output');\r\n\r\n  this.close();\r\n};\r\n\r\nContextMenu.prototype.clauseAddAction = function(position) {\r\n  var editorActions = this._editorActions;\r\n\r\n  if (position === 'left') {\r\n    editorActions.trigger('clauseAddLeft');\r\n\r\n  } else if (position === 'right') {\r\n    editorActions.trigger('clauseAddRight');\r\n  }\r\n\r\n  this.close();\r\n};\r\n\r\nContextMenu.prototype.ruleRemoveAction = function() {\r\n  this._editorActions.trigger('ruleRemove');\r\n\r\n  this.close();\r\n};\r\n\r\nContextMenu.prototype.ruleAddAction = function(position) {\r\n  var editorActions = this._editorActions;\r\n\r\n  if (position === 'above') {\r\n    editorActions.trigger('ruleAddAbove');\r\n\r\n  } else if (position === 'below'){\r\n    editorActions.trigger('ruleAddBelow');\r\n  } else {\r\n    editorActions.trigger('ruleAdd');\r\n  }\r\n\r\n  this.close();\r\n};\r\n\r\nContextMenu.prototype.ruleClearAction = function() {\r\n  this._editorActions.trigger('ruleClear');\r\n\r\n  this.close();\r\n};\r\n","module.exports = {\r\n  __init__: [ 'contextMenu' ],\r\n  __depends__: [\r\n    require(449)\r\n  ],\r\n  contextMenu: [ 'type', require(9) ]\r\n};\r\n","'use strict';\r\n\r\nvar ids = new (require(50))('table');\r\n\r\nfunction DmnEditorActions(modeling, elementRegistry, selection, editorActions) {\r\n\r\n  var actions = {\r\n    ruleAdd: function() {\r\n      var newRow = {\r\n        id: ids.next()\r\n      };\r\n\r\n      modeling.createRow(newRow);\r\n    },\r\n    ruleAddAbove: function() {\r\n      var selected = selection._selectedElement,\r\n          newRow;\r\n\r\n      if (selected) {\r\n        newRow = {\r\n          id: ids.next()\r\n        };\r\n        newRow.next = selected.row;\r\n        modeling.createRow(newRow);\r\n      }\r\n    },\r\n    ruleAddBelow: function() {\r\n      var selected = selection._selectedElement,\r\n          newRow;\r\n\r\n      if (selected) {\r\n        newRow = {\r\n          id: ids.next()\r\n        };\r\n        newRow.previous = selected.row;\r\n        modeling.createRow(newRow);\r\n      }\r\n\r\n    },\r\n    ruleClear: function() {\r\n      var selected = selection._selectedElement;\r\n\r\n      if (selected) {\r\n        modeling.clearRow(selected.row);\r\n      }\r\n    },\r\n    ruleRemove: function() {\r\n      var selected = selection._selectedElement;\r\n\r\n      if (selected) {\r\n        modeling.deleteRow(selected.row);\r\n      }\r\n    },\r\n    clauseAdd: function(clauseType) {\r\n      var newColumn,\r\n          type,\r\n          col;\r\n\r\n      var clauses = {\r\n        input: 'dmn:InputClause',\r\n        output: 'dmn:OutputClause'\r\n      };\r\n\r\n      var columns = elementRegistry.filter(function(element) {\r\n        if (element.column && element.column.businessObject &&\r\n            element.column.businessObject.$type === clauses[clauseType]) {\r\n          return true;\r\n        }\r\n        return false;\r\n      });\r\n\r\n      col = columns[0].column;\r\n      type = col.businessObject.$type;\r\n\r\n      while (col.next && col.next.businessObject && col.next.businessObject.$type === type) {\r\n        col = col.next;\r\n      }\r\n\r\n      newColumn = {\r\n        id: ids.next(),\r\n        previous: col,\r\n        name: '',\r\n        isInput: clauses[clauseType] === 'dmn:InputClause'\r\n      };\r\n\r\n      modeling.createColumn(newColumn);\r\n    },\r\n    clauseAddLeft: function() {\r\n      var selected = selection._selectedElement,\r\n          isInput, newColumn;\r\n\r\n      if (selected) {\r\n        isInput = selected.column.businessObject.$type === 'dmn:InputClause';\r\n\r\n        newColumn = {\r\n          id: ids.next(),\r\n          previous: selected.column.previous,\r\n          name: '',\r\n          isInput: isInput\r\n        };\r\n\r\n        modeling.createColumn(newColumn);\r\n      }\r\n    },\r\n    clauseAddRight: function() {\r\n      var selected = selection._selectedElement,\r\n          isInput, newColumn;\r\n\r\n      if (selected) {\r\n        isInput = selected.column.businessObject.$type === 'dmn:InputClause';\r\n\r\n        newColumn = {\r\n          id: ids.next(),\r\n          previous: selected.column,\r\n          name: '',\r\n          isInput: isInput\r\n        };\r\n\r\n        modeling.createColumn(newColumn);\r\n      }\r\n    },\r\n    clauseRemove: function() {\r\n      var selected = selection._selectedElement;\r\n\r\n      if (selected) {\r\n        modeling.deleteColumn(selected.column);\r\n      }\r\n    }\r\n  };\r\n\r\n  editorActions.register(actions);\r\n}\r\n\r\n\r\nDmnEditorActions.$inject = [ 'modeling', 'elementRegistry', 'selection', 'editorActions' ];\r\n\r\nmodule.exports = DmnEditorActions;\r\n","module.exports = {\r\n  __init__: [ 'dmnEditorActions' ],\r\n  dmnEditorActions: [ 'type', require(11) ]\r\n};\r\n","'use strict';\r\n\r\nfunction DmnFactory(moddle) {\r\n  this._model = moddle;\r\n}\r\n\r\nDmnFactory.$inject = [ 'moddle' ];\r\n\r\n\r\nDmnFactory.prototype._needsId = function(element) {\r\n  return element.$instanceOf('dmn:DMNElement');\r\n};\r\n\r\nDmnFactory.prototype._ensureId = function(element) {\r\n\r\n  // generate semantic ids for elements\r\n  // bpmn:SequenceFlow -> SequenceFlow_ID\r\n  var prefix = (element.$type || '').replace(/^[^:]*:/g, '') + '_';\r\n\r\n  if (!element.id && this._needsId(element)) {\r\n    element.id = this._model.ids.nextPrefixed(prefix, element);\r\n  }\r\n};\r\n\r\n\r\nDmnFactory.prototype.create = function(type, attrs) {\r\n  var element = this._model.create(type, attrs || {});\r\n\r\n  this._ensureId(element);\r\n\r\n  return element;\r\n};\r\n\r\nDmnFactory.prototype.createRule = function(id) {\r\n  var attrs = {id: id};\r\n  attrs.inputEntry = attrs.inputEntry || [];\r\n  attrs.outputEntry = attrs.outputEntry || [];\r\n\r\n  var element = this.create('dmn:DecisionRule', attrs);\r\n\r\n  return element;\r\n};\r\n\r\nDmnFactory.prototype.createInputEntry = function(text, clause, rule) {\r\n  var element = this.create('dmn:UnaryTests', {\r\n    text: text\r\n  });\r\n\r\n  var clauseIdx = clause.$parent.input.indexOf(clause);\r\n\r\n  element.$parent = rule;\r\n  rule.inputEntry.splice(clauseIdx, 0, element);\r\n\r\n  return element;\r\n};\r\n\r\nDmnFactory.prototype.createInputClause = function(name) {\r\n  var element = this.create('dmn:InputClause', {\r\n    label: name\r\n  });\r\n  element.inputExpression = this.create('dmn:LiteralExpression', {});\r\n\r\n  element.inputExpression.typeRef = 'string';\r\n\r\n  return element;\r\n};\r\n\r\nDmnFactory.prototype.createOutputClause = function(name) {\r\n  var element = this.create('dmn:OutputClause', {\r\n    label: name\r\n  });\r\n\r\n  element.typeRef = 'string';\r\n\r\n  return element;\r\n};\r\n\r\nDmnFactory.prototype.createOutputEntry = function(text, clause, rule) {\r\n  var element = this.create('dmn:LiteralExpression', {\r\n    text: text\r\n  });\r\n\r\n  var clauseIdx = clause.$parent.output.indexOf(clause);\r\n\r\n  element.$parent = rule;\r\n  rule.outputEntry.splice(clauseIdx, 0, element);\r\n\r\n  return element;\r\n};\r\n\r\nmodule.exports = DmnFactory;\r\n","'use strict';\r\n\r\nvar inherits = require(342);\r\n\r\nvar BaseElementFactory = require(409);\r\n\r\n\r\n/**\r\n * A dmn-aware factory for table-js elements\r\n */\r\nfunction ElementFactory(moddle, dmnFactory) {\r\n  BaseElementFactory.call(this);\r\n\r\n  this._moddle = moddle;\r\n  this._dmnFactory = dmnFactory;\r\n}\r\n\r\ninherits(ElementFactory, BaseElementFactory);\r\n\r\n\r\nElementFactory.$inject = [ 'moddle', 'dmnFactory' ];\r\n\r\nmodule.exports = ElementFactory;\r\n\r\nElementFactory.prototype.baseCreate = BaseElementFactory.prototype.create;\r\n\r\nElementFactory.prototype.create = function(elementType, attrs) {\r\n  attrs = attrs || {};\r\n\r\n  var businessObject = attrs.businessObject;\r\n  if(elementType === 'row') {\r\n    attrs.type = 'dmn:DecisionRule';\r\n  } else if(elementType === 'column' && !attrs.type) {\r\n    attrs.type = attrs.isInput ? 'dmn:InputClause' : 'dmn:OutputClause';\r\n  }\r\n\r\n  if (!businessObject) {\r\n    if (!attrs.type) {\r\n      throw new Error('no type specified');\r\n    }\r\n    else if(attrs.type === 'dmn:DecisionRule') {\r\n      businessObject = this._dmnFactory.createRule(attrs.id);\r\n    } else if(elementType === 'column') {\r\n      if(attrs.isInput) {\r\n        businessObject = this._dmnFactory.createInputClause(attrs.name);\r\n      } else {\r\n        businessObject = this._dmnFactory.createOutputClause(attrs.name);\r\n      }\r\n    } else {\r\n      businessObject = this._dmnFactory.create(attrs.type);\r\n    }\r\n  }\r\n\r\n  attrs.businessObject = businessObject;\r\n  attrs.id = businessObject.id;\r\n\r\n  return this.baseCreate(elementType, attrs);\r\n\r\n};\r\n","module.exports = {\r\n  __init__: [ ],\r\n  __depends__: [ ],\r\n  dmnFactory: [ 'type', require(13) ],\r\n  elementFactory: [ 'type', require(14) ]\r\n};\r\n","'use strict';\r\n\r\nvar domClasses = require(399);\r\n/**\r\n *  The controls module adds a container to the top-right corner of the table which holds\r\n *  some control elements\r\n */\r\nfunction HideTechControl(eventBus, sheet, config) {\r\n\r\n  this._sheet = sheet;\r\n  this._eventBus = eventBus;\r\n  this.hidden = false;\r\n\r\n  var self = this;\r\n\r\n  eventBus.on('controls.init', function(evt) {\r\n\r\n    eventBus.on('controls.added', function(evt) {\r\n      self._node = evt.node;\r\n      if(config.hideDetails) {\r\n        self.hide();\r\n      }\r\n    });\r\n\r\n    evt.controls.addControl('Hide Details', function() {\r\n      if(!domClasses(sheet.getContainer().parentNode).contains('hide-mappings')) {\r\n        self.hide();\r\n      } else {\r\n        self.show();\r\n      }\r\n    });\r\n\r\n  });\r\n\r\n}\r\n\r\nHideTechControl.$inject = [ 'eventBus', 'sheet', 'config' ];\r\n\r\nmodule.exports = HideTechControl;\r\n\r\nHideTechControl.prototype.hide = function() {\r\n  if(!this._node) return;\r\n  domClasses(this._sheet.getContainer().parentNode).add('hide-mappings');\r\n  this._node.textContent = 'Show details';\r\n  this.hidden = true;\r\n  this._eventBus.fire('details.hidden');\r\n};\r\n\r\nHideTechControl.prototype.show = function() {\r\n  if(!this._node) return;\r\n  domClasses(this._sheet.getContainer().parentNode).remove('hide-mappings');\r\n  this._node.textContent = 'Hide details';\r\n  this.hidden = false;\r\n  this._eventBus.fire('details.shown');\r\n};\r\n\r\nHideTechControl.prototype.isHidden = function() {\r\n  return this.hidden;\r\n};\r\n","module.exports = {\r\n  __init__: [ 'hideTechControl' ],\r\n  __depends__: [],\r\n  hideTechControl: [ 'type', require(16) ]\r\n};\r\n","'use strict';\r\n\r\nvar domify = require(400),\r\n    ComboBox = require(421),\r\n    domClasses = require(399);\r\n\r\n/**\r\n * Adds behavior to display and set the hit policy of a table\r\n *\r\n * @param {EventBus} eventBus\r\n */\r\nfunction HitPolicy(eventBus, utilityColumn, ioLabel, graphicsFactory, elementRegistry, rules, hideTechControl) {\r\n\r\n  this.table = null;\r\n  this.hitPolicyCell = null;\r\n\r\n  var self = this;\r\n  eventBus.on('dmnElement.added', function(event) {\r\n    if(event.element && event.element.businessObject.$instanceOf('dmn:DecisionTable')) {\r\n      self.table = event.element.businessObject;\r\n    }\r\n  });\r\n\r\n  eventBus.on('cell.added', function(event) {\r\n\r\n    if(event.element.column === utilityColumn.getColumn() &&\r\n       event.element.row.id==='ioLabel') {\r\n        self.hitPolicyCell = event.element;\r\n\r\n        self.hitPolicyCell.rowspan = hideTechControl.isHidden() ? 2 : 4;\r\n\r\n        var template = domify('<div>');\r\n\r\n        // initializing the comboBox\r\n        var comboBox = new ComboBox({\r\n          label: 'Hit Policy',\r\n          classNames: ['dmn-combobox', 'hitpolicy'],\r\n          options: ['UNIQUE', 'FIRST', 'PRIORITY', 'ANY', 'COLLECT', 'RULE ORDER', 'OUTPUT ORDER'],\r\n          dropdownClassNames: ['dmn-combobox-suggestions']\r\n        });\r\n\r\n        template.insertBefore(\r\n          comboBox.getNode(),\r\n          template.firstChild\r\n        );\r\n\r\n        var operatorComboBox = new ComboBox({\r\n          label: 'Collect Operator',\r\n          classNames: ['dmn-combobox', 'operator'],\r\n          options: ['LIST', 'SUM', 'MIN', 'MAX', 'COUNT'],\r\n          dropdownClassNames: ['dmn-combobox-suggestions']\r\n        });\r\n\r\n        template.appendChild(operatorComboBox.getNode());\r\n\r\n        // display and hide the operatorComboBox based on the selected hit policy\r\n        comboBox.addEventListener('valueChanged', function(evt) {\r\n          if(evt.newValue.toLowerCase() === 'collect') {\r\n            operatorComboBox.getNode().style.display = 'table';\r\n          } else {\r\n            operatorComboBox.getNode().style.display = 'none';\r\n          }\r\n        });\r\n\r\n        event.element.complex = {\r\n          className: 'dmn-hitpolicy-setter',\r\n          template: template,\r\n          element: event.element,\r\n          comboBox: comboBox,\r\n          operatorComboBox: operatorComboBox,\r\n          type: 'hitPolicy',\r\n          offset: {\r\n            x: 42,\r\n            y: -15\r\n          }\r\n        };\r\n    }\r\n\r\n  });\r\n\r\n  // whenever an type cell is opened, we have to position the template, apply the model value and\r\n  // potentially disable inputs\r\n  eventBus.on('complexCell.open', function(evt) {\r\n    if(evt.config.type === 'hitPolicy') {\r\n      // feed the values to the template and combobox\r\n      evt.config.comboBox.setValue(self.getHitPolicy());\r\n      evt.config.operatorComboBox.setValue(self.getAggregation());\r\n\r\n      var template = evt.config.template;\r\n\r\n      // focus the combobox input field\r\n      template.querySelector('.dmn-combobox > input').focus();\r\n\r\n      // disable all input fields if editing is not allowed\r\n      if(!rules.allowed('hitPolicy.edit')) {\r\n        var inputs = template.querySelectorAll('input');\r\n        for(var i = 0; i < inputs.length; i++) {\r\n          inputs[i].setAttribute('disabled', 'true');\r\n        }\r\n        evt.config.comboBox.disable();\r\n\r\n        // also set a disabled css class on the template\r\n        domClasses(template.parentNode).add('read-only');\r\n      }\r\n    }\r\n  });\r\n\r\n\r\n  // whenever a datatype cell is closed, apply the changes to the underlying model\r\n  eventBus.on('complexCell.close', function(evt) {\r\n    if(evt.config.type === 'hitPolicy') {\r\n      eventBus.fire('hitPolicy.edit', {\r\n        table: self.table,\r\n        hitPolicy: evt.config.comboBox.getValue(),\r\n        aggregation: evt.config.comboBox.getValue() === 'COLLECT' ? evt.config.operatorComboBox.getValue() : undefined,\r\n        cell: self.getCell()\r\n      });\r\n\r\n      graphicsFactory.update('cell', self.getCell(), elementRegistry.getGraphics(self.getCell()));\r\n    }\r\n  });\r\n\r\n  eventBus.on('details.hidden', function() {\r\n    if(self.hitPolicyCell) {\r\n      self.hitPolicyCell.rowspan = 2;\r\n      graphicsFactory.update('cell', self.hitPolicyCell, elementRegistry.getGraphics(self.hitPolicyCell.id));\r\n    }\r\n  });\r\n  eventBus.on('details.shown', function() {\r\n    if(self.hitPolicyCell) {\r\n      self.hitPolicyCell.rowspan = 4;\r\n      graphicsFactory.update('cell', self.hitPolicyCell, elementRegistry.getGraphics(self.hitPolicyCell.id));\r\n    }\r\n  });\r\n\r\n}\r\n\r\nHitPolicy.$inject = [\r\n  'eventBus', 'utilityColumn', 'ioLabel',\r\n  'graphicsFactory', 'elementRegistry', 'rules',\r\n  'hideTechControl'\r\n];\r\n\r\nHitPolicy.prototype.getCell = function() {\r\n  return this.hitPolicyCell;\r\n};\r\n\r\nHitPolicy.prototype.getHitPolicy = function() {\r\n  return (this.table && this.table.hitPolicy) || '';\r\n};\r\n\r\nHitPolicy.prototype.getAggregation = function() {\r\n  return (this.table && this.table.aggregation) || 'LIST';\r\n};\r\n\r\nmodule.exports = HitPolicy;\r\n\r\n","'use strict';\r\n\r\nfunction convertOperators(operator) {\r\n  switch(operator) {\r\n    case 'LIST': return '';\r\n    case 'SUM': return '+';\r\n    case 'MIN': return '<';\r\n    case 'MAX': return '>';\r\n    case 'COUNT': return '#';\r\n  }\r\n}\r\n\r\nfunction HitPolicyRenderer(\r\n    eventBus,\r\n    hitPolicy) {\r\n\r\n  eventBus.on('cell.render', function(event) {\r\n    if (event.data === hitPolicy.getCell()) {\r\n      var policy = hitPolicy.getHitPolicy(),\r\n          aggregation = hitPolicy.getAggregation();\r\n\r\n      event.gfx.childNodes[0].textContent = policy.charAt(0) + convertOperators(aggregation);\r\n    }\r\n  });\r\n\r\n}\r\n\r\nHitPolicyRenderer.$inject = [\r\n  'eventBus',\r\n  'hitPolicy'\r\n];\r\n\r\nmodule.exports = HitPolicyRenderer;\r\n","module.exports = {\r\n  __init__: [ 'hitPolicy', 'hitPolicyRenderer' ],\r\n  __depends__: [\r\n    require(457),\r\n    require(24),\r\n  ],\r\n  hitPolicy: [ 'type', require(18) ],\r\n  hitPolicyRenderer: [ 'type', require(19) ],\r\n};\r\n","'use strict';\r\n\r\nvar domify = require(400),\r\n    forEach = require(344);\r\n\r\n// document wide unique overlay ids\r\nvar ids = new (require(50))('clause');\r\n\r\n/**\r\n * Adds a control to the table to add more columns\r\n *\r\n * @param {EventBus} eventBus\r\n */\r\nfunction IoLabel(eventBus, sheet, elementRegistry, graphicsFactory, rules) {\r\n\r\n  this.row = null;\r\n\r\n  var self = this;\r\n  eventBus.on('sheet.init', function(event) {\r\n\r\n    eventBus.fire('ioLabel.add', event);\r\n\r\n    self.row = sheet.addRow({\r\n      id: 'ioLabel',\r\n      isHead: true,\r\n      isLabelRow: true,\r\n      useTH: true\r\n    });\r\n\r\n    eventBus.fire('ioLabel.added', self.row);\r\n  });\r\n\r\n  eventBus.on('sheet.destroy', function(event) {\r\n\r\n    eventBus.fire('ioLabel.destroy', self.row);\r\n\r\n    sheet.removeRow({\r\n      id: 'ioLabel'\r\n    });\r\n\r\n    eventBus.fire('ioLabel.destroyed', self.row);\r\n  });\r\n\r\n  function updateColspans(evt) {\r\n    if(evt._type === 'column') {\r\n      var cells = elementRegistry.filter(function(element) {\r\n        return element._type === 'cell' && element.row === self.row;\r\n      });\r\n\r\n      var inputs = cells.filter(function(cell) {\r\n        return cell.column.businessObject && cell.column.businessObject.inputExpression;\r\n      });\r\n\r\n      forEach(inputs, function(input) {\r\n        if(!input.column.previous.businessObject) {\r\n          // first cell of the inputs array has the colspan attribute set\r\n          input.colspan = inputs.length;\r\n\r\n          var node;\r\n          if(rules.allowed('column.create')) {\r\n            node = domify('Input <a class=\"dmn-icon-plus\"></a>');\r\n            node.querySelector('a').addEventListener('mouseup', function() {\r\n              var col = input.column;\r\n              while(col.next && col.next.businessObject.$type === 'dmn:InputClause') {\r\n                col = col.next;\r\n              }\r\n\r\n              var newColumn = {\r\n                id: ids.next(),\r\n                previous: col,\r\n                name: '',\r\n                isInput: true\r\n              };\r\n\r\n              eventBus.fire('ioLabel.createColumn', {\r\n                newColumn: newColumn\r\n              });\r\n            });\r\n          } else {\r\n            node = domify('Input');\r\n          }\r\n\r\n          input.content = node;\r\n        }\r\n      });\r\n\r\n      var outputs = cells.filter(function(cell) {\r\n        return cell.column.businessObject && cell.column.businessObject.$instanceOf('dmn:OutputClause');\r\n      });\r\n\r\n      forEach(outputs, function(output) {\r\n        if(output.column.previous.businessObject.inputExpression) {\r\n          // first cell of the outputs array has the colspan attribute set\r\n          output.colspan = outputs.length;\r\n\r\n          var node;\r\n          if(rules.allowed('column.create')) {\r\n            node = domify('Output <a class=\"dmn-icon-plus\"></a>');\r\n            node.querySelector('a').addEventListener('mouseup', function() {\r\n              var col = output.column;\r\n              while(col.next && col.next.businessObject && col.next.businessObject.$type === 'dmn:OutputClause') {\r\n                col = col.next;\r\n              }\r\n\r\n              var newColumn = {\r\n                id: ids.next(),\r\n                previous: col,\r\n                name: '',\r\n                isInput: false\r\n              };\r\n\r\n              eventBus.fire('ioLabel.createColumn', {\r\n                newColumn: newColumn\r\n              });\r\n            });\r\n          } else {\r\n            node = domify('Output');\r\n          }\r\n\r\n          output.content = node;\r\n        }\r\n      });\r\n\r\n      if(cells.length > 0) {\r\n        graphicsFactory.update('row', cells[0].row, elementRegistry.getGraphics(cells[0].row.id));\r\n      }\r\n    }\r\n  }\r\n  eventBus.on(['cells.added', 'cells.removed'], updateColspans);\r\n}\r\n\r\nIoLabel.$inject = [ 'eventBus', 'sheet', 'elementRegistry', 'graphicsFactory', 'rules' ];\r\n\r\nmodule.exports = IoLabel;\r\n\r\nIoLabel.prototype.getRow = function() {\r\n  return this.row;\r\n};\r\n","'use strict';\r\n\r\nfunction IoLabelRenderer(\r\n    eventBus,\r\n    ioLabel) {\r\n\r\n  eventBus.on('cell.render', function(event) {\r\n    if (event.data.row === ioLabel.getRow() &&\r\n        event.data.content &&\r\n        !event.gfx.childNodes[0].firstChild) {\r\n      event.gfx.childNodes[0].appendChild(event.data.content);\r\n    }\r\n  });\r\n\r\n}\r\n\r\nIoLabelRenderer.$inject = [\r\n  'eventBus',\r\n  'ioLabel'\r\n];\r\n\r\nmodule.exports = IoLabelRenderer;\r\n","'use strict';\r\n\r\nvar inherits = require(342);\r\n\r\nvar RuleProvider = require(49);\r\n\r\n/**\r\n * LineNumber specific modeling rule\r\n */\r\nfunction IoLabelRules(eventBus, ioLabel) {\r\n  RuleProvider.call(this, eventBus);\r\n\r\n  this._ioLabel = ioLabel;\r\n}\r\n\r\ninherits(IoLabelRules, RuleProvider);\r\n\r\nIoLabelRules.$inject = [ 'eventBus', 'ioLabel' ];\r\n\r\nmodule.exports = IoLabelRules;\r\n\r\nIoLabelRules.prototype.init = function() {\r\n  var self = this;\r\n  this.addRule('cell.edit', function(context) {\r\n    if(context.row === self._ioLabel.row) {\r\n      return false;\r\n    }\r\n  });\r\n\r\n};\r\n","module.exports = {\r\n  __init__: [ 'ioLabel', 'ioLabelRules', 'ioLabelRenderer' ],\r\n  __depends__: [],\r\n  ioLabel: [ 'type', require(21) ],\r\n  ioLabelRules: [ 'type', require(23) ],\r\n  ioLabelRenderer: [ 'type', require(22) ]\r\n};\r\n","'use strict';\r\n\r\n\r\n\r\nvar domify = require(400),\r\n    domClasses = require(399),\r\n    assign = require(394),\r\n    ComboBox = require(421);\r\n\r\n/**\r\n * Adds a control to the table to define the input- and output-mappings for clauses\r\n */\r\nfunction MappingsRow(eventBus, sheet, elementRegistry, graphicsFactory, complexCell, rules) {\r\n\r\n  this.row = null;\r\n\r\n  var self = this;\r\n\r\n  // add row when the sheet is initialized\r\n  eventBus.on('sheet.init', function(event) {\r\n\r\n    eventBus.fire('mappingsRow.add', event);\r\n\r\n    self.row = sheet.addRow({\r\n      id: 'mappingsRow',\r\n      isHead: true,\r\n      isMappingsRow: true\r\n    });\r\n\r\n    eventBus.fire('mappingsRow.added', self.row);\r\n\r\n    graphicsFactory.update('row', self.row, elementRegistry.getGraphics(self.row.id));\r\n  });\r\n\r\n  // remove the row when the sheet is destroyed\r\n  eventBus.on('sheet.destroy', function(event) {\r\n\r\n    eventBus.fire('mappingsRow.destroy', self.row);\r\n\r\n    sheet.removeRow({\r\n      id: 'mappingsRow'\r\n    });\r\n\r\n    eventBus.fire('mappingsRow.destroyed', self.row);\r\n  });\r\n\r\n  /**\r\n   * Helper function to position and resize the template. This is needed for the switch between\r\n   * the large format script editor and the small expression editor\r\n   *\r\n   * @param {DOMNode}   node        template root node\r\n   * @param {TableCell} element     cell for which the template is opened\r\n   * @param {boolean}   large       indicating whether to switch to large mode\r\n   */\r\n  var positionTemplate = function(node, element, large) {\r\n    var table = sheet.getRootElement(),\r\n        gfx = elementRegistry.getGraphics(element),\r\n        e, offset;\r\n\r\n    if(large) {\r\n      e = table;\r\n      offset = {x:0,y:0};\r\n\r\n      while (e)\r\n      {\r\n          offset.x += e.offsetLeft;\r\n          offset.y += e.offsetTop;\r\n          e = e.offsetParent;\r\n      }\r\n\r\n      // now also traverse the complete parent chain to determine the full scroll offset\r\n      e = gfx;\r\n      while (e && typeof e.scrollTop === 'number' && typeof e.scrollLeft === 'number')\r\n      {\r\n          offset.x -= e.scrollLeft;\r\n          offset.y -= e.scrollTop;\r\n          e = e.parentNode;\r\n      }\r\n\r\n      assign(node.style, {\r\n        top: offset.y + 'px',\r\n        left: offset.x + 'px',\r\n        width: table.clientWidth + 'px'\r\n      });\r\n\r\n    } else {\r\n\r\n      // traverse the offset parent chain to find the offset sum\r\n      e = gfx;\r\n      offset = {x:0,y:0};\r\n\r\n      while (e)\r\n      {\r\n          offset.x += e.offsetLeft;\r\n          offset.y += e.offsetTop;\r\n          e = e.offsetParent;\r\n      }\r\n\r\n      // now also traverse the complete parent chain to determine the full scroll offset\r\n      e = gfx;\r\n      while (e && typeof e.scrollTop === 'number' && typeof e.scrollLeft === 'number')\r\n      {\r\n          offset.x -= e.scrollLeft;\r\n          offset.y -= e.scrollTop;\r\n          e = e.parentNode;\r\n      }\r\n\r\n      assign(node.style, {\r\n        left: (offset.x + 2) + 'px',\r\n        top: (offset.y - 72)  + 'px',\r\n        width: 'auto',\r\n        height: 'auto'\r\n      });\r\n    }\r\n  };\r\n\r\n  // when an input cell on the mappings row is added, setup the complex cell\r\n  eventBus.on('cell.added', function(evt) {\r\n    if(evt.element.row.id === 'mappingsRow' &&\r\n       evt.element.column.businessObject &&\r\n       evt.element.column.businessObject.inputExpression) {\r\n\r\n      // cell content is the input expression of the clause\r\n      evt.element.content = evt.element.column.businessObject.inputExpression;\r\n\r\n      var template = domify(\"<div>/r/n  <div class=/\"links/\">/r/n    <div class=/\"toggle-type/\">/r/n      <label>Use:</label>/r/n      <a class=/\"expression/\">Expression</a>/r/n      //r/n      <a class=/\"script/\">Script</a>/r/n    </div>/r/n    <a class=/\"dmn-icon-clear/\"></a>/r/n  </div>/r/n  <div class=/\"expression region/\">/r/n    <label>Expression:</label>/r/n    <input placeholder=/\"propertyName/\">/r/n  </div>/r/n  <div class=/\"script region/\">/r/n    <textarea placeholder=/\"return obj.propertyName;/\"></textarea>/r/n  </div>/r/n</div>/r/n\");\r\n\r\n      // initializing the comboBox\r\n      var comboBox = new ComboBox({\r\n        label: 'Language',\r\n        classNames: ['dmn-combobox', 'language'],\r\n        options: ['Javascript', 'Groovy', 'Python', 'Ruby'],\r\n        dropdownClassNames: ['dmn-combobox-suggestions']\r\n      });\r\n\r\n      // When the inputExpression has a defined expressionLanguage, we assume that it is a script\r\n      if(typeof evt.element.content.expressionLanguage !== 'undefined') {\r\n        template.querySelector('textarea').value = evt.element.content.text || '';\r\n        comboBox.setValue(evt.element.content.expressionLanguage);\r\n      } else {\r\n        template.querySelector('input').value = evt.element.content.text || '';\r\n      }\r\n\r\n      // --- setup event listeners ---\r\n\r\n      // click on close button closes the template\r\n      template.querySelector('.dmn-icon-clear').addEventListener('click', function() {\r\n        complexCell.close();\r\n      });\r\n\r\n      // click on Expression link switches to expression mode\r\n      template.querySelector('.expression').addEventListener('click', function() {\r\n        domClasses(template.parentNode).remove('use-script');\r\n        positionTemplate(template.parentNode, evt.element, false);\r\n\r\n        // focus the script expression input field\r\n        template.querySelector('.expression.region > input').focus();\r\n\r\n        evt.element.complex.mappingType = 'expression';\r\n      });\r\n\r\n      // click on Script link switches to script mode\r\n      template.querySelector('.script').addEventListener('click', function() {\r\n        domClasses(template.parentNode).add('use-script');\r\n        positionTemplate(template.parentNode, evt.element, true);\r\n\r\n        // focus the script area\r\n        template.querySelector('.script.region > textarea').focus();\r\n\r\n        evt.element.complex.mappingType = 'script';\r\n      });\r\n\r\n      // pressing enter in the input field closes the dialog\r\n      template.querySelector('.expression.region > input').addEventListener('keydown', function(evt) {\r\n        if(evt.keyCode === 13) {\r\n          complexCell.close();\r\n        }\r\n      });\r\n\r\n      // add comboBox to the template\r\n      template.querySelector('.script.region').insertBefore(\r\n        comboBox.getNode(),\r\n        template.querySelector('textarea')\r\n      );\r\n\r\n      // set the complex property to initialize complex-cell behavior\r\n      evt.element.complex = {\r\n        className: 'dmn-clauseexpression-setter',\r\n        template: template,\r\n        element: evt.element,\r\n        mappingType: typeof evt.element.content.expressionLanguage !== 'undefined' ? 'script' : 'expression',\r\n        comboBox: comboBox,\r\n        type: 'mapping',\r\n        offset: {\r\n          x: 2,\r\n          y: -72\r\n        }\r\n      };\r\n\r\n      graphicsFactory.update('cell', evt.element, elementRegistry.getGraphics(evt.element));\r\n    } else if(evt.element.row.id === 'mappingsRow' &&\r\n              evt.element.column.businessObject) {\r\n\r\n      // setup output mappings as simple cells with inline editing\r\n      evt.element.content = evt.element.column.businessObject;\r\n      graphicsFactory.update('cell', evt.element, elementRegistry.getGraphics(evt.element));\r\n    }\r\n\r\n  });\r\n\r\n  // whenever an input mapping cell is opened, set the required mode (script vs. Expression)\r\n  // and position the template accordingly\r\n  eventBus.on('complexCell.open', function(evt) {\r\n    if(evt.config.type === 'mapping') {\r\n      var template = evt.config.template;\r\n      if(typeof evt.config.element.content.expressionLanguage !== 'undefined') {\r\n        evt.config.mappingType = 'script';\r\n        domClasses(evt.container).add('use-script');\r\n        positionTemplate(evt.container, evt.config.element, true);\r\n        evt.container.querySelector('.script.region > textarea').focus();\r\n      } else {\r\n        evt.config.mappingType = 'expression';\r\n        evt.container.querySelector('.expression.region > input').focus();\r\n      }\r\n      // disable input fields if inputMapping editing is not allowed\r\n      if(!rules.allowed('inputMapping.edit')) {\r\n        template.querySelector('.expression.region > input').setAttribute('disabled', 'true');\r\n        template.querySelector('.script.region > textarea').setAttribute('disabled', 'true');\r\n        evt.config.comboBox.disable();\r\n\r\n        // also set a disabled css class on the template\r\n        domClasses(template.parentNode).add('read-only');\r\n      }\r\n\r\n    }\r\n  });\r\n\r\n  // whenever an input mapping cell is closed, apply the changes to the underlying model\r\n  eventBus.on('complexCell.close', function(evt) {\r\n    if(evt.config.type === 'mapping') {\r\n      var template = evt.config.template;\r\n      if(evt.config.mappingType === 'expression') {\r\n        eventBus.fire('mappingsRow.editInputMapping', {\r\n          element: evt.config.element,\r\n          expression: template.querySelector('input[placeholder=\"propertyName\"]').value\r\n        });\r\n      } else if(evt.config.mappingType === 'script') {\r\n        eventBus.fire('mappingsRow.editInputMapping', {\r\n          element: evt.config.element,\r\n          expression: template.querySelector('textarea').value,\r\n          language: evt.config.comboBox.getValue()\r\n        });\r\n      }\r\n\r\n    }\r\n  });\r\n}\r\n\r\nMappingsRow.$inject = [ 'eventBus', 'sheet', 'elementRegistry', 'graphicsFactory', 'complexCell', 'rules' ];\r\n\r\nmodule.exports = MappingsRow;\r\n\r\nMappingsRow.prototype.getRow = function() {\r\n  return this.row;\r\n};\r\n","'use strict';\r\n\r\nvar domClasses = require(399);\r\n\r\nfunction MappingsRowRenderer(\r\n    eventBus,\r\n    mappingsRow) {\r\n\r\n  // row has class 'mappings'\r\n  eventBus.on('row.render', function(event) {\r\n    if (event.data === mappingsRow.getRow()) {\r\n      domClasses(event.gfx).add('mappings');\r\n    }\r\n  });\r\n\r\n  eventBus.on('cell.render', function(event) {\r\n    // input cell contains the expression or the expression language for scripts\r\n    if (event.data.row === mappingsRow.getRow() && event.data.content &&\r\n        event.data.column.businessObject.inputExpression) {\r\n      if(event.data.content.expressionLanguage) {\r\n        event.gfx.childNodes[0].textContent = event.data.content.expressionLanguage || '';\r\n      } else {\r\n        event.gfx.childNodes[0].textContent = event.data.content.text || '';\r\n      }\r\n    // output cell contains variable name\r\n    } else if (event.data.row === mappingsRow.getRow() && event.data.content) {\r\n      event.gfx.childNodes[0].textContent = event.data.content.name || '';\r\n    }\r\n  });\r\n\r\n}\r\n\r\nMappingsRowRenderer.$inject = [\r\n  'eventBus',\r\n  'mappingsRow'\r\n];\r\n\r\nmodule.exports = MappingsRowRenderer;\r\n","module.exports = {\r\n  __init__: [ 'mappingsRow', 'mappingsRowRenderer' ],\r\n  __depends__: [ require(423) ],\r\n  mappingsRow: [ 'type', require(25) ],\r\n  mappingsRowRenderer: [ 'type', require(26) ]\r\n};\r\n","'use strict';\r\n\r\nvar inherits = require(342),\r\n    forEach = require(345);\r\n\r\nvar CommandInterceptor = require(48);\r\n\r\n\r\n/**\r\n * A handler responsible for updating the underlying DMN\r\n * once changes on the table happen\r\n */\r\nfunction DmnUpdater(eventBus, moddle, elementRegistry, dmnFactory, tableName) {\r\n\r\n  CommandInterceptor.call(this, eventBus);\r\n\r\n\r\n  function setParent(event) {\r\n\r\n    var businessObject = event.context.row.businessObject;\r\n    var parent = businessObject.$parent = tableName.semantic.decisionTable;\r\n\r\n\r\n    // create the rules array if it does not exist\r\n    if(!parent.rule) {\r\n      parent.rule = [];\r\n    }\r\n\r\n    if(event.context.row.next) {\r\n      parent.rule.splice(\r\n        parent.rule.indexOf(event.context.row.next.businessObject), 0,\r\n        businessObject);\r\n    } else {\r\n      parent.rule.push(businessObject);\r\n    }\r\n\r\n    if(!event.context._cells) {\r\n      // we also have to explicitely create the cells for all clauses\r\n      // inputs\r\n      var allInputs = parent.input;\r\n\r\n      var filterFunction = function(businessObject) {\r\n        return function(element) {\r\n          return element._type === 'cell' &&\r\n             element.column.businessObject === businessObject &&\r\n             element.row === event.context.row;\r\n        };\r\n      };\r\n\r\n      for(var i = 0; i < allInputs.length; i++) {\r\n        var input = allInputs[i];\r\n\r\n        var inputCellBO = dmnFactory.createInputEntry('', input, businessObject);\r\n\r\n        var inputCell = elementRegistry.filter(filterFunction(input))[0];\r\n        inputCell.content = inputCellBO;\r\n      }\r\n\r\n      // outputs\r\n      var allOutputs = parent.output;\r\n      for(i = 0; i < allOutputs.length; i++) {\r\n        var output = allOutputs[i];\r\n\r\n        var outputCellBO = dmnFactory.createOutputEntry('', output, businessObject);\r\n\r\n        var outputCell = elementRegistry.filter(filterFunction(output))[0];\r\n        outputCell.content = outputCellBO;\r\n      }\r\n    }\r\n  }\r\n\r\n  function setColumnParent(event) {\r\n\r\n    var parent = event.context.column.businessObject.$parent = tableName.semantic.decisionTable;\r\n\r\n    var column = event.context.column;\r\n    var businessObject = column.businessObject;\r\n    var nextColumn = event.context.column.next;\r\n\r\n    var type = businessObject.$type === 'dmn:InputClause' ? 'input' : 'output';\r\n\r\n    if(nextColumn && nextColumn.businessObject && nextColumn.businessObject.$type === businessObject.$type) {\r\n      parent[type].splice(\r\n        parent[type].indexOf(column.next.businessObject), 0,\r\n        businessObject);\r\n    } else {\r\n      parent[type].push(businessObject);\r\n    }\r\n\r\n    if(event.context._cells) {\r\n      // if the column has cells, they should be added to the rules\r\n      forEach(event.context._cells, function(cell) {\r\n        if(!cell.row.isHead && !cell.row.isFoot && cell.content) {\r\n          var ruleObj = cell.row.businessObject[type + 'Entry'];\r\n          ruleObj.splice(parent[type].indexOf(businessObject), 0, cell.content);\r\n        }\r\n      });\r\n    } else {\r\n      // we also have to explicitely create the cells for all rules\r\n      var allRules = parent.rule;\r\n      forEach(allRules, function(rule) {\r\n        var cellBO;\r\n        if(type === 'input') {\r\n          cellBO = dmnFactory.createInputEntry('', businessObject, rule);\r\n        } else {\r\n          cellBO = dmnFactory.createOutputEntry('', businessObject, rule);\r\n        }\r\n\r\n        var cell = elementRegistry.filter(function(element) {\r\n          return element._type === 'cell' &&\r\n             element.column === column &&\r\n             element.row.businessObject === rule;\r\n        })[0];\r\n\r\n        cell.content = cellBO;\r\n\r\n      });\r\n    }\r\n  }\r\n\r\n  function unsetParent(event) {\r\n\r\n    var businessObject = event.context.column.businessObject;\r\n    var type = businessObject.$type === 'dmn:InputClause' ? 'input' : 'output';\r\n\r\n    var idx = businessObject.$parent[type].indexOf(businessObject);\r\n\r\n    businessObject.$parent[type].splice(idx, 1);\r\n\r\n    forEach(businessObject.$parent.rule, function(rule) {\r\n      rule[type + 'Entry'].splice(idx, 1);\r\n    });\r\n  }\r\n\r\n  function deleteRule(event) {\r\n    var businessObject = event.context.row.businessObject;\r\n    businessObject.$parent.rule.splice(\r\n      businessObject.$parent.rule.indexOf(businessObject), 1);\r\n  }\r\n\r\n  function moveRow(event) {\r\n    var source = event.context.source.businessObject;\r\n    var target = event.context.target.businessObject;\r\n    var rulesArray = source.$parent.rule;\r\n    var targetIdx;\r\n\r\n    // remove source from list\r\n    var sourceIdx = rulesArray.indexOf(source);\r\n    rulesArray.splice(sourceIdx, 1);\r\n\r\n    if(event.type.indexOf('.executed') !== -1) {\r\n      // add source at target position\r\n      targetIdx = rulesArray.indexOf(target);\r\n      rulesArray.splice(targetIdx + (event.context.above ? 0 : 1), 0, source);\r\n    } else if (event.type.indexOf('.reverted') !== -1) {\r\n      // add source at previousBelow\r\n      var previousBelow = event.context.previousBelow.businessObject;\r\n      if(previousBelow) {\r\n        targetIdx = rulesArray.indexOf(previousBelow);\r\n        rulesArray.splice(targetIdx, 0, source);\r\n      } else {\r\n        rulesArray.push(source);\r\n      }\r\n    }\r\n  }\r\n\r\n  this.executed([ 'column.create' ], setColumnParent);\r\n  this.executed([ 'row.create' ], setParent);\r\n  this.executed([ 'column.delete' ], unsetParent);\r\n  this.executed([ 'row.delete' ], deleteRule);\r\n  this.executed([ 'row.move' ], moveRow);\r\n\r\n  this.reverted([ 'column.create' ], unsetParent);\r\n  this.reverted([ 'row.create' ], deleteRule);\r\n  this.reverted([ 'column.delete' ], setColumnParent);\r\n  this.reverted([ 'row.delete'], setParent);\r\n  this.reverted([ 'row.move'], moveRow);\r\n}\r\n\r\ninherits(DmnUpdater, CommandInterceptor);\r\n\r\nmodule.exports = DmnUpdater;\r\n\r\nDmnUpdater.$inject = [ 'eventBus', 'moddle', 'elementRegistry', 'dmnFactory', 'tableName' ];\r\n","'use strict';\r\n\r\nvar inherits = require(342);\r\n\r\nvar BaseModeling = require(438);\r\n\r\nvar EditCellHandler = require(31);\r\nvar ClearRowHandler = require(30);\r\nvar EditInputMappingHandler = require(34);\r\nvar EditIdHandler = require(33);\r\nvar EditTypeHandler = require(35);\r\nvar EditHitPolicyHandler = require(32);\r\n\r\n\r\n/**\r\n * DMN modeling features activator\r\n *\r\n * @param {EventBus} eventBus\r\n * @param {ElementFactory} elementFactory\r\n * @param {CommandStack} commandStack\r\n */\r\nfunction Modeling(eventBus, elementFactory, commandStack, sheet, elementRegistry) {\r\n  BaseModeling.call(this, eventBus, elementFactory, commandStack, sheet);\r\n\r\n  this._elementRegistry = elementRegistry;\r\n\r\n  // TODO: move this to a subclass of editBehavior\r\n  var self = this;\r\n  eventBus.on('tableName.editId', function(event) {\r\n    self.editId(event.newId);\r\n  });\r\n\r\n  eventBus.on('ioLabel.createColumn', function(event) {\r\n    self.createColumn(event.newColumn);\r\n  });\r\n\r\n  eventBus.on('mappingsRow.editInputMapping', function(event) {\r\n    self.editInputMapping(\r\n      event.element,\r\n      event.expression,\r\n      event.language\r\n    );\r\n  });\r\n\r\n  eventBus.on('typeRow.editDataType', function(event) {\r\n    self.editDataType(\r\n      event.element,\r\n      event.dataType,\r\n      event.allowedValues\r\n    );\r\n  });\r\n\r\n  eventBus.on('hitPolicy.edit', function(event) {\r\n    self.editHitPolicy(\r\n      event.table,\r\n      event.hitPolicy,\r\n      event.aggregation,\r\n      event.cell\r\n    );\r\n  });\r\n}\r\n\r\ninherits(Modeling, BaseModeling);\r\n\r\nModeling.$inject = [ 'eventBus', 'elementFactory', 'commandStack', 'sheet', 'elementRegistry' ];\r\n\r\nmodule.exports = Modeling;\r\n\r\n\r\nModeling.prototype.getHandlers = function() {\r\n  var handlers = BaseModeling.prototype.getHandlers.call(this);\r\n\r\n  handlers['cell.edit'] = EditCellHandler;\r\n  handlers['row.clear'] = ClearRowHandler;\r\n  handlers['inputMapping.edit'] = EditInputMappingHandler;\r\n  handlers['id.edit'] = EditIdHandler;\r\n  handlers['dataType.edit'] = EditTypeHandler;\r\n  handlers['hitPolicy.edit'] = EditHitPolicyHandler;\r\n\r\n  return handlers;\r\n};\r\n\r\nModeling.prototype.editCell = function(row, column, content) {\r\n\r\n  var context = {\r\n    row: row,\r\n    column: column,\r\n    content: content\r\n  };\r\n\r\n  var cell = this._elementRegistry.filter(function(element) {\r\n      return element._type === 'cell' && element.row.id === row && element.column.id === column;\r\n  })[0];\r\n\r\n  if(cell.row.isClauseRow) {\r\n    // change the clause label\r\n    if(cell.column.businessObject.label !== content) {\r\n      this._commandStack.execute('cell.edit', context);\r\n    }\r\n  } else if(cell.row.isMappingsRow) {\r\n    if(cell.content.name !== content.trim()) {\r\n      this._commandStack.execute('cell.edit', context);\r\n    }\r\n  } else if(!cell.row.isHead) {\r\n    var previousContent = cell.content;\r\n    if((!cell.column.isAnnotationsColumn && (!previousContent && context.content.trim() !== '') ||\r\n       (previousContent && context.content.trim() !== previousContent.text)) ||\r\n       (cell.column.isAnnotationsColumn && cell.row.businessObject.description !== context.content.trim())) {\r\n      // only execute edit command if content changed\r\n      this._commandStack.execute('cell.edit', context);\r\n    }\r\n  }\r\n\r\n  return context;\r\n};\r\n\r\nModeling.prototype.editHitPolicy = function(table, newPolicy, aggregation, cell) {\r\n  var context = {\r\n    table: table,\r\n    newPolicy: newPolicy,\r\n    newAggregation: aggregation,\r\n    cell: cell\r\n  };\r\n\r\n  if(!context.newAggregation || context.newAggregation === 'LIST') {\r\n    context.newAggregation = undefined;\r\n  }\r\n\r\n  if(table.hitPolicy !== newPolicy ||\r\n    (!table.aggregation && context.newAggregation) ||\r\n     table.aggregation !== context.newAggregation) {\r\n\r\n    this._commandStack.execute('hitPolicy.edit', context);\r\n  }\r\n\r\n  return context;\r\n};\r\n\r\n\r\nModeling.prototype.editInputMapping = function(cell, newMapping, language) {\r\n  var context = {\r\n    cell: cell,\r\n    newMapping: newMapping\r\n  };\r\n  if(arguments.length === 3) {\r\n    // if script is used\r\n    context.language = language;\r\n  }\r\n\r\n  if(cell.content.text !== newMapping || cell.content.expressionLanguage !== language) {\r\n    this._commandStack.execute('inputMapping.edit', context);\r\n  }\r\n\r\n  return context;\r\n};\r\n\r\n// allows editing of the table id\r\nModeling.prototype.editId = function(newId) {\r\n  var context = {\r\n    newId: newId\r\n  };\r\n\r\n  this._commandStack.execute('id.edit', context);\r\n\r\n  return context;\r\n};\r\n\r\nModeling.prototype.editDataType = function(cell, newType, allowedValues) {\r\n  var context = {\r\n    cell: cell,\r\n    newType: newType\r\n  };\r\n  if(arguments.length === 3) {\r\n    // when allowed values are provided\r\n    context.allowedValues = allowedValues;\r\n  }\r\n\r\n  var allowedValuesChanged = false;\r\n\r\n  // changed if the number of entries is different\r\n  if(!cell.content.allowedValue && allowedValues ||\r\n      cell.content.allowedValue && !allowedValues  ||\r\n      cell.content.allowedValue && allowedValues && cell.content.allowedValue.length !== allowedValues.length) {\r\n        allowedValuesChanged = true;\r\n  } else\r\n\r\n  // changed if at least one entry is different from before\r\n  if(cell.content.allowedValue && allowedValues) {\r\n    for(var i = 0; i < allowedValues.length; i++) {\r\n      if(cell.content.allowedValue[i].text !== allowedValues[i]) {\r\n        allowedValuesChanged = true;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  if(cell.content.typeDefinition !== newType || allowedValuesChanged) {\r\n    this._commandStack.execute('dataType.edit', context);\r\n  }\r\n\r\n  return context;\r\n};\r\n","'use strict';\r\n\r\nvar forEach = require(344);\r\n\r\n/**\r\n * A handler that implements reversible clear of rows\r\n *\r\n * @param {sheet} sheet\r\n */\r\nfunction ClearRowHandler(elementRegistry, utilityColumn, graphicsFactory) {\r\n  this._elementRegistry = elementRegistry;\r\n  this._utilityColumn = utilityColumn;\r\n  this._graphicsFactory = graphicsFactory;\r\n}\r\n\r\nClearRowHandler.$inject = [ 'elementRegistry', 'utilityColumn', 'graphicsFactory' ];\r\n\r\nmodule.exports = ClearRowHandler;\r\n\r\n\r\n\r\n////// api /////////////////////////////////////////\r\n\r\n\r\n/**\r\n * Clear a row\r\n *\r\n * @param {Object} context\r\n */\r\nClearRowHandler.prototype.execute = function(context) {\r\n  var self = this;\r\n  var utilityColumn = this._utilityColumn && this._utilityColumn.getColumn();\r\n  var cells = this._elementRegistry.filter(function(element) {\r\n    if (utilityColumn) {\r\n      return element._type === 'cell' && element.row === context.row && element.column !== utilityColumn;\r\n    } else {\r\n      return element._type === 'cell' && element.row === context.row;\r\n    }\r\n  });\r\n  context._oldContent = [];\r\n  forEach(cells, function(cell) {\r\n    if(cell.content) {\r\n      context._oldContent.push(cell.content.text);\r\n      cell.content.text = '';\r\n    }\r\n    self._graphicsFactory.update('cell', cell, self._elementRegistry.getGraphics(cell.id));\r\n  });\r\n};\r\n\r\n\r\n/**\r\n * Undo clear by resetting the content\r\n */\r\nClearRowHandler.prototype.revert = function(context) {\r\n  var self = this;\r\n  var utilityColumn = this._utilityColumn && this._utilityColumn.getColumn();\r\n  var cells = this._elementRegistry.filter(function(element) {\r\n    if (utilityColumn) {\r\n      return element._type === 'cell' && element.row === context.row && element.column !== utilityColumn;\r\n    } else {\r\n      return element._type === 'cell' && element.row === context.row;\r\n    }\r\n  });\r\n  var i = 0;\r\n  forEach(cells, function(cell) {\r\n    if(cell.content) {\r\n      cell.content.text = context._oldContent[i++];\r\n    }\r\n    self._graphicsFactory.update('cell', cell, self._elementRegistry.getGraphics(cell.id));\r\n  });\r\n};\r\n","'use strict';\r\n\r\nvar calculateSelectionUpdate = require(459).calculateSelectionUpdate;\r\n\r\nfunction getSelection(node) {\r\n\r\n  var selectObj = document.getSelection();\r\n  if(selectObj.rangeCount > 0) {\r\n    var range = selectObj.getRangeAt(0);\r\n\r\n    return {\r\n      start: range.startOffset,\r\n      end: range.endOffset\r\n    };\r\n  }\r\n  return {\r\n    start: 0,\r\n    end: 0\r\n  };\r\n}\r\n\r\nfunction updateSelection(contentBefore, contentAfter, gfx) {\r\n  var selection = getSelection();\r\n  var newSelection = calculateSelectionUpdate(selection, contentBefore, contentAfter);\r\n  var range = document.createRange();\r\n  var sel = document.getSelection();\r\n  if(gfx.childNodes[0].firstChild) {\r\n    range.setStart(gfx.childNodes[0].firstChild, newSelection.start);\r\n    range.setEnd(gfx.childNodes[0].firstChild, newSelection.end);\r\n  } else {\r\n    range.setStart(gfx.childNodes[0], 0);\r\n    range.setEnd(gfx.childNodes[0], 0);\r\n  }\r\n\r\n  sel.removeAllRanges();\r\n  sel.addRange(range);\r\n}\r\n\r\n/**\r\n * A handler that implements reversible addition of rows.\r\n *\r\n * @param {sheet} sheet\r\n */\r\nfunction EditCellHandler(sheet, elementRegistry, graphicsFactory, moddle, dmnFactory) {\r\n  this._sheet = sheet;\r\n  this._elementRegistry = elementRegistry;\r\n  this._graphicsFactory = graphicsFactory;\r\n  this._dmnFactory = dmnFactory;\r\n  this._moddle = moddle;\r\n}\r\n\r\nEditCellHandler.$inject = [ 'sheet', 'elementRegistry', 'graphicsFactory', 'moddle', 'dmnFactory' ];\r\n\r\nmodule.exports = EditCellHandler;\r\n\r\n\r\n\r\n////// api /////////////////////////////////////////\r\n\r\n\r\n/**\r\n * Edits the content of the cell\r\n *\r\n * @param {Object} context\r\n */\r\nEditCellHandler.prototype.execute = function(context) {\r\n  // get the business object\r\n  var el = this._elementRegistry.get('cell_' + context.column + '_' + context.row);\r\n  var gfx= this._elementRegistry.getGraphics('cell_' + context.column + '_' + context.row);\r\n  if(el.row.isHead) {\r\n    if(el.row.isMappingsRow) {\r\n      // update the output name of the clause\r\n      // (input expressions are handled by the popover, not the cell edit)\r\n      context.oldContent = el.content.name;\r\n      el.content.name = context.content;\r\n    } else if(el.row.isClauseRow) {\r\n      // update the clause names\r\n      context.oldContent = el.column.businessObject.label;\r\n      el.column.businessObject.label = context.content;\r\n    }\r\n  } else {\r\n\r\n    if(el.column.isAnnotationsColumn) {\r\n      // update the annotations of a rule\r\n      context.oldContent = el.row.businessObject.description;\r\n      el.row.businessObject.description = context.content;\r\n    } else {\r\n      // update a rule cell\r\n      if(el.content) {\r\n        context.oldContent = el.content.text;\r\n        el.content.text = context.content;\r\n      } else {\r\n        // need to create a semantic object\r\n        var inputOrOutput = el.column.businessObject.inputExpression ? 'createInputEntry' : 'createOutputEntry';\r\n        el.content = this._dmnFactory[inputOrOutput](context.content, el.column.businessObject, el.row.businessObject);\r\n      }\r\n    }\r\n  }\r\n\r\n  this._graphicsFactory.update('cell', el, gfx);\r\n  updateSelection(context.oldContent, context.content, gfx);\r\n\r\n  return context;\r\n};\r\n\r\n\r\n/**\r\n * Undo Edit by resetting the content\r\n */\r\nEditCellHandler.prototype.revert = function(context) {\r\n  var el = this._elementRegistry.get('cell_' + context.column + '_' + context.row);\r\n  var gfx= this._elementRegistry.getGraphics('cell_' + context.column + '_' + context.row);\r\n\r\n  var contentBefore;\r\n\r\n  if(el.row.isHead) {\r\n    if(el.row.isMappingsRow) {\r\n      // revert the output name of the clause\r\n      contentBefore = el.content.name;\r\n      el.content.name = context.oldContent;\r\n    } else if(el.row.isClauseRow) {\r\n      // revert clause name\r\n      contentBefore = el.column.businessObject.label;\r\n      el.column.businessObject.label = context.oldContent;\r\n    }\r\n\r\n  } else {\r\n\r\n    if(el.column.isAnnotationsColumn) {\r\n      // revert the annotations of a rule\r\n      contentBefore = el.row.businessObject.description;\r\n      el.row.businessObject.description = context.oldContent;\r\n    } else {\r\n      // revert a rule cell\r\n      if(!el.content) {\r\n        var inputOrOutput = el.column.businessObject.inputExpression ? 'createInputEntry' : 'createOutputEntry',\r\n            oldContent = context.oldContent;\r\n        // could have been deleted\r\n        el.content = this._dmnFactory[inputOrOutput](oldContent, el.column.businessObject, el.row.businessObject);\r\n      } else {\r\n        contentBefore = el.content.text;\r\n        el.content.text = context.oldContent;\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  this._graphicsFactory.update('cell', el, gfx);\r\n  updateSelection(contentBefore, context.oldContent, gfx);\r\n\r\n  return context;\r\n};\r\n","'use strict';\r\n\r\n/**\r\n * A handler that implements reversible editing of the hit policy.\r\n */\r\nfunction EditHitPolicyHandler(elementRegistry, graphicsFactory) {\r\n  this._elementRegistry = elementRegistry;\r\n  this._graphicsFactory = graphicsFactory;\r\n}\r\n\r\nEditHitPolicyHandler.$inject = [ 'elementRegistry', 'graphicsFactory' ];\r\n\r\nmodule.exports = EditHitPolicyHandler;\r\n\r\n\r\n\r\n////// api /////////////////////////////////////////\r\n\r\n\r\n/**\r\n * Edits the hit policy\r\n *\r\n * @param {Object} context\r\n */\r\nEditHitPolicyHandler.prototype.execute = function(context) {\r\n  context.oldPolicy = context.table.hitPolicy;\r\n  context.oldAggregation = context.table.aggregation;\r\n\r\n  context.table.hitPolicy = context.newPolicy;\r\n\r\n  if(context.newAggregation) {\r\n    context.table.aggregation = context.newAggregation;\r\n  } else {\r\n    context.table.aggregation = undefined;\r\n  }\r\n\r\n  this._graphicsFactory.update('cell', context.cell, this._elementRegistry.getGraphics(context.cell.id));\r\n\r\n  return context;\r\n};\r\n\r\n\r\n/**\r\n * Undo Edit by resetting the content\r\n */\r\nEditHitPolicyHandler.prototype.revert = function(context) {\r\n  context.table.hitPolicy = context.oldPolicy;\r\n  if(context.oldAggregation) {\r\n    context.table.aggregation = context.oldAggregation;\r\n  } else {\r\n    context.table.aggregation = undefined;\r\n  }\r\n\r\n  this._graphicsFactory.update('cell', context.cell, this._elementRegistry.getGraphics(context.cell.id));\r\n\r\n  return context;\r\n};\r\n","'use strict';\r\n\r\n/**\r\n * A handler that implements reversible editing of the table id.\r\n *\r\n * @param {tableName} tableName\r\n */\r\nfunction EditIdHandler(tableName) {\r\n  this._tableName = tableName;\r\n}\r\n\r\nEditIdHandler.$inject = [ 'tableName' ];\r\n\r\nmodule.exports = EditIdHandler;\r\n\r\n\r\n\r\n////// api /////////////////////////////////////////\r\n\r\n\r\n/**\r\n * Edits the table id\r\n *\r\n * @param {Object} context\r\n */\r\nEditIdHandler.prototype.execute = function(context) {\r\n  context.oldId = this._tableName.getId();\r\n  this._tableName.setId(context.newId);\r\n  return context;\r\n};\r\n\r\n\r\n/**\r\n * Undo Edit by resetting the content\r\n */\r\nEditIdHandler.prototype.revert = function(context) {\r\n  this._tableName.setId(context.oldId);\r\n  return context;\r\n};\r\n","'use strict';\r\n\r\n/**\r\n * A handler that implements reversible addition of rows.\r\n *\r\n * @param {sheet} sheet\r\n */\r\nfunction EditInputMappingHandler(elementRegistry, graphicsFactory) {\r\n  this._elementRegistry = elementRegistry;\r\n  this._graphicsFactory = graphicsFactory;\r\n}\r\n\r\nEditInputMappingHandler.$inject = ['elementRegistry', 'graphicsFactory' ];\r\n\r\nmodule.exports = EditInputMappingHandler;\r\n\r\n\r\n\r\n////// api /////////////////////////////////////////\r\n\r\n\r\n/**\r\n * Edits the content of the cell\r\n *\r\n * @param {Object} context\r\n */\r\nEditInputMappingHandler.prototype.execute = function(context) {\r\n\r\n  context.oldMapping = context.cell.content.text;\r\n  context.cell.content.text = context.newMapping;\r\n\r\n  if(context.cell.content.expressionLanguage) {\r\n    context.oldLanguage = context.cell.content.expressionLanguage;\r\n  }\r\n\r\n  if(typeof context.language !== 'undefined') {\r\n    context.cell.content.expressionLanguage = context.language;\r\n  } else {\r\n    context.cell.content.expressionLanguage = undefined;\r\n  }\r\n\r\n  this._graphicsFactory.update('cell', context.cell, this._elementRegistry.getGraphics(context.cell.id));\r\n\r\n  return context;\r\n};\r\n\r\n\r\n/**\r\n * Undo Edit by resetting the content\r\n */\r\nEditInputMappingHandler.prototype.revert = function(context) {\r\n\r\n  context.cell.content.text = context.oldMapping;\r\n\r\n  if(context.oldLanguage) {\r\n    context.cell.content.expressionLanguage = context.oldLanguage;\r\n  } else {\r\n    context.cell.content.expressionLanguage = undefined;\r\n  }\r\n\r\n  this._graphicsFactory.update('cell', context.cell, this._elementRegistry.getGraphics(context.cell.id));\r\n\r\n  return context;\r\n};\r\n","'use strict';\r\n\r\n/**\r\n * A handler that implements reversible editing of the datatype for a clause.\r\n *\r\n */\r\nfunction EditTypeHandler(elementRegistry, graphicsFactory, dmnFactory) {\r\n  this._elementRegistry = elementRegistry;\r\n  this._graphicsFactory = graphicsFactory;\r\n  this._dmnFactory = dmnFactory;\r\n}\r\n\r\nEditTypeHandler.$inject = [ 'elementRegistry', 'graphicsFactory', 'dmnFactory' ];\r\n\r\nmodule.exports = EditTypeHandler;\r\n\r\n\r\n\r\n////// api /////////////////////////////////////////\r\n\r\n\r\n/**\r\n * Edits the dataType\r\n *\r\n * @param {Object} context\r\n */\r\nEditTypeHandler.prototype.execute = function(context) {\r\n\r\n  var cellContent = context.cell.content;\r\n\r\n  if(cellContent.inputExpression) {\r\n    context.oldType = cellContent.inputExpression.typeRef;\r\n    cellContent.inputExpression.typeRef = context.newType;\r\n  } else {\r\n    context.oldType = cellContent.typeRef;\r\n    cellContent.typeRef = context.newType;\r\n  }\r\n\r\n  this._graphicsFactory.update('cell', context.cell, this._elementRegistry.getGraphics(context.cell.id));\r\n\r\n  return context;\r\n};\r\n\r\n\r\n/**\r\n * Undo Edit by resetting the content\r\n */\r\nEditTypeHandler.prototype.revert = function(context) {\r\n\r\n  var cellContent = context.cell.content;\r\n\r\n  if(cellContent.inputExpression) {\r\n    cellContent.inputExpression.typeRef = context.oldType;\r\n  } else {\r\n    cellContent.typeRef = context.oldType;\r\n  }\r\n\r\n  this._graphicsFactory.update('cell', context.cell, this._elementRegistry.getGraphics(context.cell.id));\r\n\r\n  return context;\r\n};\r\n","module.exports = {\r\n  __init__: [ 'modeling', 'dmnUpdater' ],\r\n  __depends__: [\r\n    require(447),\r\n    require(418),\r\n    require(15)\r\n  ],\r\n  modeling: [ 'type', require(29) ],\r\n  dmnUpdater: [ 'type', require(28) ],\r\n};\r\n","'use strict';\r\n\r\nvar domify = require(400);\r\n\r\nvar inherits = require(342);\r\n\r\nvar BaseModule = require(453);\r\n/**\r\n * Adds a header to the table containing the table name\r\n *\r\n * @param {EventBus} eventBus\r\n */\r\nfunction TableName(eventBus, sheet, tableName) {\r\n\r\n  BaseModule.call(this, eventBus, sheet, tableName);\r\n\r\n  this.node = domify('<header><h3>'+this.tableName+'</h3><div class=\"tjs-table-id mappings\"></div></header');\r\n\r\n  var self = this;\r\n\r\n  eventBus.on('tableName.allowEdit', function(event) {\r\n    if(event.editAllowed) {\r\n      self.node.querySelector('.tjs-table-id').setAttribute('contenteditable', true);\r\n\r\n      self.node.querySelector('.tjs-table-id').addEventListener('blur', function(evt) {\r\n        var newId = evt.target.textContent;\r\n        if(newId !== self.getId()) {\r\n          eventBus.fire('tableName.editId', {\r\n            newId: newId\r\n          });\r\n        }\r\n      }, true);\r\n    }\r\n  });\r\n\r\n  this.semantic = null;\r\n}\r\n\r\ninherits(TableName, BaseModule);\r\n\r\nTableName.$inject = [ 'eventBus', 'sheet', 'config.tableName' ];\r\n\r\nmodule.exports = TableName;\r\n\r\nTableName.prototype.setSemantic = function(semantic) {\r\n  this.semantic = semantic;\r\n  this.setName(semantic.name);\r\n  this.setId(semantic.id);\r\n};\r\n\r\nTableName.prototype.setName = function(newName) {\r\n  this.semantic.name = newName;\r\n  this.node.querySelector('h3').textContent = newName || '';\r\n};\r\n\r\nTableName.prototype.getName = function() {\r\n  return this.semantic.name;\r\n};\r\n\r\nTableName.prototype.setId = function(newId) {\r\n  if(!!newId) {\r\n    this.semantic.id = newId;\r\n  }\r\n  this.node.querySelector('div').textContent = this.semantic.id || '';\r\n};\r\n\r\nTableName.prototype.getId = function() {\r\n  return this.semantic.id;\r\n};\r\n","module.exports = {\r\n  __init__: [ 'tableName' ],\r\n  __depends__: [],\r\n  tableName: [ 'type', require(37) ]\r\n};\r\n","'use strict';\r\n\r\n\r\n\r\nvar domify = require(400),\r\n    domClasses = require(399),\r\n    ComboBox = require(421);\r\n\r\n/**\r\n * Adds a control to the table to define the datatypes for clauses\r\n */\r\nfunction TypeRow(eventBus, sheet, elementRegistry, graphicsFactory, complexCell, rules) {\r\n\r\n  this.row = null;\r\n\r\n  var self = this;\r\n\r\n  // add row when the sheet is initialized\r\n  eventBus.on('sheet.init', function(event) {\r\n\r\n    eventBus.fire('typeRow.add', event);\r\n\r\n    self.row = sheet.addRow({\r\n      id: 'typeRow',\r\n      isHead: true,\r\n      isTypeRow: true\r\n    });\r\n\r\n    eventBus.fire('typeRow.added', self.row);\r\n\r\n    graphicsFactory.update('row', self.row, elementRegistry.getGraphics(self.row.id));\r\n  });\r\n\r\n  // remove the row when the sheet is destroyed\r\n  eventBus.on('sheet.destroy', function(event) {\r\n\r\n    eventBus.fire('typeRow.destroy', self.row);\r\n\r\n    sheet.removeRow({\r\n      id: 'typeRow'\r\n    });\r\n\r\n    eventBus.fire('typeRow.destroyed', self.row);\r\n  });\r\n\r\n  // when an input cell on the mappings row is added, setup the complex cell\r\n  eventBus.on('cell.added', function(evt) {\r\n    if(evt.element.row.id === 'typeRow' &&\r\n       evt.element.column.businessObject) {\r\n\r\n      evt.element.content = evt.element.column.businessObject;\r\n\r\n      var template = domify(\"<div>/r/n</div>/r/n\");\r\n\r\n      // initializing the comboBox\r\n      var comboBox = new ComboBox({\r\n        label: 'Type',\r\n        classNames: ['dmn-combobox', 'datatype'],\r\n        options: ['string', 'boolean', 'integer', 'long', 'double', 'date'],\r\n        dropdownClassNames: ['dmn-combobox-suggestions']\r\n      });\r\n\r\n      // add comboBox to the template\r\n      template.insertBefore(\r\n        comboBox.getNode(),\r\n        template.firstChild\r\n      );\r\n\r\n      // set the complex property to initialize complex-cell behavior\r\n      evt.element.complex = {\r\n        className: 'dmn-clausevalues-setter',\r\n        template: template,\r\n        element: evt.element,\r\n        comboBox: comboBox,\r\n        type: 'type',\r\n        offset: {\r\n          x: 0,\r\n          y: -15\r\n        }\r\n      };\r\n\r\n      graphicsFactory.update('cell', evt.element, elementRegistry.getGraphics(evt.element));\r\n    }\r\n  });\r\n\r\n\r\n  // whenever an type cell is opened, we have to position the template, because the x offset changes\r\n  // over time, when columns are added and deleted\r\n  eventBus.on('complexCell.open', function(evt) {\r\n    if(evt.config.type === 'type') {\r\n      var gfx = elementRegistry.getGraphics(evt.config.element);\r\n\r\n      evt.container.style.left = window.parseInt(evt.container.style.left, 10) + gfx.clientWidth + 'px';\r\n\r\n      // feed the values to the template and combobox\r\n      var content = evt.config.element.content;\r\n      if(content.inputExpression) {\r\n        evt.config.comboBox.setValue(content.inputExpression.typeRef);\r\n      } else {\r\n        evt.config.comboBox.setValue(content.typeRef);\r\n      }\r\n\r\n      var template = evt.config.template;\r\n\r\n      // disable all input fields if editing is not allowed\r\n      if(!rules.allowed('dataType.edit')) {\r\n        evt.config.comboBox.disable();\r\n\r\n        // also set a disabled css class on the template\r\n        domClasses(template.parentNode).add('read-only');\r\n      }\r\n    }\r\n  });\r\n\r\n  // whenever a datatype cell is closed, apply the changes to the underlying model\r\n  eventBus.on('complexCell.close', function(evt) {\r\n    if(evt.config.type === 'type') {\r\n      if(evt.config.comboBox.getValue().toLowerCase() === 'string') {\r\n\r\n        eventBus.fire('typeRow.editDataType', {\r\n          element: evt.config.element,\r\n          dataType: evt.config.comboBox.getValue()\r\n        });\r\n\r\n      } else {\r\n        eventBus.fire('typeRow.editDataType', {\r\n          element: evt.config.element,\r\n          dataType: evt.config.comboBox.getValue()\r\n        });\r\n\r\n      }\r\n    }\r\n  });\r\n\r\n}\r\n\r\nTypeRow.$inject = [ 'eventBus', 'sheet', 'elementRegistry', 'graphicsFactory', 'complexCell', 'rules' ];\r\n\r\nmodule.exports = TypeRow;\r\n\r\nTypeRow.prototype.getRow = function() {\r\n  return this.row;\r\n};\r\n","'use strict';\r\n\r\nvar domClasses = require(399);\r\n\r\nfunction TypeRowRenderer(\r\n    eventBus,\r\n    typeRow) {\r\n\r\n  // row has class 'mappings'\r\n  eventBus.on('row.render', function(event) {\r\n    if (event.data === typeRow.getRow()) {\r\n      domClasses(event.gfx).add('values');\r\n    }\r\n  });\r\n\r\n  eventBus.on('cell.render', function(event) {\r\n\r\n    var content = event.data.content;\r\n    if (event.data.row === typeRow.getRow() && content) {\r\n      if(content.inputExpression) {\r\n        event.gfx.childNodes[0].textContent = content.inputExpression.typeRef || '';\r\n      } else {\r\n        event.gfx.childNodes[0].textContent = content.typeRef || '';\r\n      }\r\n    }\r\n  });\r\n\r\n}\r\n\r\nTypeRowRenderer.$inject = [\r\n  'eventBus',\r\n  'typeRow'\r\n];\r\n\r\nmodule.exports = TypeRowRenderer;\r\n","module.exports = {\r\n  __init__: [ 'typeRow', 'typeRowRenderer' ],\r\n  __depends__: [ require(423) ],\r\n  typeRow: [ 'type', require(39) ],\r\n  typeRowRenderer: [ 'type', require(40) ]\r\n};\r\n","'use strict';\r\n\r\nvar assign = require(394),\r\n    union  = require(343);\r\n\r\nvar elementToString = require(45).elementToString;\r\n\r\n\r\nfunction elementData(semantic, attrs) {\r\n  return assign({\r\n    id: semantic.id,\r\n    type: semantic.$type,\r\n    businessObject: semantic\r\n  }, attrs);\r\n}\r\n\r\n\r\n/**\r\n * An importer that adds dmn elements to the sheet\r\n *\r\n * @param {EventBus} eventBus\r\n * @param {Sheet} sheet\r\n * @param {ElementFactory} elementFactory\r\n * @param {ElementRegistry} elementRegistry\r\n */\r\nfunction DmnImporter(eventBus, sheet, elementRegistry, elementFactory, moddle, tableName, ioLabel, dmnFactory) {\r\n  this._eventBus = eventBus;\r\n  this._sheet = sheet;\r\n\r\n  this._elementRegistry = elementRegistry;\r\n  this._elementFactory = elementFactory;\r\n  this._tableName = tableName;\r\n  this._dmnFactory = dmnFactory;\r\n\r\n  this._ioLabel = ioLabel;\r\n\r\n  this._moddle = moddle;\r\n}\r\n\r\nDmnImporter.$inject = [\r\n  'eventBus', 'sheet', 'elementRegistry',\r\n  'elementFactory', 'moddle', 'tableName',\r\n  'ioLabel', 'dmnFactory'\r\n];\r\n\r\nmodule.exports = DmnImporter;\r\n\r\n\r\nDmnImporter.prototype._makeCopy = function(semantic) {\r\n  var newSemantic = this._moddle.create(semantic.$type);\r\n\r\n  for(var prop in semantic) {\r\n    if(semantic.hasOwnProperty(prop) && prop !== '$type') {\r\n      newSemantic[prop] = semantic[prop];\r\n    }\r\n  }\r\n  newSemantic.$parent = semantic.$parent;\r\n\r\n  return newSemantic;\r\n};\r\n\r\n/**\r\n * Add dmn element (semantic) to the sheet onto the\r\n * parent element.\r\n */\r\nDmnImporter.prototype.add = function(semantic, parentElement, definitions) {\r\n\r\n  var element;\r\n\r\n  if (semantic.$instanceOf('dmn:DecisionTable')) {\r\n    // Add the header row\r\n    element = this._elementFactory.createRow(elementData(semantic, {\r\n      isHead: true,\r\n      isClauseRow: true,\r\n      previous: this._ioLabel.getRow()\r\n    }));\r\n    this._sheet.addRow(element, parentElement);\r\n\r\n    this._tableName.setSemantic(semantic.$parent);\r\n  }\r\n\r\n  // INPUT CLAUSE\r\n  else if (semantic.$instanceOf('dmn:InputClause')) {\r\n    element = this._elementFactory.createColumn(elementData(semantic, {\r\n\r\n    }));\r\n    this._sheet.addColumn(element, parentElement);\r\n  }\r\n  // OUTPUT CLAUSE\r\n  else if (semantic.$instanceOf('dmn:OutputClause')) {\r\n    element = this._elementFactory.createColumn(elementData(semantic, {\r\n\r\n    }));\r\n    this._sheet.addColumn(element, parentElement);\r\n  }\r\n\r\n  // RULE\r\n  else if (semantic.$instanceOf('dmn:DecisionRule')) {\r\n    if(!semantic.inputEntry) {\r\n      semantic.inputEntry = [];\r\n    }\r\n    if(!semantic.outputEntry) {\r\n      semantic.outputEntry = [];\r\n    }\r\n    element = this._elementFactory.createRow(elementData(semantic, {\r\n\r\n    }));\r\n    this._sheet.addRow(element, parentElement);\r\n\r\n  }\r\n\r\n  // CELL\r\n  else if (parentElement.$instanceOf('dmn:DecisionRule')) {\r\n\r\n    // we have to find out the column of this cell. This can be done by getting the index of the\r\n    // cell and then using the clause at this index\r\n    var allCellsInRow = union(parentElement.inputEntry, parentElement.outputEntry);\r\n\r\n    var allClauses = this._elementRegistry.filter(function(element) {\r\n      if(!element.businessObject) {\r\n        return false;\r\n      }\r\n      var type = element.businessObject.$type;\r\n      return type === 'dmn:InputClause' || type === 'dmn:OutputClause';\r\n    });\r\n\r\n    var column = allClauses[allCellsInRow.indexOf(semantic)].id;\r\n\r\n    var row = this._elementRegistry.filter(function(ea) {\r\n      return ea.businessObject === parentElement;\r\n    })[0].id;\r\n\r\n    semantic.text = semantic.text || '';\r\n\r\n    this._sheet.setCellContent({\r\n      row: row,\r\n      column: column,\r\n      content: semantic\r\n    });\r\n\r\n  } else {\r\n    throw new Error('can not render element ' + elementToString(semantic));\r\n  }\r\n\r\n  this._eventBus.fire('dmnElement.added', { element: element });\r\n\r\n  return element;\r\n};\r\n","'use strict';\r\n\r\nvar forEach = require(344);\r\n\r\nvar elementToString = require(45).elementToString;\r\n\r\nfunction DmnTreeWalker(handler) {\r\n\r\n  function visit(element, ctx, definitions) {\r\n\r\n    var gfx = element.gfx;\r\n\r\n    // avoid multiple rendering of elements\r\n    if (gfx) {\r\n      throw new Error('already rendered ' + elementToString(element));\r\n    }\r\n\r\n    // call handler\r\n    return handler.element(element, ctx, definitions);\r\n  }\r\n\r\n  function visitTable(element) {\r\n    return handler.table(element);\r\n  }\r\n\r\n  ////// Semantic handling //////////////////////\r\n\r\n  function handleDefinitions(definitions) {\r\n    // make sure we walk the correct bpmnElement\r\n\r\n    var decisions = definitions.decision,\r\n        decision;\r\n\r\n    if (decisions && decisions.length) {\r\n      decision = decisions[0];\r\n    }\r\n\r\n    // no decision -> nothing to import\r\n    if (!decision) {\r\n      return;\r\n    }\r\n\r\n    if(decision.id === '') {\r\n      decision.id = 'decision';\r\n    }\r\n\r\n    var table = decision.decisionTable;\r\n\r\n\r\n    // no decision table -> nothing to import\r\n    if(!table) {\r\n      throw new Error('no table for ' + elementToString(decision));\r\n    }\r\n\r\n    var ctx = visitTable(table);\r\n\r\n    handleClauses(table.input, ctx, definitions);\r\n    handleClauses(table.output, ctx, definitions);\r\n\r\n    handleRules(table.rule, ctx, definitions);\r\n\r\n  }\r\n\r\n  function handleClauses(inputs, context, definitions) {\r\n    forEach(inputs, function(e) {\r\n      visit(e, context, definitions);\r\n    });\r\n  }\r\n\r\n  function handleRules(rules, context, definitions) {\r\n    forEach(rules, function(e) {\r\n      visit(e, context, definitions);\r\n\r\n      handleEntry(e.inputEntry, e);\r\n\r\n      handleEntry(e.outputEntry, e);\r\n    });\r\n  }\r\n\r\n  function handleEntry(entry, context, definitions) {\r\n    forEach(entry, function(e) {\r\n      visit(e, context, definitions);\r\n    });\r\n  }\r\n\r\n  ///// API ////////////////////////////////\r\n\r\n  return {\r\n    handleDefinitions: handleDefinitions\r\n  };\r\n}\r\n\r\nmodule.exports = DmnTreeWalker;\r\n","'use strict';\r\n\r\nvar DmnTreeWalker = require(43);\r\n\r\n\r\n/**\r\n * Import the definitions into a table.\r\n *\r\n * Errors and warnings are reported through the specified callback.\r\n *\r\n * @param  {Sheet} sheet\r\n * @param  {ModdleElement} definitions\r\n * @param  {Function} done the callback, invoked with (err, [ warning ]) once the import is done\r\n */\r\nfunction importDmnTable(sheet, definitions, done) {\r\n\r\n  var importer = sheet.get('dmnImporter'),\r\n      eventBus = sheet.get('eventBus');\r\n\r\n  var error,\r\n      warnings = [];\r\n\r\n  function parse(definitions) {\r\n\r\n    var visitor = {\r\n\r\n      table: function(element) {\r\n        return importer.add(element);\r\n      },\r\n\r\n      element: function(element, parentShape, definitions) {\r\n        return importer.add(element, parentShape, definitions);\r\n      },\r\n\r\n      error: function(message, context) {\r\n        warnings.push({ message: message, context: context });\r\n      }\r\n    };\r\n\r\n    var walker = new DmnTreeWalker(visitor);\r\n\r\n    // import\r\n    walker.handleDefinitions(definitions);\r\n  }\r\n\r\n  eventBus.fire('import.start');\r\n\r\n  try {\r\n    parse(definitions);\r\n  } catch (e) {\r\n    error = e;\r\n  }\r\n\r\n  eventBus.fire(error ? 'import.error' : 'import.success', { error: error, warnings: warnings });\r\n  done(error, warnings);\r\n}\r\n\r\nmodule.exports.importDmnTable = importDmnTable;\r\n","'use strict';\r\n\r\nmodule.exports.elementToString = function(e) {\r\n  if (!e) {\r\n    return '<null>';\r\n  }\r\n\r\n  return '<' + e.$type + (e.id ? ' id=\"' + e.id : '') + '\" />';\r\n};","module.exports = {\r\n  __depends__: [\r\n    require(15)\r\n  ],\r\n  dmnImporter: [ 'type', require(42) ]\r\n};\r\n","'use strict';\r\n\r\n\r\n/**\r\n * Get the correct active entries for the Context Menu\r\n *\r\n * @param  {Object} Context - Selected cell\r\n * @return {Object} {rule, input, output} = Boolean\r\n */\r\nfunction getEntriesType(context) {\r\n  var entriesType = {\r\n    rule: false,\r\n    input: false,\r\n    output: false\r\n  };\r\n\r\n  if (!context) {\r\n    return entriesType;\r\n  }\r\n\r\n  entriesType.rule = !!(context.row && context.row.businessObject &&\r\n         !context.row.businessObject.$instanceOf('dmn:DecisionTable') &&\r\n          context.column.id !== 'utilityColumn');\r\n\r\n  if (context.column &&\r\n      context.column.id !== 'utilityColumn' &&\r\n      context.column.id !== 'annotations' &&\r\n      context.row.id !== 'mappingsRow' &&\r\n      context.row.id !== 'typeRow' &&\r\n     !context.row.isLabelRow) {\r\n    if (context.column.businessObject.inputExpression) {\r\n      entriesType.input = true;\r\n    } else {\r\n      entriesType.output = true;\r\n    }\r\n  }\r\n\r\n  return entriesType;\r\n}\r\n\r\nmodule.exports.getEntriesType = getEntriesType;\r\n","'use strict';\r\n\r\nvar forEach = require(52),\r\n    isFunction = require(74),\r\n    isArray = require(73),\r\n    isNumber = require(76);\r\n\r\n\r\nvar DEFAULT_PRIORITY = 1000;\r\n\r\n\r\nfunction isObject(element) {\r\n  return typeof element === 'object';\r\n}\r\n\r\n/**\r\n * A utility that can be used to plug-in into the command execution for\r\n * extension and/or validation.\r\n *\r\n * @param {EventBus} eventBus\r\n *\r\n * @example\r\n *\r\n * var inherits = require('inherits');\r\n *\r\n * var CommandInterceptor = require('diagram-js/lib/command/CommandInterceptor');\r\n *\r\n * function CommandLogger(eventBus) {\r\n *   CommandInterceptor.call(this, eventBus);\r\n *\r\n *   this.preExecute(function(event) {\r\n *     console.log('command pre-execute', event);\r\n *   });\r\n * }\r\n *\r\n * inherits(CommandLogger, CommandInterceptor);\r\n *\r\n */\r\nfunction CommandInterceptor(eventBus) {\r\n  this._eventBus = eventBus;\r\n}\r\n\r\nCommandInterceptor.$inject = [ 'eventBus' ];\r\n\r\nmodule.exports = CommandInterceptor;\r\n\r\nfunction unwrapEvent(fn, that) {\r\n  return function(event) {\r\n    return fn.call(that || null, event.context, event.command, event);\r\n  };\r\n}\r\n\r\n/**\r\n * Register an interceptor for a command execution\r\n *\r\n * @param {String|Array<String>} [events] list of commands to register on\r\n * @param {String} [hook] command hook, i.e. preExecute, executed to listen on\r\n * @param {Number} [priority] the priority on which to hook into the execution\r\n * @param {Function} handlerFn interceptor to be invoked with (event)\r\n * @param {Boolean} unwrap if true, unwrap the event and pass (context, command, event) to the\r\n *                          listener instead\r\n * @param {Object} [that] Pass context (`this`) to the handler function\r\n */\r\nCommandInterceptor.prototype.on = function(events, hook, priority, handlerFn, unwrap, that) {\r\n\r\n  if (isFunction(hook) || isNumber(hook)) {\r\n    that = unwrap;\r\n    unwrap = handlerFn;\r\n    handlerFn = priority;\r\n    priority = hook;\r\n    hook = null;\r\n  }\r\n\r\n  if (isFunction(priority)) {\r\n    that = unwrap;\r\n    unwrap = handlerFn;\r\n    handlerFn = priority;\r\n    priority = DEFAULT_PRIORITY;\r\n  }\r\n\r\n  if (isObject(unwrap)) {\r\n    that = unwrap;\r\n    unwrap = false;\r\n  }\r\n\r\n  if (!isFunction(handlerFn)) {\r\n    throw new Error('handlerFn must be a function');\r\n  }\r\n\r\n  if (!isArray(events)) {\r\n    events = [ events ];\r\n  }\r\n\r\n  var eventBus = this._eventBus;\r\n\r\n  forEach(events, function(event) {\r\n    // concat commandStack(.event)?(.hook)?\r\n    var fullEvent = [ 'commandStack', event, hook ].filter(function(e) { return e; }).join('.');\r\n\r\n    eventBus.on(fullEvent, priority, unwrap ? unwrapEvent(handlerFn, that) : handlerFn, that);\r\n  });\r\n};\r\n\r\n\r\nvar hooks = [\r\n  'canExecute',\r\n  'preExecute',\r\n  'preExecuted',\r\n  'execute',\r\n  'executed',\r\n  'postExecute',\r\n  'postExecuted',\r\n  'revert',\r\n  'reverted'\r\n];\r\n\r\n/*\r\n * Install hook shortcuts\r\n *\r\n * This will generate the CommandInterceptor#(preExecute|...|reverted) methods\r\n * which will in term forward to CommandInterceptor#on.\r\n */\r\nforEach(hooks, function(hook) {\r\n\r\n  /**\r\n   * {canExecute|preExecute|preExecuted|execute|executed|postExecute|postExecuted|revert|reverted}\r\n   *\r\n   * A named hook for plugging into the command execution\r\n   *\r\n   * @param {String|Array<String>} [events] list of commands to register on\r\n   * @param {Number} [priority] the priority on which to hook into the execution\r\n   * @param {Function} handlerFn interceptor to be invoked with (event)\r\n   * @param {Boolean} [unwrap=false] if true, unwrap the event and pass (context, command, event) to the\r\n   *                          listener instead\r\n   * @param {Object} [that] Pass context (`this`) to the handler function\r\n   */\r\n  CommandInterceptor.prototype[hook] = function(events, priority, handlerFn, unwrap, that) {\r\n\r\n    if (isFunction(events) || isNumber(events)) {\r\n      that = unwrap;\r\n      unwrap = handlerFn;\r\n      handlerFn = priority;\r\n      priority = events;\r\n      events = null;\r\n    }\r\n\r\n    this.on(events, hook, priority, handlerFn, unwrap, that);\r\n  };\r\n});\r\n","'use strict';\r\n\r\nvar inherits = require(51);\r\n\r\nvar CommandInterceptor = require(48);\r\n\r\n/**\r\n * A basic provider that may be extended to implement modeling rules.\r\n *\r\n * Extensions should implement the init method to actually add their custom\r\n * modeling checks. Checks may be added via the #addRule(action, fn) method.\r\n *\r\n * @param {EventBus} eventBus\r\n */\r\nfunction RuleProvider(eventBus) {\r\n  CommandInterceptor.call(this, eventBus);\r\n\r\n  this.init();\r\n}\r\n\r\nRuleProvider.$inject = [ 'eventBus' ];\r\n\r\ninherits(RuleProvider, CommandInterceptor);\r\n\r\nmodule.exports = RuleProvider;\r\n\r\n\r\n/**\r\n * Adds a modeling rule for the given action, implemented through a callback function.\r\n *\r\n * The function will receive the modeling specific action context to perform its check.\r\n * It must return false or null to disallow the action from happening.\r\n *\r\n * Returning <code>null</code> may encode simply ignoring the action.\r\n *\r\n * @example\r\n *\r\n * ResizableRules.prototype.init = function() {\r\n *\r\n *   this.addRule('shape.resize', function(context) {\r\n *\r\n *     var shape = context.shape;\r\n *\r\n *     if (!context.newBounds) {\r\n *       // check general resizability\r\n *       if (!shape.resizable) {\r\n *         return false;\r\n *       }\r\n *     } else {\r\n *       // element must have minimum size of 10*10 points\r\n *       return context.newBounds.width > 10 && context.newBounds.height > 10;\r\n *     }\r\n *   });\r\n * };\r\n *\r\n * @param {String|Array<String>} actions the identifier for the modeling action to check\r\n * @param {Number} [priority] the priority at which this rule is being applied\r\n * @param {Function} fn the callback function that performs the actual check\r\n */\r\nRuleProvider.prototype.addRule = function(actions, priority, fn) {\r\n\r\n  var self = this;\r\n\r\n  if (typeof actions === 'string') {\r\n    actions = [ actions ];\r\n  }\r\n\r\n  actions.forEach(function(action) {\r\n\r\n    self.canExecute(action, priority, function(context, action, event) {\r\n      return fn(context);\r\n    }, true);\r\n  });\r\n};","'use strict';\r\n\r\n/**\r\n * Util that provides unique IDs.\r\n *\r\n * @class djs.util.IdGenerator\r\n * @constructor\r\n * @memberOf djs.util\r\n *\r\n * The ids can be customized via a given prefix and contain a random value to avoid collisions.\r\n *\r\n * @param {String} prefix a prefix to prepend to generated ids (for better readability)\r\n */\r\nfunction IdGenerator(prefix) {\r\n\r\n  this._counter = 0;\r\n  this._prefix = (prefix ? prefix + '-' : '') + Math.floor(Math.random() * 1000000000) + '-';\r\n}\r\n\r\nmodule.exports = IdGenerator;\r\n\r\n/**\r\n * Returns a next unique ID.\r\n *\r\n * @method djs.util.IdGenerator#next\r\n *\r\n * @returns {String} the id\r\n */\r\nIdGenerator.prototype.next = function() {\r\n  return this._prefix + (++this._counter);\r\n};\r\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","var arrayEach = require(53),\n    baseEach = require(54),\n    createForEach = require(63);\n\n/**\n * Iterates over elements of `collection` invoking `iteratee` for each element.\n * The `iteratee` is bound to `thisArg` and invoked with three arguments:\n * (value, index|key, collection). Iteratee functions may exit iteration early\n * by explicitly returning `false`.\n *\n * **Note:** As with other \"Collections\" methods, objects with a \"length\" property\n * are iterated like arrays. To avoid this behavior `_.forIn` or `_.forOwn`\n * may be used for object iteration.\n *\n * @static\n * @memberOf _\n * @alias each\n * @category Collection\n * @param {Array|Object|string} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {*} [thisArg] The `this` binding of `iteratee`.\n * @returns {Array|Object|string} Returns `collection`.\n * @example\n *\n * _([1, 2]).forEach(function(n) {\n *   console.log(n);\n * }).value();\n * // => logs each value from left to right and returns the array\n *\n * _.forEach({ 'a': 1, 'b': 2 }, function(n, key) {\n *   console.log(n, key);\n * });\n * // => logs each value-key pair and returns the object (iteration order is not guaranteed)\n */\nvar forEach = createForEach(arrayEach, baseEach);\n\nmodule.exports = forEach;\n","/**\n * A specialized version of `_.forEach` for arrays without support for callback\n * shorthands and `this` binding.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEach;\n","var baseForOwn = require(56),\n    createBaseEach = require(61);\n\n/**\n * The base implementation of `_.forEach` without support for callback\n * shorthands and `this` binding.\n *\n * @private\n * @param {Array|Object|string} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object|string} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n","var createBaseFor = require(62);\n\n/**\n * The base implementation of `baseForIn` and `baseForOwn` which iterates\n * over `object` properties returned by `keysFunc` invoking `iteratee` for\n * each property. Iteratee functions may exit iteration early by explicitly\n * returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n","var baseFor = require(55),\n    keys = require(78);\n\n/**\n * The base implementation of `_.forOwn` without support for callback\n * shorthands and `this` binding.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n","/**\n * The base implementation of `_.isFunction` without support for environments\n * with incorrect `typeof` results.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n */\nfunction baseIsFunction(value) {\n  // Avoid a Chakra JIT bug in compatibility modes of IE 11.\n  // See https://github.com/jashkenas/underscore/issues/1621 for more details.\n  return typeof value == 'function' || false;\n}\n\nmodule.exports = baseIsFunction;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n","/**\n * Converts `value` to a string if it's not one. An empty string is returned\n * for `null` or `undefined` values.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  if (typeof value == 'string') {\n    return value;\n  }\n  return value == null ? '' : (value + '');\n}\n\nmodule.exports = baseToString;\n","var identity = require(81);\n\n/**\n * A specialized version of `baseCallback` which only supports `this` binding\n * and specifying the number of arguments to provide to `func`.\n *\n * @private\n * @param {Function} func The function to bind.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {number} [argCount] The number of arguments to provide to `func`.\n * @returns {Function} Returns the callback.\n */\nfunction bindCallback(func, thisArg, argCount) {\n  if (typeof func != 'function') {\n    return identity;\n  }\n  if (thisArg === undefined) {\n    return func;\n  }\n  switch (argCount) {\n    case 1: return function(value) {\n      return func.call(thisArg, value);\n    };\n    case 3: return function(value, index, collection) {\n      return func.call(thisArg, value, index, collection);\n    };\n    case 4: return function(accumulator, value, index, collection) {\n      return func.call(thisArg, accumulator, value, index, collection);\n    };\n    case 5: return function(value, other, key, object, source) {\n      return func.call(thisArg, value, other, key, object, source);\n    };\n  }\n  return function() {\n    return func.apply(thisArg, arguments);\n  };\n}\n\nmodule.exports = bindCallback;\n","var getLength = require(64),\n    isLength = require(68),\n    toObject = require(71);\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    var length = collection ? getLength(collection) : 0;\n    if (!isLength(length)) {\n      return eachFunc(collection, iteratee);\n    }\n    var index = fromRight ? length : -1,\n        iterable = toObject(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n","var toObject = require(71);\n\n/**\n * Creates a base function for `_.forIn` or `_.forInRight`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var iterable = toObject(object),\n        props = keysFunc(object),\n        length = props.length,\n        index = fromRight ? length : -1;\n\n    while ((fromRight ? index-- : ++index < length)) {\n      var key = props[index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n","var bindCallback = require(60),\n    isArray = require(73);\n\n/**\n * Creates a function for `_.forEach` or `_.forEachRight`.\n *\n * @private\n * @param {Function} arrayFunc The function to iterate over an array.\n * @param {Function} eachFunc The function to iterate over a collection.\n * @returns {Function} Returns the new each function.\n */\nfunction createForEach(arrayFunc, eachFunc) {\n  return function(collection, iteratee, thisArg) {\n    return (typeof iteratee == 'function' && thisArg === undefined && isArray(collection))\n      ? arrayFunc(collection, iteratee)\n      : eachFunc(collection, bindCallback(iteratee, thisArg, 3));\n  };\n}\n\nmodule.exports = createForEach;\n","var baseProperty = require(58);\n\n/**\n * Gets the \"length\" property value of `object`.\n *\n * **Note:** This function is used to avoid a [JIT bug](https://bugs.webkit.org/show_bug.cgi?id=142792)\n * that affects Safari on at least iOS 8.1-8.3 ARM64.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {*} Returns the \"length\" value.\n */\nvar getLength = baseProperty('length');\n\nmodule.exports = getLength;\n","var isNative = require(75);\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = object == null ? undefined : object[key];\n  return isNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var getLength = require(64),\n    isLength = require(68);\n\n/**\n * Checks if `value` is array-like.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(getLength(value));\n}\n\nmodule.exports = isArrayLike;\n","/** Used to detect unsigned integer values. */\nvar reIsUint = /^/d+$/;\n\n/**\n * Used as the [maximum length](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-number.max_safe_integer)\n * of an array-like value.\n */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  value = (typeof value == 'number' || reIsUint.test(value)) ? +value : -1;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return value > -1 && value % 1 == 0 && value < length;\n}\n\nmodule.exports = isIndex;\n","/**\n * Used as the [maximum length](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-number.max_safe_integer)\n * of an array-like value.\n */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This function is based on [`ToLength`](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength).\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n */\nfunction isLength(value) {\n  return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","/**\n * Checks if `value` is object-like.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var isArguments = require(72),\n    isArray = require(73),\n    isIndex = require(67),\n    isLength = require(68),\n    keysIn = require(79);\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A fallback implementation of `Object.keys` which creates an array of the\n * own enumerable property names of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction shimKeys(object) {\n  var props = keysIn(object),\n      propsLength = props.length,\n      length = propsLength && object.length;\n\n  var allowIndexes = !!length && isLength(length) &&\n    (isArray(object) || isArguments(object));\n\n  var index = -1,\n      result = [];\n\n  while (++index < propsLength) {\n    var key = props[index];\n    if ((allowIndexes && isIndex(key, length)) || hasOwnProperty.call(object, key)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = shimKeys;\n","var isObject = require(77);\n\n/**\n * Converts `value` to an object if it's not one.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {Object} Returns the object.\n */\nfunction toObject(value) {\n  return isObject(value) ? value : Object(value);\n}\n\nmodule.exports = toObject;\n","var isArrayLike = require(66),\n    isObjectLike = require(69);\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as an `arguments` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  return isObjectLike(value) && isArrayLike(value) && objToString.call(value) == argsTag;\n}\n\nmodule.exports = isArguments;\n","var getNative = require(65),\n    isLength = require(68),\n    isObjectLike = require(69);\n\n/** `Object#toString` result references. */\nvar arrayTag = '[object Array]';\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeIsArray = getNative(Array, 'isArray');\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(function() { return arguments; }());\n * // => false\n */\nvar isArray = nativeIsArray || function(value) {\n  return isObjectLike(value) && isLength(value.length) && objToString.call(value) == arrayTag;\n};\n\nmodule.exports = isArray;\n","(function (global){\nvar baseIsFunction = require(57),\n    getNative = require(65);\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]';\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/** Native method references. */\nvar Uint8Array = getNative(global, 'Uint8Array');\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nvar isFunction = !(baseIsFunction(/x/) || (Uint8Array && !baseIsFunction(Uint8Array))) ? baseIsFunction : function(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in older versions of Chrome and Safari which return 'function' for regexes\n  // and Safari 8 equivalents which return 'object' for typed array constructors.\n  return objToString.call(value) == funcTag;\n};\n\nmodule.exports = isFunction;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9kaWFncmFtLWpzL25vZGVfbW9kdWxlcy9sb2Rhc2gvbGFuZy9pc0Z1bmN0aW9uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGJhc2VJc0Z1bmN0aW9uID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvYmFzZUlzRnVuY3Rpb24nKSxcbiAgICBnZXROYXRpdmUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9nZXROYXRpdmUnKTtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIGZ1bmNUYWcgPSAnW29iamVjdCBGdW5jdGlvbl0nO1xuXG4vKiogVXNlZCBmb3IgbmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlIFtgdG9TdHJpbmdUYWdgXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9ialRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKiBOYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgVWludDhBcnJheSA9IGdldE5hdGl2ZShnbG9iYWwsICdVaW50OEFycmF5Jyk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBGdW5jdGlvbmAgb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzRnVuY3Rpb24oXyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0Z1bmN0aW9uKC9hYmMvKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbnZhciBpc0Z1bmN0aW9uID0gIShiYXNlSXNGdW5jdGlvbigveC8pIHx8IChVaW50OEFycmF5ICYmICFiYXNlSXNGdW5jdGlvbihVaW50OEFycmF5KSkpID8gYmFzZUlzRnVuY3Rpb24gOiBmdW5jdGlvbih2YWx1ZSkge1xuICAvLyBUaGUgdXNlIG9mIGBPYmplY3QjdG9TdHJpbmdgIGF2b2lkcyBpc3N1ZXMgd2l0aCB0aGUgYHR5cGVvZmAgb3BlcmF0b3JcbiAgLy8gaW4gb2xkZXIgdmVyc2lvbnMgb2YgQ2hyb21lIGFuZCBTYWZhcmkgd2hpY2ggcmV0dXJuICdmdW5jdGlvbicgZm9yIHJlZ2V4ZXNcbiAgLy8gYW5kIFNhZmFyaSA4IGVxdWl2YWxlbnRzIHdoaWNoIHJldHVybiAnb2JqZWN0JyBmb3IgdHlwZWQgYXJyYXkgY29uc3RydWN0b3JzLlxuICByZXR1cm4gb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gZnVuY1RhZztcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gaXNGdW5jdGlvbjtcbiJdfQ==","var escapeRegExp = require(80),\n    isObjectLike = require(69);\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]';\n\n/** Used to detect host constructors (Safari > 5). */\nvar reIsHostCtor = /^/[object .+?Constructor/]$/;\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar fnToString = Function.prototype.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the [`toStringTag`](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  escapeRegExp(fnToString.call(hasOwnProperty))\n  .replace(/hasOwnProperty|(function).*?(?=///()| for .+?(?=///])/g, '$1.*?') + '$'\n);\n\n/**\n * Checks if `value` is a native function.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function, else `false`.\n * @example\n *\n * _.isNative(Array.prototype.push);\n * // => true\n *\n * _.isNative(_);\n * // => false\n */\nfunction isNative(value) {\n  if (value == null) {\n    return false;\n  }\n  if (objToString.call(value) == funcTag) {\n    return reIsNative.test(fnToString.call(value));\n  }\n  return isObjectLike(value) && reIsHostCtor.test(value);\n}\n\nmodule.exports = isNative;\n","var isObjectLike = require(69);\n\n/** `Object#toString` result references. */\nvar numberTag = '[object Number]';\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `Number` primitive or object.\n *\n * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are classified\n * as numbers, use the `_.isFinite` method.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isNumber(8.4);\n * // => true\n *\n * _.isNumber(NaN);\n * // => true\n *\n * _.isNumber('8.4');\n * // => false\n */\nfunction isNumber(value) {\n  return typeof value == 'number' || (isObjectLike(value) && objToString.call(value) == numberTag);\n}\n\nmodule.exports = isNumber;\n","/**\n * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(1);\n * // => false\n */\nfunction isObject(value) {\n  // Avoid a V8 JIT bug in Chrome 19-20.\n  // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","var getNative = require(65),\n    isArrayLike = require(66),\n    isObject = require(77),\n    shimKeys = require(70);\n\n/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = getNative(Object, 'keys');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-object.keys)\n * for more details.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nvar keys = !nativeKeys ? shimKeys : function(object) {\n  var Ctor = object == null ? null : object.constructor;\n  if ((typeof Ctor == 'function' && Ctor.prototype === object) ||\n      (typeof object != 'function' && isArrayLike(object))) {\n    return shimKeys(object);\n  }\n  return isObject(object) ? nativeKeys(object) : [];\n};\n\nmodule.exports = keys;\n","var isArguments = require(72),\n    isArray = require(73),\n    isIndex = require(67),\n    isLength = require(68),\n    isObject = require(77);\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  if (object == null) {\n    return [];\n  }\n  if (!isObject(object)) {\n    object = Object(object);\n  }\n  var length = object.length;\n  length = (length && isLength(length) &&\n    (isArray(object) || isArguments(object)) && length) || 0;\n\n  var Ctor = object.constructor,\n      index = -1,\n      isProto = typeof Ctor == 'function' && Ctor.prototype === object,\n      result = Array(length),\n      skipIndexes = length > 0;\n\n  while (++index < length) {\n    result[index] = (index + '');\n  }\n  for (var key in object) {\n    if (!(skipIndexes && isIndex(key, length)) &&\n        !(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = keysIn;\n","var baseToString = require(59);\n\n/**\n * Used to match `RegExp` [special characters](http://www.regular-expressions.info/characters.html#special).\n * In addition to special characters the forward slash is escaped to allow for\n * easier `eval` use and `Function` compilation.\n */\nvar reRegExpChars = /[.*+?^${}()|[/]////]/g,\n    reHasRegExpChars = RegExp(reRegExpChars.source);\n\n/**\n * Escapes the `RegExp` special characters \"/\", \"/\", \"^\", \"$\", \".\", \"|\", \"?\",\n * \"*\", \"+\", \"(\", \")\", \"[\", \"]\", \"{\" and \"}\" in `string`.\n *\n * @static\n * @memberOf _\n * @category String\n * @param {string} [string=''] The string to escape.\n * @returns {string} Returns the escaped string.\n * @example\n *\n * _.escapeRegExp('[lodash](https://lodash.com/)');\n * // => '/[lodash/]/(https:////lodash/.com///)'\n */\nfunction escapeRegExp(string) {\n  string = baseToString(string);\n  return (string && reHasRegExpChars.test(string))\n    ? string.replace(reRegExpChars, '//$&')\n    : string;\n}\n\nmodule.exports = escapeRegExp;\n","/**\n * This method returns the first argument provided to it.\n *\n * @static\n * @memberOf _\n * @category Utility\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'user': 'fred' };\n *\n * _.identity(object) === object;\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","module.exports = require(85);","'use strict';\r\n\r\nvar isString = require(108),\r\n    isFunction = require(105),\r\n    assign = require(109);\r\n\r\nvar Moddle = require(265),\r\n    XmlReader = require(115),\r\n    XmlWriter = require(116);\r\n\r\n/**\r\n * A sub class of {@link Moddle} with support for import and export of DMN xml files.\r\n *\r\n * @class DmnModdle\r\n * @extends Moddle\r\n *\r\n * @param {Object|Array} packages to use for instantiating the model\r\n * @param {Object} [options] additional options to pass over\r\n */\r\nfunction DmnModdle(packages, options) {\r\n  Moddle.call(this, packages, options);\r\n}\r\n\r\nDmnModdle.prototype = Object.create(Moddle.prototype);\r\n\r\nmodule.exports = DmnModdle;\r\n\r\n\r\n/**\r\n * Instantiates a DMN model tree from a given xml string.\r\n *\r\n * @param {String}   xmlStr\r\n * @param {String}   [typeName='dmn:Definitions'] name of the root element\r\n * @param {Object}   [options]  options to pass to the underlying reader\r\n * @param {Function} done       callback that is invoked with (err, result, parseContext)\r\n *                              once the import completes\r\n */\r\nDmnModdle.prototype.fromXML = function(xmlStr, typeName, options, done) {\r\n\r\n  if (!isString(typeName)) {\r\n    done = options;\r\n    options = typeName;\r\n    typeName = 'dmn:Definitions';\r\n  }\r\n\r\n  if (isFunction(options)) {\r\n    done = options;\r\n    options = {};\r\n  }\r\n\r\n  var reader = new XmlReader(assign({ model: this, lax: true }, options));\r\n  var rootHandler = reader.handler(typeName);\r\n\r\n  reader.fromXML(xmlStr, rootHandler, done);\r\n};\r\n\r\n\r\n/**\r\n * Serializes a DMN object tree to XML.\r\n *\r\n * @param {String}   element    the root element, typically an instance of `Definitions`\r\n * @param {Object}   [options]  to pass to the underlying writer\r\n * @param {Function} done       callback invoked with (err, xmlStr) once the import completes\r\n */\r\nDmnModdle.prototype.toXML = function(element, options, done) {\r\n\r\n  if (isFunction(options)) {\r\n    done = options;\r\n    options = {};\r\n  }\r\n\r\n  var writer = new XmlWriter(options);\r\n  try {\r\n    var result = writer.toXML(element);\r\n    done(null, result);\r\n  } catch (e) {\r\n    done(e);\r\n  }\r\n};\r\n","'use strict';\r\n\r\nvar ID_PATTERN = /^(.*:)?id$/;\r\n\r\n/**\r\n * Extends the bpmn instance with id support.\r\n *\r\n * @example\r\n *\r\n * var moddle, ids;\r\n *\r\n * require('id-support').extend(moddle, ids);\r\n *\r\n * moddle.ids.next(); // create a next id\r\n * moddle.ids; // ids instance\r\n *\r\n * // claims id as used\r\n * moddle.create('foo:Bar', { id: 'fooobar1' });\r\n *\r\n *\r\n * @param  {Moddle} model\r\n * @param  {Ids} ids\r\n *\r\n * @return {Moddle} the extended moddle instance\r\n */\r\nmodule.exports.extend = function(model, ids) {\r\n\r\n  var set = model.properties.set;\r\n\r\n  // do not reinitialize setter\r\n  // unless it is already initialized\r\n  if (!model.ids) {\r\n\r\n    model.properties.set = function(target, property, value) {\r\n\r\n      // ensure we log used ids once they are assigned\r\n      // to model elements\r\n      if (ID_PATTERN.test(property)) {\r\n\r\n        var assigned = model.ids.assigned(value);\r\n        if (assigned && assigned !== target) {\r\n          throw new Error('id <' + value + '> already used');\r\n        }\r\n\r\n        model.ids.claim(value, target);\r\n      }\r\n\r\n      set.call(this, target, property, value);\r\n    };\r\n  }\r\n\r\n  model.ids = ids;\r\n\r\n  return model;\r\n};\r\n","'use strict';\r\n\r\nvar assign = require(109);\r\n\r\nvar DmnModdle = require(83);\r\n\r\nvar packages = {\r\n  dmn: require(339)\r\n};\r\n\r\nmodule.exports = function(additionalPackages, options) {\r\n  return new DmnModdle(assign({}, packages, additionalPackages), options);\r\n};\r\n","/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates a function that invokes `func` with the `this` binding of the\n * created function and arguments from `start` and beyond provided as an array.\n *\n * **Note:** This method is based on the [rest parameter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters).\n *\n * @static\n * @memberOf _\n * @category Function\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var say = _.restParam(function(what, names) {\n *   return what + ' ' + _.initial(names).join(', ') +\n *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);\n * });\n *\n * say('hello', 'fred', 'barney', 'pebbles');\n * // => 'hello fred, barney, & pebbles'\n */\nfunction restParam(func, start) {\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  start = nativeMax(start === undefined ? (func.length - 1) : (+start || 0), 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        rest = Array(length);\n\n    while (++index < length) {\n      rest[index] = args[start + index];\n    }\n    switch (start) {\n      case 0: return func.call(this, rest);\n      case 1: return func.call(this, args[0], rest);\n      case 2: return func.call(this, args[0], args[1], rest);\n    }\n    var otherArgs = Array(start + 1);\n    index = -1;\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = rest;\n    return func.apply(this, otherArgs);\n  };\n}\n\nmodule.exports = restParam;\n","var keys = require(110);\n\n/**\n * A specialized version of `_.assign` for customizing assigned values without\n * support for argument juggling, multiple sources, and `this` binding `customizer`\n * functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {Function} customizer The function to customize assigned values.\n * @returns {Object} Returns `object`.\n */\nfunction assignWith(object, source, customizer) {\n  var index = -1,\n      props = keys(source),\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index],\n        value = object[key],\n        result = customizer(value, source[key], key, object, source);\n\n    if ((result === result ? (result !== value) : (value === value)) ||\n        (value === undefined && !(key in object))) {\n      object[key] = result;\n    }\n  }\n  return object;\n}\n\nmodule.exports = assignWith;\n","var baseCopy = require(89),\n    keys = require(110);\n\n/**\n * The base implementation of `_.assign` without support for argument juggling,\n * multiple sources, and `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return source == null\n    ? object\n    : baseCopy(source, keys(source), object);\n}\n\nmodule.exports = baseAssign;\n","/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property names to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @returns {Object} Returns `object`.\n */\nfunction baseCopy(source, props, object) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n    object[key] = source[key];\n  }\n  return object;\n}\n\nmodule.exports = baseCopy;\n","var bindCallback = require(93),\n    isIterateeCall = require(99),\n    restParam = require(86);\n\n/**\n * Creates a function that assigns properties of source object(s) to a given\n * destination object.\n *\n * **Note:** This function is used to create `_.assign`, `_.defaults`, and `_.merge`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return restParam(function(object, sources) {\n    var index = -1,\n        length = object == null ? 0 : sources.length,\n        customizer = length > 2 ? sources[length - 2] : undefined,\n        guard = length > 2 ? sources[2] : undefined,\n        thisArg = length > 1 ? sources[length - 1] : undefined;\n\n    if (typeof customizer == 'function') {\n      customizer = bindCallback(customizer, thisArg, 5);\n      length -= 2;\n    } else {\n      customizer = typeof thisArg == 'function' ? thisArg : undefined;\n      length -= (customizer ? 1 : 0);\n    }\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nmodule.exports = createAssigner;\n","var isArrayLike = require(97),\n    isIndex = require(98),\n    isObject = require(107);\n\n/**\n * Checks if the provided arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call, else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n      ? (isArrayLike(object) && isIndex(index, object.length))\n      : (type == 'string' && index in object)) {\n    var other = object[index];\n    return value === value ? (value === other) : (other !== other);\n  }\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n","(function (global){\nvar baseIsFunction = require(90),\n    getNative = require(96);\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]';\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/** Native method references. */\nvar Uint8Array = getNative(global, 'Uint8Array');\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nvar isFunction = !(baseIsFunction(/x/) || (Uint8Array && !baseIsFunction(Uint8Array))) ? baseIsFunction : function(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in older versions of Chrome and Safari which return 'function' for regexes\n  // and Safari 8 equivalents which return 'object' for typed array constructors.\n  return objToString.call(value) == funcTag;\n};\n\nmodule.exports = isFunction;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9kbW4tbW9kZGxlL25vZGVfbW9kdWxlcy9sb2Rhc2gvbGFuZy9pc0Z1bmN0aW9uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGJhc2VJc0Z1bmN0aW9uID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvYmFzZUlzRnVuY3Rpb24nKSxcbiAgICBnZXROYXRpdmUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9nZXROYXRpdmUnKTtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIGZ1bmNUYWcgPSAnW29iamVjdCBGdW5jdGlvbl0nO1xuXG4vKiogVXNlZCBmb3IgbmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlIFtgdG9TdHJpbmdUYWdgXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9ialRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKiBOYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgVWludDhBcnJheSA9IGdldE5hdGl2ZShnbG9iYWwsICdVaW50OEFycmF5Jyk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBGdW5jdGlvbmAgb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzRnVuY3Rpb24oXyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0Z1bmN0aW9uKC9hYmMvKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbnZhciBpc0Z1bmN0aW9uID0gIShiYXNlSXNGdW5jdGlvbigveC8pIHx8IChVaW50OEFycmF5ICYmICFiYXNlSXNGdW5jdGlvbihVaW50OEFycmF5KSkpID8gYmFzZUlzRnVuY3Rpb24gOiBmdW5jdGlvbih2YWx1ZSkge1xuICAvLyBUaGUgdXNlIG9mIGBPYmplY3QjdG9TdHJpbmdgIGF2b2lkcyBpc3N1ZXMgd2l0aCB0aGUgYHR5cGVvZmAgb3BlcmF0b3JcbiAgLy8gaW4gb2xkZXIgdmVyc2lvbnMgb2YgQ2hyb21lIGFuZCBTYWZhcmkgd2hpY2ggcmV0dXJuICdmdW5jdGlvbicgZm9yIHJlZ2V4ZXNcbiAgLy8gYW5kIFNhZmFyaSA4IGVxdWl2YWxlbnRzIHdoaWNoIHJldHVybiAnb2JqZWN0JyBmb3IgdHlwZWQgYXJyYXkgY29uc3RydWN0b3JzLlxuICByZXR1cm4gb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gZnVuY1RhZztcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gaXNGdW5jdGlvbjtcbiJdfQ==","var isObjectLike = require(101);\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' || (isObjectLike(value) && objToString.call(value) == stringTag);\n}\n\nmodule.exports = isString;\n","var assignWith = require(87),\n    baseAssign = require(88),\n    createAssigner = require(94);\n\n/**\n * Assigns own enumerable properties of source object(s) to the destination\n * object. Subsequent sources overwrite property assignments of previous sources.\n * If `customizer` is provided it is invoked to produce the assigned values.\n * The `customizer` is bound to `thisArg` and invoked with five arguments:\n * (objectValue, sourceValue, key, object, source).\n *\n * **Note:** This method mutates `object` and is based on\n * [`Object.assign`](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-object.assign).\n *\n * @static\n * @memberOf _\n * @alias extend\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {*} [thisArg] The `this` binding of `customizer`.\n * @returns {Object} Returns `object`.\n * @example\n *\n * _.assign({ 'user': 'barney' }, { 'age': 40 }, { 'user': 'fred' });\n * // => { 'user': 'fred', 'age': 40 }\n *\n * // using a customizer callback\n * var defaults = _.partialRight(_.assign, function(value, other) {\n *   return _.isUndefined(value) ? other : value;\n * });\n *\n * defaults({ 'user': 'barney' }, { 'age': 36 }, { 'user': 'fred' });\n * // => { 'user': 'barney', 'age': 36 }\n */\nvar assign = createAssigner(function(object, source, customizer) {\n  return customizer\n    ? assignWith(object, source, customizer)\n    : baseAssign(object, source);\n});\n\nmodule.exports = assign;\n","'use strict';\r\n\r\nfunction capitalize(string) {\r\n  return string.charAt(0).toUpperCase() + string.slice(1);\r\n}\r\n\r\nfunction lower(string) {\r\n  return string.charAt(0).toLowerCase() + string.slice(1);\r\n}\r\n\r\nfunction hasLowerCaseAlias(pkg) {\r\n  return pkg.xml && pkg.xml.tagAlias === 'lowerCase';\r\n}\r\n\r\n\r\nmodule.exports.aliasToName = function(alias, pkg) {\r\n  if (hasLowerCaseAlias(pkg)) {\r\n    return capitalize(alias);\r\n  } else {\r\n    return alias;\r\n  }\r\n};\r\n\r\nmodule.exports.nameToAlias = function(name, pkg) {\r\n  if (hasLowerCaseAlias(pkg)) {\r\n    return lower(name);\r\n  } else {\r\n    return name;\r\n  }\r\n};\r\n\r\nmodule.exports.DEFAULT_NS_MAP = {\r\n  'xsi': 'http://www.w3.org/2001/XMLSchema-instance'\r\n};\r\n\r\nvar XSI_TYPE = module.exports.XSI_TYPE = 'xsi:type';\r\n\r\nfunction serializeFormat(element) {\r\n  return element.xml && element.xml.serialize;\r\n}\r\n\r\nmodule.exports.serializeAsType = function(element) {\r\n  return serializeFormat(element) === XSI_TYPE;\r\n};\r\n\r\nmodule.exports.serializeAsProperty = function(element) {\r\n  return serializeFormat(element) === 'property';\r\n};","'use strict';\r\n\r\nvar reduce = require(122),\r\n    forEach = require(120),\r\n    find = require(119),\r\n    assign = require(182),\r\n    defer = require(123);\r\n\r\nvar Stack = require(264),\r\n    SaxParser = require(263).parser,\r\n    Moddle = require(189),\r\n    parseNameNs = require(194).parseName,\r\n    Types = require(197),\r\n    coerceType = Types.coerceType,\r\n    isSimpleType = Types.isSimple,\r\n    common = require(114),\r\n    XSI_TYPE = common.XSI_TYPE,\r\n    XSI_URI = common.DEFAULT_NS_MAP.xsi,\r\n    serializeAsType = common.serializeAsType,\r\n    aliasToName = common.aliasToName;\r\n\r\nfunction parseNodeAttributes(node) {\r\n  var nodeAttrs = node.attributes;\r\n\r\n  return reduce(nodeAttrs, function(result, v, k) {\r\n    var name, ns;\r\n\r\n    if (!v.local) {\r\n      name = v.prefix;\r\n    } else {\r\n      ns = parseNameNs(v.name, v.prefix);\r\n      name = ns.name;\r\n    }\r\n\r\n    result[name] = v.value;\r\n    return result;\r\n  }, {});\r\n}\r\n\r\nfunction normalizeType(node, attr, model) {\r\n  var nameNs = parseNameNs(attr.value);\r\n\r\n  var uri = node.ns[nameNs.prefix || ''],\r\n      localName = nameNs.localName,\r\n      pkg = uri && model.getPackage(uri),\r\n      typePrefix;\r\n\r\n  if (pkg) {\r\n    typePrefix = pkg.xml && pkg.xml.typePrefix;\r\n\r\n    if (typePrefix && localName.indexOf(typePrefix) === 0) {\r\n      localName = localName.slice(typePrefix.length);\r\n    }\r\n\r\n    attr.value = pkg.prefix + ':' + localName;\r\n  }\r\n}\r\n\r\n/**\r\n * Normalizes namespaces for a node given an optional default namespace and a\r\n * number of mappings from uris to default prefixes.\r\n *\r\n * @param  {XmlNode} node\r\n * @param  {Model} model the model containing all registered namespaces\r\n * @param  {Uri} defaultNsUri\r\n */\r\nfunction normalizeNamespaces(node, model, defaultNsUri) {\r\n  var uri, prefix;\r\n\r\n  uri = node.uri || defaultNsUri;\r\n\r\n  if (uri) {\r\n    var pkg = model.getPackage(uri);\r\n\r\n    if (pkg) {\r\n      prefix = pkg.prefix;\r\n    } else {\r\n      prefix = node.prefix;\r\n    }\r\n\r\n    node.prefix = prefix;\r\n    node.uri = uri;\r\n  }\r\n\r\n  forEach(node.attributes, function(attr) {\r\n\r\n    // normalize xsi:type attributes because the\r\n    // assigned type may or may not be namespace prefixed\r\n    if (attr.uri === XSI_URI && attr.local === 'type') {\r\n      normalizeType(node, attr, model);\r\n    }\r\n\r\n    normalizeNamespaces(attr, model, null);\r\n  });\r\n}\r\n\r\n\r\n/**\r\n * A parse context.\r\n *\r\n * @class\r\n *\r\n * @param {Object} options\r\n * @param {ElementHandler} options.parseRoot the root handler for parsing a document\r\n * @param {boolean} [options.lax=false] whether or not to ignore invalid elements\r\n */\r\nfunction Context(options) {\r\n\r\n  /**\r\n   * @property {ElementHandler} parseRoot\r\n   */\r\n\r\n  /**\r\n   * @property {Boolean} lax\r\n   */\r\n\r\n  assign(this, options);\r\n\r\n  var elementsById = this.elementsById = {};\r\n  var references = this.references = [];\r\n  var warnings = this.warnings = [];\r\n\r\n  this.addReference = function(reference) {\r\n    references.push(reference);\r\n  };\r\n\r\n  this.addElement = function(id, element) {\r\n\r\n    if (!id || !element) {\r\n      throw new Error('[xml-reader] id or ctx must not be null');\r\n    }\r\n\r\n    elementsById[id] = element;\r\n  };\r\n\r\n  this.addWarning = function (w) {\r\n    warnings.push(w);\r\n  };\r\n}\r\n\r\nfunction BaseHandler() {}\r\n\r\nBaseHandler.prototype.handleEnd = function() {};\r\nBaseHandler.prototype.handleText = function() {};\r\nBaseHandler.prototype.handleNode = function() {};\r\n\r\n\r\n/**\r\n * A simple pass through handler that does nothing except for\r\n * ignoring all input it receives.\r\n *\r\n * This is used to ignore unknown elements and\r\n * attributes.\r\n */\r\nfunction NoopHandler() { }\r\n\r\nNoopHandler.prototype = new BaseHandler();\r\n\r\nNoopHandler.prototype.handleNode = function() {\r\n  return this;\r\n};\r\n\r\nfunction BodyHandler() {}\r\n\r\nBodyHandler.prototype = new BaseHandler();\r\n\r\nBodyHandler.prototype.handleText = function(text) {\r\n  this.body = (this.body || '') + text;\r\n};\r\n\r\nfunction ReferenceHandler(property, context) {\r\n  this.property = property;\r\n  this.context = context;\r\n}\r\n\r\nReferenceHandler.prototype = new BodyHandler();\r\n\r\nReferenceHandler.prototype.handleNode = function(node) {\r\n\r\n  if (this.element) {\r\n    throw new Error('expected no sub nodes');\r\n  } else {\r\n    this.element = this.createReference(node);\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nReferenceHandler.prototype.handleEnd = function() {\r\n  this.element.id = this.body;\r\n};\r\n\r\nReferenceHandler.prototype.createReference = function(node) {\r\n  return {\r\n    property: this.property.ns.name,\r\n    id: ''\r\n  };\r\n};\r\n\r\nfunction ValueHandler(propertyDesc, element) {\r\n  this.element = element;\r\n  this.propertyDesc = propertyDesc;\r\n}\r\n\r\nValueHandler.prototype = new BodyHandler();\r\n\r\nValueHandler.prototype.handleEnd = function() {\r\n\r\n  var value = this.body,\r\n      element = this.element,\r\n      propertyDesc = this.propertyDesc;\r\n\r\n  value = coerceType(propertyDesc.type, value);\r\n\r\n  if (propertyDesc.isMany) {\r\n    element.get(propertyDesc.name).push(value);\r\n  } else {\r\n    element.set(propertyDesc.name, value);\r\n  }\r\n};\r\n\r\n\r\nfunction BaseElementHandler() {}\r\n\r\nBaseElementHandler.prototype = Object.create(BodyHandler.prototype);\r\n\r\nBaseElementHandler.prototype.handleNode = function(node) {\r\n  var parser = this,\r\n      element = this.element,\r\n      id;\r\n\r\n  if (!element) {\r\n    element = this.element = this.createElement(node);\r\n    id = element.id;\r\n\r\n    if (id) {\r\n      this.context.addElement(id, element);\r\n    }\r\n  } else {\r\n    parser = this.handleChild(node);\r\n  }\r\n\r\n  return parser;\r\n};\r\n\r\n/**\r\n * @class XMLReader.ElementHandler\r\n *\r\n */\r\nfunction ElementHandler(model, type, context) {\r\n  this.model = model;\r\n  this.type = model.getType(type);\r\n  this.context = context;\r\n}\r\n\r\nElementHandler.prototype = new BaseElementHandler();\r\n\r\nElementHandler.prototype.addReference = function(reference) {\r\n  this.context.addReference(reference);\r\n};\r\n\r\nElementHandler.prototype.handleEnd = function() {\r\n\r\n  var value = this.body,\r\n      element = this.element,\r\n      descriptor = element.$descriptor,\r\n      bodyProperty = descriptor.bodyProperty;\r\n\r\n  if (bodyProperty && value !== undefined) {\r\n    value = coerceType(bodyProperty.type, value);\r\n    element.set(bodyProperty.name, value);\r\n  }\r\n};\r\n\r\n/**\r\n * Create an instance of the model from the given node.\r\n *\r\n * @param  {Element} node the xml node\r\n */\r\nElementHandler.prototype.createElement = function(node) {\r\n  var attributes = parseNodeAttributes(node),\r\n      Type = this.type,\r\n      descriptor = Type.$descriptor,\r\n      context = this.context,\r\n      instance = new Type({});\r\n\r\n  forEach(attributes, function(value, name) {\r\n\r\n    var prop = descriptor.propertiesByName[name],\r\n        values;\r\n\r\n    if (prop && prop.isReference) {\r\n\r\n      if (!prop.isMany) {\r\n        context.addReference({\r\n          element: instance,\r\n          property: prop.ns.name,\r\n          id: value\r\n        });\r\n      } else {\r\n        // IDREFS: parse references as whitespace-separated list\r\n        values = value.split(' ');\r\n\r\n        forEach(values, function(v) {\r\n          context.addReference({\r\n            element: instance,\r\n            property: prop.ns.name,\r\n            id: v\r\n          });\r\n        });\r\n      }\r\n\r\n    } else {\r\n      if (prop) {\r\n        value = coerceType(prop.type, value);\r\n      }\r\n\r\n      instance.set(name, value);\r\n    }\r\n  });\r\n\r\n  return instance;\r\n};\r\n\r\nElementHandler.prototype.getPropertyForNode = function(node) {\r\n\r\n  var nameNs = parseNameNs(node.local, node.prefix);\r\n\r\n  var type = this.type,\r\n      model = this.model,\r\n      descriptor = type.$descriptor;\r\n\r\n  var propertyName = nameNs.name,\r\n      property = descriptor.propertiesByName[propertyName],\r\n      elementTypeName,\r\n      elementType,\r\n      typeAnnotation;\r\n\r\n  // search for properties by name first\r\n\r\n  if (property) {\r\n\r\n    if (serializeAsType(property)) {\r\n      typeAnnotation = node.attributes[XSI_TYPE];\r\n\r\n      // xsi type is optional, if it does not exists the\r\n      // default type is assumed\r\n      if (typeAnnotation) {\r\n\r\n        elementTypeName = typeAnnotation.value;\r\n\r\n        // TODO: extract real name from attribute\r\n        elementType = model.getType(elementTypeName);\r\n\r\n        return assign({}, property, { effectiveType: elementType.$descriptor.name });\r\n      }\r\n    }\r\n\r\n    // search for properties by name first\r\n    return property;\r\n  }\r\n\r\n\r\n  var pkg = model.getPackage(nameNs.prefix);\r\n\r\n  if (pkg) {\r\n    elementTypeName = nameNs.prefix + ':' + aliasToName(nameNs.localName, descriptor.$pkg);\r\n    elementType = model.getType(elementTypeName);\r\n\r\n    // search for collection members later\r\n    property = find(descriptor.properties, function(p) {\r\n      return !p.isVirtual && !p.isReference && !p.isAttribute && elementType.hasType(p.type);\r\n    });\r\n\r\n    if (property) {\r\n      return assign({}, property, { effectiveType: elementType.$descriptor.name });\r\n    }\r\n  } else {\r\n    // parse unknown element (maybe extension)\r\n    property = find(descriptor.properties, function(p) {\r\n      return !p.isReference && !p.isAttribute && p.type === 'Element';\r\n    });\r\n\r\n    if (property) {\r\n      return property;\r\n    }\r\n  }\r\n\r\n  throw new Error('unrecognized element <' + nameNs.name + '>');\r\n};\r\n\r\nElementHandler.prototype.toString = function() {\r\n  return 'ElementDescriptor[' + this.type.$descriptor.name + ']';\r\n};\r\n\r\nElementHandler.prototype.valueHandler = function(propertyDesc, element) {\r\n  return new ValueHandler(propertyDesc, element);\r\n};\r\n\r\nElementHandler.prototype.referenceHandler = function(propertyDesc) {\r\n  return new ReferenceHandler(propertyDesc, this.context);\r\n};\r\n\r\nElementHandler.prototype.handler = function(type) {\r\n  if (type === 'Element') {\r\n    return new GenericElementHandler(this.model, type, this.context);\r\n  } else {\r\n    return new ElementHandler(this.model, type, this.context);\r\n  }\r\n};\r\n\r\n/**\r\n * Handle the child element parsing\r\n *\r\n * @param  {Element} node the xml node\r\n */\r\nElementHandler.prototype.handleChild = function(node) {\r\n  var propertyDesc, type, element, childHandler;\r\n\r\n  propertyDesc = this.getPropertyForNode(node);\r\n  element = this.element;\r\n\r\n  type = propertyDesc.effectiveType || propertyDesc.type;\r\n\r\n  if (isSimpleType(type)) {\r\n    return this.valueHandler(propertyDesc, element);\r\n  }\r\n\r\n  if (propertyDesc.isReference) {\r\n    childHandler = this.referenceHandler(propertyDesc).handleNode(node);\r\n  } else {\r\n    childHandler = this.handler(type).handleNode(node);\r\n  }\r\n\r\n  var newElement = childHandler.element;\r\n\r\n  // child handles may decide to skip elements\r\n  // by not returning anything\r\n  if (newElement !== undefined) {\r\n\r\n    if (propertyDesc.isMany) {\r\n      element.get(propertyDesc.name).push(newElement);\r\n    } else {\r\n      element.set(propertyDesc.name, newElement);\r\n    }\r\n\r\n    if (propertyDesc.isReference) {\r\n      assign(newElement, {\r\n        element: element\r\n      });\r\n\r\n      this.context.addReference(newElement);\r\n    } else {\r\n      // establish child -> parent relationship\r\n      newElement.$parent = element;\r\n    }\r\n  }\r\n\r\n  return childHandler;\r\n};\r\n\r\n\r\nfunction GenericElementHandler(model, type, context) {\r\n  this.model = model;\r\n  this.context = context;\r\n}\r\n\r\nGenericElementHandler.prototype = Object.create(BaseElementHandler.prototype);\r\n\r\nGenericElementHandler.prototype.createElement = function(node) {\r\n\r\n  var name = node.name,\r\n      prefix = node.prefix,\r\n      uri = node.ns[prefix],\r\n      attributes = node.attributes;\r\n\r\n  return this.model.createAny(name, uri, attributes);\r\n};\r\n\r\nGenericElementHandler.prototype.handleChild = function(node) {\r\n\r\n  var handler = new GenericElementHandler(this.model, 'Element', this.context).handleNode(node),\r\n      element = this.element;\r\n\r\n  var newElement = handler.element,\r\n      children;\r\n\r\n  if (newElement !== undefined) {\r\n    children = element.$children = element.$children || [];\r\n    children.push(newElement);\r\n\r\n    // establish child -> parent relationship\r\n    newElement.$parent = element;\r\n  }\r\n\r\n  return handler;\r\n};\r\n\r\nGenericElementHandler.prototype.handleText = function(text) {\r\n  this.body = this.body || '' + text;\r\n};\r\n\r\nGenericElementHandler.prototype.handleEnd = function() {\r\n  if (this.body) {\r\n    this.element.$body = this.body;\r\n  }\r\n};\r\n\r\n/**\r\n * A reader for a meta-model\r\n *\r\n * @param {Object} options\r\n * @param {Model} options.model used to read xml files\r\n * @param {Boolean} options.lax whether to make parse errors warnings\r\n */\r\nfunction XMLReader(options) {\r\n\r\n  if (options instanceof Moddle) {\r\n    options = {\r\n      model: options\r\n    };\r\n  }\r\n\r\n  assign(this, { lax: false }, options);\r\n}\r\n\r\n\r\nXMLReader.prototype.fromXML = function(xml, rootHandler, done) {\r\n\r\n  var model = this.model,\r\n      lax = this.lax,\r\n      context = new Context({\r\n        parseRoot: rootHandler\r\n      });\r\n\r\n  var parser = new SaxParser(true, { xmlns: true, trim: true }),\r\n      stack = new Stack();\r\n\r\n  rootHandler.context = context;\r\n\r\n  // push root handler\r\n  stack.push(rootHandler);\r\n\r\n\r\n  function resolveReferences() {\r\n\r\n    var elementsById = context.elementsById;\r\n    var references = context.references;\r\n\r\n    var i, r;\r\n\r\n    for (i = 0; !!(r = references[i]); i++) {\r\n      var element = r.element;\r\n      var reference = elementsById[r.id];\r\n      var property = element.$descriptor.propertiesByName[r.property];\r\n\r\n      if (!reference) {\r\n        context.addWarning({\r\n          message: 'unresolved reference <' + r.id + '>',\r\n          element: r.element,\r\n          property: r.property,\r\n          value: r.id\r\n        });\r\n      }\r\n\r\n      if (property.isMany) {\r\n        var collection = element.get(property.name),\r\n            idx = collection.indexOf(r);\r\n\r\n        // we replace an existing place holder (idx != -1) or\r\n        // append to the collection instead\r\n        if (idx === -1) {\r\n          idx = collection.length;\r\n        }\r\n\r\n        if (!reference) {\r\n          // remove unresolvable reference\r\n          collection.splice(idx, 1);\r\n        } else {\r\n          // add or update reference in collection\r\n          collection[idx] = reference;\r\n        }\r\n      } else {\r\n        element.set(property.name, reference);\r\n      }\r\n    }\r\n  }\r\n\r\n  function handleClose(tagName) {\r\n    stack.pop().handleEnd();\r\n  }\r\n\r\n  function handleOpen(node) {\r\n    var handler = stack.peek();\r\n\r\n    normalizeNamespaces(node, model);\r\n\r\n    try {\r\n      stack.push(handler.handleNode(node));\r\n    } catch (e) {\r\n\r\n      var line = this.line,\r\n          column = this.column;\r\n\r\n      var message =\r\n        'unparsable content <' + node.name + '> detected/n/t' +\r\n          'line: ' + line + '/n/t' +\r\n          'column: ' + column + '/n/t' +\r\n          'nested error: ' + e.message;\r\n\r\n      if (lax) {\r\n        context.addWarning({\r\n          message: message,\r\n          error: e\r\n        });\r\n\r\n        console.warn('could not parse node');\r\n        console.warn(e);\r\n\r\n        stack.push(new NoopHandler());\r\n      } else {\r\n        console.error('could not parse document');\r\n        console.error(e);\r\n\r\n        throw new Error(message);\r\n      }\r\n    }\r\n  }\r\n\r\n  function handleText(text) {\r\n    stack.peek().handleText(text);\r\n  }\r\n\r\n  parser.onopentag = handleOpen;\r\n  parser.oncdata = parser.ontext = handleText;\r\n  parser.onclosetag = handleClose;\r\n  parser.onend = resolveReferences;\r\n\r\n  // deferred parse XML to make loading really ascnchronous\r\n  // this ensures the execution environment (node or browser)\r\n  // is kept responsive and that certain optimization strategies\r\n  // can kick in\r\n  defer(function() {\r\n    var error;\r\n\r\n    try {\r\n      parser.write(xml).close();\r\n    } catch (e) {\r\n      error = e;\r\n    }\r\n\r\n    done(error, error ? undefined : rootHandler.element, context);\r\n  });\r\n};\r\n\r\nXMLReader.prototype.handler = function(name) {\r\n  return new ElementHandler(this.model, name);\r\n};\r\n\r\nmodule.exports = XMLReader;\r\nmodule.exports.ElementHandler = ElementHandler;","'use strict';\r\n\r\nvar map = require(121),\r\n    forEach = require(120),\r\n    isString = require(180),\r\n    filter = require(118),\r\n    assign = require(182);\r\n\r\nvar Types = require(197),\r\n    parseNameNs = require(194).parseName,\r\n    common = require(114),\r\n    nameToAlias = common.nameToAlias,\r\n    serializeAsType = common.serializeAsType,\r\n    serializeAsProperty = common.serializeAsProperty;\r\n\r\nvar XML_PREAMBLE = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>/n',\r\n    ESCAPE_CHARS = /(<|>|'|\"|&|/n/r|/n)/g,\r\n    DEFAULT_NS_MAP = common.DEFAULT_NS_MAP,\r\n    XSI_TYPE = common.XSI_TYPE;\r\n\r\n\r\nfunction nsName(ns) {\r\n  if (isString(ns)) {\r\n    return ns;\r\n  } else {\r\n    return (ns.prefix ? ns.prefix + ':' : '') + ns.localName;\r\n  }\r\n}\r\n\r\nfunction getElementNs(ns, descriptor) {\r\n  if (descriptor.isGeneric) {\r\n    return descriptor.name;\r\n  } else {\r\n    return assign({ localName: nameToAlias(descriptor.ns.localName, descriptor.$pkg) }, ns);\r\n  }\r\n}\r\n\r\nfunction getPropertyNs(ns, descriptor) {\r\n  return assign({ localName: descriptor.ns.localName }, ns);\r\n}\r\n\r\nfunction getSerializableProperties(element) {\r\n  var descriptor = element.$descriptor;\r\n\r\n  return filter(descriptor.properties, function(p) {\r\n    var name = p.name;\r\n\r\n    if (p.isVirtual) {\r\n      return false;\r\n    }\r\n\r\n    // do not serialize defaults\r\n    if (!element.hasOwnProperty(name)) {\r\n      return false;\r\n    }\r\n\r\n    var value = element[name];\r\n\r\n    // do not serialize default equals\r\n    if (value === p.default) {\r\n      return false;\r\n    }\r\n\r\n    return p.isMany ? value.length : true;\r\n  });\r\n}\r\n\r\nvar ESCAPE_MAP = {\r\n  '/n': '10',\r\n  '/n/r': '10',\r\n  '\"': '34',\r\n  '/'': '39',\r\n  '<': '60',\r\n  '>': '62',\r\n  '&': '38'\r\n};\r\n\r\n/**\r\n * Escape a string attribute to not contain any bad values (line breaks, '\"', ...)\r\n *\r\n * @param {String} str the string to escape\r\n * @return {String} the escaped string\r\n */\r\nfunction escapeAttr(str) {\r\n\r\n  // ensure we are handling strings here\r\n  str = isString(str) ? str : '' + str;\r\n\r\n  return str.replace(ESCAPE_CHARS, function(str) {\r\n    return '&#' + ESCAPE_MAP[str] + ';';\r\n  });\r\n}\r\n\r\nfunction filterAttributes(props) {\r\n  return filter(props, function(p) { return p.isAttr; });\r\n}\r\n\r\nfunction filterContained(props) {\r\n  return filter(props, function(p) { return !p.isAttr; });\r\n}\r\n\r\n\r\nfunction ReferenceSerializer(parent, ns) {\r\n  this.ns = ns;\r\n}\r\n\r\nReferenceSerializer.prototype.build = function(element) {\r\n  this.element = element;\r\n  return this;\r\n};\r\n\r\nReferenceSerializer.prototype.serializeTo = function(writer) {\r\n  writer\r\n    .appendIndent()\r\n    .append('<' + nsName(this.ns) + '>' + this.element.id + '</' + nsName(this.ns) + '>')\r\n    .appendNewLine();\r\n};\r\n\r\nfunction BodySerializer() {}\r\n\r\nBodySerializer.prototype.serializeValue = BodySerializer.prototype.serializeTo = function(writer) {\r\n  var escape = this.escape;\r\n\r\n  if (escape) {\r\n    writer.append('<![CDATA[');\r\n  }\r\n\r\n  writer.append(this.value);\r\n\r\n  if (escape) {\r\n    writer.append(']]>');\r\n  }\r\n};\r\n\r\nBodySerializer.prototype.build = function(prop, value) {\r\n  this.value = value;\r\n\r\n  if (prop.type === 'String' && value.search(ESCAPE_CHARS) !== -1) {\r\n    this.escape = true;\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nfunction ValueSerializer(ns) {\r\n  this.ns = ns;\r\n}\r\n\r\nValueSerializer.prototype = new BodySerializer();\r\n\r\nValueSerializer.prototype.serializeTo = function(writer) {\r\n\r\n  writer\r\n    .appendIndent()\r\n    .append('<' + nsName(this.ns) + '>');\r\n\r\n  this.serializeValue(writer);\r\n\r\n  writer\r\n    .append( '</' + nsName(this.ns) + '>')\r\n    .appendNewLine();\r\n};\r\n\r\nfunction ElementSerializer(parent, ns) {\r\n  this.body = [];\r\n  this.attrs = [];\r\n\r\n  this.parent = parent;\r\n  this.ns = ns;\r\n}\r\n\r\nElementSerializer.prototype.build = function(element) {\r\n  this.element = element;\r\n\r\n  var otherAttrs = this.parseNsAttributes(element);\r\n\r\n  if (!this.ns) {\r\n    this.ns = this.nsTagName(element.$descriptor);\r\n  }\r\n\r\n  if (element.$descriptor.isGeneric) {\r\n    this.parseGeneric(element);\r\n  } else {\r\n    var properties = getSerializableProperties(element);\r\n\r\n    this.parseAttributes(filterAttributes(properties));\r\n    this.parseContainments(filterContained(properties));\r\n\r\n    this.parseGenericAttributes(element, otherAttrs);\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nElementSerializer.prototype.nsTagName = function(descriptor) {\r\n  var effectiveNs = this.logNamespaceUsed(descriptor.ns);\r\n  return getElementNs(effectiveNs, descriptor);\r\n};\r\n\r\nElementSerializer.prototype.nsPropertyTagName = function(descriptor) {\r\n  var effectiveNs = this.logNamespaceUsed(descriptor.ns);\r\n  return getPropertyNs(effectiveNs, descriptor);\r\n};\r\n\r\nElementSerializer.prototype.isLocalNs = function(ns) {\r\n  return ns.uri === this.ns.uri;\r\n};\r\n\r\nElementSerializer.prototype.nsAttributeName = function(element) {\r\n\r\n  var ns;\r\n\r\n  if (isString(element)) {\r\n    ns = parseNameNs(element);\r\n  } else\r\n  if (element.ns) {\r\n    ns = element.ns;\r\n  }\r\n\r\n  var effectiveNs = this.logNamespaceUsed(ns);\r\n\r\n  // strip prefix if same namespace like parent\r\n  if (this.isLocalNs(effectiveNs)) {\r\n    return { localName: ns.localName };\r\n  } else {\r\n    return assign({ localName: ns.localName }, effectiveNs);\r\n  }\r\n};\r\n\r\nElementSerializer.prototype.parseGeneric = function(element) {\r\n\r\n  var self = this,\r\n      body = this.body,\r\n      attrs = this.attrs;\r\n\r\n  forEach(element, function(val, key) {\r\n\r\n    if (key === '$body') {\r\n      body.push(new BodySerializer().build({ type: 'String' }, val));\r\n    } else\r\n    if (key === '$children') {\r\n      forEach(val, function(child) {\r\n        body.push(new ElementSerializer(self).build(child));\r\n      });\r\n    } else\r\n    if (key.indexOf('$') !== 0) {\r\n      attrs.push({ name: key, value: escapeAttr(val) });\r\n    }\r\n  });\r\n};\r\n\r\n/**\r\n * Parse namespaces and return a list of left over generic attributes\r\n *\r\n * @param  {Object} element\r\n * @return {Array<Object>}\r\n */\r\nElementSerializer.prototype.parseNsAttributes = function(element) {\r\n  var self = this;\r\n\r\n  var genericAttrs = element.$attrs;\r\n\r\n  var attributes = [];\r\n\r\n  // parse namespace attributes first\r\n  // and log them. push non namespace attributes to a list\r\n  // and process them later\r\n  forEach(genericAttrs, function(value, name) {\r\n    var nameNs = parseNameNs(name);\r\n\r\n    if (nameNs.prefix === 'xmlns') {\r\n      self.logNamespace({ prefix: nameNs.localName, uri: value });\r\n    } else\r\n    if (!nameNs.prefix && nameNs.localName === 'xmlns') {\r\n      self.logNamespace({ uri: value });\r\n    } else {\r\n      attributes.push({ name: name, value: value });\r\n    }\r\n  });\r\n\r\n  return attributes;\r\n};\r\n\r\nElementSerializer.prototype.parseGenericAttributes = function(element, attributes) {\r\n\r\n  var self = this;\r\n\r\n  forEach(attributes, function(attr) {\r\n\r\n    // do not serialize xsi:type attribute\r\n    // it is set manually based on the actual implementation type\r\n    if (attr.name === XSI_TYPE) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      self.addAttribute(self.nsAttributeName(attr.name), attr.value);\r\n    } catch (e) {\r\n      console.warn('[writer] missing namespace information for ', attr.name, '=', attr.value, 'on', element, e);\r\n    }\r\n  });\r\n};\r\n\r\nElementSerializer.prototype.parseContainments = function(properties) {\r\n\r\n  var self = this,\r\n      body = this.body,\r\n      element = this.element;\r\n\r\n  forEach(properties, function(p) {\r\n    var value = element.get(p.name),\r\n        isReference = p.isReference,\r\n        isMany = p.isMany;\r\n\r\n    var ns = self.nsPropertyTagName(p);\r\n\r\n    if (!isMany) {\r\n      value = [ value ];\r\n    }\r\n\r\n    if (p.isBody) {\r\n      body.push(new BodySerializer().build(p, value[0]));\r\n    } else\r\n    if (Types.isSimple(p.type)) {\r\n      forEach(value, function(v) {\r\n        body.push(new ValueSerializer(ns).build(p, v));\r\n      });\r\n    } else\r\n    if (isReference) {\r\n      forEach(value, function(v) {\r\n        body.push(new ReferenceSerializer(self, ns).build(v));\r\n      });\r\n    } else {\r\n      // allow serialization via type\r\n      // rather than element name\r\n      var asType = serializeAsType(p),\r\n          asProperty = serializeAsProperty(p);\r\n\r\n      forEach(value, function(v) {\r\n        var serializer;\r\n\r\n        if (asType) {\r\n          serializer = new TypeSerializer(self, ns);\r\n        } else\r\n        if (asProperty) {\r\n          serializer = new ElementSerializer(self, ns);\r\n        } else {\r\n          serializer = new ElementSerializer(self);\r\n        }\r\n\r\n        body.push(serializer.build(v));\r\n      });\r\n    }\r\n  });\r\n};\r\n\r\nElementSerializer.prototype.getNamespaces = function() {\r\n  if (!this.parent) {\r\n    if (!this.namespaces) {\r\n      this.namespaces = {\r\n        prefixMap: {},\r\n        uriMap: {},\r\n        used: {}\r\n      };\r\n    }\r\n  } else {\r\n    this.namespaces = this.parent.getNamespaces();\r\n  }\r\n\r\n  return this.namespaces;\r\n};\r\n\r\nElementSerializer.prototype.logNamespace = function(ns) {\r\n  var namespaces = this.getNamespaces();\r\n\r\n  var existing = namespaces.uriMap[ns.uri];\r\n\r\n  if (!existing) {\r\n    namespaces.uriMap[ns.uri] = ns;\r\n  }\r\n\r\n  namespaces.prefixMap[ns.prefix] = ns.uri;\r\n\r\n  return ns;\r\n};\r\n\r\nElementSerializer.prototype.logNamespaceUsed = function(ns) {\r\n  var element = this.element,\r\n      model = element.$model,\r\n      namespaces = this.getNamespaces();\r\n\r\n  // ns may be\r\n  //\r\n  //   * prefix only\r\n  //   * prefix:uri\r\n\r\n  var prefix = ns.prefix;\r\n  var uri = ns.uri || DEFAULT_NS_MAP[prefix] ||\r\n            namespaces.prefixMap[prefix] || (model ? (model.getPackage(prefix) || {}).uri : null);\r\n\r\n  if (!uri) {\r\n    throw new Error('no namespace uri given for prefix <' + ns.prefix + '>');\r\n  }\r\n\r\n  ns = namespaces.uriMap[uri];\r\n\r\n  if (!ns) {\r\n    ns = this.logNamespace({ prefix: prefix, uri: uri });\r\n  }\r\n\r\n  if (!namespaces.used[ns.uri]) {\r\n    namespaces.used[ns.uri] = ns;\r\n  }\r\n\r\n  return ns;\r\n};\r\n\r\nElementSerializer.prototype.parseAttributes = function(properties) {\r\n  var self = this,\r\n      element = this.element;\r\n\r\n  forEach(properties, function(p) {\r\n    self.logNamespaceUsed(p.ns);\r\n\r\n    var value = element.get(p.name);\r\n\r\n    if (p.isReference) {\r\n\r\n      if (!p.isMany) {\r\n        value = value.id;\r\n      }\r\n      else {\r\n        var values = [];\r\n        forEach(value, function(v) {\r\n          values.push(v.id);\r\n        });\r\n        // IDREFS is a whitespace-separated list of references.\r\n        value = values.join(' ');\r\n      }\r\n\r\n    }\r\n\r\n    self.addAttribute(self.nsAttributeName(p), value);\r\n  });\r\n};\r\n\r\nElementSerializer.prototype.addAttribute = function(name, value) {\r\n  var attrs = this.attrs;\r\n\r\n  if (isString(value)) {\r\n    value = escapeAttr(value);\r\n  }\r\n\r\n  attrs.push({ name: name, value: value });\r\n};\r\n\r\nElementSerializer.prototype.serializeAttributes = function(writer) {\r\n  var attrs = this.attrs,\r\n      root = !this.parent,\r\n      namespaces = this.namespaces;\r\n\r\n  function collectNsAttrs() {\r\n    return map(namespaces.used, function(ns) {\r\n      var name = 'xmlns' + (ns.prefix ? ':' + ns.prefix : '');\r\n      return { name: name, value: ns.uri };\r\n    });\r\n  }\r\n\r\n  if (root) {\r\n    attrs = collectNsAttrs().concat(attrs);\r\n  }\r\n\r\n  forEach(attrs, function(a) {\r\n    writer\r\n      .append(' ')\r\n      .append(nsName(a.name)).append('=\"').append(a.value).append('\"');\r\n  });\r\n};\r\n\r\nElementSerializer.prototype.serializeTo = function(writer) {\r\n  var hasBody = this.body.length,\r\n      indent = !(this.body.length === 1 && this.body[0] instanceof BodySerializer);\r\n\r\n  writer\r\n    .appendIndent()\r\n    .append('<' + nsName(this.ns));\r\n\r\n  this.serializeAttributes(writer);\r\n\r\n  writer.append(hasBody ? '>' : ' />');\r\n\r\n  if (hasBody) {\r\n\r\n    if (indent) {\r\n      writer\r\n        .appendNewLine()\r\n        .indent();\r\n    }\r\n\r\n    forEach(this.body, function(b) {\r\n      b.serializeTo(writer);\r\n    });\r\n\r\n    if (indent) {\r\n      writer\r\n        .unindent()\r\n        .appendIndent();\r\n    }\r\n\r\n    writer.append('</' + nsName(this.ns) + '>');\r\n  }\r\n\r\n  writer.appendNewLine();\r\n};\r\n\r\n/**\r\n * A serializer for types that handles serialization of data types\r\n */\r\nfunction TypeSerializer(parent, ns) {\r\n  ElementSerializer.call(this, parent, ns);\r\n}\r\n\r\nTypeSerializer.prototype = new ElementSerializer();\r\n\r\nTypeSerializer.prototype.build = function(element) {\r\n  var descriptor = element.$descriptor;\r\n\r\n  this.element = element;\r\n\r\n  this.typeNs = this.nsTagName(descriptor);\r\n\r\n  // add xsi:type attribute to represent the elements\r\n  // actual type\r\n\r\n  var typeNs = this.typeNs,\r\n      pkg = element.$model.getPackage(typeNs.uri),\r\n      typePrefix = (pkg.xml && pkg.xml.typePrefix) || '';\r\n\r\n  this.addAttribute(this.nsAttributeName(XSI_TYPE),\r\n    (typeNs.prefix ? typeNs.prefix + ':' : '') +\r\n    typePrefix + descriptor.ns.localName);\r\n\r\n  // do the usual stuff\r\n  return ElementSerializer.prototype.build.call(this, element);\r\n};\r\n\r\nTypeSerializer.prototype.isLocalNs = function(ns) {\r\n  return ns.uri === this.typeNs.uri;\r\n};\r\n\r\nfunction SavingWriter() {\r\n  this.value = '';\r\n\r\n  this.write = function(str) {\r\n    this.value += str;\r\n  };\r\n}\r\n\r\nfunction FormatingWriter(out, format) {\r\n\r\n  var indent = [''];\r\n\r\n  this.append = function(str) {\r\n    out.write(str);\r\n\r\n    return this;\r\n  };\r\n\r\n  this.appendNewLine = function() {\r\n    if (format) {\r\n      out.write('/n');\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  this.appendIndent = function() {\r\n    if (format) {\r\n      out.write(indent.join('  '));\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  this.indent = function() {\r\n    indent.push('');\r\n    return this;\r\n  };\r\n\r\n  this.unindent = function() {\r\n    indent.pop();\r\n    return this;\r\n  };\r\n}\r\n\r\n/**\r\n * A writer for meta-model backed document trees\r\n *\r\n * @param {Object} options output options to pass into the writer\r\n */\r\nfunction XMLWriter(options) {\r\n\r\n  options = assign({ format: false, preamble: true }, options || {});\r\n\r\n  function toXML(tree, writer) {\r\n    var internalWriter = writer || new SavingWriter();\r\n    var formatingWriter = new FormatingWriter(internalWriter, options.format);\r\n\r\n    if (options.preamble) {\r\n      formatingWriter.append(XML_PREAMBLE);\r\n    }\r\n\r\n    new ElementSerializer().build(tree).serializeTo(formatingWriter);\r\n\r\n    if (!writer) {\r\n      return internalWriter.value;\r\n    }\r\n  }\r\n\r\n  return {\r\n    toXML: toXML\r\n  };\r\n}\r\n\r\nmodule.exports = XMLWriter;\r\n","/**\n * Gets the last element of `array`.\n *\n * @static\n * @memberOf _\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the last element of `array`.\n * @example\n *\n * _.last([1, 2, 3]);\n * // => 3\n */\nfunction last(array) {\n  var length = array ? array.length : 0;\n  return length ? array[length - 1] : undefined;\n}\n\nmodule.exports = last;\n","var arrayFilter = require(126),\n    baseCallback = require(132),\n    baseFilter = require(136),\n    isArray = require(177);\n\n/**\n * Iterates over elements of `collection`, returning an array of all elements\n * `predicate` returns truthy for. The predicate is bound to `thisArg` and\n * invoked with three arguments: (value, index|key, collection).\n *\n * If a property name is provided for `predicate` the created `_.property`\n * style callback returns the property value of the given element.\n *\n * If a value is also provided for `thisArg` the created `_.matchesProperty`\n * style callback returns `true` for elements that have a matching property\n * value, else `false`.\n *\n * If an object is provided for `predicate` the created `_.matches` style\n * callback returns `true` for elements that have the properties of the given\n * object, else `false`.\n *\n * @static\n * @memberOf _\n * @alias select\n * @category Collection\n * @param {Array|Object|string} collection The collection to iterate over.\n * @param {Function|Object|string} [predicate=_.identity] The function invoked\n *  per iteration.\n * @param {*} [thisArg] The `this` binding of `predicate`.\n * @returns {Array} Returns the new filtered array.\n * @example\n *\n * _.filter([4, 5, 6], function(n) {\n *   return n % 2 == 0;\n * });\n * // => [4, 6]\n *\n * var users = [\n *   { 'user': 'barney', 'age': 36, 'active': true },\n *   { 'user': 'fred',   'age': 40, 'active': false }\n * ];\n *\n * // using the `_.matches` callback shorthand\n * _.pluck(_.filter(users, { 'age': 36, 'active': true }), 'user');\n * // => ['barney']\n *\n * // using the `_.matchesProperty` callback shorthand\n * _.pluck(_.filter(users, 'active', false), 'user');\n * // => ['fred']\n *\n * // using the `_.property` callback shorthand\n * _.pluck(_.filter(users, 'active'), 'user');\n * // => ['barney']\n */\nfunction filter(collection, predicate, thisArg) {\n  var func = isArray(collection) ? arrayFilter : baseFilter;\n  predicate = baseCallback(predicate, thisArg, 3);\n  return func(collection, predicate);\n}\n\nmodule.exports = filter;\n","var baseEach = require(135),\n    createFind = require(157);\n\n/**\n * Iterates over elements of `collection`, returning the first element\n * `predicate` returns truthy for. The predicate is bound to `thisArg` and\n * invoked with three arguments: (value, index|key, collection).\n *\n * If a property name is provided for `predicate` the created `_.property`\n * style callback returns the property value of the given element.\n *\n * If a value is also provided for `thisArg` the created `_.matchesProperty`\n * style callback returns `true` for elements that have a matching property\n * value, else `false`.\n *\n * If an object is provided for `predicate` the created `_.matches` style\n * callback returns `true` for elements that have the properties of the given\n * object, else `false`.\n *\n * @static\n * @memberOf _\n * @alias detect\n * @category Collection\n * @param {Array|Object|string} collection The collection to search.\n * @param {Function|Object|string} [predicate=_.identity] The function invoked\n *  per iteration.\n * @param {*} [thisArg] The `this` binding of `predicate`.\n * @returns {*} Returns the matched element, else `undefined`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'age': 36, 'active': true },\n *   { 'user': 'fred',    'age': 40, 'active': false },\n *   { 'user': 'pebbles', 'age': 1,  'active': true }\n * ];\n *\n * _.result(_.find(users, function(chr) {\n *   return chr.age < 40;\n * }), 'user');\n * // => 'barney'\n *\n * // using the `_.matches` callback shorthand\n * _.result(_.find(users, { 'age': 1, 'active': true }), 'user');\n * // => 'pebbles'\n *\n * // using the `_.matchesProperty` callback shorthand\n * _.result(_.find(users, 'active', false), 'user');\n * // => 'fred'\n *\n * // using the `_.property` callback shorthand\n * _.result(_.find(users, 'active'), 'user');\n * // => 'barney'\n */\nvar find = createFind(baseEach);\n\nmodule.exports = find;\n","var arrayMap = require(127),\n    baseCallback = require(132),\n    baseMap = require(145),\n    isArray = require(177);\n\n/**\n * Creates an array of values by running each element in `collection` through\n * `iteratee`. The `iteratee` is bound to `thisArg` and invoked with three\n * arguments: (value, index|key, collection).\n *\n * If a property name is provided for `iteratee` the created `_.property`\n * style callback returns the property value of the given element.\n *\n * If a value is also provided for `thisArg` the created `_.matchesProperty`\n * style callback returns `true` for elements that have a matching property\n * value, else `false`.\n *\n * If an object is provided for `iteratee` the created `_.matches` style\n * callback returns `true` for elements that have the properties of the given\n * object, else `false`.\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `callback`, `chunk`, `clone`, `create`, `curry`, `curryRight`,\n * `drop`, `dropRight`, `every`, `fill`, `flatten`, `invert`, `max`, `min`,\n * `parseInt`, `slice`, `sortBy`, `take`, `takeRight`, `template`, `trim`,\n * `trimLeft`, `trimRight`, `trunc`, `random`, `range`, `sample`, `some`,\n * `sum`, `uniq`, and `words`\n *\n * @static\n * @memberOf _\n * @alias collect\n * @category Collection\n * @param {Array|Object|string} collection The collection to iterate over.\n * @param {Function|Object|string} [iteratee=_.identity] The function invoked\n *  per iteration.\n * @param {*} [thisArg] The `this` binding of `iteratee`.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function timesThree(n) {\n *   return n * 3;\n * }\n *\n * _.map([1, 2], timesThree);\n * // => [3, 6]\n *\n * _.map({ 'a': 1, 'b': 2 }, timesThree);\n * // => [3, 6] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // using the `_.property` callback shorthand\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee, thisArg) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  iteratee = baseCallback(iteratee, thisArg, 3);\n  return func(collection, iteratee);\n}\n\nmodule.exports = map;\n","var arrayReduce = require(128),\n    baseEach = require(135),\n    createReduce = require(159);\n\n/**\n * Reduces `collection` to a value which is the accumulated result of running\n * each element in `collection` through `iteratee`, where each successive\n * invocation is supplied the return value of the previous. If `accumulator`\n * is not provided the first element of `collection` is used as the initial\n * value. The `iteratee` is bound to `thisArg` and invoked with four arguments:\n * (accumulator, value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.reduce`, `_.reduceRight`, and `_.transform`.\n *\n * The guarded methods are:\n * `assign`, `defaults`, `includes`, `merge`, `sortByAll`, and `sortByOrder`\n *\n * @static\n * @memberOf _\n * @alias foldl, inject\n * @category Collection\n * @param {Array|Object|string} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {*} [thisArg] The `this` binding of `iteratee`.\n * @returns {*} Returns the accumulated value.\n * @example\n *\n * _.reduce([1, 2], function(total, n) {\n *   return total + n;\n * });\n * // => 3\n *\n * _.reduce({ 'a': 1, 'b': 2 }, function(result, n, key) {\n *   result[key] = n * 3;\n *   return result;\n * }, {});\n * // => { 'a': 3, 'b': 6 } (iteration order is not guaranteed)\n */\nvar reduce = createReduce(arrayReduce, baseEach);\n\nmodule.exports = reduce;\n","var baseDelay = require(134),\n    restParam = require(124);\n\n/**\n * Defers invoking the `func` until the current call stack has cleared. Any\n * additional arguments are provided to `func` when it is invoked.\n *\n * @static\n * @memberOf _\n * @category Function\n * @param {Function} func The function to defer.\n * @param {...*} [args] The arguments to invoke the function with.\n * @returns {number} Returns the timer id.\n * @example\n *\n * _.defer(function(text) {\n *   console.log(text);\n * }, 'deferred');\n * // logs 'deferred' after one or more milliseconds\n */\nvar defer = restParam(function(func, args) {\n  return baseDelay(func, 1, args);\n});\n\nmodule.exports = defer;\n","/**\n * A specialized version of `_.filter` for arrays without support for callback\n * shorthands and `this` binding.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array.length,\n      resIndex = -1,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[++resIndex] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n","/**\n * A specialized version of `_.map` for arrays without support for callback\n * shorthands and `this` binding.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","/**\n * A specialized version of `_.reduce` for arrays without support for callback\n * shorthands and `this` binding.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initFromArray] Specify using the first element of `array`\n *  as the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initFromArray) {\n  var index = -1,\n      length = array.length;\n\n  if (initFromArray && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayReduce;\n","/**\n * A specialized version of `_.some` for arrays without support for callback\n * shorthands and `this` binding.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arraySome;\n","var baseMatches = require(146),\n    baseMatchesProperty = require(147),\n    bindCallback = require(153),\n    identity = require(187),\n    property = require(188);\n\n/**\n * The base implementation of `_.callback` which supports specifying the\n * number of arguments to provide to `func`.\n *\n * @private\n * @param {*} [func=_.identity] The value to convert to a callback.\n * @param {*} [thisArg] The `this` binding of `func`.\n * @param {number} [argCount] The number of arguments to provide to `func`.\n * @returns {Function} Returns the callback.\n */\nfunction baseCallback(func, thisArg, argCount) {\n  var type = typeof func;\n  if (type == 'function') {\n    return thisArg === undefined\n      ? func\n      : bindCallback(func, thisArg, argCount);\n  }\n  if (func == null) {\n    return identity;\n  }\n  if (type == 'object') {\n    return baseMatches(func);\n  }\n  return thisArg === undefined\n    ? property(func)\n    : baseMatchesProperty(func, thisArg);\n}\n\nmodule.exports = baseCallback;\n","/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * The base implementation of `_.delay` and `_.defer` which accepts an index\n * of where to slice the arguments to provide to `func`.\n *\n * @private\n * @param {Function} func The function to delay.\n * @param {number} wait The number of milliseconds to delay invocation.\n * @param {Object} args The arguments provide to `func`.\n * @returns {number} Returns the timer id.\n */\nfunction baseDelay(func, wait, args) {\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  return setTimeout(function() { func.apply(undefined, args); }, wait);\n}\n\nmodule.exports = baseDelay;\n","var baseEach = require(135);\n\n/**\n * The base implementation of `_.filter` without support for callback\n * shorthands and `this` binding.\n *\n * @private\n * @param {Array|Object|string} collection The collection to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction baseFilter(collection, predicate) {\n  var result = [];\n  baseEach(collection, function(value, index, collection) {\n    if (predicate(value, index, collection)) {\n      result.push(value);\n    }\n  });\n  return result;\n}\n\nmodule.exports = baseFilter;\n","/**\n * The base implementation of `_.find`, `_.findLast`, `_.findKey`, and `_.findLastKey`,\n * without support for callback shorthands and `this` binding, which iterates\n * over `collection` using the provided `eachFunc`.\n *\n * @private\n * @param {Array|Object|string} collection The collection to search.\n * @param {Function} predicate The function invoked per iteration.\n * @param {Function} eachFunc The function to iterate over `collection`.\n * @param {boolean} [retKey] Specify returning the key of the found element\n *  instead of the element itself.\n * @returns {*} Returns the found element or its key, else `undefined`.\n */\nfunction baseFind(collection, predicate, eachFunc, retKey) {\n  var result;\n  eachFunc(collection, function(value, key, collection) {\n    if (predicate(value, key, collection)) {\n      result = retKey ? key : value;\n      return false;\n    }\n  });\n  return result;\n}\n\nmodule.exports = baseFind;\n","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for callback shorthands and `this` binding.\n *\n * @private\n * @param {Array} array The array to search.\n * @param {Function} predicate The function invoked per iteration.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromRight) {\n  var length = array.length,\n      index = fromRight ? length : -1;\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseFindIndex;\n","var toObject = require(174);\n\n/**\n * The base implementation of `get` without support for string paths\n * and default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} path The path of the property to get.\n * @param {string} [pathKey] The key representation of path.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path, pathKey) {\n  if (object == null) {\n    return;\n  }\n  if (pathKey !== undefined && pathKey in toObject(object)) {\n    path = [pathKey];\n  }\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[path[index++]];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n","var baseIsEqualDeep = require(143),\n    isObject = require(179),\n    isObjectLike = require(171);\n\n/**\n * The base implementation of `_.isEqual` without support for `this` binding\n * `customizer` functions.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {Function} [customizer] The function to customize comparing values.\n * @param {boolean} [isLoose] Specify performing partial comparisons.\n * @param {Array} [stackA] Tracks traversed `value` objects.\n * @param {Array} [stackB] Tracks traversed `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, customizer, isLoose, stackA, stackB) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObject(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, baseIsEqual, customizer, isLoose, stackA, stackB);\n}\n\nmodule.exports = baseIsEqual;\n","var equalArrays = require(160),\n    equalByTag = require(161),\n    equalObjects = require(162),\n    isArray = require(177),\n    isTypedArray = require(181);\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the [`toStringTag`](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} [customizer] The function to customize comparing objects.\n * @param {boolean} [isLoose] Specify performing partial comparisons.\n * @param {Array} [stackA=[]] Tracks traversed `value` objects.\n * @param {Array} [stackB=[]] Tracks traversed `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, equalFunc, customizer, isLoose, stackA, stackB) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = arrayTag,\n      othTag = arrayTag;\n\n  if (!objIsArr) {\n    objTag = objToString.call(object);\n    if (objTag == argsTag) {\n      objTag = objectTag;\n    } else if (objTag != objectTag) {\n      objIsArr = isTypedArray(object);\n    }\n  }\n  if (!othIsArr) {\n    othTag = objToString.call(other);\n    if (othTag == argsTag) {\n      othTag = objectTag;\n    } else if (othTag != objectTag) {\n      othIsArr = isTypedArray(other);\n    }\n  }\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && !(objIsArr || objIsObj)) {\n    return equalByTag(object, other, objTag);\n  }\n  if (!isLoose) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      return equalFunc(objIsWrapped ? object.value() : object, othIsWrapped ? other.value() : other, customizer, isLoose, stackA, stackB);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  // For more information on detecting circular references see https://es5.github.io/#JO.\n  stackA || (stackA = []);\n  stackB || (stackB = []);\n\n  var length = stackA.length;\n  while (length--) {\n    if (stackA[length] == object) {\n      return stackB[length] == other;\n    }\n  }\n  // Add `object` and `other` to the stack of traversed objects.\n  stackA.push(object);\n  stackB.push(other);\n\n  var result = (objIsArr ? equalArrays : equalObjects)(object, other, equalFunc, customizer, isLoose, stackA, stackB);\n\n  stackA.pop();\n  stackB.pop();\n\n  return result;\n}\n\nmodule.exports = baseIsEqualDeep;\n","var baseIsEqual = require(142),\n    toObject = require(174);\n\n/**\n * The base implementation of `_.isMatch` without support for callback\n * shorthands and `this` binding.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Array} matchData The propery names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparing objects.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = toObject(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var result = customizer ? customizer(objValue, srcValue, key) : undefined;\n      if (!(result === undefined ? baseIsEqual(srcValue, objValue, customizer, true) : result)) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nmodule.exports = baseIsMatch;\n","var baseEach = require(135),\n    isArrayLike = require(166);\n\n/**\n * The base implementation of `_.map` without support for callback shorthands\n * and `this` binding.\n *\n * @private\n * @param {Array|Object|string} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nmodule.exports = baseMap;\n","var baseIsMatch = require(144),\n    getMatchData = require(164),\n    toObject = require(174);\n\n/**\n * The base implementation of `_.matches` which does not clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    var key = matchData[0][0],\n        value = matchData[0][1];\n\n    return function(object) {\n      if (object == null) {\n        return false;\n      }\n      return object[key] === value && (value !== undefined || (key in toObject(object)));\n    };\n  }\n  return function(object) {\n    return baseIsMatch(object, matchData);\n  };\n}\n\nmodule.exports = baseMatches;\n","var baseGet = require(141),\n    baseIsEqual = require(142),\n    baseSlice = require(151),\n    isArray = require(177),\n    isKey = require(169),\n    isStrictComparable = require(172),\n    last = require(117),\n    toObject = require(174),\n    toPath = require(175);\n\n/**\n * The base implementation of `_.matchesProperty` which does not clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to compare.\n * @returns {Function} Returns the new function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  var isArr = isArray(path),\n      isCommon = isKey(path) && isStrictComparable(srcValue),\n      pathKey = (path + '');\n\n  path = toPath(path);\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    var key = pathKey;\n    object = toObject(object);\n    if ((isArr || !isCommon) && !(key in object)) {\n      object = path.length == 1 ? object : baseGet(object, baseSlice(path, 0, -1));\n      if (object == null) {\n        return false;\n      }\n      key = last(path);\n      object = toObject(object);\n    }\n    return object[key] === srcValue\n      ? (srcValue !== undefined || (key in object))\n      : baseIsEqual(srcValue, object[key], undefined, true);\n  };\n}\n\nmodule.exports = baseMatchesProperty;\n","var baseGet = require(141),\n    toPath = require(175);\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new function.\n */\nfunction basePropertyDeep(path) {\n  var pathKey = (path + '');\n  path = toPath(path);\n  return function(object) {\n    return baseGet(object, path, pathKey);\n  };\n}\n\nmodule.exports = basePropertyDeep;\n","/**\n * The base implementation of `_.reduce` and `_.reduceRight` without support\n * for callback shorthands and `this` binding, which iterates over `collection`\n * using the provided `eachFunc`.\n *\n * @private\n * @param {Array|Object|string} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} accumulator The initial value.\n * @param {boolean} initFromCollection Specify using the first or last element\n *  of `collection` as the initial value.\n * @param {Function} eachFunc The function to iterate over `collection`.\n * @returns {*} Returns the accumulated value.\n */\nfunction baseReduce(collection, iteratee, accumulator, initFromCollection, eachFunc) {\n  eachFunc(collection, function(value, index, collection) {\n    accumulator = initFromCollection\n      ? (initFromCollection = false, value)\n      : iteratee(accumulator, value, index, collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseReduce;\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  start = start == null ? 0 : (+start || 0);\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = (end === undefined || end > length) ? length : (+end || 0);\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nmodule.exports = baseSlice;\n","var baseCallback = require(132),\n    baseFind = require(137),\n    baseFindIndex = require(138),\n    isArray = require(177);\n\n/**\n * Creates a `_.find` or `_.findLast` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new find function.\n */\nfunction createFind(eachFunc, fromRight) {\n  return function(collection, predicate, thisArg) {\n    predicate = baseCallback(predicate, thisArg, 3);\n    if (isArray(collection)) {\n      var index = baseFindIndex(collection, predicate, fromRight);\n      return index > -1 ? collection[index] : undefined;\n    }\n    return baseFind(collection, predicate, eachFunc);\n  };\n}\n\nmodule.exports = createFind;\n","var baseCallback = require(132),\n    baseReduce = require(150),\n    isArray = require(177);\n\n/**\n * Creates a function for `_.reduce` or `_.reduceRight`.\n *\n * @private\n * @param {Function} arrayFunc The function to iterate over an array.\n * @param {Function} eachFunc The function to iterate over a collection.\n * @returns {Function} Returns the new each function.\n */\nfunction createReduce(arrayFunc, eachFunc) {\n  return function(collection, iteratee, accumulator, thisArg) {\n    var initFromArray = arguments.length < 3;\n    return (typeof iteratee == 'function' && thisArg === undefined && isArray(collection))\n      ? arrayFunc(collection, iteratee, accumulator, initFromArray)\n      : baseReduce(collection, baseCallback(iteratee, thisArg, 4), accumulator, initFromArray, eachFunc);\n  };\n}\n\nmodule.exports = createReduce;\n","var arraySome = require(129);\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} [customizer] The function to customize comparing arrays.\n * @param {boolean} [isLoose] Specify performing partial comparisons.\n * @param {Array} [stackA] Tracks traversed `value` objects.\n * @param {Array} [stackB] Tracks traversed `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, equalFunc, customizer, isLoose, stackA, stackB) {\n  var index = -1,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isLoose && othLength > arrLength)) {\n    return false;\n  }\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index],\n        result = customizer ? customizer(isLoose ? othValue : arrValue, isLoose ? arrValue : othValue, index) : undefined;\n\n    if (result !== undefined) {\n      if (result) {\n        continue;\n      }\n      return false;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (isLoose) {\n      if (!arraySome(other, function(othValue) {\n            return arrValue === othValue || equalFunc(arrValue, othValue, customizer, isLoose, stackA, stackB);\n          })) {\n        return false;\n      }\n    } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, customizer, isLoose, stackA, stackB))) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = equalArrays;\n","/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    stringTag = '[object String]';\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} value The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag) {\n  switch (tag) {\n    case boolTag:\n    case dateTag:\n      // Coerce dates and booleans to numbers, dates to milliseconds and booleans\n      // to `1` or `0` treating invalid dates coerced to `NaN` as not equal.\n      return +object == +other;\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case numberTag:\n      // Treat `NaN` vs. `NaN` as equal.\n      return (object != +object)\n        ? other != +other\n        : object == +other;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings primitives and string\n      // objects as equal. See https://es5.github.io/#x15.10.6.4 for more details.\n      return object == (other + '');\n  }\n  return false;\n}\n\nmodule.exports = equalByTag;\n","var keys = require(183);\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} [customizer] The function to customize comparing values.\n * @param {boolean} [isLoose] Specify performing partial comparisons.\n * @param {Array} [stackA] Tracks traversed `value` objects.\n * @param {Array} [stackB] Tracks traversed `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, equalFunc, customizer, isLoose, stackA, stackB) {\n  var objProps = keys(object),\n      objLength = objProps.length,\n      othProps = keys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isLoose) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isLoose ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  var skipCtor = isLoose;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key],\n        result = customizer ? customizer(isLoose ? othValue : objValue, isLoose? objValue : othValue, key) : undefined;\n\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(result === undefined ? equalFunc(objValue, othValue, customizer, isLoose, stackA, stackB) : result)) {\n      return false;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (!skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = equalObjects;\n","var isStrictComparable = require(172),\n    pairs = require(185);\n\n/**\n * Gets the propery names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = pairs(object),\n      length = result.length;\n\n  while (length--) {\n    result[length][2] = isStrictComparable(result[length][1]);\n  }\n  return result;\n}\n\nmodule.exports = getMatchData;\n","var isArray = require(177),\n    toObject = require(174);\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = //.|/[(?:[^[/]]*|([\"'])(?:(?!/1)[^/n//]|//.)*?/1)/]/,\n    reIsPlainProp = /^/w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  var type = typeof value;\n  if ((type == 'string' && reIsPlainProp.test(value)) || type == 'number') {\n    return true;\n  }\n  if (isArray(value)) {\n    return false;\n  }\n  var result = !reIsDeepProp.test(value);\n  return result || (object != null && value in toObject(object));\n}\n\nmodule.exports = isKey;\n","var isObject = require(179);\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nmodule.exports = isStrictComparable;\n","var baseToString = require(152),\n    isArray = require(177);\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[/]]+|/[(?:(-?/d+(?:/./d+)?)|([\"'])((?:(?!/2)[^/n//]|//.)*?)/2)/]/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = ///(//)?/g;\n\n/**\n * Converts `value` to property path array if it's not one.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {Array} Returns the property path array.\n */\nfunction toPath(value) {\n  if (isArray(value)) {\n    return value;\n  }\n  var result = [];\n  baseToString(value).replace(rePropName, function(match, number, quote, string) {\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n}\n\nmodule.exports = toPath;\n","var isLength = require(170),\n    isObjectLike = require(171);\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dateTag] = typedArrayTags[errorTag] =\ntypedArrayTags[funcTag] = typedArrayTags[mapTag] =\ntypedArrayTags[numberTag] = typedArrayTags[objectTag] =\ntypedArrayTags[regexpTag] = typedArrayTags[setTag] =\ntypedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nfunction isTypedArray(value) {\n  return isObjectLike(value) && isLength(value.length) && !!typedArrayTags[objToString.call(value)];\n}\n\nmodule.exports = isTypedArray;\n","var keys = require(183),\n    toObject = require(174);\n\n/**\n * Creates a two dimensional array of the key-value pairs for `object`,\n * e.g. `[[key1, value1], [key2, value2]]`.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the new array of key-value pairs.\n * @example\n *\n * _.pairs({ 'barney': 36, 'fred': 40 });\n * // => [['barney', 36], ['fred', 40]] (iteration order is not guaranteed)\n */\nfunction pairs(object) {\n  object = toObject(object);\n\n  var index = -1,\n      props = keys(object),\n      length = props.length,\n      result = Array(length);\n\n  while (++index < length) {\n    var key = props[index];\n    result[index] = [key, object[key]];\n  }\n  return result;\n}\n\nmodule.exports = pairs;\n","var baseProperty = require(148),\n    basePropertyDeep = require(149),\n    isKey = require(169);\n\n/**\n * Creates a function that returns the property value at `path` on a\n * given object.\n *\n * @static\n * @memberOf _\n * @category Utility\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': { 'c': 2 } } },\n *   { 'a': { 'b': { 'c': 1 } } }\n * ];\n *\n * _.map(objects, _.property('a.b.c'));\n * // => [2, 1]\n *\n * _.pluck(_.sortBy(objects, _.property(['a', 'b', 'c'])), 'a.b.c');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(path) : basePropertyDeep(path);\n}\n\nmodule.exports = property;\n","module.exports = require(193);","'use strict';\r\n\r\nfunction Base() { }\r\n\r\nBase.prototype.get = function(name) {\r\n  return this.$model.properties.get(this, name);\r\n};\r\n\r\nBase.prototype.set = function(name, value) {\r\n  this.$model.properties.set(this, name, value);\r\n};\r\n\r\n\r\nmodule.exports = Base;","'use strict';\r\n\r\nvar pick = require(259),\r\n    assign = require(255),\r\n    forEach = require(200);\r\n\r\nvar parseNameNs = require(194).parseName;\r\n\r\n\r\nfunction DescriptorBuilder(nameNs) {\r\n  this.ns = nameNs;\r\n  this.name = nameNs.name;\r\n  this.allTypes = [];\r\n  this.properties = [];\r\n  this.propertiesByName = {};\r\n}\r\n\r\nmodule.exports = DescriptorBuilder;\r\n\r\n\r\nDescriptorBuilder.prototype.build = function() {\r\n  return pick(this, [ 'ns', 'name', 'allTypes', 'properties', 'propertiesByName', 'bodyProperty' ]);\r\n};\r\n\r\nDescriptorBuilder.prototype.addProperty = function(p, idx) {\r\n  this.addNamedProperty(p, true);\r\n\r\n  var properties = this.properties;\r\n\r\n  if (idx !== undefined) {\r\n    properties.splice(idx, 0, p);\r\n  } else {\r\n    properties.push(p);\r\n  }\r\n};\r\n\r\n\r\nDescriptorBuilder.prototype.replaceProperty = function(oldProperty, newProperty) {\r\n  var oldNameNs = oldProperty.ns;\r\n\r\n  var props = this.properties,\r\n      propertiesByName = this.propertiesByName,\r\n      rename = oldProperty.name !== newProperty.name;\r\n\r\n  if (oldProperty.isBody) {\r\n\r\n    if (!newProperty.isBody) {\r\n      throw new Error(\r\n        'property <' + newProperty.ns.name + '> must be body property ' +\r\n        'to refine <' + oldProperty.ns.name + '>');\r\n    }\r\n\r\n    // TODO: Check compatibility\r\n    this.setBodyProperty(newProperty, false);\r\n  }\r\n\r\n  // replacing the named property is intentional\r\n  // thus, validate only if this is a \"rename\" operation\r\n  this.addNamedProperty(newProperty, rename);\r\n\r\n  // replace old property at index with new one\r\n  var idx = props.indexOf(oldProperty);\r\n  if (idx === -1) {\r\n    throw new Error('property <' + oldNameNs.name + '> not found in property list');\r\n  }\r\n\r\n  props[idx] = newProperty;\r\n\r\n  // replace propertiesByName entry with new property\r\n  propertiesByName[oldNameNs.name] = propertiesByName[oldNameNs.localName] = newProperty;\r\n};\r\n\r\n\r\nDescriptorBuilder.prototype.redefineProperty = function(p) {\r\n\r\n  var nsPrefix = p.ns.prefix;\r\n  var parts = p.redefines.split('#');\r\n\r\n  var name = parseNameNs(parts[0], nsPrefix);\r\n  var attrName = parseNameNs(parts[1], name.prefix).name;\r\n\r\n  var redefinedProperty = this.propertiesByName[attrName];\r\n  if (!redefinedProperty) {\r\n    throw new Error('refined property <' + attrName + '> not found');\r\n  } else {\r\n    this.replaceProperty(redefinedProperty, p);\r\n  }\r\n\r\n  delete p.redefines;\r\n};\r\n\r\nDescriptorBuilder.prototype.addNamedProperty = function(p, validate) {\r\n  var ns = p.ns,\r\n      propsByName = this.propertiesByName;\r\n\r\n  if (validate) {\r\n    this.assertNotDefined(p, ns.name);\r\n    this.assertNotDefined(p, ns.localName);\r\n  }\r\n\r\n  propsByName[ns.name] = propsByName[ns.localName] = p;\r\n};\r\n\r\nDescriptorBuilder.prototype.removeNamedProperty = function(p) {\r\n  var ns = p.ns,\r\n      propsByName = this.propertiesByName;\r\n\r\n  delete propsByName[ns.name];\r\n  delete propsByName[ns.localName];\r\n};\r\n\r\nDescriptorBuilder.prototype.setBodyProperty = function(p, validate) {\r\n\r\n  if (validate && this.bodyProperty) {\r\n    throw new Error(\r\n      'body property defined multiple times ' +\r\n      '(<' + this.bodyProperty.ns.name + '>, <' + p.ns.name + '>)');\r\n  }\r\n\r\n  this.bodyProperty = p;\r\n};\r\n\r\nDescriptorBuilder.prototype.addIdProperty = function(name) {\r\n  var nameNs = parseNameNs(name, this.ns.prefix);\r\n\r\n  var p = {\r\n    name: nameNs.localName,\r\n    type: 'String',\r\n    isAttr: true,\r\n    ns: nameNs\r\n  };\r\n\r\n  // ensure that id is always the first attribute (if present)\r\n  this.addProperty(p, 0);\r\n};\r\n\r\nDescriptorBuilder.prototype.assertNotDefined = function(p, name) {\r\n  var propertyName = p.name,\r\n      definedProperty = this.propertiesByName[propertyName];\r\n\r\n  if (definedProperty) {\r\n    throw new Error(\r\n      'property <' + propertyName + '> already defined; ' +\r\n      'override of <' + definedProperty.definedBy.ns.name + '#' + definedProperty.ns.name + '> by ' +\r\n      '<' + p.definedBy.ns.name + '#' + p.ns.name + '> not allowed without redefines');\r\n  }\r\n};\r\n\r\nDescriptorBuilder.prototype.hasProperty = function(name) {\r\n  return this.propertiesByName[name];\r\n};\r\n\r\nDescriptorBuilder.prototype.addTrait = function(t) {\r\n\r\n  var allTypes = this.allTypes;\r\n\r\n  if (allTypes.indexOf(t) !== -1) {\r\n    return;\r\n  }\r\n\r\n  forEach(t.properties, function(p) {\r\n\r\n    // clone property to allow extensions\r\n    p = assign({}, p, {\r\n      name: p.ns.localName\r\n    });\r\n\r\n    Object.defineProperty(p, 'definedBy', {\r\n      value: t\r\n    });\r\n\r\n    // add redefine support\r\n    if (p.redefines) {\r\n      this.redefineProperty(p);\r\n    } else {\r\n      if (p.isBody) {\r\n        this.setBodyProperty(p);\r\n      }\r\n      this.addProperty(p);\r\n    }\r\n  }, this);\r\n\r\n  allTypes.push(t);\r\n};\r\n","'use strict';\r\n\r\nvar forEach = require(200);\r\n\r\nvar Base = require(190);\r\n\r\n\r\nfunction Factory(model, properties) {\r\n  this.model = model;\r\n  this.properties = properties;\r\n}\r\n\r\nmodule.exports = Factory;\r\n\r\n\r\nFactory.prototype.createType = function(descriptor) {\r\n\r\n  var model = this.model;\r\n\r\n  var props = this.properties,\r\n      prototype = Object.create(Base.prototype);\r\n\r\n  // initialize default values\r\n  forEach(descriptor.properties, function(p) {\r\n    if (!p.isMany && p.default !== undefined) {\r\n      prototype[p.name] = p.default;\r\n    }\r\n  });\r\n\r\n  props.defineModel(prototype, model);\r\n  props.defineDescriptor(prototype, descriptor);\r\n\r\n  var name = descriptor.ns.name;\r\n\r\n  /**\r\n   * The new type constructor\r\n   */\r\n  function ModdleElement(attrs) {\r\n    props.define(this, '$type', { value: name, enumerable: true });\r\n    props.define(this, '$attrs', { value: {} });\r\n    props.define(this, '$parent', { writable: true });\r\n\r\n    forEach(attrs, function(val, key) {\r\n      this.set(key, val);\r\n    }, this);\r\n  }\r\n\r\n  ModdleElement.prototype = prototype;\r\n\r\n  ModdleElement.hasType = prototype.$instanceOf = this.model.hasType;\r\n\r\n  // static links\r\n  props.defineModel(ModdleElement, model);\r\n  props.defineDescriptor(ModdleElement, descriptor);\r\n\r\n  return ModdleElement;\r\n};","'use strict';\r\n\r\nvar isString = require(253),\r\n    isObject = require(252),\r\n    forEach = require(200),\r\n    find = require(199);\r\n\r\n\r\nvar Factory = require(192),\r\n    Registry = require(196),\r\n    Properties = require(195);\r\n\r\nvar parseNameNs = require(194).parseName;\r\n\r\n\r\n//// Moddle implementation /////////////////////////////////////////////////\r\n\r\n/**\r\n * @class Moddle\r\n *\r\n * A model that can be used to create elements of a specific type.\r\n *\r\n * @example\r\n *\r\n * var Moddle = require('moddle');\r\n *\r\n * var pkg = {\r\n *   name: 'mypackage',\r\n *   prefix: 'my',\r\n *   types: [\r\n *     { name: 'Root' }\r\n *   ]\r\n * };\r\n *\r\n * var moddle = new Moddle([pkg]);\r\n *\r\n * @param {Array<Package>} packages  the packages to contain\r\n * @param {Object} options  additional options to pass to the model\r\n */\r\nfunction Moddle(packages, options) {\r\n\r\n  options = options || {};\r\n\r\n  this.properties = new Properties(this);\r\n\r\n  this.factory = new Factory(this, this.properties);\r\n  this.registry = new Registry(packages, this.properties, options);\r\n\r\n  this.typeCache = {};\r\n}\r\n\r\nmodule.exports = Moddle;\r\n\r\n\r\n/**\r\n * Create an instance of the specified type.\r\n *\r\n * @method Moddle#create\r\n *\r\n * @example\r\n *\r\n * var foo = moddle.create('my:Foo');\r\n * var bar = moddle.create('my:Bar', { id: 'BAR_1' });\r\n *\r\n * @param  {String|Object} descriptor the type descriptor or name know to the model\r\n * @param  {Object} attrs   a number of attributes to initialize the model instance with\r\n * @return {Object}         model instance\r\n */\r\nModdle.prototype.create = function(descriptor, attrs) {\r\n  var Type = this.getType(descriptor);\r\n\r\n  if (!Type) {\r\n    throw new Error('unknown type <' + descriptor + '>');\r\n  }\r\n\r\n  return new Type(attrs);\r\n};\r\n\r\n\r\n/**\r\n * Returns the type representing a given descriptor\r\n *\r\n * @method Moddle#getType\r\n *\r\n * @example\r\n *\r\n * var Foo = moddle.getType('my:Foo');\r\n * var foo = new Foo({ 'id' : 'FOO_1' });\r\n *\r\n * @param  {String|Object} descriptor the type descriptor or name know to the model\r\n * @return {Object}         the type representing the descriptor\r\n */\r\nModdle.prototype.getType = function(descriptor) {\r\n\r\n  var cache = this.typeCache;\r\n\r\n  var name = isString(descriptor) ? descriptor : descriptor.ns.name;\r\n\r\n  var type = cache[name];\r\n\r\n  if (!type) {\r\n    descriptor = this.registry.getEffectiveDescriptor(name);\r\n    type = cache[name] = this.factory.createType(descriptor);\r\n  }\r\n\r\n  return type;\r\n};\r\n\r\n\r\n/**\r\n * Creates an any-element type to be used within model instances.\r\n *\r\n * This can be used to create custom elements that lie outside the meta-model.\r\n * The created element contains all the meta-data required to serialize it\r\n * as part of meta-model elements.\r\n *\r\n * @method Moddle#createAny\r\n *\r\n * @example\r\n *\r\n * var foo = moddle.createAny('vendor:Foo', 'http://vendor', {\r\n *   value: 'bar'\r\n * });\r\n *\r\n * var container = moddle.create('my:Container', 'http://my', {\r\n *   any: [ foo ]\r\n * });\r\n *\r\n * // go ahead and serialize the stuff\r\n *\r\n *\r\n * @param  {String} name  the name of the element\r\n * @param  {String} nsUri the namespace uri of the element\r\n * @param  {Object} [properties] a map of properties to initialize the instance with\r\n * @return {Object} the any type instance\r\n */\r\nModdle.prototype.createAny = function(name, nsUri, properties) {\r\n\r\n  var nameNs = parseNameNs(name);\r\n\r\n  var element = {\r\n    $type: name\r\n  };\r\n\r\n  var descriptor = {\r\n    name: name,\r\n    isGeneric: true,\r\n    ns: {\r\n      prefix: nameNs.prefix,\r\n      localName: nameNs.localName,\r\n      uri: nsUri\r\n    }\r\n  };\r\n\r\n  this.properties.defineDescriptor(element, descriptor);\r\n  this.properties.defineModel(element, this);\r\n  this.properties.define(element, '$parent', { enumerable: false, writable: true });\r\n\r\n  forEach(properties, function(a, key) {\r\n    if (isObject(a) && a.value !== undefined) {\r\n      element[a.name] = a.value;\r\n    } else {\r\n      element[key] = a;\r\n    }\r\n  });\r\n\r\n  return element;\r\n};\r\n\r\n/**\r\n * Returns a registered package by uri or prefix\r\n *\r\n * @return {Object} the package\r\n */\r\nModdle.prototype.getPackage = function(uriOrPrefix) {\r\n  return this.registry.getPackage(uriOrPrefix);\r\n};\r\n\r\n/**\r\n * Returns a snapshot of all known packages\r\n *\r\n * @return {Object} the package\r\n */\r\nModdle.prototype.getPackages = function() {\r\n  return this.registry.getPackages();\r\n};\r\n\r\n/**\r\n * Returns the descriptor for an element\r\n */\r\nModdle.prototype.getElementDescriptor = function(element) {\r\n  return element.$descriptor;\r\n};\r\n\r\n/**\r\n * Returns true if the given descriptor or instance\r\n * represents the given type.\r\n *\r\n * May be applied to this, if element is omitted.\r\n */\r\nModdle.prototype.hasType = function(element, type) {\r\n  if (type === undefined) {\r\n    type = element;\r\n    element = this;\r\n  }\r\n\r\n  var descriptor = element.$model.getElementDescriptor(element);\r\n\r\n  return !!find(descriptor.allTypes, function(t) {\r\n    return t.name === type;\r\n  });\r\n};\r\n\r\n\r\n/**\r\n * Returns the descriptor of an elements named property\r\n */\r\nModdle.prototype.getPropertyDescriptor = function(element, property) {\r\n  return this.getElementDescriptor(element).propertiesByName[property];\r\n};\r\n","'use strict';\r\n\r\n/**\r\n * Parses a namespaced attribute name of the form (ns:)localName to an object,\r\n * given a default prefix to assume in case no explicit namespace is given.\r\n *\r\n * @param {String} name\r\n * @param {String} [defaultPrefix] the default prefix to take, if none is present.\r\n *\r\n * @return {Object} the parsed name\r\n */\r\nmodule.exports.parseName = function(name, defaultPrefix) {\r\n  var parts = name.split(/:/),\r\n      localName, prefix;\r\n\r\n  // no prefix (i.e. only local name)\r\n  if (parts.length === 1) {\r\n    localName = name;\r\n    prefix = defaultPrefix;\r\n  } else\r\n  // prefix + local name\r\n  if (parts.length === 2) {\r\n    localName = parts[1];\r\n    prefix = parts[0];\r\n  } else {\r\n    throw new Error('expected <prefix:localName> or <localName>, got ' + name);\r\n  }\r\n\r\n  name = (prefix ? prefix + ':' : '') + localName;\r\n\r\n  return {\r\n    name: name,\r\n    prefix: prefix,\r\n    localName: localName\r\n  };\r\n};","'use strict';\r\n\r\n\r\n/**\r\n * A utility that gets and sets properties of model elements.\r\n *\r\n * @param {Model} model\r\n */\r\nfunction Properties(model) {\r\n  this.model = model;\r\n}\r\n\r\nmodule.exports = Properties;\r\n\r\n\r\n/**\r\n * Sets a named property on the target element\r\n *\r\n * @param {Object} target\r\n * @param {String} name\r\n * @param {Object} value\r\n */\r\nProperties.prototype.set = function(target, name, value) {\r\n\r\n  var property = this.model.getPropertyDescriptor(target, name);\r\n\r\n  if (!property) {\r\n    target.$attrs[name] = value;\r\n  } else {\r\n    Object.defineProperty(target, property.name, {\r\n      enumerable: !property.isReference,\r\n      writable: true,\r\n      value: value\r\n    });\r\n  }\r\n};\r\n\r\n/**\r\n * Returns the named property of the given element\r\n *\r\n * @param  {Object} target\r\n * @param  {String} name\r\n *\r\n * @return {Object}\r\n */\r\nProperties.prototype.get = function(target, name) {\r\n\r\n  var property = this.model.getPropertyDescriptor(target, name);\r\n\r\n  if (!property) {\r\n    return target.$attrs[name];\r\n  }\r\n\r\n  var propertyName = property.name;\r\n\r\n  // check if access to collection property and lazily initialize it\r\n  if (!target[propertyName] && property.isMany) {\r\n    Object.defineProperty(target, propertyName, {\r\n      enumerable: !property.isReference,\r\n      writable: true,\r\n      value: []\r\n    });\r\n  }\r\n\r\n  return target[propertyName];\r\n};\r\n\r\n\r\n/**\r\n * Define a property on the target element\r\n *\r\n * @param  {Object} target\r\n * @param  {String} name\r\n * @param  {Object} options\r\n */\r\nProperties.prototype.define = function(target, name, options) {\r\n  Object.defineProperty(target, name, options);\r\n};\r\n\r\n\r\n/**\r\n * Define the descriptor for an element\r\n */\r\nProperties.prototype.defineDescriptor = function(target, descriptor) {\r\n  this.define(target, '$descriptor', { value: descriptor });\r\n};\r\n\r\n/**\r\n * Define the model for an element\r\n */\r\nProperties.prototype.defineModel = function(target, model) {\r\n  this.define(target, '$model', { value: model });\r\n};","'use strict';\r\n\r\nvar assign = require(255),\r\n    forEach = require(200);\r\n\r\nvar Types = require(197),\r\n    DescriptorBuilder = require(191);\r\n\r\nvar parseNameNs = require(194).parseName,\r\n    isBuiltInType = Types.isBuiltIn;\r\n\r\n\r\nfunction Registry(packages, properties, options) {\r\n  this.options = assign({ generateId: 'id' }, options || {});\r\n\r\n  this.packageMap = {};\r\n  this.typeMap = {};\r\n\r\n  this.packages = [];\r\n\r\n  this.properties = properties;\r\n\r\n  forEach(packages, this.registerPackage, this);\r\n}\r\n\r\nmodule.exports = Registry;\r\n\r\n\r\nRegistry.prototype.getPackage = function(uriOrPrefix) {\r\n  return this.packageMap[uriOrPrefix];\r\n};\r\n\r\nRegistry.prototype.getPackages = function() {\r\n  return this.packages;\r\n};\r\n\r\n\r\nRegistry.prototype.registerPackage = function(pkg) {\r\n\r\n  // copy package\r\n  pkg = assign({}, pkg);\r\n\r\n  // register types\r\n  forEach(pkg.types, function(descriptor) {\r\n    this.registerType(descriptor, pkg);\r\n  }, this);\r\n\r\n  this.packageMap[pkg.uri] = this.packageMap[pkg.prefix] = pkg;\r\n  this.packages.push(pkg);\r\n};\r\n\r\n\r\n/**\r\n * Register a type from a specific package with us\r\n */\r\nRegistry.prototype.registerType = function(type, pkg) {\r\n\r\n  type = assign({}, type, {\r\n    superClass: (type.superClass || []).slice(),\r\n    extends: (type.extends || []).slice(),\r\n    properties: (type.properties || []).slice()\r\n  });\r\n\r\n  var ns = parseNameNs(type.name, pkg.prefix),\r\n      name = ns.name,\r\n      propertiesByName = {};\r\n\r\n  // parse properties\r\n  forEach(type.properties, function(p) {\r\n\r\n    // namespace property names\r\n    var propertyNs = parseNameNs(p.name, ns.prefix),\r\n        propertyName = propertyNs.name;\r\n\r\n    // namespace property types\r\n    if (!isBuiltInType(p.type)) {\r\n      p.type = parseNameNs(p.type, propertyNs.prefix).name;\r\n    }\r\n\r\n    assign(p, {\r\n      ns: propertyNs,\r\n      name: propertyName\r\n    });\r\n\r\n    propertiesByName[propertyName] = p;\r\n  });\r\n\r\n  // update ns + name\r\n  assign(type, {\r\n    ns: ns,\r\n    name: name,\r\n    propertiesByName: propertiesByName\r\n  });\r\n\r\n  forEach(type.extends, function(extendsName) {\r\n    var extended = this.typeMap[extendsName];\r\n\r\n    extended.traits = extended.traits || [];\r\n    extended.traits.push(name);\r\n  }, this);\r\n\r\n  // link to package\r\n  this.definePackage(type, pkg);\r\n\r\n  // register\r\n  this.typeMap[name] = type;\r\n};\r\n\r\n\r\n/**\r\n * Traverse the type hierarchy from bottom to top.\r\n */\r\nRegistry.prototype.mapTypes = function(nsName, iterator) {\r\n\r\n  var type = isBuiltInType(nsName.name) ? { name: nsName.name } : this.typeMap[nsName.name];\r\n\r\n  var self = this;\r\n\r\n  /**\r\n   * Traverse the selected super type or trait\r\n   *\r\n   * @param {String} cls\r\n   */\r\n  function traverseSuper(cls) {\r\n    var parentNs = parseNameNs(cls, isBuiltInType(cls) ? '' : nsName.prefix);\r\n    self.mapTypes(parentNs, iterator);\r\n  }\r\n\r\n  if (!type) {\r\n    throw new Error('unknown type <' + nsName.name + '>');\r\n  }\r\n\r\n  forEach(type.superClass, traverseSuper);\r\n\r\n  iterator(type);\r\n\r\n  forEach(type.traits, traverseSuper);\r\n};\r\n\r\n\r\n/**\r\n * Returns the effective descriptor for a type.\r\n *\r\n * @param  {String} type the namespaced name (ns:localName) of the type\r\n *\r\n * @return {Descriptor} the resulting effective descriptor\r\n */\r\nRegistry.prototype.getEffectiveDescriptor = function(name) {\r\n\r\n  var nsName = parseNameNs(name);\r\n\r\n  var builder = new DescriptorBuilder(nsName);\r\n\r\n  this.mapTypes(nsName, function(type) {\r\n    builder.addTrait(type);\r\n  });\r\n\r\n  // check we have an id assigned\r\n  var id = this.options.generateId;\r\n  if (id && !builder.hasProperty(id)) {\r\n    builder.addIdProperty(id);\r\n  }\r\n\r\n  var descriptor = builder.build();\r\n\r\n  // define package link\r\n  this.definePackage(descriptor, descriptor.allTypes[descriptor.allTypes.length - 1].$pkg);\r\n\r\n  return descriptor;\r\n};\r\n\r\n\r\nRegistry.prototype.definePackage = function(target, pkg) {\r\n  this.properties.define(target, '$pkg', { value: pkg });\r\n};","'use strict';\r\n\r\n/**\r\n * Built-in moddle types\r\n */\r\nvar BUILTINS = {\r\n  String: true,\r\n  Boolean: true,\r\n  Integer: true,\r\n  Real: true,\r\n  Element: true\r\n};\r\n\r\n/**\r\n * Converters for built in types from string representations\r\n */\r\nvar TYPE_CONVERTERS = {\r\n  String: function(s) { return s; },\r\n  Boolean: function(s) { return s === 'true'; },\r\n  Integer: function(s) { return parseInt(s, 10); },\r\n  Real: function(s) { return parseFloat(s, 10); }\r\n};\r\n\r\n/**\r\n * Convert a type to its real representation\r\n */\r\nmodule.exports.coerceType = function(type, value) {\r\n\r\n  var converter = TYPE_CONVERTERS[type];\r\n\r\n  if (converter) {\r\n    return converter(value);\r\n  } else {\r\n    return value;\r\n  }\r\n};\r\n\r\n/**\r\n * Return whether the given type is built-in\r\n */\r\nmodule.exports.isBuiltIn = function(type) {\r\n  return !!BUILTINS[type];\r\n};\r\n\r\n/**\r\n * Return whether the given type is simple\r\n */\r\nmodule.exports.isSimple = function(type) {\r\n  return !!TYPE_CONVERTERS[type];\r\n};","var isArguments = require(249),\n    isArray = require(250),\n    isArrayLike = require(237),\n    isObjectLike = require(242);\n\n/**\n * The base implementation of `_.flatten` with added support for restricting\n * flattening and specifying the start index.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {boolean} [isDeep] Specify a deep flatten.\n * @param {boolean} [isStrict] Restrict flattening to arrays-like objects.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, isDeep, isStrict) {\n  var index = -1,\n      length = array.length,\n      resIndex = -1,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (isObjectLike(value) && isArrayLike(value) &&\n        (isStrict || isArray(value) || isArguments(value))) {\n      if (isDeep) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        value = baseFlatten(value, isDeep, isStrict);\n      }\n      var valIndex = -1,\n          valLength = value.length;\n\n      while (++valIndex < valLength) {\n        result[++resIndex] = value[valIndex];\n      }\n    } else if (!isStrict) {\n      result[++resIndex] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n","var baseFor = require(212),\n    keysIn = require(257);\n\n/**\n * The base implementation of `_.forIn` without support for callback\n * shorthands and `this` binding.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForIn(object, iteratee) {\n  return baseFor(object, iteratee, keysIn);\n}\n\nmodule.exports = baseForIn;\n","var toObject = require(247);\n\n/**\n * A specialized version of `_.pick` which picks `object` properties specified\n * by `props`.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} props The property names to pick.\n * @returns {Object} Returns the new object.\n */\nfunction pickByArray(object, props) {\n  object = toObject(object);\n\n  var index = -1,\n      length = props.length,\n      result = {};\n\n  while (++index < length) {\n    var key = props[index];\n    if (key in object) {\n      result[key] = object[key];\n    }\n  }\n  return result;\n}\n\nmodule.exports = pickByArray;\n","var baseForIn = require(213);\n\n/**\n * A specialized version of `_.pick` which picks `object` properties `predicate`\n * returns truthy for.\n *\n * @private\n * @param {Object} object The source object.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Object} Returns the new object.\n */\nfunction pickByCallback(object, predicate) {\n  var result = {};\n  baseForIn(object, function(value, key, object) {\n    if (predicate(value, key, object)) {\n      result[key] = value;\n    }\n  });\n  return result;\n}\n\nmodule.exports = pickByCallback;\n","var baseFlatten = require(211),\n    bindCallback = require(225),\n    pickByArray = require(244),\n    pickByCallback = require(245),\n    restParam = require(201);\n\n/**\n * Creates an object composed of the picked `object` properties. Property\n * names may be specified as individual arguments or as arrays of property\n * names. If `predicate` is provided it is invoked for each property of `object`\n * picking the properties `predicate` returns truthy for. The predicate is\n * bound to `thisArg` and invoked with three arguments: (value, key, object).\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {Function|...(string|string[])} [predicate] The function invoked per\n *  iteration or property names to pick, specified as individual property\n *  names or arrays of property names.\n * @param {*} [thisArg] The `this` binding of `predicate`.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'user': 'fred', 'age': 40 };\n *\n * _.pick(object, 'user');\n * // => { 'user': 'fred' }\n *\n * _.pick(object, _.isString);\n * // => { 'user': 'fred' }\n */\nvar pick = restParam(function(object, props) {\n  if (object == null) {\n    return {};\n  }\n  return typeof props[0] == 'function'\n    ? pickByCallback(object, bindCallback(props[0], props[1], 3))\n    : pickByArray(object, baseFlatten(props));\n});\n\nmodule.exports = pick;\n","(function (Buffer){\n// wrapper for non-node envs\n;(function (sax) {\n\nsax.parser = function (strict, opt) { return new SAXParser(strict, opt) }\nsax.SAXParser = SAXParser\nsax.SAXStream = SAXStream\nsax.createStream = createStream\n\n// When we pass the MAX_BUFFER_LENGTH position, start checking for buffer overruns.\n// When we check, schedule the next check for MAX_BUFFER_LENGTH - (max(buffer lengths)),\n// since that's the earliest that a buffer overrun could occur.  This way, checks are\n// as rare as required, but as often as necessary to ensure never crossing this bound.\n// Furthermore, buffers are only tested at most once per write(), so passing a very\n// large string into write() might have undesirable effects, but this is manageable by\n// the caller, so it is assumed to be safe.  Thus, a call to write() may, in the extreme\n// edge case, result in creating at most one complete copy of the string passed in.\n// Set to Infinity to have unlimited buffers.\nsax.MAX_BUFFER_LENGTH = 64 * 1024\n\nvar buffers = [\n  \"comment\", \"sgmlDecl\", \"textNode\", \"tagName\", \"doctype\",\n  \"procInstName\", \"procInstBody\", \"entity\", \"attribName\",\n  \"attribValue\", \"cdata\", \"script\"\n]\n\nsax.EVENTS = // for discoverability.\n  [ \"text\"\n  , \"processinginstruction\"\n  , \"sgmldeclaration\"\n  , \"doctype\"\n  , \"comment\"\n  , \"attribute\"\n  , \"opentag\"\n  , \"closetag\"\n  , \"opencdata\"\n  , \"cdata\"\n  , \"closecdata\"\n  , \"error\"\n  , \"end\"\n  , \"ready\"\n  , \"script\"\n  , \"opennamespace\"\n  , \"closenamespace\"\n  ]\n\nfunction SAXParser (strict, opt) {\n  if (!(this instanceof SAXParser)) return new SAXParser(strict, opt)\n\n  var parser = this\n  clearBuffers(parser)\n  parser.q = parser.c = \"\"\n  parser.bufferCheckPosition = sax.MAX_BUFFER_LENGTH\n  parser.opt = opt || {}\n  parser.opt.lowercase = parser.opt.lowercase || parser.opt.lowercasetags\n  parser.looseCase = parser.opt.lowercase ? \"toLowerCase\" : \"toUpperCase\"\n  parser.tags = []\n  parser.closed = parser.closedRoot = parser.sawRoot = false\n  parser.tag = parser.error = null\n  parser.strict = !!strict\n  parser.noscript = !!(strict || parser.opt.noscript)\n  parser.state = S.BEGIN\n  parser.ENTITIES = Object.create(sax.ENTITIES)\n  parser.attribList = []\n\n  // namespaces form a prototype chain.\n  // it always points at the current tag,\n  // which protos to its parent tag.\n  if (parser.opt.xmlns) parser.ns = Object.create(rootNS)\n\n  // mostly just for error reporting\n  parser.trackPosition = parser.opt.position !== false\n  if (parser.trackPosition) {\n    parser.position = parser.line = parser.column = 0\n  }\n  emit(parser, \"onready\")\n}\n\nif (!Object.create) Object.create = function (o) {\n  function f () { this.__proto__ = o }\n  f.prototype = o\n  return new f\n}\n\nif (!Object.getPrototypeOf) Object.getPrototypeOf = function (o) {\n  return o.__proto__\n}\n\nif (!Object.keys) Object.keys = function (o) {\n  var a = []\n  for (var i in o) if (o.hasOwnProperty(i)) a.push(i)\n  return a\n}\n\nfunction checkBufferLength (parser) {\n  var maxAllowed = Math.max(sax.MAX_BUFFER_LENGTH, 10)\n    , maxActual = 0\n  for (var i = 0, l = buffers.length; i < l; i ++) {\n    var len = parser[buffers[i]].length\n    if (len > maxAllowed) {\n      // Text/cdata nodes can get big, and since they're buffered,\n      // we can get here under normal conditions.\n      // Avoid issues by emitting the text node now,\n      // so at least it won't get any bigger.\n      switch (buffers[i]) {\n        case \"textNode\":\n          closeText(parser)\n        break\n\n        case \"cdata\":\n          emitNode(parser, \"oncdata\", parser.cdata)\n          parser.cdata = \"\"\n        break\n\n        case \"script\":\n          emitNode(parser, \"onscript\", parser.script)\n          parser.script = \"\"\n        break\n\n        default:\n          error(parser, \"Max buffer length exceeded: \"+buffers[i])\n      }\n    }\n    maxActual = Math.max(maxActual, len)\n  }\n  // schedule the next check for the earliest possible buffer overrun.\n  parser.bufferCheckPosition = (sax.MAX_BUFFER_LENGTH - maxActual)\n                             + parser.position\n}\n\nfunction clearBuffers (parser) {\n  for (var i = 0, l = buffers.length; i < l; i ++) {\n    parser[buffers[i]] = \"\"\n  }\n}\n\nfunction flushBuffers (parser) {\n  closeText(parser)\n  if (parser.cdata !== \"\") {\n    emitNode(parser, \"oncdata\", parser.cdata)\n    parser.cdata = \"\"\n  }\n  if (parser.script !== \"\") {\n    emitNode(parser, \"onscript\", parser.script)\n    parser.script = \"\"\n  }\n}\n\nSAXParser.prototype =\n  { end: function () { end(this) }\n  , write: write\n  , resume: function () { this.error = null; return this }\n  , close: function () { return this.write(null) }\n  , flush: function () { flushBuffers(this) }\n  }\n\ntry {\n  var Stream = require(\"stream\").Stream\n} catch (ex) {\n  var Stream = function () {}\n}\n\n\nvar streamWraps = sax.EVENTS.filter(function (ev) {\n  return ev !== \"error\" && ev !== \"end\"\n})\n\nfunction createStream (strict, opt) {\n  return new SAXStream(strict, opt)\n}\n\nfunction SAXStream (strict, opt) {\n  if (!(this instanceof SAXStream)) return new SAXStream(strict, opt)\n\n  Stream.apply(this)\n\n  this._parser = new SAXParser(strict, opt)\n  this.writable = true\n  this.readable = true\n\n\n  var me = this\n\n  this._parser.onend = function () {\n    me.emit(\"end\")\n  }\n\n  this._parser.onerror = function (er) {\n    me.emit(\"error\", er)\n\n    // if didn't throw, then means error was handled.\n    // go ahead and clear error, so we can write again.\n    me._parser.error = null\n  }\n\n  this._decoder = null;\n\n  streamWraps.forEach(function (ev) {\n    Object.defineProperty(me, \"on\" + ev, {\n      get: function () { return me._parser[\"on\" + ev] },\n      set: function (h) {\n        if (!h) {\n          me.removeAllListeners(ev)\n          return me._parser[\"on\"+ev] = h\n        }\n        me.on(ev, h)\n      },\n      enumerable: true,\n      configurable: false\n    })\n  })\n}\n\nSAXStream.prototype = Object.create(Stream.prototype,\n  { constructor: { value: SAXStream } })\n\nSAXStream.prototype.write = function (data) {\n  if (typeof Buffer === 'function' &&\n      typeof Buffer.isBuffer === 'function' &&\n      Buffer.isBuffer(data)) {\n    if (!this._decoder) {\n      var SD = require('string_decoder').StringDecoder\n      this._decoder = new SD('utf8')\n    }\n    data = this._decoder.write(data);\n  }\n\n  this._parser.write(data.toString())\n  this.emit(\"data\", data)\n  return true\n}\n\nSAXStream.prototype.end = function (chunk) {\n  if (chunk && chunk.length) this.write(chunk)\n  this._parser.end()\n  return true\n}\n\nSAXStream.prototype.on = function (ev, handler) {\n  var me = this\n  if (!me._parser[\"on\"+ev] && streamWraps.indexOf(ev) !== -1) {\n    me._parser[\"on\"+ev] = function () {\n      var args = arguments.length === 1 ? [arguments[0]]\n               : Array.apply(null, arguments)\n      args.splice(0, 0, ev)\n      me.emit.apply(me, args)\n    }\n  }\n\n  return Stream.prototype.on.call(me, ev, handler)\n}\n\n\n\n// character classes and tokens\nvar whitespace = \"/r/n/t \"\n  // this really needs to be replaced with character classes.\n  // XML allows all manner of ridiculous numbers and digits.\n  , number = \"0124356789\"\n  , letter = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\"\n  // (Letter | \"_\" | \":\")\n  , quote = \"'/\"\"\n  , entity = number+letter+\"#\"\n  , attribEnd = whitespace + \">\"\n  , CDATA = \"[CDATA[\"\n  , DOCTYPE = \"DOCTYPE\"\n  , XML_NAMESPACE = \"http://www.w3.org/XML/1998/namespace\"\n  , XMLNS_NAMESPACE = \"http://www.w3.org/2000/xmlns/\"\n  , rootNS = { xml: XML_NAMESPACE, xmlns: XMLNS_NAMESPACE }\n\n// turn all the string character sets into character class objects.\nwhitespace = charClass(whitespace)\nnumber = charClass(number)\nletter = charClass(letter)\n\n// http://www.w3.org/TR/REC-xml/#NT-NameStartChar\n// This implementation works on strings, a single character at a time\n// as such, it cannot ever support astral-plane characters (10000-EFFFF)\n// without a significant breaking change to either this  parser, or the\n// JavaScript language.  Implementation of an emoji-capable xml parser\n// is left as an exercise for the reader.\nvar nameStart = /[:_A-Za-z/u00C0-/u00D6/u00D8-/u00F6/u00F8-/u02FF/u0370-/u037D/u037F-/u1FFF/u200C-/u200D/u2070-/u218F/u2C00-/u2FEF/u3001-/uD7FF/uF900-/uFDCF/uFDF0-/uFFFD]/\n\nvar nameBody = /[:_A-Za-z/u00C0-/u00D6/u00D8-/u00F6/u00F8-/u02FF/u0370-/u037D/u037F-/u1FFF/u200C-/u200D/u2070-/u218F/u2C00-/u2FEF/u3001-/uD7FF/uF900-/uFDCF/uFDF0-/uFFFD/u00B7/u0300-/u036F/u203F-/u2040/./d-]/\n\nquote = charClass(quote)\nentity = charClass(entity)\nattribEnd = charClass(attribEnd)\n\nfunction charClass (str) {\n  return str.split(\"\").reduce(function (s, c) {\n    s[c] = true\n    return s\n  }, {})\n}\n\nfunction isRegExp (c) {\n  return Object.prototype.toString.call(c) === '[object RegExp]'\n}\n\nfunction is (charclass, c) {\n  return isRegExp(charclass) ? !!c.match(charclass) : charclass[c]\n}\n\nfunction not (charclass, c) {\n  return !is(charclass, c)\n}\n\nvar S = 0\nsax.STATE =\n{ BEGIN                     : S++\n, TEXT                      : S++ // general stuff\n, TEXT_ENTITY               : S++ // &amp and such.\n, OPEN_WAKA                 : S++ // <\n, SGML_DECL                 : S++ // <!BLARG\n, SGML_DECL_QUOTED          : S++ // <!BLARG foo \"bar\n, DOCTYPE                   : S++ // <!DOCTYPE\n, DOCTYPE_QUOTED            : S++ // <!DOCTYPE \"//blah\n, DOCTYPE_DTD               : S++ // <!DOCTYPE \"//blah\" [ ...\n, DOCTYPE_DTD_QUOTED        : S++ // <!DOCTYPE \"//blah\" [ \"foo\n, COMMENT_STARTING          : S++ // <!-\n, COMMENT                   : S++ // <!--\n, COMMENT_ENDING            : S++ // <!-- blah -\n, COMMENT_ENDED             : S++ // <!-- blah --\n, CDATA                     : S++ // <![CDATA[ something\n, CDATA_ENDING              : S++ // ]\n, CDATA_ENDING_2            : S++ // ]]\n, PROC_INST                 : S++ // <?hi\n, PROC_INST_BODY            : S++ // <?hi there\n, PROC_INST_ENDING          : S++ // <?hi \"there\" ?\n, OPEN_TAG                  : S++ // <strong\n, OPEN_TAG_SLASH            : S++ // <strong /\n, ATTRIB                    : S++ // <a\n, ATTRIB_NAME               : S++ // <a foo\n, ATTRIB_NAME_SAW_WHITE     : S++ // <a foo _\n, ATTRIB_VALUE              : S++ // <a foo=\n, ATTRIB_VALUE_QUOTED       : S++ // <a foo=\"bar\n, ATTRIB_VALUE_CLOSED       : S++ // <a foo=\"bar\"\n, ATTRIB_VALUE_UNQUOTED     : S++ // <a foo=bar\n, ATTRIB_VALUE_ENTITY_Q     : S++ // <foo bar=\"&quot;\"\n, ATTRIB_VALUE_ENTITY_U     : S++ // <foo bar=&quot;\n, CLOSE_TAG                 : S++ // </a\n, CLOSE_TAG_SAW_WHITE       : S++ // </a   >\n, SCRIPT                    : S++ // <script> ...\n, SCRIPT_ENDING             : S++ // <script> ... <\n}\n\nsax.ENTITIES =\n{ \"amp\" : \"&\"\n, \"gt\" : \">\"\n, \"lt\" : \"<\"\n, \"quot\" : \"/\"\"\n, \"apos\" : \"'\"\n, \"AElig\" : 198\n, \"Aacute\" : 193\n, \"Acirc\" : 194\n, \"Agrave\" : 192\n, \"Aring\" : 197\n, \"Atilde\" : 195\n, \"Auml\" : 196\n, \"Ccedil\" : 199\n, \"ETH\" : 208\n, \"Eacute\" : 201\n, \"Ecirc\" : 202\n, \"Egrave\" : 200\n, \"Euml\" : 203\n, \"Iacute\" : 205\n, \"Icirc\" : 206\n, \"Igrave\" : 204\n, \"Iuml\" : 207\n, \"Ntilde\" : 209\n, \"Oacute\" : 211\n, \"Ocirc\" : 212\n, \"Ograve\" : 210\n, \"Oslash\" : 216\n, \"Otilde\" : 213\n, \"Ouml\" : 214\n, \"THORN\" : 222\n, \"Uacute\" : 218\n, \"Ucirc\" : 219\n, \"Ugrave\" : 217\n, \"Uuml\" : 220\n, \"Yacute\" : 221\n, \"aacute\" : 225\n, \"acirc\" : 226\n, \"aelig\" : 230\n, \"agrave\" : 224\n, \"aring\" : 229\n, \"atilde\" : 227\n, \"auml\" : 228\n, \"ccedil\" : 231\n, \"eacute\" : 233\n, \"ecirc\" : 234\n, \"egrave\" : 232\n, \"eth\" : 240\n, \"euml\" : 235\n, \"iacute\" : 237\n, \"icirc\" : 238\n, \"igrave\" : 236\n, \"iuml\" : 239\n, \"ntilde\" : 241\n, \"oacute\" : 243\n, \"ocirc\" : 244\n, \"ograve\" : 242\n, \"oslash\" : 248\n, \"otilde\" : 245\n, \"ouml\" : 246\n, \"szlig\" : 223\n, \"thorn\" : 254\n, \"uacute\" : 250\n, \"ucirc\" : 251\n, \"ugrave\" : 249\n, \"uuml\" : 252\n, \"yacute\" : 253\n, \"yuml\" : 255\n, \"copy\" : 169\n, \"reg\" : 174\n, \"nbsp\" : 160\n, \"iexcl\" : 161\n, \"cent\" : 162\n, \"pound\" : 163\n, \"curren\" : 164\n, \"yen\" : 165\n, \"brvbar\" : 166\n, \"sect\" : 167\n, \"uml\" : 168\n, \"ordf\" : 170\n, \"laquo\" : 171\n, \"not\" : 172\n, \"shy\" : 173\n, \"macr\" : 175\n, \"deg\" : 176\n, \"plusmn\" : 177\n, \"sup1\" : 185\n, \"sup2\" : 178\n, \"sup3\" : 179\n, \"acute\" : 180\n, \"micro\" : 181\n, \"para\" : 182\n, \"middot\" : 183\n, \"cedil\" : 184\n, \"ordm\" : 186\n, \"raquo\" : 187\n, \"frac14\" : 188\n, \"frac12\" : 189\n, \"frac34\" : 190\n, \"iquest\" : 191\n, \"times\" : 215\n, \"divide\" : 247\n, \"OElig\" : 338\n, \"oelig\" : 339\n, \"Scaron\" : 352\n, \"scaron\" : 353\n, \"Yuml\" : 376\n, \"fnof\" : 402\n, \"circ\" : 710\n, \"tilde\" : 732\n, \"Alpha\" : 913\n, \"Beta\" : 914\n, \"Gamma\" : 915\n, \"Delta\" : 916\n, \"Epsilon\" : 917\n, \"Zeta\" : 918\n, \"Eta\" : 919\n, \"Theta\" : 920\n, \"Iota\" : 921\n, \"Kappa\" : 922\n, \"Lambda\" : 923\n, \"Mu\" : 924\n, \"Nu\" : 925\n, \"Xi\" : 926\n, \"Omicron\" : 927\n, \"Pi\" : 928\n, \"Rho\" : 929\n, \"Sigma\" : 931\n, \"Tau\" : 932\n, \"Upsilon\" : 933\n, \"Phi\" : 934\n, \"Chi\" : 935\n, \"Psi\" : 936\n, \"Omega\" : 937\n, \"alpha\" : 945\n, \"beta\" : 946\n, \"gamma\" : 947\n, \"delta\" : 948\n, \"epsilon\" : 949\n, \"zeta\" : 950\n, \"eta\" : 951\n, \"theta\" : 952\n, \"iota\" : 953\n, \"kappa\" : 954\n, \"lambda\" : 955\n, \"mu\" : 956\n, \"nu\" : 957\n, \"xi\" : 958\n, \"omicron\" : 959\n, \"pi\" : 960\n, \"rho\" : 961\n, \"sigmaf\" : 962\n, \"sigma\" : 963\n, \"tau\" : 964\n, \"upsilon\" : 965\n, \"phi\" : 966\n, \"chi\" : 967\n, \"psi\" : 968\n, \"omega\" : 969\n, \"thetasym\" : 977\n, \"upsih\" : 978\n, \"piv\" : 982\n, \"ensp\" : 8194\n, \"emsp\" : 8195\n, \"thinsp\" : 8201\n, \"zwnj\" : 8204\n, \"zwj\" : 8205\n, \"lrm\" : 8206\n, \"rlm\" : 8207\n, \"ndash\" : 8211\n, \"mdash\" : 8212\n, \"lsquo\" : 8216\n, \"rsquo\" : 8217\n, \"sbquo\" : 8218\n, \"ldquo\" : 8220\n, \"rdquo\" : 8221\n, \"bdquo\" : 8222\n, \"dagger\" : 8224\n, \"Dagger\" : 8225\n, \"bull\" : 8226\n, \"hellip\" : 8230\n, \"permil\" : 8240\n, \"prime\" : 8242\n, \"Prime\" : 8243\n, \"lsaquo\" : 8249\n, \"rsaquo\" : 8250\n, \"oline\" : 8254\n, \"frasl\" : 8260\n, \"euro\" : 8364\n, \"image\" : 8465\n, \"weierp\" : 8472\n, \"real\" : 8476\n, \"trade\" : 8482\n, \"alefsym\" : 8501\n, \"larr\" : 8592\n, \"uarr\" : 8593\n, \"rarr\" : 8594\n, \"darr\" : 8595\n, \"harr\" : 8596\n, \"crarr\" : 8629\n, \"lArr\" : 8656\n, \"uArr\" : 8657\n, \"rArr\" : 8658\n, \"dArr\" : 8659\n, \"hArr\" : 8660\n, \"forall\" : 8704\n, \"part\" : 8706\n, \"exist\" : 8707\n, \"empty\" : 8709\n, \"nabla\" : 8711\n, \"isin\" : 8712\n, \"notin\" : 8713\n, \"ni\" : 8715\n, \"prod\" : 8719\n, \"sum\" : 8721\n, \"minus\" : 8722\n, \"lowast\" : 8727\n, \"radic\" : 8730\n, \"prop\" : 8733\n, \"infin\" : 8734\n, \"ang\" : 8736\n, \"and\" : 8743\n, \"or\" : 8744\n, \"cap\" : 8745\n, \"cup\" : 8746\n, \"int\" : 8747\n, \"there4\" : 8756\n, \"sim\" : 8764\n, \"cong\" : 8773\n, \"asymp\" : 8776\n, \"ne\" : 8800\n, \"equiv\" : 8801\n, \"le\" : 8804\n, \"ge\" : 8805\n, \"sub\" : 8834\n, \"sup\" : 8835\n, \"nsub\" : 8836\n, \"sube\" : 8838\n, \"supe\" : 8839\n, \"oplus\" : 8853\n, \"otimes\" : 8855\n, \"perp\" : 8869\n, \"sdot\" : 8901\n, \"lceil\" : 8968\n, \"rceil\" : 8969\n, \"lfloor\" : 8970\n, \"rfloor\" : 8971\n, \"lang\" : 9001\n, \"rang\" : 9002\n, \"loz\" : 9674\n, \"spades\" : 9824\n, \"clubs\" : 9827\n, \"hearts\" : 9829\n, \"diams\" : 9830\n}\n\nObject.keys(sax.ENTITIES).forEach(function (key) {\n    var e = sax.ENTITIES[key]\n    var s = typeof e === 'number' ? String.fromCharCode(e) : e\n    sax.ENTITIES[key] = s\n})\n\nfor (var S in sax.STATE) sax.STATE[sax.STATE[S]] = S\n\n// shorthand\nS = sax.STATE\n\nfunction emit (parser, event, data) {\n  parser[event] && parser[event](data)\n}\n\nfunction emitNode (parser, nodeType, data) {\n  if (parser.textNode) closeText(parser)\n  emit(parser, nodeType, data)\n}\n\nfunction closeText (parser) {\n  parser.textNode = textopts(parser.opt, parser.textNode)\n  if (parser.textNode) emit(parser, \"ontext\", parser.textNode)\n  parser.textNode = \"\"\n}\n\nfunction textopts (opt, text) {\n  if (opt.trim) text = text.trim()\n  if (opt.normalize) text = text.replace(//s+/g, \" \")\n  return text\n}\n\nfunction error (parser, er) {\n  closeText(parser)\n  if (parser.trackPosition) {\n    er += \"/nLine: \"+parser.line+\n          \"/nColumn: \"+parser.column+\n          \"/nChar: \"+parser.c\n  }\n  er = new Error(er)\n  parser.error = er\n  emit(parser, \"onerror\", er)\n  return parser\n}\n\nfunction end (parser) {\n  if (!parser.closedRoot) strictFail(parser, \"Unclosed root tag\")\n  if ((parser.state !== S.BEGIN) && (parser.state !== S.TEXT)) error(parser, \"Unexpected end\")\n  closeText(parser)\n  parser.c = \"\"\n  parser.closed = true\n  emit(parser, \"onend\")\n  SAXParser.call(parser, parser.strict, parser.opt)\n  return parser\n}\n\nfunction strictFail (parser, message) {\n  if (typeof parser !== 'object' || !(parser instanceof SAXParser))\n    throw new Error('bad call to strictFail');\n  if (parser.strict) error(parser, message)\n}\n\nfunction newTag (parser) {\n  if (!parser.strict) parser.tagName = parser.tagName[parser.looseCase]()\n  var parent = parser.tags[parser.tags.length - 1] || parser\n    , tag = parser.tag = { name : parser.tagName, attributes : {} }\n\n  // will be overridden if tag contails an xmlns=\"foo\" or xmlns:foo=\"bar\"\n  if (parser.opt.xmlns) tag.ns = parent.ns\n  parser.attribList.length = 0\n}\n\nfunction qname (name, attribute) {\n  var i = name.indexOf(\":\")\n    , qualName = i < 0 ? [ \"\", name ] : name.split(\":\")\n    , prefix = qualName[0]\n    , local = qualName[1]\n\n  // <x \"xmlns\"=\"http://foo\">\n  if (attribute && name === \"xmlns\") {\n    prefix = \"xmlns\"\n    local = \"\"\n  }\n\n  return { prefix: prefix, local: local }\n}\n\nfunction attrib (parser) {\n  if (!parser.strict) parser.attribName = parser.attribName[parser.looseCase]()\n\n  if (parser.attribList.indexOf(parser.attribName) !== -1 ||\n      parser.tag.attributes.hasOwnProperty(parser.attribName)) {\n    return parser.attribName = parser.attribValue = \"\"\n  }\n\n  if (parser.opt.xmlns) {\n    var qn = qname(parser.attribName, true)\n      , prefix = qn.prefix\n      , local = qn.local\n\n    if (prefix === \"xmlns\") {\n      // namespace binding attribute; push the binding into scope\n      if (local === \"xml\" && parser.attribValue !== XML_NAMESPACE) {\n        strictFail( parser\n                  , \"xml: prefix must be bound to \" + XML_NAMESPACE + \"/n\"\n                  + \"Actual: \" + parser.attribValue )\n      } else if (local === \"xmlns\" && parser.attribValue !== XMLNS_NAMESPACE) {\n        strictFail( parser\n                  , \"xmlns: prefix must be bound to \" + XMLNS_NAMESPACE + \"/n\"\n                  + \"Actual: \" + parser.attribValue )\n      } else {\n        var tag = parser.tag\n          , parent = parser.tags[parser.tags.length - 1] || parser\n        if (tag.ns === parent.ns) {\n          tag.ns = Object.create(parent.ns)\n        }\n        tag.ns[local] = parser.attribValue\n      }\n    }\n\n    // defer onattribute events until all attributes have been seen\n    // so any new bindings can take effect; preserve attribute order\n    // so deferred events can be emitted in document order\n    parser.attribList.push([parser.attribName, parser.attribValue])\n  } else {\n    // in non-xmlns mode, we can emit the event right away\n    parser.tag.attributes[parser.attribName] = parser.attribValue\n    emitNode( parser\n            , \"onattribute\"\n            , { name: parser.attribName\n              , value: parser.attribValue } )\n  }\n\n  parser.attribName = parser.attribValue = \"\"\n}\n\nfunction openTag (parser, selfClosing) {\n  if (parser.opt.xmlns) {\n    // emit namespace binding events\n    var tag = parser.tag\n\n    // add namespace info to tag\n    var qn = qname(parser.tagName)\n    tag.prefix = qn.prefix\n    tag.local = qn.local\n    tag.uri = tag.ns[qn.prefix] || \"\"\n\n    if (tag.prefix && !tag.uri) {\n      strictFail(parser, \"Unbound namespace prefix: \"\n                       + JSON.stringify(parser.tagName))\n      tag.uri = qn.prefix\n    }\n\n    var parent = parser.tags[parser.tags.length - 1] || parser\n    if (tag.ns && parent.ns !== tag.ns) {\n      Object.keys(tag.ns).forEach(function (p) {\n        emitNode( parser\n                , \"onopennamespace\"\n                , { prefix: p , uri: tag.ns[p] } )\n      })\n    }\n\n    // handle deferred onattribute events\n    // Note: do not apply default ns to attributes:\n    //   http://www.w3.org/TR/REC-xml-names/#defaulting\n    for (var i = 0, l = parser.attribList.length; i < l; i ++) {\n      var nv = parser.attribList[i]\n      var name = nv[0]\n        , value = nv[1]\n        , qualName = qname(name, true)\n        , prefix = qualName.prefix\n        , local = qualName.local\n        , uri = prefix == \"\" ? \"\" : (tag.ns[prefix] || \"\")\n        , a = { name: name\n              , value: value\n              , prefix: prefix\n              , local: local\n              , uri: uri\n              }\n\n      // if there's any attributes with an undefined namespace,\n      // then fail on them now.\n      if (prefix && prefix != \"xmlns\" && !uri) {\n        strictFail(parser, \"Unbound namespace prefix: \"\n                         + JSON.stringify(prefix))\n        a.uri = prefix\n      }\n      parser.tag.attributes[name] = a\n      emitNode(parser, \"onattribute\", a)\n    }\n    parser.attribList.length = 0\n  }\n\n  parser.tag.isSelfClosing = !!selfClosing\n\n  // process the tag\n  parser.sawRoot = true\n  parser.tags.push(parser.tag)\n  emitNode(parser, \"onopentag\", parser.tag)\n  if (!selfClosing) {\n    // special case for <script> in non-strict mode.\n    if (!parser.noscript && parser.tagName.toLowerCase() === \"script\") {\n      parser.state = S.SCRIPT\n    } else {\n      parser.state = S.TEXT\n    }\n    parser.tag = null\n    parser.tagName = \"\"\n  }\n  parser.attribName = parser.attribValue = \"\"\n  parser.attribList.length = 0\n}\n\nfunction closeTag (parser) {\n  if (!parser.tagName) {\n    strictFail(parser, \"Weird empty close tag.\")\n    parser.textNode += \"</>\"\n    parser.state = S.TEXT\n    return\n  }\n\n  if (parser.script) {\n    if (parser.tagName !== \"script\") {\n      parser.script += \"</\" + parser.tagName + \">\"\n      parser.tagName = \"\"\n      parser.state = S.SCRIPT\n      return\n    }\n    emitNode(parser, \"onscript\", parser.script)\n    parser.script = \"\"\n  }\n\n  // first make sure that the closing tag actually exists.\n  // <a><b></c></b></a> will close everything, otherwise.\n  var t = parser.tags.length\n  var tagName = parser.tagName\n  if (!parser.strict) tagName = tagName[parser.looseCase]()\n  var closeTo = tagName\n  while (t --) {\n    var close = parser.tags[t]\n    if (close.name !== closeTo) {\n      // fail the first time in strict mode\n      strictFail(parser, \"Unexpected close tag\")\n    } else break\n  }\n\n  // didn't find it.  we already failed for strict, so just abort.\n  if (t < 0) {\n    strictFail(parser, \"Unmatched closing tag: \"+parser.tagName)\n    parser.textNode += \"</\" + parser.tagName + \">\"\n    parser.state = S.TEXT\n    return\n  }\n  parser.tagName = tagName\n  var s = parser.tags.length\n  while (s --> t) {\n    var tag = parser.tag = parser.tags.pop()\n    parser.tagName = parser.tag.name\n    emitNode(parser, \"onclosetag\", parser.tagName)\n\n    var x = {}\n    for (var i in tag.ns) x[i] = tag.ns[i]\n\n    var parent = parser.tags[parser.tags.length - 1] || parser\n    if (parser.opt.xmlns && tag.ns !== parent.ns) {\n      // remove namespace bindings introduced by tag\n      Object.keys(tag.ns).forEach(function (p) {\n        var n = tag.ns[p]\n        emitNode(parser, \"onclosenamespace\", { prefix: p, uri: n })\n      })\n    }\n  }\n  if (t === 0) parser.closedRoot = true\n  parser.tagName = parser.attribValue = parser.attribName = \"\"\n  parser.attribList.length = 0\n  parser.state = S.TEXT\n}\n\nfunction parseEntity (parser) {\n  var entity = parser.entity\n    , entityLC = entity.toLowerCase()\n    , num\n    , numStr = \"\"\n  if (parser.ENTITIES[entity])\n    return parser.ENTITIES[entity]\n  if (parser.ENTITIES[entityLC])\n    return parser.ENTITIES[entityLC]\n  entity = entityLC\n  if (entity.charAt(0) === \"#\") {\n    if (entity.charAt(1) === \"x\") {\n      entity = entity.slice(2)\n      num = parseInt(entity, 16)\n      numStr = num.toString(16)\n    } else {\n      entity = entity.slice(1)\n      num = parseInt(entity, 10)\n      numStr = num.toString(10)\n    }\n  }\n  entity = entity.replace(/^0+/, \"\")\n  if (numStr.toLowerCase() !== entity) {\n    strictFail(parser, \"Invalid character entity\")\n    return \"&\"+parser.entity + \";\"\n  }\n\n  return String.fromCodePoint(num)\n}\n\nfunction write (chunk) {\n  var parser = this\n  if (this.error) throw this.error\n  if (parser.closed) return error(parser,\n    \"Cannot write after close. Assign an onready handler.\")\n  if (chunk === null) return end(parser)\n  var i = 0, c = \"\"\n  while (parser.c = c = chunk.charAt(i++)) {\n    if (parser.trackPosition) {\n      parser.position ++\n      if (c === \"/n\") {\n        parser.line ++\n        parser.column = 0\n      } else parser.column ++\n    }\n    switch (parser.state) {\n\n      case S.BEGIN:\n        if (c === \"<\") {\n          parser.state = S.OPEN_WAKA\n          parser.startTagPosition = parser.position\n        } else if (not(whitespace,c)) {\n          // have to process this as a text node.\n          // weird, but happens.\n          strictFail(parser, \"Non-whitespace before first tag.\")\n          parser.textNode = c\n          parser.state = S.TEXT\n        }\n      continue\n\n      case S.TEXT:\n        if (parser.sawRoot && !parser.closedRoot) {\n          var starti = i-1\n          while (c && c!==\"<\" && c!==\"&\") {\n            c = chunk.charAt(i++)\n            if (c && parser.trackPosition) {\n              parser.position ++\n              if (c === \"/n\") {\n                parser.line ++\n                parser.column = 0\n              } else parser.column ++\n            }\n          }\n          parser.textNode += chunk.substring(starti, i-1)\n        }\n        if (c === \"<\") {\n          parser.state = S.OPEN_WAKA\n          parser.startTagPosition = parser.position\n        } else {\n          if (not(whitespace, c) && (!parser.sawRoot || parser.closedRoot))\n            strictFail(parser, \"Text data outside of root node.\")\n          if (c === \"&\") parser.state = S.TEXT_ENTITY\n          else parser.textNode += c\n        }\n      continue\n\n      case S.SCRIPT:\n        // only non-strict\n        if (c === \"<\") {\n          parser.state = S.SCRIPT_ENDING\n        } else parser.script += c\n      continue\n\n      case S.SCRIPT_ENDING:\n        if (c === \"/\") {\n          parser.state = S.CLOSE_TAG\n        } else {\n          parser.script += \"<\" + c\n          parser.state = S.SCRIPT\n        }\n      continue\n\n      case S.OPEN_WAKA:\n        // either a /, ?, !, or text is coming next.\n        if (c === \"!\") {\n          parser.state = S.SGML_DECL\n          parser.sgmlDecl = \"\"\n        } else if (is(whitespace, c)) {\n          // wait for it...\n        } else if (is(nameStart,c)) {\n          parser.state = S.OPEN_TAG\n          parser.tagName = c\n        } else if (c === \"/\") {\n          parser.state = S.CLOSE_TAG\n          parser.tagName = \"\"\n        } else if (c === \"?\") {\n          parser.state = S.PROC_INST\n          parser.procInstName = parser.procInstBody = \"\"\n        } else {\n          strictFail(parser, \"Unencoded <\")\n          // if there was some whitespace, then add that in.\n          if (parser.startTagPosition + 1 < parser.position) {\n            var pad = parser.position - parser.startTagPosition\n            c = new Array(pad).join(\" \") + c\n          }\n          parser.textNode += \"<\" + c\n          parser.state = S.TEXT\n        }\n      continue\n\n      case S.SGML_DECL:\n        if ((parser.sgmlDecl+c).toUpperCase() === CDATA) {\n          emitNode(parser, \"onopencdata\")\n          parser.state = S.CDATA\n          parser.sgmlDecl = \"\"\n          parser.cdata = \"\"\n        } else if (parser.sgmlDecl+c === \"--\") {\n          parser.state = S.COMMENT\n          parser.comment = \"\"\n          parser.sgmlDecl = \"\"\n        } else if ((parser.sgmlDecl+c).toUpperCase() === DOCTYPE) {\n          parser.state = S.DOCTYPE\n          if (parser.doctype || parser.sawRoot) strictFail(parser,\n            \"Inappropriately located doctype declaration\")\n          parser.doctype = \"\"\n          parser.sgmlDecl = \"\"\n        } else if (c === \">\") {\n          emitNode(parser, \"onsgmldeclaration\", parser.sgmlDecl)\n          parser.sgmlDecl = \"\"\n          parser.state = S.TEXT\n        } else if (is(quote, c)) {\n          parser.state = S.SGML_DECL_QUOTED\n          parser.sgmlDecl += c\n        } else parser.sgmlDecl += c\n      continue\n\n      case S.SGML_DECL_QUOTED:\n        if (c === parser.q) {\n          parser.state = S.SGML_DECL\n          parser.q = \"\"\n        }\n        parser.sgmlDecl += c\n      continue\n\n      case S.DOCTYPE:\n        if (c === \">\") {\n          parser.state = S.TEXT\n          emitNode(parser, \"ondoctype\", parser.doctype)\n          parser.doctype = true // just remember that we saw it.\n        } else {\n          parser.doctype += c\n          if (c === \"[\") parser.state = S.DOCTYPE_DTD\n          else if (is(quote, c)) {\n            parser.state = S.DOCTYPE_QUOTED\n            parser.q = c\n          }\n        }\n      continue\n\n      case S.DOCTYPE_QUOTED:\n        parser.doctype += c\n        if (c === parser.q) {\n          parser.q = \"\"\n          parser.state = S.DOCTYPE\n        }\n      continue\n\n      case S.DOCTYPE_DTD:\n        parser.doctype += c\n        if (c === \"]\") parser.state = S.DOCTYPE\n        else if (is(quote,c)) {\n          parser.state = S.DOCTYPE_DTD_QUOTED\n          parser.q = c\n        }\n      continue\n\n      case S.DOCTYPE_DTD_QUOTED:\n        parser.doctype += c\n        if (c === parser.q) {\n          parser.state = S.DOCTYPE_DTD\n          parser.q = \"\"\n        }\n      continue\n\n      case S.COMMENT:\n        if (c === \"-\") parser.state = S.COMMENT_ENDING\n        else parser.comment += c\n      continue\n\n      case S.COMMENT_ENDING:\n        if (c === \"-\") {\n          parser.state = S.COMMENT_ENDED\n          parser.comment = textopts(parser.opt, parser.comment)\n          if (parser.comment) emitNode(parser, \"oncomment\", parser.comment)\n          parser.comment = \"\"\n        } else {\n          parser.comment += \"-\" + c\n          parser.state = S.COMMENT\n        }\n      continue\n\n      case S.COMMENT_ENDED:\n        if (c !== \">\") {\n          strictFail(parser, \"Malformed comment\")\n          // allow <!-- blah -- bloo --> in non-strict mode,\n          // which is a comment of \" blah -- bloo \"\n          parser.comment += \"--\" + c\n          parser.state = S.COMMENT\n        } else parser.state = S.TEXT\n      continue\n\n      case S.CDATA:\n        if (c === \"]\") parser.state = S.CDATA_ENDING\n        else parser.cdata += c\n      continue\n\n      case S.CDATA_ENDING:\n        if (c === \"]\") parser.state = S.CDATA_ENDING_2\n        else {\n          parser.cdata += \"]\" + c\n          parser.state = S.CDATA\n        }\n      continue\n\n      case S.CDATA_ENDING_2:\n        if (c === \">\") {\n          if (parser.cdata) emitNode(parser, \"oncdata\", parser.cdata)\n          emitNode(parser, \"onclosecdata\")\n          parser.cdata = \"\"\n          parser.state = S.TEXT\n        } else if (c === \"]\") {\n          parser.cdata += \"]\"\n        } else {\n          parser.cdata += \"]]\" + c\n          parser.state = S.CDATA\n        }\n      continue\n\n      case S.PROC_INST:\n        if (c === \"?\") parser.state = S.PROC_INST_ENDING\n        else if (is(whitespace, c)) parser.state = S.PROC_INST_BODY\n        else parser.procInstName += c\n      continue\n\n      case S.PROC_INST_BODY:\n        if (!parser.procInstBody && is(whitespace, c)) continue\n        else if (c === \"?\") parser.state = S.PROC_INST_ENDING\n        else parser.procInstBody += c\n      continue\n\n      case S.PROC_INST_ENDING:\n        if (c === \">\") {\n          emitNode(parser, \"onprocessinginstruction\", {\n            name : parser.procInstName,\n            body : parser.procInstBody\n          })\n          parser.procInstName = parser.procInstBody = \"\"\n          parser.state = S.TEXT\n        } else {\n          parser.procInstBody += \"?\" + c\n          parser.state = S.PROC_INST_BODY\n        }\n      continue\n\n      case S.OPEN_TAG:\n        if (is(nameBody, c)) parser.tagName += c\n        else {\n          newTag(parser)\n          if (c === \">\") openTag(parser)\n          else if (c === \"/\") parser.state = S.OPEN_TAG_SLASH\n          else {\n            if (not(whitespace, c)) strictFail(\n              parser, \"Invalid character in tag name\")\n            parser.state = S.ATTRIB\n          }\n        }\n      continue\n\n      case S.OPEN_TAG_SLASH:\n        if (c === \">\") {\n          openTag(parser, true)\n          closeTag(parser)\n        } else {\n          strictFail(parser, \"Forward-slash in opening tag not followed by >\")\n          parser.state = S.ATTRIB\n        }\n      continue\n\n      case S.ATTRIB:\n        // haven't read the attribute name yet.\n        if (is(whitespace, c)) continue\n        else if (c === \">\") openTag(parser)\n        else if (c === \"/\") parser.state = S.OPEN_TAG_SLASH\n        else if (is(nameStart, c)) {\n          parser.attribName = c\n          parser.attribValue = \"\"\n          parser.state = S.ATTRIB_NAME\n        } else strictFail(parser, \"Invalid attribute name\")\n      continue\n\n      case S.ATTRIB_NAME:\n        if (c === \"=\") parser.state = S.ATTRIB_VALUE\n        else if (c === \">\") {\n          strictFail(parser, \"Attribute without value\")\n          parser.attribValue = parser.attribName\n          attrib(parser)\n          openTag(parser)\n        }\n        else if (is(whitespace, c)) parser.state = S.ATTRIB_NAME_SAW_WHITE\n        else if (is(nameBody, c)) parser.attribName += c\n        else strictFail(parser, \"Invalid attribute name\")\n      continue\n\n      case S.ATTRIB_NAME_SAW_WHITE:\n        if (c === \"=\") parser.state = S.ATTRIB_VALUE\n        else if (is(whitespace, c)) continue\n        else {\n          strictFail(parser, \"Attribute without value\")\n          parser.tag.attributes[parser.attribName] = \"\"\n          parser.attribValue = \"\"\n          emitNode(parser, \"onattribute\",\n                   { name : parser.attribName, value : \"\" })\n          parser.attribName = \"\"\n          if (c === \">\") openTag(parser)\n          else if (is(nameStart, c)) {\n            parser.attribName = c\n            parser.state = S.ATTRIB_NAME\n          } else {\n            strictFail(parser, \"Invalid attribute name\")\n            parser.state = S.ATTRIB\n          }\n        }\n      continue\n\n      case S.ATTRIB_VALUE:\n        if (is(whitespace, c)) continue\n        else if (is(quote, c)) {\n          parser.q = c\n          parser.state = S.ATTRIB_VALUE_QUOTED\n        } else {\n          strictFail(parser, \"Unquoted attribute value\")\n          parser.state = S.ATTRIB_VALUE_UNQUOTED\n          parser.attribValue = c\n        }\n      continue\n\n      case S.ATTRIB_VALUE_QUOTED:\n        if (c !== parser.q) {\n          if (c === \"&\") parser.state = S.ATTRIB_VALUE_ENTITY_Q\n          else parser.attribValue += c\n          continue\n        }\n        attrib(parser)\n        parser.q = \"\"\n        parser.state = S.ATTRIB_VALUE_CLOSED\n      continue\n\n      case S.ATTRIB_VALUE_CLOSED:\n        if (is(whitespace, c)) {\n          parser.state = S.ATTRIB\n        } else if (c === \">\") openTag(parser)\n        else if (c === \"/\") parser.state = S.OPEN_TAG_SLASH\n        else if (is(nameStart, c)) {\n          strictFail(parser, \"No whitespace between attributes\")\n          parser.attribName = c\n          parser.attribValue = \"\"\n          parser.state = S.ATTRIB_NAME\n        } else strictFail(parser, \"Invalid attribute name\")\n      continue\n\n      case S.ATTRIB_VALUE_UNQUOTED:\n        if (not(attribEnd,c)) {\n          if (c === \"&\") parser.state = S.ATTRIB_VALUE_ENTITY_U\n          else parser.attribValue += c\n          continue\n        }\n        attrib(parser)\n        if (c === \">\") openTag(parser)\n        else parser.state = S.ATTRIB\n      continue\n\n      case S.CLOSE_TAG:\n        if (!parser.tagName) {\n          if (is(whitespace, c)) continue\n          else if (not(nameStart, c)) {\n            if (parser.script) {\n              parser.script += \"</\" + c\n              parser.state = S.SCRIPT\n            } else {\n              strictFail(parser, \"Invalid tagname in closing tag.\")\n            }\n          } else parser.tagName = c\n        }\n        else if (c === \">\") closeTag(parser)\n        else if (is(nameBody, c)) parser.tagName += c\n        else if (parser.script) {\n          parser.script += \"</\" + parser.tagName\n          parser.tagName = \"\"\n          parser.state = S.SCRIPT\n        } else {\n          if (not(whitespace, c)) strictFail(parser,\n            \"Invalid tagname in closing tag\")\n          parser.state = S.CLOSE_TAG_SAW_WHITE\n        }\n      continue\n\n      case S.CLOSE_TAG_SAW_WHITE:\n        if (is(whitespace, c)) continue\n        if (c === \">\") closeTag(parser)\n        else strictFail(parser, \"Invalid characters in closing tag\")\n      continue\n\n      case S.TEXT_ENTITY:\n      case S.ATTRIB_VALUE_ENTITY_Q:\n      case S.ATTRIB_VALUE_ENTITY_U:\n        switch(parser.state) {\n          case S.TEXT_ENTITY:\n            var returnState = S.TEXT, buffer = \"textNode\"\n          break\n\n          case S.ATTRIB_VALUE_ENTITY_Q:\n            var returnState = S.ATTRIB_VALUE_QUOTED, buffer = \"attribValue\"\n          break\n\n          case S.ATTRIB_VALUE_ENTITY_U:\n            var returnState = S.ATTRIB_VALUE_UNQUOTED, buffer = \"attribValue\"\n          break\n        }\n        if (c === \";\") {\n          parser[buffer] += parseEntity(parser)\n          parser.entity = \"\"\n          parser.state = returnState\n        }\n        else if (is(entity, c)) parser.entity += c\n        else {\n          strictFail(parser, \"Invalid character entity\")\n          parser[buffer] += \"&\" + parser.entity + c\n          parser.entity = \"\"\n          parser.state = returnState\n        }\n      continue\n\n      default:\n        throw new Error(parser, \"Unknown state: \" + parser.state)\n    }\n  } // while\n  // cdata blocks can get very big under normal conditions. emit and move on.\n  // if (parser.state === S.CDATA && parser.cdata) {\n  //   emitNode(parser, \"oncdata\", parser.cdata)\n  //   parser.cdata = \"\"\n  // }\n  if (parser.position >= parser.bufferCheckPosition) checkBufferLength(parser)\n  return parser\n}\n\n/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */\nif (!String.fromCodePoint) {\n        (function() {\n                var stringFromCharCode = String.fromCharCode;\n                var floor = Math.floor;\n                var fromCodePoint = function() {\n                        var MAX_SIZE = 0x4000;\n                        var codeUnits = [];\n                        var highSurrogate;\n                        var lowSurrogate;\n                        var index = -1;\n                        var length = arguments.length;\n                        if (!length) {\n                                return '';\n                        }\n                        var result = '';\n                        while (++index < length) {\n                                var codePoint = Number(arguments[index]);\n                                if (\n                                        !isFinite(codePoint) || // `NaN`, `+Infinity`, or `-Infinity`\n                                        codePoint < 0 || // not a valid Unicode code point\n                                        codePoint > 0x10FFFF || // not a valid Unicode code point\n                                        floor(codePoint) != codePoint // not an integer\n                                ) {\n                                        throw RangeError('Invalid code point: ' + codePoint);\n                                }\n                                if (codePoint <= 0xFFFF) { // BMP code point\n                                        codeUnits.push(codePoint);\n                                } else { // Astral code point; split in surrogate halves\n                                        // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n                                        codePoint -= 0x10000;\n                                        highSurrogate = (codePoint >> 10) + 0xD800;\n                                        lowSurrogate = (codePoint % 0x400) + 0xDC00;\n                                        codeUnits.push(highSurrogate, lowSurrogate);\n                                }\n                                if (index + 1 == length || codeUnits.length > MAX_SIZE) {\n                                        result += stringFromCharCode.apply(null, codeUnits);\n                                        codeUnits.length = 0;\n                                }\n                        }\n                        return result;\n                };\n                if (Object.defineProperty) {\n                        Object.defineProperty(String, 'fromCodePoint', {\n                                'value': fromCodePoint,\n                                'configurable': true,\n                                'writable': true\n                        });\n                } else {\n                        String.fromCodePoint = fromCodePoint;\n                }\n        }());\n}\n\n})(typeof exports === \"undefined\" ? sax = {} : exports);\n\n}).call(this,undefined)\n//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9kbW4tbW9kZGxlL25vZGVfbW9kdWxlcy9tb2RkbGUteG1sL25vZGVfbW9kdWxlcy9zYXgvbGliL3NheC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIi8vIHdyYXBwZXIgZm9yIG5vbi1ub2RlIGVudnNcbjsoZnVuY3Rpb24gKHNheCkge1xuXG5zYXgucGFyc2VyID0gZnVuY3Rpb24gKHN0cmljdCwgb3B0KSB7IHJldHVybiBuZXcgU0FYUGFyc2VyKHN0cmljdCwgb3B0KSB9XG5zYXguU0FYUGFyc2VyID0gU0FYUGFyc2VyXG5zYXguU0FYU3RyZWFtID0gU0FYU3RyZWFtXG5zYXguY3JlYXRlU3RyZWFtID0gY3JlYXRlU3RyZWFtXG5cbi8vIFdoZW4gd2UgcGFzcyB0aGUgTUFYX0JVRkZFUl9MRU5HVEggcG9zaXRpb24sIHN0YXJ0IGNoZWNraW5nIGZvciBidWZmZXIgb3ZlcnJ1bnMuXG4vLyBXaGVuIHdlIGNoZWNrLCBzY2hlZHVsZSB0aGUgbmV4dCBjaGVjayBmb3IgTUFYX0JVRkZFUl9MRU5HVEggLSAobWF4KGJ1ZmZlciBsZW5ndGhzKSksXG4vLyBzaW5jZSB0aGF0J3MgdGhlIGVhcmxpZXN0IHRoYXQgYSBidWZmZXIgb3ZlcnJ1biBjb3VsZCBvY2N1ci4gIFRoaXMgd2F5LCBjaGVja3MgYXJlXG4vLyBhcyByYXJlIGFzIHJlcXVpcmVkLCBidXQgYXMgb2Z0ZW4gYXMgbmVjZXNzYXJ5IHRvIGVuc3VyZSBuZXZlciBjcm9zc2luZyB0aGlzIGJvdW5kLlxuLy8gRnVydGhlcm1vcmUsIGJ1ZmZlcnMgYXJlIG9ubHkgdGVzdGVkIGF0IG1vc3Qgb25jZSBwZXIgd3JpdGUoKSwgc28gcGFzc2luZyBhIHZlcnlcbi8vIGxhcmdlIHN0cmluZyBpbnRvIHdyaXRlKCkgbWlnaHQgaGF2ZSB1bmRlc2lyYWJsZSBlZmZlY3RzLCBidXQgdGhpcyBpcyBtYW5hZ2VhYmxlIGJ5XG4vLyB0aGUgY2FsbGVyLCBzbyBpdCBpcyBhc3N1bWVkIHRvIGJlIHNhZmUuICBUaHVzLCBhIGNhbGwgdG8gd3JpdGUoKSBtYXksIGluIHRoZSBleHRyZW1lXG4vLyBlZGdlIGNhc2UsIHJlc3VsdCBpbiBjcmVhdGluZyBhdCBtb3N0IG9uZSBjb21wbGV0ZSBjb3B5IG9mIHRoZSBzdHJpbmcgcGFzc2VkIGluLlxuLy8gU2V0IHRvIEluZmluaXR5IHRvIGhhdmUgdW5saW1pdGVkIGJ1ZmZlcnMuXG5zYXguTUFYX0JVRkZFUl9MRU5HVEggPSA2NCAqIDEwMjRcblxudmFyIGJ1ZmZlcnMgPSBbXG4gIFwiY29tbWVudFwiLCBcInNnbWxEZWNsXCIsIFwidGV4dE5vZGVcIiwgXCJ0YWdOYW1lXCIsIFwiZG9jdHlwZVwiLFxuICBcInByb2NJbnN0TmFtZVwiLCBcInByb2NJbnN0Qm9keVwiLCBcImVudGl0eVwiLCBcImF0dHJpYk5hbWVcIixcbiAgXCJhdHRyaWJWYWx1ZVwiLCBcImNkYXRhXCIsIFwic2NyaXB0XCJcbl1cblxuc2F4LkVWRU5UUyA9IC8vIGZvciBkaXNjb3ZlcmFiaWxpdHkuXG4gIFsgXCJ0ZXh0XCJcbiAgLCBcInByb2Nlc3NpbmdpbnN0cnVjdGlvblwiXG4gICwgXCJzZ21sZGVjbGFyYXRpb25cIlxuICAsIFwiZG9jdHlwZVwiXG4gICwgXCJjb21tZW50XCJcbiAgLCBcImF0dHJpYnV0ZVwiXG4gICwgXCJvcGVudGFnXCJcbiAgLCBcImNsb3NldGFnXCJcbiAgLCBcIm9wZW5jZGF0YVwiXG4gICwgXCJjZGF0YVwiXG4gICwgXCJjbG9zZWNkYXRhXCJcbiAgLCBcImVycm9yXCJcbiAgLCBcImVuZFwiXG4gICwgXCJyZWFkeVwiXG4gICwgXCJzY3JpcHRcIlxuICAsIFwib3Blbm5hbWVzcGFjZVwiXG4gICwgXCJjbG9zZW5hbWVzcGFjZVwiXG4gIF1cblxuZnVuY3Rpb24gU0FYUGFyc2VyIChzdHJpY3QsIG9wdCkge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU0FYUGFyc2VyKSkgcmV0dXJuIG5ldyBTQVhQYXJzZXIoc3RyaWN0LCBvcHQpXG5cbiAgdmFyIHBhcnNlciA9IHRoaXNcbiAgY2xlYXJCdWZmZXJzKHBhcnNlcilcbiAgcGFyc2VyLnEgPSBwYXJzZXIuYyA9IFwiXCJcbiAgcGFyc2VyLmJ1ZmZlckNoZWNrUG9zaXRpb24gPSBzYXguTUFYX0JVRkZFUl9MRU5HVEhcbiAgcGFyc2VyLm9wdCA9IG9wdCB8fCB7fVxuICBwYXJzZXIub3B0Lmxvd2VyY2FzZSA9IHBhcnNlci5vcHQubG93ZXJjYXNlIHx8IHBhcnNlci5vcHQubG93ZXJjYXNldGFnc1xuICBwYXJzZXIubG9vc2VDYXNlID0gcGFyc2VyLm9wdC5sb3dlcmNhc2UgPyBcInRvTG93ZXJDYXNlXCIgOiBcInRvVXBwZXJDYXNlXCJcbiAgcGFyc2VyLnRhZ3MgPSBbXVxuICBwYXJzZXIuY2xvc2VkID0gcGFyc2VyLmNsb3NlZFJvb3QgPSBwYXJzZXIuc2F3Um9vdCA9IGZhbHNlXG4gIHBhcnNlci50YWcgPSBwYXJzZXIuZXJyb3IgPSBudWxsXG4gIHBhcnNlci5zdHJpY3QgPSAhIXN0cmljdFxuICBwYXJzZXIubm9zY3JpcHQgPSAhIShzdHJpY3QgfHwgcGFyc2VyLm9wdC5ub3NjcmlwdClcbiAgcGFyc2VyLnN0YXRlID0gUy5CRUdJTlxuICBwYXJzZXIuRU5USVRJRVMgPSBPYmplY3QuY3JlYXRlKHNheC5FTlRJVElFUylcbiAgcGFyc2VyLmF0dHJpYkxpc3QgPSBbXVxuXG4gIC8vIG5hbWVzcGFjZXMgZm9ybSBhIHByb3RvdHlwZSBjaGFpbi5cbiAgLy8gaXQgYWx3YXlzIHBvaW50cyBhdCB0aGUgY3VycmVudCB0YWcsXG4gIC8vIHdoaWNoIHByb3RvcyB0byBpdHMgcGFyZW50IHRhZy5cbiAgaWYgKHBhcnNlci5vcHQueG1sbnMpIHBhcnNlci5ucyA9IE9iamVjdC5jcmVhdGUocm9vdE5TKVxuXG4gIC8vIG1vc3RseSBqdXN0IGZvciBlcnJvciByZXBvcnRpbmdcbiAgcGFyc2VyLnRyYWNrUG9zaXRpb24gPSBwYXJzZXIub3B0LnBvc2l0aW9uICE9PSBmYWxzZVxuICBpZiAocGFyc2VyLnRyYWNrUG9zaXRpb24pIHtcbiAgICBwYXJzZXIucG9zaXRpb24gPSBwYXJzZXIubGluZSA9IHBhcnNlci5jb2x1bW4gPSAwXG4gIH1cbiAgZW1pdChwYXJzZXIsIFwib25yZWFkeVwiKVxufVxuXG5pZiAoIU9iamVjdC5jcmVhdGUpIE9iamVjdC5jcmVhdGUgPSBmdW5jdGlvbiAobykge1xuICBmdW5jdGlvbiBmICgpIHsgdGhpcy5fX3Byb3RvX18gPSBvIH1cbiAgZi5wcm90b3R5cGUgPSBvXG4gIHJldHVybiBuZXcgZlxufVxuXG5pZiAoIU9iamVjdC5nZXRQcm90b3R5cGVPZikgT2JqZWN0LmdldFByb3RvdHlwZU9mID0gZnVuY3Rpb24gKG8pIHtcbiAgcmV0dXJuIG8uX19wcm90b19fXG59XG5cbmlmICghT2JqZWN0LmtleXMpIE9iamVjdC5rZXlzID0gZnVuY3Rpb24gKG8pIHtcbiAgdmFyIGEgPSBbXVxuICBmb3IgKHZhciBpIGluIG8pIGlmIChvLmhhc093blByb3BlcnR5KGkpKSBhLnB1c2goaSlcbiAgcmV0dXJuIGFcbn1cblxuZnVuY3Rpb24gY2hlY2tCdWZmZXJMZW5ndGggKHBhcnNlcikge1xuICB2YXIgbWF4QWxsb3dlZCA9IE1hdGgubWF4KHNheC5NQVhfQlVGRkVSX0xFTkdUSCwgMTApXG4gICAgLCBtYXhBY3R1YWwgPSAwXG4gIGZvciAodmFyIGkgPSAwLCBsID0gYnVmZmVycy5sZW5ndGg7IGkgPCBsOyBpICsrKSB7XG4gICAgdmFyIGxlbiA9IHBhcnNlcltidWZmZXJzW2ldXS5sZW5ndGhcbiAgICBpZiAobGVuID4gbWF4QWxsb3dlZCkge1xuICAgICAgLy8gVGV4dC9jZGF0YSBub2RlcyBjYW4gZ2V0IGJpZywgYW5kIHNpbmNlIHRoZXkncmUgYnVmZmVyZWQsXG4gICAgICAvLyB3ZSBjYW4gZ2V0IGhlcmUgdW5kZXIgbm9ybWFsIGNvbmRpdGlvbnMuXG4gICAgICAvLyBBdm9pZCBpc3N1ZXMgYnkgZW1pdHRpbmcgdGhlIHRleHQgbm9kZSBub3csXG4gICAgICAvLyBzbyBhdCBsZWFzdCBpdCB3b24ndCBnZXQgYW55IGJpZ2dlci5cbiAgICAgIHN3aXRjaCAoYnVmZmVyc1tpXSkge1xuICAgICAgICBjYXNlIFwidGV4dE5vZGVcIjpcbiAgICAgICAgICBjbG9zZVRleHQocGFyc2VyKVxuICAgICAgICBicmVha1xuXG4gICAgICAgIGNhc2UgXCJjZGF0YVwiOlxuICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgXCJvbmNkYXRhXCIsIHBhcnNlci5jZGF0YSlcbiAgICAgICAgICBwYXJzZXIuY2RhdGEgPSBcIlwiXG4gICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSBcInNjcmlwdFwiOlxuICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgXCJvbnNjcmlwdFwiLCBwYXJzZXIuc2NyaXB0KVxuICAgICAgICAgIHBhcnNlci5zY3JpcHQgPSBcIlwiXG4gICAgICAgIGJyZWFrXG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBlcnJvcihwYXJzZXIsIFwiTWF4IGJ1ZmZlciBsZW5ndGggZXhjZWVkZWQ6IFwiK2J1ZmZlcnNbaV0pXG4gICAgICB9XG4gICAgfVxuICAgIG1heEFjdHVhbCA9IE1hdGgubWF4KG1heEFjdHVhbCwgbGVuKVxuICB9XG4gIC8vIHNjaGVkdWxlIHRoZSBuZXh0IGNoZWNrIGZvciB0aGUgZWFybGllc3QgcG9zc2libGUgYnVmZmVyIG92ZXJydW4uXG4gIHBhcnNlci5idWZmZXJDaGVja1Bvc2l0aW9uID0gKHNheC5NQVhfQlVGRkVSX0xFTkdUSCAtIG1heEFjdHVhbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBwYXJzZXIucG9zaXRpb25cbn1cblxuZnVuY3Rpb24gY2xlYXJCdWZmZXJzIChwYXJzZXIpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBidWZmZXJzLmxlbmd0aDsgaSA8IGw7IGkgKyspIHtcbiAgICBwYXJzZXJbYnVmZmVyc1tpXV0gPSBcIlwiXG4gIH1cbn1cblxuZnVuY3Rpb24gZmx1c2hCdWZmZXJzIChwYXJzZXIpIHtcbiAgY2xvc2VUZXh0KHBhcnNlcilcbiAgaWYgKHBhcnNlci5jZGF0YSAhPT0gXCJcIikge1xuICAgIGVtaXROb2RlKHBhcnNlciwgXCJvbmNkYXRhXCIsIHBhcnNlci5jZGF0YSlcbiAgICBwYXJzZXIuY2RhdGEgPSBcIlwiXG4gIH1cbiAgaWYgKHBhcnNlci5zY3JpcHQgIT09IFwiXCIpIHtcbiAgICBlbWl0Tm9kZShwYXJzZXIsIFwib25zY3JpcHRcIiwgcGFyc2VyLnNjcmlwdClcbiAgICBwYXJzZXIuc2NyaXB0ID0gXCJcIlxuICB9XG59XG5cblNBWFBhcnNlci5wcm90b3R5cGUgPVxuICB7IGVuZDogZnVuY3Rpb24gKCkgeyBlbmQodGhpcykgfVxuICAsIHdyaXRlOiB3cml0ZVxuICAsIHJlc3VtZTogZnVuY3Rpb24gKCkgeyB0aGlzLmVycm9yID0gbnVsbDsgcmV0dXJuIHRoaXMgfVxuICAsIGNsb3NlOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLndyaXRlKG51bGwpIH1cbiAgLCBmbHVzaDogZnVuY3Rpb24gKCkgeyBmbHVzaEJ1ZmZlcnModGhpcykgfVxuICB9XG5cbnRyeSB7XG4gIHZhciBTdHJlYW0gPSByZXF1aXJlKFwic3RyZWFtXCIpLlN0cmVhbVxufSBjYXRjaCAoZXgpIHtcbiAgdmFyIFN0cmVhbSA9IGZ1bmN0aW9uICgpIHt9XG59XG5cblxudmFyIHN0cmVhbVdyYXBzID0gc2F4LkVWRU5UUy5maWx0ZXIoZnVuY3Rpb24gKGV2KSB7XG4gIHJldHVybiBldiAhPT0gXCJlcnJvclwiICYmIGV2ICE9PSBcImVuZFwiXG59KVxuXG5mdW5jdGlvbiBjcmVhdGVTdHJlYW0gKHN0cmljdCwgb3B0KSB7XG4gIHJldHVybiBuZXcgU0FYU3RyZWFtKHN0cmljdCwgb3B0KVxufVxuXG5mdW5jdGlvbiBTQVhTdHJlYW0gKHN0cmljdCwgb3B0KSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTQVhTdHJlYW0pKSByZXR1cm4gbmV3IFNBWFN0cmVhbShzdHJpY3QsIG9wdClcblxuICBTdHJlYW0uYXBwbHkodGhpcylcblxuICB0aGlzLl9wYXJzZXIgPSBuZXcgU0FYUGFyc2VyKHN0cmljdCwgb3B0KVxuICB0aGlzLndyaXRhYmxlID0gdHJ1ZVxuICB0aGlzLnJlYWRhYmxlID0gdHJ1ZVxuXG5cbiAgdmFyIG1lID0gdGhpc1xuXG4gIHRoaXMuX3BhcnNlci5vbmVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICBtZS5lbWl0KFwiZW5kXCIpXG4gIH1cblxuICB0aGlzLl9wYXJzZXIub25lcnJvciA9IGZ1bmN0aW9uIChlcikge1xuICAgIG1lLmVtaXQoXCJlcnJvclwiLCBlcilcblxuICAgIC8vIGlmIGRpZG4ndCB0aHJvdywgdGhlbiBtZWFucyBlcnJvciB3YXMgaGFuZGxlZC5cbiAgICAvLyBnbyBhaGVhZCBhbmQgY2xlYXIgZXJyb3IsIHNvIHdlIGNhbiB3cml0ZSBhZ2Fpbi5cbiAgICBtZS5fcGFyc2VyLmVycm9yID0gbnVsbFxuICB9XG5cbiAgdGhpcy5fZGVjb2RlciA9IG51bGw7XG5cbiAgc3RyZWFtV3JhcHMuZm9yRWFjaChmdW5jdGlvbiAoZXYpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobWUsIFwib25cIiArIGV2LCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1lLl9wYXJzZXJbXCJvblwiICsgZXZdIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uIChoKSB7XG4gICAgICAgIGlmICghaCkge1xuICAgICAgICAgIG1lLnJlbW92ZUFsbExpc3RlbmVycyhldilcbiAgICAgICAgICByZXR1cm4gbWUuX3BhcnNlcltcIm9uXCIrZXZdID0gaFxuICAgICAgICB9XG4gICAgICAgIG1lLm9uKGV2LCBoKVxuICAgICAgfSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IGZhbHNlXG4gICAgfSlcbiAgfSlcbn1cblxuU0FYU3RyZWFtLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RyZWFtLnByb3RvdHlwZSxcbiAgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogU0FYU3RyZWFtIH0gfSlcblxuU0FYU3RyZWFtLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gIGlmICh0eXBlb2YgQnVmZmVyID09PSAnZnVuY3Rpb24nICYmXG4gICAgICB0eXBlb2YgQnVmZmVyLmlzQnVmZmVyID09PSAnZnVuY3Rpb24nICYmXG4gICAgICBCdWZmZXIuaXNCdWZmZXIoZGF0YSkpIHtcbiAgICBpZiAoIXRoaXMuX2RlY29kZXIpIHtcbiAgICAgIHZhciBTRCA9IHJlcXVpcmUoJ3N0cmluZ19kZWNvZGVyJykuU3RyaW5nRGVjb2RlclxuICAgICAgdGhpcy5fZGVjb2RlciA9IG5ldyBTRCgndXRmOCcpXG4gICAgfVxuICAgIGRhdGEgPSB0aGlzLl9kZWNvZGVyLndyaXRlKGRhdGEpO1xuICB9XG5cbiAgdGhpcy5fcGFyc2VyLndyaXRlKGRhdGEudG9TdHJpbmcoKSlcbiAgdGhpcy5lbWl0KFwiZGF0YVwiLCBkYXRhKVxuICByZXR1cm4gdHJ1ZVxufVxuXG5TQVhTdHJlYW0ucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uIChjaHVuaykge1xuICBpZiAoY2h1bmsgJiYgY2h1bmsubGVuZ3RoKSB0aGlzLndyaXRlKGNodW5rKVxuICB0aGlzLl9wYXJzZXIuZW5kKClcbiAgcmV0dXJuIHRydWVcbn1cblxuU0FYU3RyZWFtLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldiwgaGFuZGxlcikge1xuICB2YXIgbWUgPSB0aGlzXG4gIGlmICghbWUuX3BhcnNlcltcIm9uXCIrZXZdICYmIHN0cmVhbVdyYXBzLmluZGV4T2YoZXYpICE9PSAtMSkge1xuICAgIG1lLl9wYXJzZXJbXCJvblwiK2V2XSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/IFthcmd1bWVudHNbMF1dXG4gICAgICAgICAgICAgICA6IEFycmF5LmFwcGx5KG51bGwsIGFyZ3VtZW50cylcbiAgICAgIGFyZ3Muc3BsaWNlKDAsIDAsIGV2KVxuICAgICAgbWUuZW1pdC5hcHBseShtZSwgYXJncylcbiAgICB9XG4gIH1cblxuICByZXR1cm4gU3RyZWFtLnByb3RvdHlwZS5vbi5jYWxsKG1lLCBldiwgaGFuZGxlcilcbn1cblxuXG5cbi8vIGNoYXJhY3RlciBjbGFzc2VzIGFuZCB0b2tlbnNcbnZhciB3aGl0ZXNwYWNlID0gXCJcXHJcXG5cXHQgXCJcbiAgLy8gdGhpcyByZWFsbHkgbmVlZHMgdG8gYmUgcmVwbGFjZWQgd2l0aCBjaGFyYWN0ZXIgY2xhc3Nlcy5cbiAgLy8gWE1MIGFsbG93cyBhbGwgbWFubmVyIG9mIHJpZGljdWxvdXMgbnVtYmVycyBhbmQgZGlnaXRzLlxuICAsIG51bWJlciA9IFwiMDEyNDM1Njc4OVwiXG4gICwgbGV0dGVyID0gXCJhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaXCJcbiAgLy8gKExldHRlciB8IFwiX1wiIHwgXCI6XCIpXG4gICwgcXVvdGUgPSBcIidcXFwiXCJcbiAgLCBlbnRpdHkgPSBudW1iZXIrbGV0dGVyK1wiI1wiXG4gICwgYXR0cmliRW5kID0gd2hpdGVzcGFjZSArIFwiPlwiXG4gICwgQ0RBVEEgPSBcIltDREFUQVtcIlxuICAsIERPQ1RZUEUgPSBcIkRPQ1RZUEVcIlxuICAsIFhNTF9OQU1FU1BBQ0UgPSBcImh0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZVwiXG4gICwgWE1MTlNfTkFNRVNQQUNFID0gXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3htbG5zL1wiXG4gICwgcm9vdE5TID0geyB4bWw6IFhNTF9OQU1FU1BBQ0UsIHhtbG5zOiBYTUxOU19OQU1FU1BBQ0UgfVxuXG4vLyB0dXJuIGFsbCB0aGUgc3RyaW5nIGNoYXJhY3RlciBzZXRzIGludG8gY2hhcmFjdGVyIGNsYXNzIG9iamVjdHMuXG53aGl0ZXNwYWNlID0gY2hhckNsYXNzKHdoaXRlc3BhY2UpXG5udW1iZXIgPSBjaGFyQ2xhc3MobnVtYmVyKVxubGV0dGVyID0gY2hhckNsYXNzKGxldHRlcilcblxuLy8gaHR0cDovL3d3dy53My5vcmcvVFIvUkVDLXhtbC8jTlQtTmFtZVN0YXJ0Q2hhclxuLy8gVGhpcyBpbXBsZW1lbnRhdGlvbiB3b3JrcyBvbiBzdHJpbmdzLCBhIHNpbmdsZSBjaGFyYWN0ZXIgYXQgYSB0aW1lXG4vLyBhcyBzdWNoLCBpdCBjYW5ub3QgZXZlciBzdXBwb3J0IGFzdHJhbC1wbGFuZSBjaGFyYWN0ZXJzICgxMDAwMC1FRkZGRilcbi8vIHdpdGhvdXQgYSBzaWduaWZpY2FudCBicmVha2luZyBjaGFuZ2UgdG8gZWl0aGVyIHRoaXMgIHBhcnNlciwgb3IgdGhlXG4vLyBKYXZhU2NyaXB0IGxhbmd1YWdlLiAgSW1wbGVtZW50YXRpb24gb2YgYW4gZW1vamktY2FwYWJsZSB4bWwgcGFyc2VyXG4vLyBpcyBsZWZ0IGFzIGFuIGV4ZXJjaXNlIGZvciB0aGUgcmVhZGVyLlxudmFyIG5hbWVTdGFydCA9IC9bOl9BLVphLXpcXHUwMEMwLVxcdTAwRDZcXHUwMEQ4LVxcdTAwRjZcXHUwMEY4LVxcdTAyRkZcXHUwMzcwLVxcdTAzN0RcXHUwMzdGLVxcdTFGRkZcXHUyMDBDLVxcdTIwMERcXHUyMDcwLVxcdTIxOEZcXHUyQzAwLVxcdTJGRUZcXHUzMDAxLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRkRdL1xuXG52YXIgbmFtZUJvZHkgPSAvWzpfQS1aYS16XFx1MDBDMC1cXHUwMEQ2XFx1MDBEOC1cXHUwMEY2XFx1MDBGOC1cXHUwMkZGXFx1MDM3MC1cXHUwMzdEXFx1MDM3Ri1cXHUxRkZGXFx1MjAwQy1cXHUyMDBEXFx1MjA3MC1cXHUyMThGXFx1MkMwMC1cXHUyRkVGXFx1MzAwMS1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkZEXFx1MDBCN1xcdTAzMDAtXFx1MDM2RlxcdTIwM0YtXFx1MjA0MFxcLlxcZC1dL1xuXG5xdW90ZSA9IGNoYXJDbGFzcyhxdW90ZSlcbmVudGl0eSA9IGNoYXJDbGFzcyhlbnRpdHkpXG5hdHRyaWJFbmQgPSBjaGFyQ2xhc3MoYXR0cmliRW5kKVxuXG5mdW5jdGlvbiBjaGFyQ2xhc3MgKHN0cikge1xuICByZXR1cm4gc3RyLnNwbGl0KFwiXCIpLnJlZHVjZShmdW5jdGlvbiAocywgYykge1xuICAgIHNbY10gPSB0cnVlXG4gICAgcmV0dXJuIHNcbiAgfSwge30pXG59XG5cbmZ1bmN0aW9uIGlzUmVnRXhwIChjKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYykgPT09ICdbb2JqZWN0IFJlZ0V4cF0nXG59XG5cbmZ1bmN0aW9uIGlzIChjaGFyY2xhc3MsIGMpIHtcbiAgcmV0dXJuIGlzUmVnRXhwKGNoYXJjbGFzcykgPyAhIWMubWF0Y2goY2hhcmNsYXNzKSA6IGNoYXJjbGFzc1tjXVxufVxuXG5mdW5jdGlvbiBub3QgKGNoYXJjbGFzcywgYykge1xuICByZXR1cm4gIWlzKGNoYXJjbGFzcywgYylcbn1cblxudmFyIFMgPSAwXG5zYXguU1RBVEUgPVxueyBCRUdJTiAgICAgICAgICAgICAgICAgICAgIDogUysrXG4sIFRFWFQgICAgICAgICAgICAgICAgICAgICAgOiBTKysgLy8gZ2VuZXJhbCBzdHVmZlxuLCBURVhUX0VOVElUWSAgICAgICAgICAgICAgIDogUysrIC8vICZhbXAgYW5kIHN1Y2guXG4sIE9QRU5fV0FLQSAgICAgICAgICAgICAgICAgOiBTKysgLy8gPFxuLCBTR01MX0RFQ0wgICAgICAgICAgICAgICAgIDogUysrIC8vIDwhQkxBUkdcbiwgU0dNTF9ERUNMX1FVT1RFRCAgICAgICAgICA6IFMrKyAvLyA8IUJMQVJHIGZvbyBcImJhclxuLCBET0NUWVBFICAgICAgICAgICAgICAgICAgIDogUysrIC8vIDwhRE9DVFlQRVxuLCBET0NUWVBFX1FVT1RFRCAgICAgICAgICAgIDogUysrIC8vIDwhRE9DVFlQRSBcIi8vYmxhaFxuLCBET0NUWVBFX0RURCAgICAgICAgICAgICAgIDogUysrIC8vIDwhRE9DVFlQRSBcIi8vYmxhaFwiIFsgLi4uXG4sIERPQ1RZUEVfRFREX1FVT1RFRCAgICAgICAgOiBTKysgLy8gPCFET0NUWVBFIFwiLy9ibGFoXCIgWyBcImZvb1xuLCBDT01NRU5UX1NUQVJUSU5HICAgICAgICAgIDogUysrIC8vIDwhLVxuLCBDT01NRU5UICAgICAgICAgICAgICAgICAgIDogUysrIC8vIDwhLS1cbiwgQ09NTUVOVF9FTkRJTkcgICAgICAgICAgICA6IFMrKyAvLyA8IS0tIGJsYWggLVxuLCBDT01NRU5UX0VOREVEICAgICAgICAgICAgIDogUysrIC8vIDwhLS0gYmxhaCAtLVxuLCBDREFUQSAgICAgICAgICAgICAgICAgICAgIDogUysrIC8vIDwhW0NEQVRBWyBzb21ldGhpbmdcbiwgQ0RBVEFfRU5ESU5HICAgICAgICAgICAgICA6IFMrKyAvLyBdXG4sIENEQVRBX0VORElOR18yICAgICAgICAgICAgOiBTKysgLy8gXV1cbiwgUFJPQ19JTlNUICAgICAgICAgICAgICAgICA6IFMrKyAvLyA8P2hpXG4sIFBST0NfSU5TVF9CT0RZICAgICAgICAgICAgOiBTKysgLy8gPD9oaSB0aGVyZVxuLCBQUk9DX0lOU1RfRU5ESU5HICAgICAgICAgIDogUysrIC8vIDw/aGkgXCJ0aGVyZVwiID9cbiwgT1BFTl9UQUcgICAgICAgICAgICAgICAgICA6IFMrKyAvLyA8c3Ryb25nXG4sIE9QRU5fVEFHX1NMQVNIICAgICAgICAgICAgOiBTKysgLy8gPHN0cm9uZyAvXG4sIEFUVFJJQiAgICAgICAgICAgICAgICAgICAgOiBTKysgLy8gPGFcbiwgQVRUUklCX05BTUUgICAgICAgICAgICAgICA6IFMrKyAvLyA8YSBmb29cbiwgQVRUUklCX05BTUVfU0FXX1dISVRFICAgICA6IFMrKyAvLyA8YSBmb28gX1xuLCBBVFRSSUJfVkFMVUUgICAgICAgICAgICAgIDogUysrIC8vIDxhIGZvbz1cbiwgQVRUUklCX1ZBTFVFX1FVT1RFRCAgICAgICA6IFMrKyAvLyA8YSBmb289XCJiYXJcbiwgQVRUUklCX1ZBTFVFX0NMT1NFRCAgICAgICA6IFMrKyAvLyA8YSBmb289XCJiYXJcIlxuLCBBVFRSSUJfVkFMVUVfVU5RVU9URUQgICAgIDogUysrIC8vIDxhIGZvbz1iYXJcbiwgQVRUUklCX1ZBTFVFX0VOVElUWV9RICAgICA6IFMrKyAvLyA8Zm9vIGJhcj1cIiZxdW90O1wiXG4sIEFUVFJJQl9WQUxVRV9FTlRJVFlfVSAgICAgOiBTKysgLy8gPGZvbyBiYXI9JnF1b3Q7XG4sIENMT1NFX1RBRyAgICAgICAgICAgICAgICAgOiBTKysgLy8gPC9hXG4sIENMT1NFX1RBR19TQVdfV0hJVEUgICAgICAgOiBTKysgLy8gPC9hICAgPlxuLCBTQ1JJUFQgICAgICAgICAgICAgICAgICAgIDogUysrIC8vIDxzY3JpcHQ+IC4uLlxuLCBTQ1JJUFRfRU5ESU5HICAgICAgICAgICAgIDogUysrIC8vIDxzY3JpcHQ+IC4uLiA8XG59XG5cbnNheC5FTlRJVElFUyA9XG57IFwiYW1wXCIgOiBcIiZcIlxuLCBcImd0XCIgOiBcIj5cIlxuLCBcImx0XCIgOiBcIjxcIlxuLCBcInF1b3RcIiA6IFwiXFxcIlwiXG4sIFwiYXBvc1wiIDogXCInXCJcbiwgXCJBRWxpZ1wiIDogMTk4XG4sIFwiQWFjdXRlXCIgOiAxOTNcbiwgXCJBY2lyY1wiIDogMTk0XG4sIFwiQWdyYXZlXCIgOiAxOTJcbiwgXCJBcmluZ1wiIDogMTk3XG4sIFwiQXRpbGRlXCIgOiAxOTVcbiwgXCJBdW1sXCIgOiAxOTZcbiwgXCJDY2VkaWxcIiA6IDE5OVxuLCBcIkVUSFwiIDogMjA4XG4sIFwiRWFjdXRlXCIgOiAyMDFcbiwgXCJFY2lyY1wiIDogMjAyXG4sIFwiRWdyYXZlXCIgOiAyMDBcbiwgXCJFdW1sXCIgOiAyMDNcbiwgXCJJYWN1dGVcIiA6IDIwNVxuLCBcIkljaXJjXCIgOiAyMDZcbiwgXCJJZ3JhdmVcIiA6IDIwNFxuLCBcIkl1bWxcIiA6IDIwN1xuLCBcIk50aWxkZVwiIDogMjA5XG4sIFwiT2FjdXRlXCIgOiAyMTFcbiwgXCJPY2lyY1wiIDogMjEyXG4sIFwiT2dyYXZlXCIgOiAyMTBcbiwgXCJPc2xhc2hcIiA6IDIxNlxuLCBcIk90aWxkZVwiIDogMjEzXG4sIFwiT3VtbFwiIDogMjE0XG4sIFwiVEhPUk5cIiA6IDIyMlxuLCBcIlVhY3V0ZVwiIDogMjE4XG4sIFwiVWNpcmNcIiA6IDIxOVxuLCBcIlVncmF2ZVwiIDogMjE3XG4sIFwiVXVtbFwiIDogMjIwXG4sIFwiWWFjdXRlXCIgOiAyMjFcbiwgXCJhYWN1dGVcIiA6IDIyNVxuLCBcImFjaXJjXCIgOiAyMjZcbiwgXCJhZWxpZ1wiIDogMjMwXG4sIFwiYWdyYXZlXCIgOiAyMjRcbiwgXCJhcmluZ1wiIDogMjI5XG4sIFwiYXRpbGRlXCIgOiAyMjdcbiwgXCJhdW1sXCIgOiAyMjhcbiwgXCJjY2VkaWxcIiA6IDIzMVxuLCBcImVhY3V0ZVwiIDogMjMzXG4sIFwiZWNpcmNcIiA6IDIzNFxuLCBcImVncmF2ZVwiIDogMjMyXG4sIFwiZXRoXCIgOiAyNDBcbiwgXCJldW1sXCIgOiAyMzVcbiwgXCJpYWN1dGVcIiA6IDIzN1xuLCBcImljaXJjXCIgOiAyMzhcbiwgXCJpZ3JhdmVcIiA6IDIzNlxuLCBcIml1bWxcIiA6IDIzOVxuLCBcIm50aWxkZVwiIDogMjQxXG4sIFwib2FjdXRlXCIgOiAyNDNcbiwgXCJvY2lyY1wiIDogMjQ0XG4sIFwib2dyYXZlXCIgOiAyNDJcbiwgXCJvc2xhc2hcIiA6IDI0OFxuLCBcIm90aWxkZVwiIDogMjQ1XG4sIFwib3VtbFwiIDogMjQ2XG4sIFwic3psaWdcIiA6IDIyM1xuLCBcInRob3JuXCIgOiAyNTRcbiwgXCJ1YWN1dGVcIiA6IDI1MFxuLCBcInVjaXJjXCIgOiAyNTFcbiwgXCJ1Z3JhdmVcIiA6IDI0OVxuLCBcInV1bWxcIiA6IDI1MlxuLCBcInlhY3V0ZVwiIDogMjUzXG4sIFwieXVtbFwiIDogMjU1XG4sIFwiY29weVwiIDogMTY5XG4sIFwicmVnXCIgOiAxNzRcbiwgXCJuYnNwXCIgOiAxNjBcbiwgXCJpZXhjbFwiIDogMTYxXG4sIFwiY2VudFwiIDogMTYyXG4sIFwicG91bmRcIiA6IDE2M1xuLCBcImN1cnJlblwiIDogMTY0XG4sIFwieWVuXCIgOiAxNjVcbiwgXCJicnZiYXJcIiA6IDE2NlxuLCBcInNlY3RcIiA6IDE2N1xuLCBcInVtbFwiIDogMTY4XG4sIFwib3JkZlwiIDogMTcwXG4sIFwibGFxdW9cIiA6IDE3MVxuLCBcIm5vdFwiIDogMTcyXG4sIFwic2h5XCIgOiAxNzNcbiwgXCJtYWNyXCIgOiAxNzVcbiwgXCJkZWdcIiA6IDE3NlxuLCBcInBsdXNtblwiIDogMTc3XG4sIFwic3VwMVwiIDogMTg1XG4sIFwic3VwMlwiIDogMTc4XG4sIFwic3VwM1wiIDogMTc5XG4sIFwiYWN1dGVcIiA6IDE4MFxuLCBcIm1pY3JvXCIgOiAxODFcbiwgXCJwYXJhXCIgOiAxODJcbiwgXCJtaWRkb3RcIiA6IDE4M1xuLCBcImNlZGlsXCIgOiAxODRcbiwgXCJvcmRtXCIgOiAxODZcbiwgXCJyYXF1b1wiIDogMTg3XG4sIFwiZnJhYzE0XCIgOiAxODhcbiwgXCJmcmFjMTJcIiA6IDE4OVxuLCBcImZyYWMzNFwiIDogMTkwXG4sIFwiaXF1ZXN0XCIgOiAxOTFcbiwgXCJ0aW1lc1wiIDogMjE1XG4sIFwiZGl2aWRlXCIgOiAyNDdcbiwgXCJPRWxpZ1wiIDogMzM4XG4sIFwib2VsaWdcIiA6IDMzOVxuLCBcIlNjYXJvblwiIDogMzUyXG4sIFwic2Nhcm9uXCIgOiAzNTNcbiwgXCJZdW1sXCIgOiAzNzZcbiwgXCJmbm9mXCIgOiA0MDJcbiwgXCJjaXJjXCIgOiA3MTBcbiwgXCJ0aWxkZVwiIDogNzMyXG4sIFwiQWxwaGFcIiA6IDkxM1xuLCBcIkJldGFcIiA6IDkxNFxuLCBcIkdhbW1hXCIgOiA5MTVcbiwgXCJEZWx0YVwiIDogOTE2XG4sIFwiRXBzaWxvblwiIDogOTE3XG4sIFwiWmV0YVwiIDogOTE4XG4sIFwiRXRhXCIgOiA5MTlcbiwgXCJUaGV0YVwiIDogOTIwXG4sIFwiSW90YVwiIDogOTIxXG4sIFwiS2FwcGFcIiA6IDkyMlxuLCBcIkxhbWJkYVwiIDogOTIzXG4sIFwiTXVcIiA6IDkyNFxuLCBcIk51XCIgOiA5MjVcbiwgXCJYaVwiIDogOTI2XG4sIFwiT21pY3JvblwiIDogOTI3XG4sIFwiUGlcIiA6IDkyOFxuLCBcIlJob1wiIDogOTI5XG4sIFwiU2lnbWFcIiA6IDkzMVxuLCBcIlRhdVwiIDogOTMyXG4sIFwiVXBzaWxvblwiIDogOTMzXG4sIFwiUGhpXCIgOiA5MzRcbiwgXCJDaGlcIiA6IDkzNVxuLCBcIlBzaVwiIDogOTM2XG4sIFwiT21lZ2FcIiA6IDkzN1xuLCBcImFscGhhXCIgOiA5NDVcbiwgXCJiZXRhXCIgOiA5NDZcbiwgXCJnYW1tYVwiIDogOTQ3XG4sIFwiZGVsdGFcIiA6IDk0OFxuLCBcImVwc2lsb25cIiA6IDk0OVxuLCBcInpldGFcIiA6IDk1MFxuLCBcImV0YVwiIDogOTUxXG4sIFwidGhldGFcIiA6IDk1MlxuLCBcImlvdGFcIiA6IDk1M1xuLCBcImthcHBhXCIgOiA5NTRcbiwgXCJsYW1iZGFcIiA6IDk1NVxuLCBcIm11XCIgOiA5NTZcbiwgXCJudVwiIDogOTU3XG4sIFwieGlcIiA6IDk1OFxuLCBcIm9taWNyb25cIiA6IDk1OVxuLCBcInBpXCIgOiA5NjBcbiwgXCJyaG9cIiA6IDk2MVxuLCBcInNpZ21hZlwiIDogOTYyXG4sIFwic2lnbWFcIiA6IDk2M1xuLCBcInRhdVwiIDogOTY0XG4sIFwidXBzaWxvblwiIDogOTY1XG4sIFwicGhpXCIgOiA5NjZcbiwgXCJjaGlcIiA6IDk2N1xuLCBcInBzaVwiIDogOTY4XG4sIFwib21lZ2FcIiA6IDk2OVxuLCBcInRoZXRhc3ltXCIgOiA5NzdcbiwgXCJ1cHNpaFwiIDogOTc4XG4sIFwicGl2XCIgOiA5ODJcbiwgXCJlbnNwXCIgOiA4MTk0XG4sIFwiZW1zcFwiIDogODE5NVxuLCBcInRoaW5zcFwiIDogODIwMVxuLCBcInp3bmpcIiA6IDgyMDRcbiwgXCJ6d2pcIiA6IDgyMDVcbiwgXCJscm1cIiA6IDgyMDZcbiwgXCJybG1cIiA6IDgyMDdcbiwgXCJuZGFzaFwiIDogODIxMVxuLCBcIm1kYXNoXCIgOiA4MjEyXG4sIFwibHNxdW9cIiA6IDgyMTZcbiwgXCJyc3F1b1wiIDogODIxN1xuLCBcInNicXVvXCIgOiA4MjE4XG4sIFwibGRxdW9cIiA6IDgyMjBcbiwgXCJyZHF1b1wiIDogODIyMVxuLCBcImJkcXVvXCIgOiA4MjIyXG4sIFwiZGFnZ2VyXCIgOiA4MjI0XG4sIFwiRGFnZ2VyXCIgOiA4MjI1XG4sIFwiYnVsbFwiIDogODIyNlxuLCBcImhlbGxpcFwiIDogODIzMFxuLCBcInBlcm1pbFwiIDogODI0MFxuLCBcInByaW1lXCIgOiA4MjQyXG4sIFwiUHJpbWVcIiA6IDgyNDNcbiwgXCJsc2FxdW9cIiA6IDgyNDlcbiwgXCJyc2FxdW9cIiA6IDgyNTBcbiwgXCJvbGluZVwiIDogODI1NFxuLCBcImZyYXNsXCIgOiA4MjYwXG4sIFwiZXVyb1wiIDogODM2NFxuLCBcImltYWdlXCIgOiA4NDY1XG4sIFwid2VpZXJwXCIgOiA4NDcyXG4sIFwicmVhbFwiIDogODQ3NlxuLCBcInRyYWRlXCIgOiA4NDgyXG4sIFwiYWxlZnN5bVwiIDogODUwMVxuLCBcImxhcnJcIiA6IDg1OTJcbiwgXCJ1YXJyXCIgOiA4NTkzXG4sIFwicmFyclwiIDogODU5NFxuLCBcImRhcnJcIiA6IDg1OTVcbiwgXCJoYXJyXCIgOiA4NTk2XG4sIFwiY3JhcnJcIiA6IDg2MjlcbiwgXCJsQXJyXCIgOiA4NjU2XG4sIFwidUFyclwiIDogODY1N1xuLCBcInJBcnJcIiA6IDg2NThcbiwgXCJkQXJyXCIgOiA4NjU5XG4sIFwiaEFyclwiIDogODY2MFxuLCBcImZvcmFsbFwiIDogODcwNFxuLCBcInBhcnRcIiA6IDg3MDZcbiwgXCJleGlzdFwiIDogODcwN1xuLCBcImVtcHR5XCIgOiA4NzA5XG4sIFwibmFibGFcIiA6IDg3MTFcbiwgXCJpc2luXCIgOiA4NzEyXG4sIFwibm90aW5cIiA6IDg3MTNcbiwgXCJuaVwiIDogODcxNVxuLCBcInByb2RcIiA6IDg3MTlcbiwgXCJzdW1cIiA6IDg3MjFcbiwgXCJtaW51c1wiIDogODcyMlxuLCBcImxvd2FzdFwiIDogODcyN1xuLCBcInJhZGljXCIgOiA4NzMwXG4sIFwicHJvcFwiIDogODczM1xuLCBcImluZmluXCIgOiA4NzM0XG4sIFwiYW5nXCIgOiA4NzM2XG4sIFwiYW5kXCIgOiA4NzQzXG4sIFwib3JcIiA6IDg3NDRcbiwgXCJjYXBcIiA6IDg3NDVcbiwgXCJjdXBcIiA6IDg3NDZcbiwgXCJpbnRcIiA6IDg3NDdcbiwgXCJ0aGVyZTRcIiA6IDg3NTZcbiwgXCJzaW1cIiA6IDg3NjRcbiwgXCJjb25nXCIgOiA4NzczXG4sIFwiYXN5bXBcIiA6IDg3NzZcbiwgXCJuZVwiIDogODgwMFxuLCBcImVxdWl2XCIgOiA4ODAxXG4sIFwibGVcIiA6IDg4MDRcbiwgXCJnZVwiIDogODgwNVxuLCBcInN1YlwiIDogODgzNFxuLCBcInN1cFwiIDogODgzNVxuLCBcIm5zdWJcIiA6IDg4MzZcbiwgXCJzdWJlXCIgOiA4ODM4XG4sIFwic3VwZVwiIDogODgzOVxuLCBcIm9wbHVzXCIgOiA4ODUzXG4sIFwib3RpbWVzXCIgOiA4ODU1XG4sIFwicGVycFwiIDogODg2OVxuLCBcInNkb3RcIiA6IDg5MDFcbiwgXCJsY2VpbFwiIDogODk2OFxuLCBcInJjZWlsXCIgOiA4OTY5XG4sIFwibGZsb29yXCIgOiA4OTcwXG4sIFwicmZsb29yXCIgOiA4OTcxXG4sIFwibGFuZ1wiIDogOTAwMVxuLCBcInJhbmdcIiA6IDkwMDJcbiwgXCJsb3pcIiA6IDk2NzRcbiwgXCJzcGFkZXNcIiA6IDk4MjRcbiwgXCJjbHVic1wiIDogOTgyN1xuLCBcImhlYXJ0c1wiIDogOTgyOVxuLCBcImRpYW1zXCIgOiA5ODMwXG59XG5cbk9iamVjdC5rZXlzKHNheC5FTlRJVElFUykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgdmFyIGUgPSBzYXguRU5USVRJRVNba2V5XVxuICAgIHZhciBzID0gdHlwZW9mIGUgPT09ICdudW1iZXInID8gU3RyaW5nLmZyb21DaGFyQ29kZShlKSA6IGVcbiAgICBzYXguRU5USVRJRVNba2V5XSA9IHNcbn0pXG5cbmZvciAodmFyIFMgaW4gc2F4LlNUQVRFKSBzYXguU1RBVEVbc2F4LlNUQVRFW1NdXSA9IFNcblxuLy8gc2hvcnRoYW5kXG5TID0gc2F4LlNUQVRFXG5cbmZ1bmN0aW9uIGVtaXQgKHBhcnNlciwgZXZlbnQsIGRhdGEpIHtcbiAgcGFyc2VyW2V2ZW50XSAmJiBwYXJzZXJbZXZlbnRdKGRhdGEpXG59XG5cbmZ1bmN0aW9uIGVtaXROb2RlIChwYXJzZXIsIG5vZGVUeXBlLCBkYXRhKSB7XG4gIGlmIChwYXJzZXIudGV4dE5vZGUpIGNsb3NlVGV4dChwYXJzZXIpXG4gIGVtaXQocGFyc2VyLCBub2RlVHlwZSwgZGF0YSlcbn1cblxuZnVuY3Rpb24gY2xvc2VUZXh0IChwYXJzZXIpIHtcbiAgcGFyc2VyLnRleHROb2RlID0gdGV4dG9wdHMocGFyc2VyLm9wdCwgcGFyc2VyLnRleHROb2RlKVxuICBpZiAocGFyc2VyLnRleHROb2RlKSBlbWl0KHBhcnNlciwgXCJvbnRleHRcIiwgcGFyc2VyLnRleHROb2RlKVxuICBwYXJzZXIudGV4dE5vZGUgPSBcIlwiXG59XG5cbmZ1bmN0aW9uIHRleHRvcHRzIChvcHQsIHRleHQpIHtcbiAgaWYgKG9wdC50cmltKSB0ZXh0ID0gdGV4dC50cmltKClcbiAgaWYgKG9wdC5ub3JtYWxpemUpIHRleHQgPSB0ZXh0LnJlcGxhY2UoL1xccysvZywgXCIgXCIpXG4gIHJldHVybiB0ZXh0XG59XG5cbmZ1bmN0aW9uIGVycm9yIChwYXJzZXIsIGVyKSB7XG4gIGNsb3NlVGV4dChwYXJzZXIpXG4gIGlmIChwYXJzZXIudHJhY2tQb3NpdGlvbikge1xuICAgIGVyICs9IFwiXFxuTGluZTogXCIrcGFyc2VyLmxpbmUrXG4gICAgICAgICAgXCJcXG5Db2x1bW46IFwiK3BhcnNlci5jb2x1bW4rXG4gICAgICAgICAgXCJcXG5DaGFyOiBcIitwYXJzZXIuY1xuICB9XG4gIGVyID0gbmV3IEVycm9yKGVyKVxuICBwYXJzZXIuZXJyb3IgPSBlclxuICBlbWl0KHBhcnNlciwgXCJvbmVycm9yXCIsIGVyKVxuICByZXR1cm4gcGFyc2VyXG59XG5cbmZ1bmN0aW9uIGVuZCAocGFyc2VyKSB7XG4gIGlmICghcGFyc2VyLmNsb3NlZFJvb3QpIHN0cmljdEZhaWwocGFyc2VyLCBcIlVuY2xvc2VkIHJvb3QgdGFnXCIpXG4gIGlmICgocGFyc2VyLnN0YXRlICE9PSBTLkJFR0lOKSAmJiAocGFyc2VyLnN0YXRlICE9PSBTLlRFWFQpKSBlcnJvcihwYXJzZXIsIFwiVW5leHBlY3RlZCBlbmRcIilcbiAgY2xvc2VUZXh0KHBhcnNlcilcbiAgcGFyc2VyLmMgPSBcIlwiXG4gIHBhcnNlci5jbG9zZWQgPSB0cnVlXG4gIGVtaXQocGFyc2VyLCBcIm9uZW5kXCIpXG4gIFNBWFBhcnNlci5jYWxsKHBhcnNlciwgcGFyc2VyLnN0cmljdCwgcGFyc2VyLm9wdClcbiAgcmV0dXJuIHBhcnNlclxufVxuXG5mdW5jdGlvbiBzdHJpY3RGYWlsIChwYXJzZXIsIG1lc3NhZ2UpIHtcbiAgaWYgKHR5cGVvZiBwYXJzZXIgIT09ICdvYmplY3QnIHx8ICEocGFyc2VyIGluc3RhbmNlb2YgU0FYUGFyc2VyKSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2JhZCBjYWxsIHRvIHN0cmljdEZhaWwnKTtcbiAgaWYgKHBhcnNlci5zdHJpY3QpIGVycm9yKHBhcnNlciwgbWVzc2FnZSlcbn1cblxuZnVuY3Rpb24gbmV3VGFnIChwYXJzZXIpIHtcbiAgaWYgKCFwYXJzZXIuc3RyaWN0KSBwYXJzZXIudGFnTmFtZSA9IHBhcnNlci50YWdOYW1lW3BhcnNlci5sb29zZUNhc2VdKClcbiAgdmFyIHBhcmVudCA9IHBhcnNlci50YWdzW3BhcnNlci50YWdzLmxlbmd0aCAtIDFdIHx8IHBhcnNlclxuICAgICwgdGFnID0gcGFyc2VyLnRhZyA9IHsgbmFtZSA6IHBhcnNlci50YWdOYW1lLCBhdHRyaWJ1dGVzIDoge30gfVxuXG4gIC8vIHdpbGwgYmUgb3ZlcnJpZGRlbiBpZiB0YWcgY29udGFpbHMgYW4geG1sbnM9XCJmb29cIiBvciB4bWxuczpmb289XCJiYXJcIlxuICBpZiAocGFyc2VyLm9wdC54bWxucykgdGFnLm5zID0gcGFyZW50Lm5zXG4gIHBhcnNlci5hdHRyaWJMaXN0Lmxlbmd0aCA9IDBcbn1cblxuZnVuY3Rpb24gcW5hbWUgKG5hbWUsIGF0dHJpYnV0ZSkge1xuICB2YXIgaSA9IG5hbWUuaW5kZXhPZihcIjpcIilcbiAgICAsIHF1YWxOYW1lID0gaSA8IDAgPyBbIFwiXCIsIG5hbWUgXSA6IG5hbWUuc3BsaXQoXCI6XCIpXG4gICAgLCBwcmVmaXggPSBxdWFsTmFtZVswXVxuICAgICwgbG9jYWwgPSBxdWFsTmFtZVsxXVxuXG4gIC8vIDx4IFwieG1sbnNcIj1cImh0dHA6Ly9mb29cIj5cbiAgaWYgKGF0dHJpYnV0ZSAmJiBuYW1lID09PSBcInhtbG5zXCIpIHtcbiAgICBwcmVmaXggPSBcInhtbG5zXCJcbiAgICBsb2NhbCA9IFwiXCJcbiAgfVxuXG4gIHJldHVybiB7IHByZWZpeDogcHJlZml4LCBsb2NhbDogbG9jYWwgfVxufVxuXG5mdW5jdGlvbiBhdHRyaWIgKHBhcnNlcikge1xuICBpZiAoIXBhcnNlci5zdHJpY3QpIHBhcnNlci5hdHRyaWJOYW1lID0gcGFyc2VyLmF0dHJpYk5hbWVbcGFyc2VyLmxvb3NlQ2FzZV0oKVxuXG4gIGlmIChwYXJzZXIuYXR0cmliTGlzdC5pbmRleE9mKHBhcnNlci5hdHRyaWJOYW1lKSAhPT0gLTEgfHxcbiAgICAgIHBhcnNlci50YWcuYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShwYXJzZXIuYXR0cmliTmFtZSkpIHtcbiAgICByZXR1cm4gcGFyc2VyLmF0dHJpYk5hbWUgPSBwYXJzZXIuYXR0cmliVmFsdWUgPSBcIlwiXG4gIH1cblxuICBpZiAocGFyc2VyLm9wdC54bWxucykge1xuICAgIHZhciBxbiA9IHFuYW1lKHBhcnNlci5hdHRyaWJOYW1lLCB0cnVlKVxuICAgICAgLCBwcmVmaXggPSBxbi5wcmVmaXhcbiAgICAgICwgbG9jYWwgPSBxbi5sb2NhbFxuXG4gICAgaWYgKHByZWZpeCA9PT0gXCJ4bWxuc1wiKSB7XG4gICAgICAvLyBuYW1lc3BhY2UgYmluZGluZyBhdHRyaWJ1dGU7IHB1c2ggdGhlIGJpbmRpbmcgaW50byBzY29wZVxuICAgICAgaWYgKGxvY2FsID09PSBcInhtbFwiICYmIHBhcnNlci5hdHRyaWJWYWx1ZSAhPT0gWE1MX05BTUVTUEFDRSkge1xuICAgICAgICBzdHJpY3RGYWlsKCBwYXJzZXJcbiAgICAgICAgICAgICAgICAgICwgXCJ4bWw6IHByZWZpeCBtdXN0IGJlIGJvdW5kIHRvIFwiICsgWE1MX05BTUVTUEFDRSArIFwiXFxuXCJcbiAgICAgICAgICAgICAgICAgICsgXCJBY3R1YWw6IFwiICsgcGFyc2VyLmF0dHJpYlZhbHVlIClcbiAgICAgIH0gZWxzZSBpZiAobG9jYWwgPT09IFwieG1sbnNcIiAmJiBwYXJzZXIuYXR0cmliVmFsdWUgIT09IFhNTE5TX05BTUVTUEFDRSkge1xuICAgICAgICBzdHJpY3RGYWlsKCBwYXJzZXJcbiAgICAgICAgICAgICAgICAgICwgXCJ4bWxuczogcHJlZml4IG11c3QgYmUgYm91bmQgdG8gXCIgKyBYTUxOU19OQU1FU1BBQ0UgKyBcIlxcblwiXG4gICAgICAgICAgICAgICAgICArIFwiQWN0dWFsOiBcIiArIHBhcnNlci5hdHRyaWJWYWx1ZSApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgdGFnID0gcGFyc2VyLnRhZ1xuICAgICAgICAgICwgcGFyZW50ID0gcGFyc2VyLnRhZ3NbcGFyc2VyLnRhZ3MubGVuZ3RoIC0gMV0gfHwgcGFyc2VyXG4gICAgICAgIGlmICh0YWcubnMgPT09IHBhcmVudC5ucykge1xuICAgICAgICAgIHRhZy5ucyA9IE9iamVjdC5jcmVhdGUocGFyZW50Lm5zKVxuICAgICAgICB9XG4gICAgICAgIHRhZy5uc1tsb2NhbF0gPSBwYXJzZXIuYXR0cmliVmFsdWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBkZWZlciBvbmF0dHJpYnV0ZSBldmVudHMgdW50aWwgYWxsIGF0dHJpYnV0ZXMgaGF2ZSBiZWVuIHNlZW5cbiAgICAvLyBzbyBhbnkgbmV3IGJpbmRpbmdzIGNhbiB0YWtlIGVmZmVjdDsgcHJlc2VydmUgYXR0cmlidXRlIG9yZGVyXG4gICAgLy8gc28gZGVmZXJyZWQgZXZlbnRzIGNhbiBiZSBlbWl0dGVkIGluIGRvY3VtZW50IG9yZGVyXG4gICAgcGFyc2VyLmF0dHJpYkxpc3QucHVzaChbcGFyc2VyLmF0dHJpYk5hbWUsIHBhcnNlci5hdHRyaWJWYWx1ZV0pXG4gIH0gZWxzZSB7XG4gICAgLy8gaW4gbm9uLXhtbG5zIG1vZGUsIHdlIGNhbiBlbWl0IHRoZSBldmVudCByaWdodCBhd2F5XG4gICAgcGFyc2VyLnRhZy5hdHRyaWJ1dGVzW3BhcnNlci5hdHRyaWJOYW1lXSA9IHBhcnNlci5hdHRyaWJWYWx1ZVxuICAgIGVtaXROb2RlKCBwYXJzZXJcbiAgICAgICAgICAgICwgXCJvbmF0dHJpYnV0ZVwiXG4gICAgICAgICAgICAsIHsgbmFtZTogcGFyc2VyLmF0dHJpYk5hbWVcbiAgICAgICAgICAgICAgLCB2YWx1ZTogcGFyc2VyLmF0dHJpYlZhbHVlIH0gKVxuICB9XG5cbiAgcGFyc2VyLmF0dHJpYk5hbWUgPSBwYXJzZXIuYXR0cmliVmFsdWUgPSBcIlwiXG59XG5cbmZ1bmN0aW9uIG9wZW5UYWcgKHBhcnNlciwgc2VsZkNsb3NpbmcpIHtcbiAgaWYgKHBhcnNlci5vcHQueG1sbnMpIHtcbiAgICAvLyBlbWl0IG5hbWVzcGFjZSBiaW5kaW5nIGV2ZW50c1xuICAgIHZhciB0YWcgPSBwYXJzZXIudGFnXG5cbiAgICAvLyBhZGQgbmFtZXNwYWNlIGluZm8gdG8gdGFnXG4gICAgdmFyIHFuID0gcW5hbWUocGFyc2VyLnRhZ05hbWUpXG4gICAgdGFnLnByZWZpeCA9IHFuLnByZWZpeFxuICAgIHRhZy5sb2NhbCA9IHFuLmxvY2FsXG4gICAgdGFnLnVyaSA9IHRhZy5uc1txbi5wcmVmaXhdIHx8IFwiXCJcblxuICAgIGlmICh0YWcucHJlZml4ICYmICF0YWcudXJpKSB7XG4gICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJVbmJvdW5kIG5hbWVzcGFjZSBwcmVmaXg6IFwiXG4gICAgICAgICAgICAgICAgICAgICAgICsgSlNPTi5zdHJpbmdpZnkocGFyc2VyLnRhZ05hbWUpKVxuICAgICAgdGFnLnVyaSA9IHFuLnByZWZpeFxuICAgIH1cblxuICAgIHZhciBwYXJlbnQgPSBwYXJzZXIudGFnc1twYXJzZXIudGFncy5sZW5ndGggLSAxXSB8fCBwYXJzZXJcbiAgICBpZiAodGFnLm5zICYmIHBhcmVudC5ucyAhPT0gdGFnLm5zKSB7XG4gICAgICBPYmplY3Qua2V5cyh0YWcubnMpLmZvckVhY2goZnVuY3Rpb24gKHApIHtcbiAgICAgICAgZW1pdE5vZGUoIHBhcnNlclxuICAgICAgICAgICAgICAgICwgXCJvbm9wZW5uYW1lc3BhY2VcIlxuICAgICAgICAgICAgICAgICwgeyBwcmVmaXg6IHAgLCB1cmk6IHRhZy5uc1twXSB9IClcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gaGFuZGxlIGRlZmVycmVkIG9uYXR0cmlidXRlIGV2ZW50c1xuICAgIC8vIE5vdGU6IGRvIG5vdCBhcHBseSBkZWZhdWx0IG5zIHRvIGF0dHJpYnV0ZXM6XG4gICAgLy8gICBodHRwOi8vd3d3LnczLm9yZy9UUi9SRUMteG1sLW5hbWVzLyNkZWZhdWx0aW5nXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBwYXJzZXIuYXR0cmliTGlzdC5sZW5ndGg7IGkgPCBsOyBpICsrKSB7XG4gICAgICB2YXIgbnYgPSBwYXJzZXIuYXR0cmliTGlzdFtpXVxuICAgICAgdmFyIG5hbWUgPSBudlswXVxuICAgICAgICAsIHZhbHVlID0gbnZbMV1cbiAgICAgICAgLCBxdWFsTmFtZSA9IHFuYW1lKG5hbWUsIHRydWUpXG4gICAgICAgICwgcHJlZml4ID0gcXVhbE5hbWUucHJlZml4XG4gICAgICAgICwgbG9jYWwgPSBxdWFsTmFtZS5sb2NhbFxuICAgICAgICAsIHVyaSA9IHByZWZpeCA9PSBcIlwiID8gXCJcIiA6ICh0YWcubnNbcHJlZml4XSB8fCBcIlwiKVxuICAgICAgICAsIGEgPSB7IG5hbWU6IG5hbWVcbiAgICAgICAgICAgICAgLCB2YWx1ZTogdmFsdWVcbiAgICAgICAgICAgICAgLCBwcmVmaXg6IHByZWZpeFxuICAgICAgICAgICAgICAsIGxvY2FsOiBsb2NhbFxuICAgICAgICAgICAgICAsIHVyaTogdXJpXG4gICAgICAgICAgICAgIH1cblxuICAgICAgLy8gaWYgdGhlcmUncyBhbnkgYXR0cmlidXRlcyB3aXRoIGFuIHVuZGVmaW5lZCBuYW1lc3BhY2UsXG4gICAgICAvLyB0aGVuIGZhaWwgb24gdGhlbSBub3cuXG4gICAgICBpZiAocHJlZml4ICYmIHByZWZpeCAhPSBcInhtbG5zXCIgJiYgIXVyaSkge1xuICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJVbmJvdW5kIG5hbWVzcGFjZSBwcmVmaXg6IFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgKyBKU09OLnN0cmluZ2lmeShwcmVmaXgpKVxuICAgICAgICBhLnVyaSA9IHByZWZpeFxuICAgICAgfVxuICAgICAgcGFyc2VyLnRhZy5hdHRyaWJ1dGVzW25hbWVdID0gYVxuICAgICAgZW1pdE5vZGUocGFyc2VyLCBcIm9uYXR0cmlidXRlXCIsIGEpXG4gICAgfVxuICAgIHBhcnNlci5hdHRyaWJMaXN0Lmxlbmd0aCA9IDBcbiAgfVxuXG4gIHBhcnNlci50YWcuaXNTZWxmQ2xvc2luZyA9ICEhc2VsZkNsb3NpbmdcblxuICAvLyBwcm9jZXNzIHRoZSB0YWdcbiAgcGFyc2VyLnNhd1Jvb3QgPSB0cnVlXG4gIHBhcnNlci50YWdzLnB1c2gocGFyc2VyLnRhZylcbiAgZW1pdE5vZGUocGFyc2VyLCBcIm9ub3BlbnRhZ1wiLCBwYXJzZXIudGFnKVxuICBpZiAoIXNlbGZDbG9zaW5nKSB7XG4gICAgLy8gc3BlY2lhbCBjYXNlIGZvciA8c2NyaXB0PiBpbiBub24tc3RyaWN0IG1vZGUuXG4gICAgaWYgKCFwYXJzZXIubm9zY3JpcHQgJiYgcGFyc2VyLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJzY3JpcHRcIikge1xuICAgICAgcGFyc2VyLnN0YXRlID0gUy5TQ1JJUFRcbiAgICB9IGVsc2Uge1xuICAgICAgcGFyc2VyLnN0YXRlID0gUy5URVhUXG4gICAgfVxuICAgIHBhcnNlci50YWcgPSBudWxsXG4gICAgcGFyc2VyLnRhZ05hbWUgPSBcIlwiXG4gIH1cbiAgcGFyc2VyLmF0dHJpYk5hbWUgPSBwYXJzZXIuYXR0cmliVmFsdWUgPSBcIlwiXG4gIHBhcnNlci5hdHRyaWJMaXN0Lmxlbmd0aCA9IDBcbn1cblxuZnVuY3Rpb24gY2xvc2VUYWcgKHBhcnNlcikge1xuICBpZiAoIXBhcnNlci50YWdOYW1lKSB7XG4gICAgc3RyaWN0RmFpbChwYXJzZXIsIFwiV2VpcmQgZW1wdHkgY2xvc2UgdGFnLlwiKVxuICAgIHBhcnNlci50ZXh0Tm9kZSArPSBcIjwvPlwiXG4gICAgcGFyc2VyLnN0YXRlID0gUy5URVhUXG4gICAgcmV0dXJuXG4gIH1cblxuICBpZiAocGFyc2VyLnNjcmlwdCkge1xuICAgIGlmIChwYXJzZXIudGFnTmFtZSAhPT0gXCJzY3JpcHRcIikge1xuICAgICAgcGFyc2VyLnNjcmlwdCArPSBcIjwvXCIgKyBwYXJzZXIudGFnTmFtZSArIFwiPlwiXG4gICAgICBwYXJzZXIudGFnTmFtZSA9IFwiXCJcbiAgICAgIHBhcnNlci5zdGF0ZSA9IFMuU0NSSVBUXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgZW1pdE5vZGUocGFyc2VyLCBcIm9uc2NyaXB0XCIsIHBhcnNlci5zY3JpcHQpXG4gICAgcGFyc2VyLnNjcmlwdCA9IFwiXCJcbiAgfVxuXG4gIC8vIGZpcnN0IG1ha2Ugc3VyZSB0aGF0IHRoZSBjbG9zaW5nIHRhZyBhY3R1YWxseSBleGlzdHMuXG4gIC8vIDxhPjxiPjwvYz48L2I+PC9hPiB3aWxsIGNsb3NlIGV2ZXJ5dGhpbmcsIG90aGVyd2lzZS5cbiAgdmFyIHQgPSBwYXJzZXIudGFncy5sZW5ndGhcbiAgdmFyIHRhZ05hbWUgPSBwYXJzZXIudGFnTmFtZVxuICBpZiAoIXBhcnNlci5zdHJpY3QpIHRhZ05hbWUgPSB0YWdOYW1lW3BhcnNlci5sb29zZUNhc2VdKClcbiAgdmFyIGNsb3NlVG8gPSB0YWdOYW1lXG4gIHdoaWxlICh0IC0tKSB7XG4gICAgdmFyIGNsb3NlID0gcGFyc2VyLnRhZ3NbdF1cbiAgICBpZiAoY2xvc2UubmFtZSAhPT0gY2xvc2VUbykge1xuICAgICAgLy8gZmFpbCB0aGUgZmlyc3QgdGltZSBpbiBzdHJpY3QgbW9kZVxuICAgICAgc3RyaWN0RmFpbChwYXJzZXIsIFwiVW5leHBlY3RlZCBjbG9zZSB0YWdcIilcbiAgICB9IGVsc2UgYnJlYWtcbiAgfVxuXG4gIC8vIGRpZG4ndCBmaW5kIGl0LiAgd2UgYWxyZWFkeSBmYWlsZWQgZm9yIHN0cmljdCwgc28ganVzdCBhYm9ydC5cbiAgaWYgKHQgPCAwKSB7XG4gICAgc3RyaWN0RmFpbChwYXJzZXIsIFwiVW5tYXRjaGVkIGNsb3NpbmcgdGFnOiBcIitwYXJzZXIudGFnTmFtZSlcbiAgICBwYXJzZXIudGV4dE5vZGUgKz0gXCI8L1wiICsgcGFyc2VyLnRhZ05hbWUgKyBcIj5cIlxuICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVFxuICAgIHJldHVyblxuICB9XG4gIHBhcnNlci50YWdOYW1lID0gdGFnTmFtZVxuICB2YXIgcyA9IHBhcnNlci50YWdzLmxlbmd0aFxuICB3aGlsZSAocyAtLT4gdCkge1xuICAgIHZhciB0YWcgPSBwYXJzZXIudGFnID0gcGFyc2VyLnRhZ3MucG9wKClcbiAgICBwYXJzZXIudGFnTmFtZSA9IHBhcnNlci50YWcubmFtZVxuICAgIGVtaXROb2RlKHBhcnNlciwgXCJvbmNsb3NldGFnXCIsIHBhcnNlci50YWdOYW1lKVxuXG4gICAgdmFyIHggPSB7fVxuICAgIGZvciAodmFyIGkgaW4gdGFnLm5zKSB4W2ldID0gdGFnLm5zW2ldXG5cbiAgICB2YXIgcGFyZW50ID0gcGFyc2VyLnRhZ3NbcGFyc2VyLnRhZ3MubGVuZ3RoIC0gMV0gfHwgcGFyc2VyXG4gICAgaWYgKHBhcnNlci5vcHQueG1sbnMgJiYgdGFnLm5zICE9PSBwYXJlbnQubnMpIHtcbiAgICAgIC8vIHJlbW92ZSBuYW1lc3BhY2UgYmluZGluZ3MgaW50cm9kdWNlZCBieSB0YWdcbiAgICAgIE9iamVjdC5rZXlzKHRhZy5ucykuZm9yRWFjaChmdW5jdGlvbiAocCkge1xuICAgICAgICB2YXIgbiA9IHRhZy5uc1twXVxuICAgICAgICBlbWl0Tm9kZShwYXJzZXIsIFwib25jbG9zZW5hbWVzcGFjZVwiLCB7IHByZWZpeDogcCwgdXJpOiBuIH0pXG4gICAgICB9KVxuICAgIH1cbiAgfVxuICBpZiAodCA9PT0gMCkgcGFyc2VyLmNsb3NlZFJvb3QgPSB0cnVlXG4gIHBhcnNlci50YWdOYW1lID0gcGFyc2VyLmF0dHJpYlZhbHVlID0gcGFyc2VyLmF0dHJpYk5hbWUgPSBcIlwiXG4gIHBhcnNlci5hdHRyaWJMaXN0Lmxlbmd0aCA9IDBcbiAgcGFyc2VyLnN0YXRlID0gUy5URVhUXG59XG5cbmZ1bmN0aW9uIHBhcnNlRW50aXR5IChwYXJzZXIpIHtcbiAgdmFyIGVudGl0eSA9IHBhcnNlci5lbnRpdHlcbiAgICAsIGVudGl0eUxDID0gZW50aXR5LnRvTG93ZXJDYXNlKClcbiAgICAsIG51bVxuICAgICwgbnVtU3RyID0gXCJcIlxuICBpZiAocGFyc2VyLkVOVElUSUVTW2VudGl0eV0pXG4gICAgcmV0dXJuIHBhcnNlci5FTlRJVElFU1tlbnRpdHldXG4gIGlmIChwYXJzZXIuRU5USVRJRVNbZW50aXR5TENdKVxuICAgIHJldHVybiBwYXJzZXIuRU5USVRJRVNbZW50aXR5TENdXG4gIGVudGl0eSA9IGVudGl0eUxDXG4gIGlmIChlbnRpdHkuY2hhckF0KDApID09PSBcIiNcIikge1xuICAgIGlmIChlbnRpdHkuY2hhckF0KDEpID09PSBcInhcIikge1xuICAgICAgZW50aXR5ID0gZW50aXR5LnNsaWNlKDIpXG4gICAgICBudW0gPSBwYXJzZUludChlbnRpdHksIDE2KVxuICAgICAgbnVtU3RyID0gbnVtLnRvU3RyaW5nKDE2KVxuICAgIH0gZWxzZSB7XG4gICAgICBlbnRpdHkgPSBlbnRpdHkuc2xpY2UoMSlcbiAgICAgIG51bSA9IHBhcnNlSW50KGVudGl0eSwgMTApXG4gICAgICBudW1TdHIgPSBudW0udG9TdHJpbmcoMTApXG4gICAgfVxuICB9XG4gIGVudGl0eSA9IGVudGl0eS5yZXBsYWNlKC9eMCsvLCBcIlwiKVxuICBpZiAobnVtU3RyLnRvTG93ZXJDYXNlKCkgIT09IGVudGl0eSkge1xuICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIkludmFsaWQgY2hhcmFjdGVyIGVudGl0eVwiKVxuICAgIHJldHVybiBcIiZcIitwYXJzZXIuZW50aXR5ICsgXCI7XCJcbiAgfVxuXG4gIHJldHVybiBTdHJpbmcuZnJvbUNvZGVQb2ludChudW0pXG59XG5cbmZ1bmN0aW9uIHdyaXRlIChjaHVuaykge1xuICB2YXIgcGFyc2VyID0gdGhpc1xuICBpZiAodGhpcy5lcnJvcikgdGhyb3cgdGhpcy5lcnJvclxuICBpZiAocGFyc2VyLmNsb3NlZCkgcmV0dXJuIGVycm9yKHBhcnNlcixcbiAgICBcIkNhbm5vdCB3cml0ZSBhZnRlciBjbG9zZS4gQXNzaWduIGFuIG9ucmVhZHkgaGFuZGxlci5cIilcbiAgaWYgKGNodW5rID09PSBudWxsKSByZXR1cm4gZW5kKHBhcnNlcilcbiAgdmFyIGkgPSAwLCBjID0gXCJcIlxuICB3aGlsZSAocGFyc2VyLmMgPSBjID0gY2h1bmsuY2hhckF0KGkrKykpIHtcbiAgICBpZiAocGFyc2VyLnRyYWNrUG9zaXRpb24pIHtcbiAgICAgIHBhcnNlci5wb3NpdGlvbiArK1xuICAgICAgaWYgKGMgPT09IFwiXFxuXCIpIHtcbiAgICAgICAgcGFyc2VyLmxpbmUgKytcbiAgICAgICAgcGFyc2VyLmNvbHVtbiA9IDBcbiAgICAgIH0gZWxzZSBwYXJzZXIuY29sdW1uICsrXG4gICAgfVxuICAgIHN3aXRjaCAocGFyc2VyLnN0YXRlKSB7XG5cbiAgICAgIGNhc2UgUy5CRUdJTjpcbiAgICAgICAgaWYgKGMgPT09IFwiPFwiKSB7XG4gICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5PUEVOX1dBS0FcbiAgICAgICAgICBwYXJzZXIuc3RhcnRUYWdQb3NpdGlvbiA9IHBhcnNlci5wb3NpdGlvblxuICAgICAgICB9IGVsc2UgaWYgKG5vdCh3aGl0ZXNwYWNlLGMpKSB7XG4gICAgICAgICAgLy8gaGF2ZSB0byBwcm9jZXNzIHRoaXMgYXMgYSB0ZXh0IG5vZGUuXG4gICAgICAgICAgLy8gd2VpcmQsIGJ1dCBoYXBwZW5zLlxuICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIk5vbi13aGl0ZXNwYWNlIGJlZm9yZSBmaXJzdCB0YWcuXCIpXG4gICAgICAgICAgcGFyc2VyLnRleHROb2RlID0gY1xuICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVFxuICAgICAgICB9XG4gICAgICBjb250aW51ZVxuXG4gICAgICBjYXNlIFMuVEVYVDpcbiAgICAgICAgaWYgKHBhcnNlci5zYXdSb290ICYmICFwYXJzZXIuY2xvc2VkUm9vdCkge1xuICAgICAgICAgIHZhciBzdGFydGkgPSBpLTFcbiAgICAgICAgICB3aGlsZSAoYyAmJiBjIT09XCI8XCIgJiYgYyE9PVwiJlwiKSB7XG4gICAgICAgICAgICBjID0gY2h1bmsuY2hhckF0KGkrKylcbiAgICAgICAgICAgIGlmIChjICYmIHBhcnNlci50cmFja1Bvc2l0aW9uKSB7XG4gICAgICAgICAgICAgIHBhcnNlci5wb3NpdGlvbiArK1xuICAgICAgICAgICAgICBpZiAoYyA9PT0gXCJcXG5cIikge1xuICAgICAgICAgICAgICAgIHBhcnNlci5saW5lICsrXG4gICAgICAgICAgICAgICAgcGFyc2VyLmNvbHVtbiA9IDBcbiAgICAgICAgICAgICAgfSBlbHNlIHBhcnNlci5jb2x1bW4gKytcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcGFyc2VyLnRleHROb2RlICs9IGNodW5rLnN1YnN0cmluZyhzdGFydGksIGktMSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoYyA9PT0gXCI8XCIpIHtcbiAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLk9QRU5fV0FLQVxuICAgICAgICAgIHBhcnNlci5zdGFydFRhZ1Bvc2l0aW9uID0gcGFyc2VyLnBvc2l0aW9uXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKG5vdCh3aGl0ZXNwYWNlLCBjKSAmJiAoIXBhcnNlci5zYXdSb290IHx8IHBhcnNlci5jbG9zZWRSb290KSlcbiAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIlRleHQgZGF0YSBvdXRzaWRlIG9mIHJvb3Qgbm9kZS5cIilcbiAgICAgICAgICBpZiAoYyA9PT0gXCImXCIpIHBhcnNlci5zdGF0ZSA9IFMuVEVYVF9FTlRJVFlcbiAgICAgICAgICBlbHNlIHBhcnNlci50ZXh0Tm9kZSArPSBjXG4gICAgICAgIH1cbiAgICAgIGNvbnRpbnVlXG5cbiAgICAgIGNhc2UgUy5TQ1JJUFQ6XG4gICAgICAgIC8vIG9ubHkgbm9uLXN0cmljdFxuICAgICAgICBpZiAoYyA9PT0gXCI8XCIpIHtcbiAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlNDUklQVF9FTkRJTkdcbiAgICAgICAgfSBlbHNlIHBhcnNlci5zY3JpcHQgKz0gY1xuICAgICAgY29udGludWVcblxuICAgICAgY2FzZSBTLlNDUklQVF9FTkRJTkc6XG4gICAgICAgIGlmIChjID09PSBcIi9cIikge1xuICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQ0xPU0VfVEFHXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGFyc2VyLnNjcmlwdCArPSBcIjxcIiArIGNcbiAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlNDUklQVFxuICAgICAgICB9XG4gICAgICBjb250aW51ZVxuXG4gICAgICBjYXNlIFMuT1BFTl9XQUtBOlxuICAgICAgICAvLyBlaXRoZXIgYSAvLCA/LCAhLCBvciB0ZXh0IGlzIGNvbWluZyBuZXh0LlxuICAgICAgICBpZiAoYyA9PT0gXCIhXCIpIHtcbiAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlNHTUxfREVDTFxuICAgICAgICAgIHBhcnNlci5zZ21sRGVjbCA9IFwiXCJcbiAgICAgICAgfSBlbHNlIGlmIChpcyh3aGl0ZXNwYWNlLCBjKSkge1xuICAgICAgICAgIC8vIHdhaXQgZm9yIGl0Li4uXG4gICAgICAgIH0gZWxzZSBpZiAoaXMobmFtZVN0YXJ0LGMpKSB7XG4gICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5PUEVOX1RBR1xuICAgICAgICAgIHBhcnNlci50YWdOYW1lID0gY1xuICAgICAgICB9IGVsc2UgaWYgKGMgPT09IFwiL1wiKSB7XG4gICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DTE9TRV9UQUdcbiAgICAgICAgICBwYXJzZXIudGFnTmFtZSA9IFwiXCJcbiAgICAgICAgfSBlbHNlIGlmIChjID09PSBcIj9cIikge1xuICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuUFJPQ19JTlNUXG4gICAgICAgICAgcGFyc2VyLnByb2NJbnN0TmFtZSA9IHBhcnNlci5wcm9jSW5zdEJvZHkgPSBcIlwiXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsIFwiVW5lbmNvZGVkIDxcIilcbiAgICAgICAgICAvLyBpZiB0aGVyZSB3YXMgc29tZSB3aGl0ZXNwYWNlLCB0aGVuIGFkZCB0aGF0IGluLlxuICAgICAgICAgIGlmIChwYXJzZXIuc3RhcnRUYWdQb3NpdGlvbiArIDEgPCBwYXJzZXIucG9zaXRpb24pIHtcbiAgICAgICAgICAgIHZhciBwYWQgPSBwYXJzZXIucG9zaXRpb24gLSBwYXJzZXIuc3RhcnRUYWdQb3NpdGlvblxuICAgICAgICAgICAgYyA9IG5ldyBBcnJheShwYWQpLmpvaW4oXCIgXCIpICsgY1xuICAgICAgICAgIH1cbiAgICAgICAgICBwYXJzZXIudGV4dE5vZGUgKz0gXCI8XCIgKyBjXG4gICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5URVhUXG4gICAgICAgIH1cbiAgICAgIGNvbnRpbnVlXG5cbiAgICAgIGNhc2UgUy5TR01MX0RFQ0w6XG4gICAgICAgIGlmICgocGFyc2VyLnNnbWxEZWNsK2MpLnRvVXBwZXJDYXNlKCkgPT09IENEQVRBKSB7XG4gICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCBcIm9ub3BlbmNkYXRhXCIpXG4gICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DREFUQVxuICAgICAgICAgIHBhcnNlci5zZ21sRGVjbCA9IFwiXCJcbiAgICAgICAgICBwYXJzZXIuY2RhdGEgPSBcIlwiXG4gICAgICAgIH0gZWxzZSBpZiAocGFyc2VyLnNnbWxEZWNsK2MgPT09IFwiLS1cIikge1xuICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQ09NTUVOVFxuICAgICAgICAgIHBhcnNlci5jb21tZW50ID0gXCJcIlxuICAgICAgICAgIHBhcnNlci5zZ21sRGVjbCA9IFwiXCJcbiAgICAgICAgfSBlbHNlIGlmICgocGFyc2VyLnNnbWxEZWNsK2MpLnRvVXBwZXJDYXNlKCkgPT09IERPQ1RZUEUpIHtcbiAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkRPQ1RZUEVcbiAgICAgICAgICBpZiAocGFyc2VyLmRvY3R5cGUgfHwgcGFyc2VyLnNhd1Jvb3QpIHN0cmljdEZhaWwocGFyc2VyLFxuICAgICAgICAgICAgXCJJbmFwcHJvcHJpYXRlbHkgbG9jYXRlZCBkb2N0eXBlIGRlY2xhcmF0aW9uXCIpXG4gICAgICAgICAgcGFyc2VyLmRvY3R5cGUgPSBcIlwiXG4gICAgICAgICAgcGFyc2VyLnNnbWxEZWNsID0gXCJcIlxuICAgICAgICB9IGVsc2UgaWYgKGMgPT09IFwiPlwiKSB7XG4gICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCBcIm9uc2dtbGRlY2xhcmF0aW9uXCIsIHBhcnNlci5zZ21sRGVjbClcbiAgICAgICAgICBwYXJzZXIuc2dtbERlY2wgPSBcIlwiXG4gICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5URVhUXG4gICAgICAgIH0gZWxzZSBpZiAoaXMocXVvdGUsIGMpKSB7XG4gICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5TR01MX0RFQ0xfUVVPVEVEXG4gICAgICAgICAgcGFyc2VyLnNnbWxEZWNsICs9IGNcbiAgICAgICAgfSBlbHNlIHBhcnNlci5zZ21sRGVjbCArPSBjXG4gICAgICBjb250aW51ZVxuXG4gICAgICBjYXNlIFMuU0dNTF9ERUNMX1FVT1RFRDpcbiAgICAgICAgaWYgKGMgPT09IHBhcnNlci5xKSB7XG4gICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5TR01MX0RFQ0xcbiAgICAgICAgICBwYXJzZXIucSA9IFwiXCJcbiAgICAgICAgfVxuICAgICAgICBwYXJzZXIuc2dtbERlY2wgKz0gY1xuICAgICAgY29udGludWVcblxuICAgICAgY2FzZSBTLkRPQ1RZUEU6XG4gICAgICAgIGlmIChjID09PSBcIj5cIikge1xuICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVFxuICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgXCJvbmRvY3R5cGVcIiwgcGFyc2VyLmRvY3R5cGUpXG4gICAgICAgICAgcGFyc2VyLmRvY3R5cGUgPSB0cnVlIC8vIGp1c3QgcmVtZW1iZXIgdGhhdCB3ZSBzYXcgaXQuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGFyc2VyLmRvY3R5cGUgKz0gY1xuICAgICAgICAgIGlmIChjID09PSBcIltcIikgcGFyc2VyLnN0YXRlID0gUy5ET0NUWVBFX0RURFxuICAgICAgICAgIGVsc2UgaWYgKGlzKHF1b3RlLCBjKSkge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5ET0NUWVBFX1FVT1RFRFxuICAgICAgICAgICAgcGFyc2VyLnEgPSBjXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBjb250aW51ZVxuXG4gICAgICBjYXNlIFMuRE9DVFlQRV9RVU9URUQ6XG4gICAgICAgIHBhcnNlci5kb2N0eXBlICs9IGNcbiAgICAgICAgaWYgKGMgPT09IHBhcnNlci5xKSB7XG4gICAgICAgICAgcGFyc2VyLnEgPSBcIlwiXG4gICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5ET0NUWVBFXG4gICAgICAgIH1cbiAgICAgIGNvbnRpbnVlXG5cbiAgICAgIGNhc2UgUy5ET0NUWVBFX0RURDpcbiAgICAgICAgcGFyc2VyLmRvY3R5cGUgKz0gY1xuICAgICAgICBpZiAoYyA9PT0gXCJdXCIpIHBhcnNlci5zdGF0ZSA9IFMuRE9DVFlQRVxuICAgICAgICBlbHNlIGlmIChpcyhxdW90ZSxjKSkge1xuICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuRE9DVFlQRV9EVERfUVVPVEVEXG4gICAgICAgICAgcGFyc2VyLnEgPSBjXG4gICAgICAgIH1cbiAgICAgIGNvbnRpbnVlXG5cbiAgICAgIGNhc2UgUy5ET0NUWVBFX0RURF9RVU9URUQ6XG4gICAgICAgIHBhcnNlci5kb2N0eXBlICs9IGNcbiAgICAgICAgaWYgKGMgPT09IHBhcnNlci5xKSB7XG4gICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5ET0NUWVBFX0RURFxuICAgICAgICAgIHBhcnNlci5xID0gXCJcIlxuICAgICAgICB9XG4gICAgICBjb250aW51ZVxuXG4gICAgICBjYXNlIFMuQ09NTUVOVDpcbiAgICAgICAgaWYgKGMgPT09IFwiLVwiKSBwYXJzZXIuc3RhdGUgPSBTLkNPTU1FTlRfRU5ESU5HXG4gICAgICAgIGVsc2UgcGFyc2VyLmNvbW1lbnQgKz0gY1xuICAgICAgY29udGludWVcblxuICAgICAgY2FzZSBTLkNPTU1FTlRfRU5ESU5HOlxuICAgICAgICBpZiAoYyA9PT0gXCItXCIpIHtcbiAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNPTU1FTlRfRU5ERURcbiAgICAgICAgICBwYXJzZXIuY29tbWVudCA9IHRleHRvcHRzKHBhcnNlci5vcHQsIHBhcnNlci5jb21tZW50KVxuICAgICAgICAgIGlmIChwYXJzZXIuY29tbWVudCkgZW1pdE5vZGUocGFyc2VyLCBcIm9uY29tbWVudFwiLCBwYXJzZXIuY29tbWVudClcbiAgICAgICAgICBwYXJzZXIuY29tbWVudCA9IFwiXCJcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYXJzZXIuY29tbWVudCArPSBcIi1cIiArIGNcbiAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNPTU1FTlRcbiAgICAgICAgfVxuICAgICAgY29udGludWVcblxuICAgICAgY2FzZSBTLkNPTU1FTlRfRU5ERUQ6XG4gICAgICAgIGlmIChjICE9PSBcIj5cIikge1xuICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIk1hbGZvcm1lZCBjb21tZW50XCIpXG4gICAgICAgICAgLy8gYWxsb3cgPCEtLSBibGFoIC0tIGJsb28gLS0+IGluIG5vbi1zdHJpY3QgbW9kZSxcbiAgICAgICAgICAvLyB3aGljaCBpcyBhIGNvbW1lbnQgb2YgXCIgYmxhaCAtLSBibG9vIFwiXG4gICAgICAgICAgcGFyc2VyLmNvbW1lbnQgKz0gXCItLVwiICsgY1xuICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQ09NTUVOVFxuICAgICAgICB9IGVsc2UgcGFyc2VyLnN0YXRlID0gUy5URVhUXG4gICAgICBjb250aW51ZVxuXG4gICAgICBjYXNlIFMuQ0RBVEE6XG4gICAgICAgIGlmIChjID09PSBcIl1cIikgcGFyc2VyLnN0YXRlID0gUy5DREFUQV9FTkRJTkdcbiAgICAgICAgZWxzZSBwYXJzZXIuY2RhdGEgKz0gY1xuICAgICAgY29udGludWVcblxuICAgICAgY2FzZSBTLkNEQVRBX0VORElORzpcbiAgICAgICAgaWYgKGMgPT09IFwiXVwiKSBwYXJzZXIuc3RhdGUgPSBTLkNEQVRBX0VORElOR18yXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHBhcnNlci5jZGF0YSArPSBcIl1cIiArIGNcbiAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNEQVRBXG4gICAgICAgIH1cbiAgICAgIGNvbnRpbnVlXG5cbiAgICAgIGNhc2UgUy5DREFUQV9FTkRJTkdfMjpcbiAgICAgICAgaWYgKGMgPT09IFwiPlwiKSB7XG4gICAgICAgICAgaWYgKHBhcnNlci5jZGF0YSkgZW1pdE5vZGUocGFyc2VyLCBcIm9uY2RhdGFcIiwgcGFyc2VyLmNkYXRhKVxuICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgXCJvbmNsb3NlY2RhdGFcIilcbiAgICAgICAgICBwYXJzZXIuY2RhdGEgPSBcIlwiXG4gICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5URVhUXG4gICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gXCJdXCIpIHtcbiAgICAgICAgICBwYXJzZXIuY2RhdGEgKz0gXCJdXCJcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYXJzZXIuY2RhdGEgKz0gXCJdXVwiICsgY1xuICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQ0RBVEFcbiAgICAgICAgfVxuICAgICAgY29udGludWVcblxuICAgICAgY2FzZSBTLlBST0NfSU5TVDpcbiAgICAgICAgaWYgKGMgPT09IFwiP1wiKSBwYXJzZXIuc3RhdGUgPSBTLlBST0NfSU5TVF9FTkRJTkdcbiAgICAgICAgZWxzZSBpZiAoaXMod2hpdGVzcGFjZSwgYykpIHBhcnNlci5zdGF0ZSA9IFMuUFJPQ19JTlNUX0JPRFlcbiAgICAgICAgZWxzZSBwYXJzZXIucHJvY0luc3ROYW1lICs9IGNcbiAgICAgIGNvbnRpbnVlXG5cbiAgICAgIGNhc2UgUy5QUk9DX0lOU1RfQk9EWTpcbiAgICAgICAgaWYgKCFwYXJzZXIucHJvY0luc3RCb2R5ICYmIGlzKHdoaXRlc3BhY2UsIGMpKSBjb250aW51ZVxuICAgICAgICBlbHNlIGlmIChjID09PSBcIj9cIikgcGFyc2VyLnN0YXRlID0gUy5QUk9DX0lOU1RfRU5ESU5HXG4gICAgICAgIGVsc2UgcGFyc2VyLnByb2NJbnN0Qm9keSArPSBjXG4gICAgICBjb250aW51ZVxuXG4gICAgICBjYXNlIFMuUFJPQ19JTlNUX0VORElORzpcbiAgICAgICAgaWYgKGMgPT09IFwiPlwiKSB7XG4gICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCBcIm9ucHJvY2Vzc2luZ2luc3RydWN0aW9uXCIsIHtcbiAgICAgICAgICAgIG5hbWUgOiBwYXJzZXIucHJvY0luc3ROYW1lLFxuICAgICAgICAgICAgYm9keSA6IHBhcnNlci5wcm9jSW5zdEJvZHlcbiAgICAgICAgICB9KVxuICAgICAgICAgIHBhcnNlci5wcm9jSW5zdE5hbWUgPSBwYXJzZXIucHJvY0luc3RCb2R5ID0gXCJcIlxuICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhcnNlci5wcm9jSW5zdEJvZHkgKz0gXCI/XCIgKyBjXG4gICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5QUk9DX0lOU1RfQk9EWVxuICAgICAgICB9XG4gICAgICBjb250aW51ZVxuXG4gICAgICBjYXNlIFMuT1BFTl9UQUc6XG4gICAgICAgIGlmIChpcyhuYW1lQm9keSwgYykpIHBhcnNlci50YWdOYW1lICs9IGNcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgbmV3VGFnKHBhcnNlcilcbiAgICAgICAgICBpZiAoYyA9PT0gXCI+XCIpIG9wZW5UYWcocGFyc2VyKVxuICAgICAgICAgIGVsc2UgaWYgKGMgPT09IFwiL1wiKSBwYXJzZXIuc3RhdGUgPSBTLk9QRU5fVEFHX1NMQVNIXG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAobm90KHdoaXRlc3BhY2UsIGMpKSBzdHJpY3RGYWlsKFxuICAgICAgICAgICAgICBwYXJzZXIsIFwiSW52YWxpZCBjaGFyYWN0ZXIgaW4gdGFnIG5hbWVcIilcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBjb250aW51ZVxuXG4gICAgICBjYXNlIFMuT1BFTl9UQUdfU0xBU0g6XG4gICAgICAgIGlmIChjID09PSBcIj5cIikge1xuICAgICAgICAgIG9wZW5UYWcocGFyc2VyLCB0cnVlKVxuICAgICAgICAgIGNsb3NlVGFnKHBhcnNlcilcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJGb3J3YXJkLXNsYXNoIGluIG9wZW5pbmcgdGFnIG5vdCBmb2xsb3dlZCBieSA+XCIpXG4gICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJcbiAgICAgICAgfVxuICAgICAgY29udGludWVcblxuICAgICAgY2FzZSBTLkFUVFJJQjpcbiAgICAgICAgLy8gaGF2ZW4ndCByZWFkIHRoZSBhdHRyaWJ1dGUgbmFtZSB5ZXQuXG4gICAgICAgIGlmIChpcyh3aGl0ZXNwYWNlLCBjKSkgY29udGludWVcbiAgICAgICAgZWxzZSBpZiAoYyA9PT0gXCI+XCIpIG9wZW5UYWcocGFyc2VyKVxuICAgICAgICBlbHNlIGlmIChjID09PSBcIi9cIikgcGFyc2VyLnN0YXRlID0gUy5PUEVOX1RBR19TTEFTSFxuICAgICAgICBlbHNlIGlmIChpcyhuYW1lU3RhcnQsIGMpKSB7XG4gICAgICAgICAgcGFyc2VyLmF0dHJpYk5hbWUgPSBjXG4gICAgICAgICAgcGFyc2VyLmF0dHJpYlZhbHVlID0gXCJcIlxuICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCX05BTUVcbiAgICAgICAgfSBlbHNlIHN0cmljdEZhaWwocGFyc2VyLCBcIkludmFsaWQgYXR0cmlidXRlIG5hbWVcIilcbiAgICAgIGNvbnRpbnVlXG5cbiAgICAgIGNhc2UgUy5BVFRSSUJfTkFNRTpcbiAgICAgICAgaWYgKGMgPT09IFwiPVwiKSBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9WQUxVRVxuICAgICAgICBlbHNlIGlmIChjID09PSBcIj5cIikge1xuICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIkF0dHJpYnV0ZSB3aXRob3V0IHZhbHVlXCIpXG4gICAgICAgICAgcGFyc2VyLmF0dHJpYlZhbHVlID0gcGFyc2VyLmF0dHJpYk5hbWVcbiAgICAgICAgICBhdHRyaWIocGFyc2VyKVxuICAgICAgICAgIG9wZW5UYWcocGFyc2VyKVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzKHdoaXRlc3BhY2UsIGMpKSBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9OQU1FX1NBV19XSElURVxuICAgICAgICBlbHNlIGlmIChpcyhuYW1lQm9keSwgYykpIHBhcnNlci5hdHRyaWJOYW1lICs9IGNcbiAgICAgICAgZWxzZSBzdHJpY3RGYWlsKHBhcnNlciwgXCJJbnZhbGlkIGF0dHJpYnV0ZSBuYW1lXCIpXG4gICAgICBjb250aW51ZVxuXG4gICAgICBjYXNlIFMuQVRUUklCX05BTUVfU0FXX1dISVRFOlxuICAgICAgICBpZiAoYyA9PT0gXCI9XCIpIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCX1ZBTFVFXG4gICAgICAgIGVsc2UgaWYgKGlzKHdoaXRlc3BhY2UsIGMpKSBjb250aW51ZVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJBdHRyaWJ1dGUgd2l0aG91dCB2YWx1ZVwiKVxuICAgICAgICAgIHBhcnNlci50YWcuYXR0cmlidXRlc1twYXJzZXIuYXR0cmliTmFtZV0gPSBcIlwiXG4gICAgICAgICAgcGFyc2VyLmF0dHJpYlZhbHVlID0gXCJcIlxuICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgXCJvbmF0dHJpYnV0ZVwiLFxuICAgICAgICAgICAgICAgICAgIHsgbmFtZSA6IHBhcnNlci5hdHRyaWJOYW1lLCB2YWx1ZSA6IFwiXCIgfSlcbiAgICAgICAgICBwYXJzZXIuYXR0cmliTmFtZSA9IFwiXCJcbiAgICAgICAgICBpZiAoYyA9PT0gXCI+XCIpIG9wZW5UYWcocGFyc2VyKVxuICAgICAgICAgIGVsc2UgaWYgKGlzKG5hbWVTdGFydCwgYykpIHtcbiAgICAgICAgICAgIHBhcnNlci5hdHRyaWJOYW1lID0gY1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfTkFNRVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJJbnZhbGlkIGF0dHJpYnV0ZSBuYW1lXCIpXG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQlxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgY29udGludWVcblxuICAgICAgY2FzZSBTLkFUVFJJQl9WQUxVRTpcbiAgICAgICAgaWYgKGlzKHdoaXRlc3BhY2UsIGMpKSBjb250aW51ZVxuICAgICAgICBlbHNlIGlmIChpcyhxdW90ZSwgYykpIHtcbiAgICAgICAgICBwYXJzZXIucSA9IGNcbiAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9WQUxVRV9RVU9URURcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJVbnF1b3RlZCBhdHRyaWJ1dGUgdmFsdWVcIilcbiAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9WQUxVRV9VTlFVT1RFRFxuICAgICAgICAgIHBhcnNlci5hdHRyaWJWYWx1ZSA9IGNcbiAgICAgICAgfVxuICAgICAgY29udGludWVcblxuICAgICAgY2FzZSBTLkFUVFJJQl9WQUxVRV9RVU9URUQ6XG4gICAgICAgIGlmIChjICE9PSBwYXJzZXIucSkge1xuICAgICAgICAgIGlmIChjID09PSBcIiZcIikgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfVkFMVUVfRU5USVRZX1FcbiAgICAgICAgICBlbHNlIHBhcnNlci5hdHRyaWJWYWx1ZSArPSBjXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuICAgICAgICBhdHRyaWIocGFyc2VyKVxuICAgICAgICBwYXJzZXIucSA9IFwiXCJcbiAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfVkFMVUVfQ0xPU0VEXG4gICAgICBjb250aW51ZVxuXG4gICAgICBjYXNlIFMuQVRUUklCX1ZBTFVFX0NMT1NFRDpcbiAgICAgICAgaWYgKGlzKHdoaXRlc3BhY2UsIGMpKSB7XG4gICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJcbiAgICAgICAgfSBlbHNlIGlmIChjID09PSBcIj5cIikgb3BlblRhZyhwYXJzZXIpXG4gICAgICAgIGVsc2UgaWYgKGMgPT09IFwiL1wiKSBwYXJzZXIuc3RhdGUgPSBTLk9QRU5fVEFHX1NMQVNIXG4gICAgICAgIGVsc2UgaWYgKGlzKG5hbWVTdGFydCwgYykpIHtcbiAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJObyB3aGl0ZXNwYWNlIGJldHdlZW4gYXR0cmlidXRlc1wiKVxuICAgICAgICAgIHBhcnNlci5hdHRyaWJOYW1lID0gY1xuICAgICAgICAgIHBhcnNlci5hdHRyaWJWYWx1ZSA9IFwiXCJcbiAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9OQU1FXG4gICAgICAgIH0gZWxzZSBzdHJpY3RGYWlsKHBhcnNlciwgXCJJbnZhbGlkIGF0dHJpYnV0ZSBuYW1lXCIpXG4gICAgICBjb250aW51ZVxuXG4gICAgICBjYXNlIFMuQVRUUklCX1ZBTFVFX1VOUVVPVEVEOlxuICAgICAgICBpZiAobm90KGF0dHJpYkVuZCxjKSkge1xuICAgICAgICAgIGlmIChjID09PSBcIiZcIikgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfVkFMVUVfRU5USVRZX1VcbiAgICAgICAgICBlbHNlIHBhcnNlci5hdHRyaWJWYWx1ZSArPSBjXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuICAgICAgICBhdHRyaWIocGFyc2VyKVxuICAgICAgICBpZiAoYyA9PT0gXCI+XCIpIG9wZW5UYWcocGFyc2VyKVxuICAgICAgICBlbHNlIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCXG4gICAgICBjb250aW51ZVxuXG4gICAgICBjYXNlIFMuQ0xPU0VfVEFHOlxuICAgICAgICBpZiAoIXBhcnNlci50YWdOYW1lKSB7XG4gICAgICAgICAgaWYgKGlzKHdoaXRlc3BhY2UsIGMpKSBjb250aW51ZVxuICAgICAgICAgIGVsc2UgaWYgKG5vdChuYW1lU3RhcnQsIGMpKSB7XG4gICAgICAgICAgICBpZiAocGFyc2VyLnNjcmlwdCkge1xuICAgICAgICAgICAgICBwYXJzZXIuc2NyaXB0ICs9IFwiPC9cIiArIGNcbiAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5TQ1JJUFRcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIkludmFsaWQgdGFnbmFtZSBpbiBjbG9zaW5nIHRhZy5cIilcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgcGFyc2VyLnRhZ05hbWUgPSBjXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYyA9PT0gXCI+XCIpIGNsb3NlVGFnKHBhcnNlcilcbiAgICAgICAgZWxzZSBpZiAoaXMobmFtZUJvZHksIGMpKSBwYXJzZXIudGFnTmFtZSArPSBjXG4gICAgICAgIGVsc2UgaWYgKHBhcnNlci5zY3JpcHQpIHtcbiAgICAgICAgICBwYXJzZXIuc2NyaXB0ICs9IFwiPC9cIiArIHBhcnNlci50YWdOYW1lXG4gICAgICAgICAgcGFyc2VyLnRhZ05hbWUgPSBcIlwiXG4gICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5TQ1JJUFRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAobm90KHdoaXRlc3BhY2UsIGMpKSBzdHJpY3RGYWlsKHBhcnNlcixcbiAgICAgICAgICAgIFwiSW52YWxpZCB0YWduYW1lIGluIGNsb3NpbmcgdGFnXCIpXG4gICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DTE9TRV9UQUdfU0FXX1dISVRFXG4gICAgICAgIH1cbiAgICAgIGNvbnRpbnVlXG5cbiAgICAgIGNhc2UgUy5DTE9TRV9UQUdfU0FXX1dISVRFOlxuICAgICAgICBpZiAoaXMod2hpdGVzcGFjZSwgYykpIGNvbnRpbnVlXG4gICAgICAgIGlmIChjID09PSBcIj5cIikgY2xvc2VUYWcocGFyc2VyKVxuICAgICAgICBlbHNlIHN0cmljdEZhaWwocGFyc2VyLCBcIkludmFsaWQgY2hhcmFjdGVycyBpbiBjbG9zaW5nIHRhZ1wiKVxuICAgICAgY29udGludWVcblxuICAgICAgY2FzZSBTLlRFWFRfRU5USVRZOlxuICAgICAgY2FzZSBTLkFUVFJJQl9WQUxVRV9FTlRJVFlfUTpcbiAgICAgIGNhc2UgUy5BVFRSSUJfVkFMVUVfRU5USVRZX1U6XG4gICAgICAgIHN3aXRjaChwYXJzZXIuc3RhdGUpIHtcbiAgICAgICAgICBjYXNlIFMuVEVYVF9FTlRJVFk6XG4gICAgICAgICAgICB2YXIgcmV0dXJuU3RhdGUgPSBTLlRFWFQsIGJ1ZmZlciA9IFwidGV4dE5vZGVcIlxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBjYXNlIFMuQVRUUklCX1ZBTFVFX0VOVElUWV9ROlxuICAgICAgICAgICAgdmFyIHJldHVyblN0YXRlID0gUy5BVFRSSUJfVkFMVUVfUVVPVEVELCBidWZmZXIgPSBcImF0dHJpYlZhbHVlXCJcbiAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSBTLkFUVFJJQl9WQUxVRV9FTlRJVFlfVTpcbiAgICAgICAgICAgIHZhciByZXR1cm5TdGF0ZSA9IFMuQVRUUklCX1ZBTFVFX1VOUVVPVEVELCBidWZmZXIgPSBcImF0dHJpYlZhbHVlXCJcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICAgIGlmIChjID09PSBcIjtcIikge1xuICAgICAgICAgIHBhcnNlcltidWZmZXJdICs9IHBhcnNlRW50aXR5KHBhcnNlcilcbiAgICAgICAgICBwYXJzZXIuZW50aXR5ID0gXCJcIlxuICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IHJldHVyblN0YXRlXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXMoZW50aXR5LCBjKSkgcGFyc2VyLmVudGl0eSArPSBjXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIkludmFsaWQgY2hhcmFjdGVyIGVudGl0eVwiKVxuICAgICAgICAgIHBhcnNlcltidWZmZXJdICs9IFwiJlwiICsgcGFyc2VyLmVudGl0eSArIGNcbiAgICAgICAgICBwYXJzZXIuZW50aXR5ID0gXCJcIlxuICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IHJldHVyblN0YXRlXG4gICAgICAgIH1cbiAgICAgIGNvbnRpbnVlXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihwYXJzZXIsIFwiVW5rbm93biBzdGF0ZTogXCIgKyBwYXJzZXIuc3RhdGUpXG4gICAgfVxuICB9IC8vIHdoaWxlXG4gIC8vIGNkYXRhIGJsb2NrcyBjYW4gZ2V0IHZlcnkgYmlnIHVuZGVyIG5vcm1hbCBjb25kaXRpb25zLiBlbWl0IGFuZCBtb3ZlIG9uLlxuICAvLyBpZiAocGFyc2VyLnN0YXRlID09PSBTLkNEQVRBICYmIHBhcnNlci5jZGF0YSkge1xuICAvLyAgIGVtaXROb2RlKHBhcnNlciwgXCJvbmNkYXRhXCIsIHBhcnNlci5jZGF0YSlcbiAgLy8gICBwYXJzZXIuY2RhdGEgPSBcIlwiXG4gIC8vIH1cbiAgaWYgKHBhcnNlci5wb3NpdGlvbiA+PSBwYXJzZXIuYnVmZmVyQ2hlY2tQb3NpdGlvbikgY2hlY2tCdWZmZXJMZW5ndGgocGFyc2VyKVxuICByZXR1cm4gcGFyc2VyXG59XG5cbi8qISBodHRwOi8vbXRocy5iZS9mcm9tY29kZXBvaW50IHYwLjEuMCBieSBAbWF0aGlhcyAqL1xuaWYgKCFTdHJpbmcuZnJvbUNvZGVQb2ludCkge1xuICAgICAgICAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0cmluZ0Zyb21DaGFyQ29kZSA9IFN0cmluZy5mcm9tQ2hhckNvZGU7XG4gICAgICAgICAgICAgICAgdmFyIGZsb29yID0gTWF0aC5mbG9vcjtcbiAgICAgICAgICAgICAgICB2YXIgZnJvbUNvZGVQb2ludCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIE1BWF9TSVpFID0gMHg0MDAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvZGVVbml0cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhpZ2hTdXJyb2dhdGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbG93U3Vycm9nYXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gLTE7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2RlUG9pbnQgPSBOdW1iZXIoYXJndW1lbnRzW2luZGV4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhaXNGaW5pdGUoY29kZVBvaW50KSB8fCAvLyBgTmFOYCwgYCtJbmZpbml0eWAsIG9yIGAtSW5maW5pdHlgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZVBvaW50IDwgMCB8fCAvLyBub3QgYSB2YWxpZCBVbmljb2RlIGNvZGUgcG9pbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlUG9pbnQgPiAweDEwRkZGRiB8fCAvLyBub3QgYSB2YWxpZCBVbmljb2RlIGNvZGUgcG9pbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbG9vcihjb2RlUG9pbnQpICE9IGNvZGVQb2ludCAvLyBub3QgYW4gaW50ZWdlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBSYW5nZUVycm9yKCdJbnZhbGlkIGNvZGUgcG9pbnQ6ICcgKyBjb2RlUG9pbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2RlUG9pbnQgPD0gMHhGRkZGKSB7IC8vIEJNUCBjb2RlIHBvaW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZVVuaXRzLnB1c2goY29kZVBvaW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gQXN0cmFsIGNvZGUgcG9pbnQ7IHNwbGl0IGluIHN1cnJvZ2F0ZSBoYWx2ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBodHRwOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9qYXZhc2NyaXB0LWVuY29kaW5nI3N1cnJvZ2F0ZS1mb3JtdWxhZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVQb2ludCAtPSAweDEwMDAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hTdXJyb2dhdGUgPSAoY29kZVBvaW50ID4+IDEwKSArIDB4RDgwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb3dTdXJyb2dhdGUgPSAoY29kZVBvaW50ICUgMHg0MDApICsgMHhEQzAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVVbml0cy5wdXNoKGhpZ2hTdXJyb2dhdGUsIGxvd1N1cnJvZ2F0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ICsgMSA9PSBsZW5ndGggfHwgY29kZVVuaXRzLmxlbmd0aCA+IE1BWF9TSVpFKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IHN0cmluZ0Zyb21DaGFyQ29kZS5hcHBseShudWxsLCBjb2RlVW5pdHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVVbml0cy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZywgJ2Zyb21Db2RlUG9pbnQnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd2YWx1ZSc6IGZyb21Db2RlUG9pbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjb25maWd1cmFibGUnOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnd3JpdGFibGUnOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nLmZyb21Db2RlUG9pbnQgPSBmcm9tQ29kZVBvaW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfSgpKTtcbn1cblxufSkodHlwZW9mIGV4cG9ydHMgPT09IFwidW5kZWZpbmVkXCIgPyBzYXggPSB7fSA6IGV4cG9ydHMpO1xuIl19","/**\n * Tiny stack for browser or server\n *\n * @author Jason Mulligan <jason.mulligan@avoidwork.com>\n * @copyright 2014 Jason Mulligan\n * @license BSD-3 <https://raw.github.com/avoidwork/tiny-stack/master/LICENSE>\n * @link http://avoidwork.github.io/tiny-stack\n * @module tiny-stack\n * @version 0.1.0\n */\n\n( function ( global ) {\n\n\"use strict\";\n\n/**\n * TinyStack\n *\n * @constructor\n */\nfunction TinyStack () {\n\tthis.data = [null];\n\tthis.top  = 0;\n}\n\n/**\n * Clears the stack\n *\n * @method clear\n * @memberOf TinyStack\n * @return {Object} {@link TinyStack}\n */\nTinyStack.prototype.clear = function clear () {\n\tthis.data = [null];\n\tthis.top  = 0;\n\n\treturn this;\n};\n\n/**\n * Gets the size of the stack\n *\n * @method length\n * @memberOf TinyStack\n * @return {Number} Size of stack\n */\nTinyStack.prototype.length = function length () {\n\treturn this.top;\n};\n\n/**\n * Gets the item at the top of the stack\n *\n * @method peek\n * @memberOf TinyStack\n * @return {Mixed} Item at the top of the stack\n */\nTinyStack.prototype.peek = function peek () {\n\treturn this.data[this.top];\n};\n\n/**\n * Gets & removes the item at the top of the stack\n *\n * @method pop\n * @memberOf TinyStack\n * @return {Mixed} Item at the top of the stack\n */\nTinyStack.prototype.pop = function pop () {\n\tif ( this.top > 0 ) {\n\t\tthis.top--;\n\n\t\treturn this.data.pop();\n\t}\n\telse {\n\t\treturn undefined;\n\t}\n};\n\n/**\n * Pushes an item onto the stack\n *\n * @method push\n * @memberOf TinyStack\n * @return {Object} {@link TinyStack}\n */\nTinyStack.prototype.push = function push ( arg ) {\n\tthis.data[++this.top] = arg;\n\n\treturn this;\n};\n\n/**\n * TinyStack factory\n *\n * @method factory\n * @return {Object} {@link TinyStack}\n */\nfunction factory () {\n\treturn new TinyStack();\n}\n\n// Node, AMD & window supported\nif ( typeof exports != \"undefined\" ) {\n\tmodule.exports = factory;\n}\nelse if ( typeof define == \"function\" ) {\n\tdefine( function () {\n\t\treturn factory;\n\t} );\n}\nelse {\n\tglobal.stack = factory;\n}\n} )( this );\n","module.exports={\r\n  \"name\": \"DMN\",\r\n\r\n  \"uri\": \"http://www.omg.org/spec/DMN/20151101/dmn11.xsd\",\r\n  \"xml\": {\r\n      \"tagAlias\": \"lowerCase\"\r\n  },\r\n  \"prefix\": \"dmn\",\r\n  \"types\": [\r\n    {\r\n      \"name\": \"DMNElement\",\r\n      \"properties\": [\r\n        { \"name\": \"description\", \"type\": \"String\" },\r\n        { \"name\": \"id\", \"type\": \"String\", \"isAttr\": true },\r\n        { \"name\": \"label\", \"type\": \"String\", \"isAttr\": true }\r\n      ]\r\n    },\r\n    {\r\n      \"name\": \"NamedElement\",\r\n      \"superClass\": [ \"DMNElement\" ],\r\n      \"properties\": [\r\n        { \"name\": \"name\", \"type\": \"String\", \"isAttr\": true}\r\n      ]\r\n    },\r\n    {\r\n      \"name\": \"DMNElementReference\",\r\n      \"properties\": [\r\n        { \"name\": \"href\", \"type\": \"String\", \"isAttr\": true }\r\n      ]\r\n    },\r\n    {\r\n      \"name\": \"Definitions\",\r\n      \"superClass\": [ \"NamedElement\" ],\r\n      \"properties\": [\r\n        { \"name\": \"namespace\", \"type\": \"String\", \"isAttr\": true },\r\n        { \"name\": \"typeLanguage\", \"type\": \"String\", \"isAttr\": true, \"default\": \"http://www.omg.org/spec/FEEL/20140401\" },\r\n        { \"name\": \"expressionLanguage\", \"type\": \"String\", \"isAttr\": true, \"default\": \"http://www.omg.org/spec/FEEL/20140401\" },\r\n        { \"name\": \"itemDefinition\", \"type\": \"ItemDefinition\", \"isMany\": true, \"xml\": { \"serialize\": \"property\" } },\r\n        { \"name\": \"decision\", \"type\": \"Decision\", \"isMany\": true, \"xml\": { \"serialize\": \"property\" } }\r\n      ]\r\n    },\r\n    {\r\n      \"name\": \"ItemDefinition\",\r\n      \"superClass\": [ \"NamedElement\" ],\r\n      \"properties\": [\r\n        { \"name\": \"typeLanguage\", \"type\": \"String\", \"isAttr\": true },\r\n        { \"name\": \"isCollection\", \"type\": \"Boolean\", \"isAttr\": true, \"default\": false },\r\n        { \"name\": \"typeRef\", \"type\": \"String\" },\r\n        { \"name\": \"allowedValue\", \"type\": \"LiteralExpression\", \"isMany\": true, \"xml\": { \"serialize\": \"property\" } }\r\n      ]\r\n    },\r\n    {\r\n      \"name\": \"Expression\",\r\n      \"superClass\": [ \"DMNElement\" ],\r\n      \"properties\": [\r\n        { \"name\": \"typeRef\", \"type\": \"String\", \"isAttr\": true }\r\n      ]\r\n    },\r\n    {\r\n      \"name\": \"LiteralExpression\",\r\n      \"superClass\": [ \"Expression\" ],\r\n      \"properties\": [\r\n        { \"name\": \"expressionLanguage\", \"type\": \"String\", \"isAttr\": true },\r\n        { \"name\": \"text\", \"type\": \"String\" }\r\n      ]\r\n    },\r\n    {\r\n      \"name\": \"DRGElement\",\r\n      \"superClass\": [ \"NamedElement\" ],\r\n      \"properties\": []\r\n    },\r\n    {\r\n      \"name\": \"Decision\",\r\n      \"superClass\": [ \"DRGElement\" ],\r\n      \"properties\": [\r\n        { \"name\": \"question\", \"type\": \"String\" },\r\n        { \"name\": \"allowedAnswers\", \"type\": \"String\" },\r\n        { \"name\": \"decisionTable\", \"type\": \"DecisionTable\", \"xml\": { \"serialize\": \"property\" } }\r\n      ]\r\n    },\r\n    {\r\n      \"name\": \"DecisionTable\",\r\n      \"superClass\": [ \"Expression\" ],\r\n      \"properties\": [\r\n        { \"name\": \"input\", \"type\": \"InputClause\", \"isMany\": true, \"xml\": { \"serialize\": \"property\" } },\r\n        { \"name\": \"output\", \"type\": \"OutputClause\", \"isMany\": true, \"xml\": { \"serialize\": \"property\" } },\r\n        { \"name\": \"rule\", \"type\": \"DecisionRule\", \"isMany\": true, \"xml\": { \"serialize\": \"property\" } },\r\n        { \"name\": \"hitPolicy\", \"type\": \"HitPolicy\", \"isAttr\": true , \"default\": \"UNIQUE\" },\r\n        { \"name\": \"aggregation\", \"type\": \"BuiltinAggregator\", \"isAttr\": true },\r\n        { \"name\": \"preferredOrientation\", \"type\": \"DecisionTableOrientation\", \"isAttr\": true, \"default\": \"Rule-as-Row\" },\r\n        { \"name\": \"outputLabel\", \"type\": \"String\", \"isAttr\": true }\r\n      ]\r\n    },\r\n    {\r\n      \"name\": \"InputClause\",\r\n      \"superClass\": [ \"DMNElement\" ],\r\n      \"properties\": [\r\n        { \"name\": \"inputExpression\", \"type\": \"LiteralExpression\", \"xml\": { \"serialize\": \"property\" } },\r\n        { \"name\": \"inputValues\", \"type\": \"UnaryTests\", \"xml\": { \"serialize\": \"property\" } }\r\n      ]\r\n    },\r\n    {\r\n      \"name\": \"OutputClause\",\r\n      \"superClass\": [ \"DMNElement\" ],\r\n      \"properties\": [\r\n        { \"name\": \"outputValues\", \"type\": \"UnaryTests\", \"xml\": { \"serialize\": \"property\" } },\r\n        { \"name\": \"defaultOutputEntry\", \"type\": \"LiteralExpression\", \"xml\": { \"serialize\": \"property\" } },\r\n        { \"name\": \"name\", \"type\": \"String\", \"isAttr\": true },\r\n        { \"name\": \"typeRef\", \"type\": \"String\", \"isAttr\": true }\r\n      ]\r\n    },\r\n    {\r\n      \"name\": \"UnaryTests\",\r\n      \"superClass\": [ \"DMNElement\" ],\r\n      \"properties\": [\r\n        { \"name\": \"text\", \"type\": \"String\" },\r\n        { \"name\": \"expressionLanguage\", \"type\": \"String\", \"isAttr\": true }\r\n      ]\r\n    },\r\n    {\r\n      \"name\": \"DecisionRule\",\r\n      \"superClass\": [ \"DMNElement\" ],\r\n      \"properties\": [\r\n        { \"name\": \"inputEntry\", \"type\": \"UnaryTests\", \"isMany\": true, \"xml\": { \"serialize\": \"property\" } },\r\n        { \"name\": \"outputEntry\", \"type\": \"LiteralExpression\", \"isMany\": true, \"xml\": { \"serialize\": \"property\" } }\r\n      ]\r\n    }\r\n  ],\r\n  \"emumerations\": [\r\n    {\r\n      \"name\": \"HitPolicy\",\r\n      \"literalValues\": [\r\n        {\r\n          \"name\": \"UNIQUE\"\r\n        },\r\n        {\r\n          \"name\": \"FIRST\"\r\n        },\r\n        {\r\n          \"name\": \"PRIORITY\"\r\n        },\r\n        {\r\n          \"name\": \"ANY\"\r\n        },\r\n        {\r\n          \"name\": \"COLLECT\"\r\n        },\r\n        {\r\n          \"name\": \"RULE ORDER\"\r\n        },\r\n        {\r\n          \"name\": \"OUTPUT ORDER\"\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      \"name\": \"BuiltinAggregator\",\r\n      \"literalValues\": [\r\n        {\r\n          \"name\": \"SUM\"\r\n        },\r\n        {\r\n          \"name\": \"COUNT\"\r\n        },\r\n        {\r\n          \"name\": \"MIN\"\r\n        },\r\n        {\r\n          \"name\": \"MAX\"\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      \"name\": \"DecisionTableOrientation\",\r\n      \"literalValues\": [\r\n        {\r\n          \"name\": \"Rule-as-Row\"\r\n        },\r\n        {\r\n          \"name\": \"Rule-as-Column\"\r\n        },\r\n        {\r\n          \"name\": \"CrossTable\"\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}\r\n","'use strict';\n\nvar hat = require(341);\n\n\n/**\n * Create a new id generator / cache instance.\n *\n * You may optionally provide a seed that is used internally.\n *\n * @param {Seed} seed\n */\nfunction Ids(seed) {\n  seed = seed || [ 128, 36, 1 ];\n  this._seed = seed.length ? hat.rack(seed[0], seed[1], seed[2]) : seed;\n}\n\nmodule.exports = Ids;\n\n/**\n * Generate a next id.\n *\n * @param {Object} [element] element to bind the id to\n *\n * @return {String} id\n */\nIds.prototype.next = function(element) {\n  return this._seed(element || true);\n};\n\n/**\n * Generate a next id with a given prefix.\n *\n * @param {Object} [element] element to bind the id to\n *\n * @return {String} id\n */\nIds.prototype.nextPrefixed = function(prefix, element) {\n  var id;\n\n  do {\n    id = prefix + this.next(true);\n  } while (this.assigned(id));\n\n  // claim {prefix}{random}\n  this.claim(id, element);\n\n  // return\n  return id;\n};\n\n/**\n * Manually claim an existing id.\n *\n * @param {String} id\n * @param {String} [element] element the id is claimed by\n */\nIds.prototype.claim = function(id, element) {\n  this._seed.set(id, element || true);\n};\n\n/**\n * Returns true if the given id has already been assigned.\n *\n * @param  {String} id\n * @return {Boolean}\n */\nIds.prototype.assigned = function(id) {\n  return this._seed.get(id) || false;\n};\n\n/**\n * Unclaim an id.\n *\n * @param  {String} id the id to unclaim\n */\nIds.prototype.unclaim = function(id) {\n  delete this._seed.hats[id];\n};\n","var hat = module.exports = function (bits, base) {\n    if (!base) base = 16;\n    if (bits === undefined) bits = 128;\n    if (bits <= 0) return '0';\n    \n    var digits = Math.log(Math.pow(2, bits)) / Math.log(base);\n    for (var i = 2; digits === Infinity; i *= 2) {\n        digits = Math.log(Math.pow(2, bits / i)) / Math.log(base) * i;\n    }\n    \n    var rem = digits - Math.floor(digits);\n    \n    var res = '';\n    \n    for (var i = 0; i < Math.floor(digits); i++) {\n        var x = Math.floor(Math.random() * base).toString(base);\n        res = x + res;\n    }\n    \n    if (rem) {\n        var b = Math.pow(base, rem);\n        var x = Math.floor(Math.random() * b).toString(base);\n        res = x + res;\n    }\n    \n    var parsed = parseInt(res, base);\n    if (parsed !== Infinity && parsed >= Math.pow(2, bits)) {\n        return hat(bits, base)\n    }\n    else return res;\n};\n\nhat.rack = function (bits, base, expandBy) {\n    var fn = function (data) {\n        var iters = 0;\n        do {\n            if (iters ++ > 10) {\n                if (expandBy) bits += expandBy;\n                else throw new Error('too many ID collisions, use more bits')\n            }\n            \n            var id = hat(bits, base);\n        } while (Object.hasOwnProperty.call(hats, id));\n        \n        hats[id] = data;\n        return id;\n    };\n    var hats = fn.hats = {};\n    \n    fn.get = function (id) {\n        return fn.hats[id];\n    };\n    \n    fn.set = function (id, value) {\n        fn.hats[id] = value;\n        return fn;\n    };\n    \n    fn.bits = bits || 128;\n    fn.base = base || 16;\n    return fn;\n};\n","var baseFlatten = require(358),\n    baseUniq = require(366),\n    restParam = require(346);\n\n/**\n * Creates an array of unique values, in order, from all of the provided arrays\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @static\n * @memberOf _\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of combined values.\n * @example\n *\n * _.union([1, 2], [4, 2], [2, 1]);\n * // => [1, 2, 4]\n */\nvar union = restParam(function(arrays) {\n  return baseUniq(baseFlatten(arrays, false, true));\n});\n\nmodule.exports = union;\n","var arrayEachRight = require(349),\n    baseEachRight = require(357),\n    createForEach = require(374);\n\n/**\n * This method is like `_.forEach` except that it iterates over elements of\n * `collection` from right to left.\n *\n * @static\n * @memberOf _\n * @alias eachRight\n * @category Collection\n * @param {Array|Object|string} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {*} [thisArg] The `this` binding of `iteratee`.\n * @returns {Array|Object|string} Returns `collection`.\n * @example\n *\n * _([1, 2]).forEachRight(function(n) {\n *   console.log(n);\n * }).value();\n * // => logs each value from right to left and returns the array\n */\nvar forEachRight = createForEach(arrayEachRight, baseEachRight);\n\nmodule.exports = forEachRight;\n","/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates a function that invokes `func` with the `this` binding of the\n * created function and arguments from `start` and beyond provided as an array.\n *\n * **Note:** This method is based on the [rest parameter](https://developer.mozilla.org/Web/JavaScript/Reference/Functions/rest_parameters).\n *\n * @static\n * @memberOf _\n * @category Function\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var say = _.restParam(function(what, names) {\n *   return what + ' ' + _.initial(names).join(', ') +\n *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);\n * });\n *\n * say('hello', 'fred', 'barney', 'pebbles');\n * // => 'hello fred, barney, & pebbles'\n */\nfunction restParam(func, start) {\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  start = nativeMax(start === undefined ? (func.length - 1) : (+start || 0), 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        rest = Array(length);\n\n    while (++index < length) {\n      rest[index] = args[start + index];\n    }\n    switch (start) {\n      case 0: return func.call(this, rest);\n      case 1: return func.call(this, args[0], rest);\n      case 2: return func.call(this, args[0], args[1], rest);\n    }\n    var otherArgs = Array(start + 1);\n    index = -1;\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = rest;\n    return func.apply(this, otherArgs);\n  };\n}\n\nmodule.exports = restParam;\n","(function (global){\nvar cachePush = require(369),\n    getNative = require(376);\n\n/** Native method references. */\nvar Set = getNative(global, 'Set');\n\n/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeCreate = getNative(Object, 'create');\n\n/**\n *\n * Creates a cache object to store unique values.\n *\n * @private\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var length = values ? values.length : 0;\n\n  this.data = { 'hash': nativeCreate(null), 'set': new Set };\n  while (length--) {\n    this.push(values[length]);\n  }\n}\n\n// Add functions to the `Set` cache.\nSetCache.prototype.push = cachePush;\n\nmodule.exports = SetCache;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvU2V0Q2FjaGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGNhY2hlUHVzaCA9IHJlcXVpcmUoJy4vY2FjaGVQdXNoJyksXG4gICAgZ2V0TmF0aXZlID0gcmVxdWlyZSgnLi9nZXROYXRpdmUnKTtcblxuLyoqIE5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBTZXQgPSBnZXROYXRpdmUoZ2xvYmFsLCAnU2V0Jyk7XG5cbi8qIE5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlQ3JlYXRlID0gZ2V0TmF0aXZlKE9iamVjdCwgJ2NyZWF0ZScpO1xuXG4vKipcbiAqXG4gKiBDcmVhdGVzIGEgY2FjaGUgb2JqZWN0IHRvIHN0b3JlIHVuaXF1ZSB2YWx1ZXMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl9IFt2YWx1ZXNdIFRoZSB2YWx1ZXMgdG8gY2FjaGUuXG4gKi9cbmZ1bmN0aW9uIFNldENhY2hlKHZhbHVlcykge1xuICB2YXIgbGVuZ3RoID0gdmFsdWVzID8gdmFsdWVzLmxlbmd0aCA6IDA7XG5cbiAgdGhpcy5kYXRhID0geyAnaGFzaCc6IG5hdGl2ZUNyZWF0ZShudWxsKSwgJ3NldCc6IG5ldyBTZXQgfTtcbiAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgdGhpcy5wdXNoKHZhbHVlc1tsZW5ndGhdKTtcbiAgfVxufVxuXG4vLyBBZGQgZnVuY3Rpb25zIHRvIHRoZSBgU2V0YCBjYWNoZS5cblNldENhY2hlLnByb3RvdHlwZS5wdXNoID0gY2FjaGVQdXNoO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNldENhY2hlO1xuIl19","/**\n * A specialized version of `_.forEachRight` for arrays without support for\n * callback shorthands and `this` binding.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEachRight(array, iteratee) {\n  var length = array.length;\n\n  while (length--) {\n    if (iteratee(array[length], length, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEachRight;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","var baseIndexOf = require(364),\n    cacheIndexOf = require(368),\n    createCache = require(373);\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.difference` which accepts a single array\n * of values to exclude.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values) {\n  var length = array ? array.length : 0,\n      result = [];\n\n  if (!length) {\n    return result;\n  }\n  var index = -1,\n      indexOf = baseIndexOf,\n      isCommon = true,\n      cache = (isCommon && values.length >= LARGE_ARRAY_SIZE) ? createCache(values) : null,\n      valuesLength = values.length;\n\n  if (cache) {\n    indexOf = cacheIndexOf;\n    isCommon = false;\n    values = cache;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index];\n\n    if (isCommon && value === value) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === value) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (indexOf(values, value, 0) < 0) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseDifference;\n","var baseForOwnRight = require(362),\n    createBaseEach = require(371);\n\n/**\n * The base implementation of `_.forEachRight` without support for callback\n * shorthands and `this` binding.\n *\n * @private\n * @param {Array|Object|string} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object|string} Returns `collection`.\n */\nvar baseEachRight = createBaseEach(baseForOwnRight, true);\n\nmodule.exports = baseEachRight;\n","var arrayPush = require(351),\n    isArguments = require(387),\n    isArray = require(388),\n    isArrayLike = require(378),\n    isObjectLike = require(382);\n\n/**\n * The base implementation of `_.flatten` with added support for restricting\n * flattening and specifying the start index.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {boolean} [isDeep] Specify a deep flatten.\n * @param {boolean} [isStrict] Restrict flattening to arrays-like objects.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, isDeep, isStrict, result) {\n  result || (result = []);\n\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    if (isObjectLike(value) && isArrayLike(value) &&\n        (isStrict || isArray(value) || isArguments(value))) {\n      if (isDeep) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, isDeep, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n","var baseForRight = require(363),\n    keys = require(395);\n\n/**\n * The base implementation of `_.forOwnRight` without support for callback\n * shorthands and `this` binding.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwnRight(object, iteratee) {\n  return baseForRight(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwnRight;\n","var createBaseFor = require(372);\n\n/**\n * This function is like `baseFor` except that it iterates over properties\n * in the opposite order.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseForRight = createBaseFor(true);\n\nmodule.exports = baseForRight;\n","var indexOfNaN = require(377);\n\n/**\n * The base implementation of `_.indexOf` without support for binary searches.\n *\n * @private\n * @param {Array} array The array to search.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  if (value !== value) {\n    return indexOfNaN(array, fromIndex);\n  }\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseIndexOf;\n","var baseIndexOf = require(364),\n    cacheIndexOf = require(368),\n    createCache = require(373);\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniq` without support for callback shorthands\n * and `this` binding.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The function invoked per iteration.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee) {\n  var index = -1,\n      indexOf = baseIndexOf,\n      length = array.length,\n      isCommon = true,\n      isLarge = isCommon && length >= LARGE_ARRAY_SIZE,\n      seen = isLarge ? createCache() : null,\n      result = [];\n\n  if (seen) {\n    indexOf = cacheIndexOf;\n    isCommon = false;\n  } else {\n    isLarge = false;\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value, index, array) : value;\n\n    if (isCommon && value === value) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (indexOf(seen, computed, 0) < 0) {\n      if (iteratee || isLarge) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseUniq;\n","var isObject = require(392);\n\n/**\n * Checks if `value` is in `cache` mimicking the return signature of\n * `_.indexOf` by returning `0` if the value is found, else `-1`.\n *\n * @private\n * @param {Object} cache The cache to search.\n * @param {*} value The value to search for.\n * @returns {number} Returns `0` if `value` is found, else `-1`.\n */\nfunction cacheIndexOf(cache, value) {\n  var data = cache.data,\n      result = (typeof value == 'string' || isObject(value)) ? data.set.has(value) : data.hash[value];\n\n  return result ? 0 : -1;\n}\n\nmodule.exports = cacheIndexOf;\n","var isObject = require(392);\n\n/**\n * Adds `value` to the cache.\n *\n * @private\n * @name push\n * @memberOf SetCache\n * @param {*} value The value to cache.\n */\nfunction cachePush(value) {\n  var data = this.data;\n  if (typeof value == 'string' || isObject(value)) {\n    data.set.add(value);\n  } else {\n    data.hash[value] = true;\n  }\n}\n\nmodule.exports = cachePush;\n","var bindCallback = require(367),\n    isIterateeCall = require(380),\n    restParam = require(346);\n\n/**\n * Creates a `_.assign`, `_.defaults`, or `_.merge` function.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return restParam(function(object, sources) {\n    var index = -1,\n        length = object == null ? 0 : sources.length,\n        customizer = length > 2 ? sources[length - 2] : undefined,\n        guard = length > 2 ? sources[2] : undefined,\n        thisArg = length > 1 ? sources[length - 1] : undefined;\n\n    if (typeof customizer == 'function') {\n      customizer = bindCallback(customizer, thisArg, 5);\n      length -= 2;\n    } else {\n      customizer = typeof thisArg == 'function' ? thisArg : undefined;\n      length -= (customizer ? 1 : 0);\n    }\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nmodule.exports = createAssigner;\n","(function (global){\nvar SetCache = require(347),\n    getNative = require(376);\n\n/** Native method references. */\nvar Set = getNative(global, 'Set');\n\n/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeCreate = getNative(Object, 'create');\n\n/**\n * Creates a `Set` cache object to optimize linear searches of large arrays.\n *\n * @private\n * @param {Array} [values] The values to cache.\n * @returns {null|Object} Returns the new cache object if `Set` is supported, else `null`.\n */\nfunction createCache(values) {\n  return (nativeCreate && Set) ? new SetCache(values) : null;\n}\n\nmodule.exports = createCache;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvY3JlYXRlQ2FjaGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgU2V0Q2FjaGUgPSByZXF1aXJlKCcuL1NldENhY2hlJyksXG4gICAgZ2V0TmF0aXZlID0gcmVxdWlyZSgnLi9nZXROYXRpdmUnKTtcblxuLyoqIE5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBTZXQgPSBnZXROYXRpdmUoZ2xvYmFsLCAnU2V0Jyk7XG5cbi8qIE5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlQ3JlYXRlID0gZ2V0TmF0aXZlKE9iamVjdCwgJ2NyZWF0ZScpO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBgU2V0YCBjYWNoZSBvYmplY3QgdG8gb3B0aW1pemUgbGluZWFyIHNlYXJjaGVzIG9mIGxhcmdlIGFycmF5cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheX0gW3ZhbHVlc10gVGhlIHZhbHVlcyB0byBjYWNoZS5cbiAqIEByZXR1cm5zIHtudWxsfE9iamVjdH0gUmV0dXJucyB0aGUgbmV3IGNhY2hlIG9iamVjdCBpZiBgU2V0YCBpcyBzdXBwb3J0ZWQsIGVsc2UgYG51bGxgLlxuICovXG5mdW5jdGlvbiBjcmVhdGVDYWNoZSh2YWx1ZXMpIHtcbiAgcmV0dXJuIChuYXRpdmVDcmVhdGUgJiYgU2V0KSA/IG5ldyBTZXRDYWNoZSh2YWx1ZXMpIDogbnVsbDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVDYWNoZTtcbiJdfQ==","/**\n * Gets the index at which the first occurrence of `NaN` is found in `array`.\n *\n * @private\n * @param {Array} array The array to search.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched `NaN`, else `-1`.\n */\nfunction indexOfNaN(array, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 0 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    var other = array[index];\n    if (other !== other) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = indexOfNaN;\n","/** Used to detect unsigned integer values. */\nvar reIsUint = /^/d+$/;\n\n/**\n * Used as the [maximum length](http://ecma-international.org/ecma-262/6.0/#sec-number.max_safe_integer)\n * of an array-like value.\n */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  value = (typeof value == 'number' || reIsUint.test(value)) ? +value : -1;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return value > -1 && value % 1 == 0 && value < length;\n}\n\nmodule.exports = isIndex;\n","/**\n * Used as the [maximum length](http://ecma-international.org/ecma-262/6.0/#sec-number.max_safe_integer)\n * of an array-like value.\n */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This function is based on [`ToLength`](http://ecma-international.org/ecma-262/6.0/#sec-tolength).\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n */\nfunction isLength(value) {\n  return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","var isArrayLike = require(378),\n    isObjectLike = require(382);\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Native method references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is classified as an `arguments` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  return isObjectLike(value) && isArrayLike(value) &&\n    hasOwnProperty.call(value, 'callee') && !propertyIsEnumerable.call(value, 'callee');\n}\n\nmodule.exports = isArguments;\n","var getNative = require(376),\n    isLength = require(381),\n    isObjectLike = require(382);\n\n/** `Object#toString` result references. */\nvar arrayTag = '[object Array]';\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeIsArray = getNative(Array, 'isArray');\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(function() { return arguments; }());\n * // => false\n */\nvar isArray = nativeIsArray || function(value) {\n  return isObjectLike(value) && isLength(value.length) && objToString.call(value) == arrayTag;\n};\n\nmodule.exports = isArray;\n","var isObject = require(392);\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]';\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in older versions of Chrome and Safari which return 'function' for regexes\n  // and Safari 8 which returns 'object' for typed array constructors.\n  return isObject(value) && objToString.call(value) == funcTag;\n}\n\nmodule.exports = isFunction;\n","var isFunction = require(389),\n    isObjectLike = require(382);\n\n/** Used to detect host constructors (Safari > 5). */\nvar reIsHostCtor = /^/[object .+?Constructor/]$/;\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar fnToString = Function.prototype.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  fnToString.call(hasOwnProperty).replace(/[//^$.*+?()[/]{}|]/g, '//$&')\n  .replace(/hasOwnProperty|(function).*?(?=///()| for .+?(?=///])/g, '$1.*?') + '$'\n);\n\n/**\n * Checks if `value` is a native function.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function, else `false`.\n * @example\n *\n * _.isNative(Array.prototype.push);\n * // => true\n *\n * _.isNative(_);\n * // => false\n */\nfunction isNative(value) {\n  if (value == null) {\n    return false;\n  }\n  if (isFunction(value)) {\n    return reIsNative.test(fnToString.call(value));\n  }\n  return isObjectLike(value) && reIsHostCtor.test(value);\n}\n\nmodule.exports = isNative;\n","var isObjectLike = require(382);\n\n/** `Object#toString` result references. */\nvar numberTag = '[object Number]';\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `Number` primitive or object.\n *\n * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are classified\n * as numbers, use the `_.isFinite` method.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isNumber(8.4);\n * // => true\n *\n * _.isNumber(NaN);\n * // => true\n *\n * _.isNumber('8.4');\n * // => false\n */\nfunction isNumber(value) {\n  return typeof value == 'number' || (isObjectLike(value) && objToString.call(value) == numberTag);\n}\n\nmodule.exports = isNumber;\n","var isObjectLike = require(382);\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' || (isObjectLike(value) && objToString.call(value) == stringTag);\n}\n\nmodule.exports = isString;\n","var assignWith = require(352),\n    baseAssign = require(353),\n    createAssigner = require(370);\n\n/**\n * Assigns own enumerable properties of source object(s) to the destination\n * object. Subsequent sources overwrite property assignments of previous sources.\n * If `customizer` is provided it's invoked to produce the assigned values.\n * The `customizer` is bound to `thisArg` and invoked with five arguments:\n * (objectValue, sourceValue, key, object, source).\n *\n * **Note:** This method mutates `object` and is based on\n * [`Object.assign`](http://ecma-international.org/ecma-262/6.0/#sec-object.assign).\n *\n * @static\n * @memberOf _\n * @alias extend\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {*} [thisArg] The `this` binding of `customizer`.\n * @returns {Object} Returns `object`.\n * @example\n *\n * _.assign({ 'user': 'barney' }, { 'age': 40 }, { 'user': 'fred' });\n * // => { 'user': 'fred', 'age': 40 }\n *\n * // using a customizer callback\n * var defaults = _.partialRight(_.assign, function(value, other) {\n *   return _.isUndefined(value) ? other : value;\n * });\n *\n * defaults({ 'user': 'barney' }, { 'age': 36 }, { 'user': 'fred' });\n * // => { 'user': 'barney', 'age': 36 }\n */\nvar assign = createAssigner(function(object, source, customizer) {\n  return customizer\n    ? assignWith(object, source, customizer)\n    : baseAssign(object, source);\n});\n\nmodule.exports = assign;\n","var getNative = require(376),\n    isArrayLike = require(378),\n    isObject = require(392),\n    shimKeys = require(385);\n\n/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = getNative(Object, 'keys');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/6.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nvar keys = !nativeKeys ? shimKeys : function(object) {\n  var Ctor = object == null ? undefined : object.constructor;\n  if ((typeof Ctor == 'function' && Ctor.prototype === object) ||\n      (typeof object != 'function' && isArrayLike(object))) {\n    return shimKeys(object);\n  }\n  return isObject(object) ? nativeKeys(object) : [];\n};\n\nmodule.exports = keys;\n","var arrayMap = require(350),\n    baseDifference = require(355),\n    baseFlatten = require(358),\n    bindCallback = require(367),\n    keysIn = require(396),\n    pickByArray = require(383),\n    pickByCallback = require(384),\n    restParam = require(346);\n\n/**\n * The opposite of `_.pick`; this method creates an object composed of the\n * own and inherited enumerable properties of `object` that are not omitted.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {Function|...(string|string[])} [predicate] The function invoked per\n *  iteration or property names to omit, specified as individual property\n *  names or arrays of property names.\n * @param {*} [thisArg] The `this` binding of `predicate`.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'user': 'fred', 'age': 40 };\n *\n * _.omit(object, 'age');\n * // => { 'user': 'fred' }\n *\n * _.omit(object, _.isNumber);\n * // => { 'user': 'fred' }\n */\nvar omit = restParam(function(object, props) {\n  if (object == null) {\n    return {};\n  }\n  if (typeof props[0] != 'function') {\n    var props = arrayMap(baseFlatten(props), String);\n    return pickByArray(object, baseDifference(keysIn(object), props));\n  }\n  var predicate = bindCallback(props[0], props[1], 3);\n  return pickByCallback(object, function(value, key, object) {\n    return !predicate(value, key, object);\n  });\n});\n\nmodule.exports = omit;\n","module.exports = require(403);","module.exports = require(406);","module.exports = require(405);","module.exports = function(el) {\n  el.parentNode && el.parentNode.removeChild(el);\n};","/**\n * Module dependencies.\n */\n\nvar index = require(404);\n\n/**\n * Whitespace regexp.\n */\n\nvar re = //s+/;\n\n/**\n * toString reference.\n */\n\nvar toString = Object.prototype.toString;\n\n/**\n * Wrap `el` in a `ClassList`.\n *\n * @param {Element} el\n * @return {ClassList}\n * @api public\n */\n\nmodule.exports = function(el){\n  return new ClassList(el);\n};\n\n/**\n * Initialize a new ClassList for `el`.\n *\n * @param {Element} el\n * @api private\n */\n\nfunction ClassList(el) {\n  if (!el || !el.nodeType) {\n    throw new Error('A DOM element reference is required');\n  }\n  this.el = el;\n  this.list = el.classList;\n}\n\n/**\n * Add class `name` if not already present.\n *\n * @param {String} name\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.add = function(name){\n  // classList\n  if (this.list) {\n    this.list.add(name);\n    return this;\n  }\n\n  // fallback\n  var arr = this.array();\n  var i = index(arr, name);\n  if (!~i) arr.push(name);\n  this.el.className = arr.join(' ');\n  return this;\n};\n\n/**\n * Remove class `name` when present, or\n * pass a regular expression to remove\n * any which match.\n *\n * @param {String|RegExp} name\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.remove = function(name){\n  if ('[object RegExp]' == toString.call(name)) {\n    return this.removeMatching(name);\n  }\n\n  // classList\n  if (this.list) {\n    this.list.remove(name);\n    return this;\n  }\n\n  // fallback\n  var arr = this.array();\n  var i = index(arr, name);\n  if (~i) arr.splice(i, 1);\n  this.el.className = arr.join(' ');\n  return this;\n};\n\n/**\n * Remove all classes matching `re`.\n *\n * @param {RegExp} re\n * @return {ClassList}\n * @api private\n */\n\nClassList.prototype.removeMatching = function(re){\n  var arr = this.array();\n  for (var i = 0; i < arr.length; i++) {\n    if (re.test(arr[i])) {\n      this.remove(arr[i]);\n    }\n  }\n  return this;\n};\n\n/**\n * Toggle class `name`, can force state via `force`.\n *\n * For browsers that support classList, but do not support `force` yet,\n * the mistake will be detected and corrected.\n *\n * @param {String} name\n * @param {Boolean} force\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.toggle = function(name, force){\n  // classList\n  if (this.list) {\n    if (\"undefined\" !== typeof force) {\n      if (force !== this.list.toggle(name, force)) {\n        this.list.toggle(name); // toggle again to correct\n      }\n    } else {\n      this.list.toggle(name);\n    }\n    return this;\n  }\n\n  // fallback\n  if (\"undefined\" !== typeof force) {\n    if (!force) {\n      this.remove(name);\n    } else {\n      this.add(name);\n    }\n  } else {\n    if (this.has(name)) {\n      this.remove(name);\n    } else {\n      this.add(name);\n    }\n  }\n\n  return this;\n};\n\n/**\n * Return an array of classes.\n *\n * @return {Array}\n * @api public\n */\n\nClassList.prototype.array = function(){\n  var className = this.el.getAttribute('class') || '';\n  var str = className.replace(/^/s+|/s+$/g, '');\n  var arr = str.split(re);\n  if ('' === arr[0]) arr.shift();\n  return arr;\n};\n\n/**\n * Check if class `name` is present.\n *\n * @param {String} name\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.has =\nClassList.prototype.contains = function(name){\n  return this.list\n    ? this.list.contains(name)\n    : !! ~index(this.array(), name);\n};\n","module.exports = function(arr, obj){\n  if (arr.indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};","function one(selector, el) {\n  return el.querySelector(selector);\n}\n\nexports = module.exports = function(selector, el){\n  el = el || document;\n  return one(selector, el);\n};\n\nexports.all = function(selector, el){\n  el = el || document;\n  return el.querySelectorAll(selector);\n};\n\nexports.engine = function(obj){\n  if (!obj.one) throw new Error('.one callback required');\n  if (!obj.all) throw new Error('.all callback required');\n  one = obj.one;\n  exports.all = obj.all;\n  return exports;\n};\n","\n/**\n * Expose `parse`.\n */\n\nmodule.exports = parse;\n\n/**\n * Tests for browser support.\n */\n\nvar innerHTMLBug = false;\nvar bugTestDiv;\nif (typeof document !== 'undefined') {\n  bugTestDiv = document.createElement('div');\n  // Setup\n  bugTestDiv.innerHTML = '  <link/><table></table><a href=\"/a\">a</a><input type=\"checkbox\"/>';\n  // Make sure that link elements get serialized correctly by innerHTML\n  // This requires a wrapper element in IE\n  innerHTMLBug = !bugTestDiv.getElementsByTagName('link').length;\n  bugTestDiv = undefined;\n}\n\n/**\n * Wrap map from jquery.\n */\n\nvar map = {\n  legend: [1, '<fieldset>', '</fieldset>'],\n  tr: [2, '<table><tbody>', '</tbody></table>'],\n  col: [2, '<table><tbody></tbody><colgroup>', '</colgroup></table>'],\n  // for script/link/style tags to work in IE6-8, you have to wrap\n  // in a div with a non-whitespace character in front, ha!\n  _default: innerHTMLBug ? [1, 'X<div>', '</div>'] : [0, '', '']\n};\n\nmap.td =\nmap.th = [3, '<table><tbody><tr>', '</tr></tbody></table>'];\n\nmap.option =\nmap.optgroup = [1, '<select multiple=\"multiple\">', '</select>'];\n\nmap.thead =\nmap.tbody =\nmap.colgroup =\nmap.caption =\nmap.tfoot = [1, '<table>', '</table>'];\n\nmap.polyline =\nmap.ellipse =\nmap.polygon =\nmap.circle =\nmap.text =\nmap.line =\nmap.path =\nmap.rect =\nmap.g = [1, '<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">','</svg>'];\n\n/**\n * Parse `html` and return a DOM Node instance, which could be a TextNode,\n * HTML DOM Node of some kind (<div> for example), or a DocumentFragment\n * instance, depending on the contents of the `html` string.\n *\n * @param {String} html - HTML string to \"domify\"\n * @param {Document} doc - The `document` instance to create the Node for\n * @return {DOMNode} the TextNode, DOM Node, or DocumentFragment instance\n * @api private\n */\n\nfunction parse(html, doc) {\n  if ('string' != typeof html) throw new TypeError('String expected');\n\n  // default to the global `document` object\n  if (!doc) doc = document;\n\n  // tag name\n  var m = /<([/w:]+)/.exec(html);\n  if (!m) return doc.createTextNode(html);\n\n  html = html.replace(/^/s+|/s+$/g, ''); // Remove leading/trailing whitespace\n\n  var tag = m[1];\n\n  // body support\n  if (tag == 'body') {\n    var el = doc.createElement('html');\n    el.innerHTML = html;\n    return el.removeChild(el.lastChild);\n  }\n\n  // wrap map\n  var wrap = map[tag] || map._default;\n  var depth = wrap[0];\n  var prefix = wrap[1];\n  var suffix = wrap[2];\n  var el = doc.createElement('div');\n  el.innerHTML = prefix + html + suffix;\n  while (depth--) el = el.lastChild;\n\n  // one element\n  if (el.firstChild == el.lastChild) {\n    return el.removeChild(el.firstChild);\n  }\n\n  // several elements\n  var fragment = doc.createDocumentFragment();\n  while (el.firstChild) {\n    fragment.appendChild(el.removeChild(el.firstChild));\n  }\n\n  return fragment;\n}\n","module.exports = require(408);\r\n","'use strict';\r\n\r\nvar di = require(569);\r\n\r\n\r\n/**\r\n * Bootstrap an injector from a list of modules, instantiating a number of default components\r\n *\r\n * @ignore\r\n * @param {Array<didi.Module>} bootstrapModules\r\n *\r\n * @return {didi.Injector} a injector to use to access the components\r\n */\r\nfunction bootstrap(bootstrapModules) {\r\n\r\n  var modules = [],\r\n      components = [];\r\n\r\n  function hasModule(m) {\r\n    return modules.indexOf(m) >= 0;\r\n  }\r\n\r\n  function addModule(m) {\r\n    modules.push(m);\r\n  }\r\n\r\n  function visit(m) {\r\n    if (hasModule(m)) {\r\n      return;\r\n    }\r\n\r\n    (m.__depends__ || []).forEach(visit);\r\n\r\n    if (hasModule(m)) {\r\n      return;\r\n    }\r\n\r\n    addModule(m);\r\n    (m.__init__ || []).forEach(function(c) {\r\n      components.push(c);\r\n    });\r\n  }\r\n\r\n  bootstrapModules.forEach(visit);\r\n\r\n  var injector = new di.Injector(modules);\r\n\r\n  components.forEach(function(c) {\r\n\r\n    try {\r\n      // eagerly resolve component (fn or string)\r\n      injector[typeof c === 'string' ? 'get' : 'invoke'](c);\r\n    } catch (e) {\r\n      console.error('Failed to instantiate component');\r\n      console.error(e.stack);\r\n\r\n      throw e;\r\n    }\r\n  });\r\n\r\n  return injector;\r\n}\r\n\r\n/**\r\n * Creates an injector from passed options.\r\n *\r\n * @ignore\r\n * @param  {Object} options\r\n * @return {didi.Injector}\r\n */\r\nfunction createInjector(options) {\r\n\r\n  options = options || {};\r\n\r\n  var configModule = {\r\n    'config': ['value', options]\r\n  };\r\n\r\n  var coreModule = require(413);\r\n\r\n  var modules = [ configModule, coreModule ].concat(options.modules || []);\r\n\r\n  return bootstrap(modules);\r\n}\r\n\r\n\r\n/**\r\n * The main table-js entry point that bootstraps the table with the given\r\n * configuration.\r\n *\r\n * To register extensions with the table, pass them as Array<didi.Module> to the constructor.\r\n *\r\n * @class tjs.Table\r\n * @memberOf tjs\r\n * @constructor\r\n *\r\n * @param {Object} options\r\n * @param {Array<didi.Module>} [options.modules] external modules to instantiate with the table\r\n * @param {didi.Injector} [injector] an (optional) injector to bootstrap the table with\r\n */\r\nfunction Table(options, injector) {\r\n\r\n  // create injector unless explicitly specified\r\n  this.injector = injector = injector || createInjector(options);\r\n\r\n  // API\r\n\r\n  /**\r\n   * Resolves a table service\r\n   *\r\n   * @method Table#get\r\n   *\r\n   * @param {String} name the name of the table service to be retrieved\r\n   * @param {Object} [locals] a number of locals to use to resolve certain dependencies\r\n   */\r\n  this.get = injector.get;\r\n\r\n  /**\r\n   * Executes a function into which table services are injected\r\n   *\r\n   * @method Table#invoke\r\n   *\r\n   * @param {Function|Object[]} fn the function to resolve\r\n   * @param {Object} locals a number of locals to use to resolve certain dependencies\r\n   */\r\n  this.invoke = injector.invoke;\r\n\r\n  // init\r\n\r\n  // indicate via event\r\n\r\n\r\n  /**\r\n   * An event indicating that all plug-ins are loaded.\r\n   *\r\n   * Use this event to fire other events to interested plug-ins\r\n   *\r\n   * @memberOf Table\r\n   *\r\n   * @event table.init\r\n   *\r\n   * @example\r\n   *\r\n   * eventBus.on('table.init', function() {\r\n   *   eventBus.fire('my-custom-event', { foo: 'BAR' });\r\n   * });\r\n   *\r\n   * @type {Object}\r\n   */\r\n  this.get('eventBus').fire('table.init');\r\n}\r\n\r\nmodule.exports = Table;\r\n\r\n\r\n/**\r\n * Destroys the table\r\n *\r\n * @method  Table#destroy\r\n */\r\nTable.prototype.destroy = function() {\r\n  this.get('eventBus').fire('table.destroy');\r\n};\r\n","'use strict';\r\n\r\nvar Model = require(458);\r\n\r\n\r\n/**\r\n * A factory for diagram-js shapes\r\n */\r\nfunction ElementFactory() {\r\n  this._uid = 12;\r\n}\r\n\r\nmodule.exports = ElementFactory;\r\n\r\n\r\nElementFactory.prototype.createTable = function(attrs) {\r\n  return document.createElement('table');\r\n  //return this.create('table', attrs);\r\n};\r\n\r\nElementFactory.prototype.createRow = function(attrs) {\r\n  return this.create('row', attrs);\r\n};\r\n\r\nElementFactory.prototype.createColumn = function(attrs) {\r\n  return this.create('column', attrs);\r\n};\r\n\r\n/**\r\n * Create a model element with the given type and\r\n * a number of pre-set attributes.\r\n *\r\n * @param  {String} type\r\n * @param  {Object} attrs\r\n * @return {djs.model.Base} the newly created model instance\r\n */\r\nElementFactory.prototype.create = function(type, attrs) {\r\n\r\n  attrs = attrs || {};\r\n\r\n  if (!attrs.id) {\r\n    attrs.id = type + '_' + (this._uid++);\r\n  }\r\n\r\n  return Model.create(type, attrs);\r\n};\r\n","'use strict';\r\n\r\nvar ELEMENT_ID = 'data-element-id';\r\n\r\n\r\n/**\r\n * @class\r\n *\r\n * A registry that keeps track of all shapes in the diagram.\r\n */\r\nfunction ElementRegistry() {\r\n  this._elements = {};\r\n}\r\n\r\nmodule.exports = ElementRegistry;\r\n\r\n/**\r\n * Register a pair of (element, gfx, (secondaryGfx)).\r\n *\r\n * @param {djs.model.Base} element\r\n * @param {Snap<SVGElement>} gfx\r\n * @param {Snap<SVGElement>} [secondaryGfx] optional other element to register, too\r\n */\r\nElementRegistry.prototype.add = function(element, gfx, secondaryGfx) {\r\n\r\n  var id = element.id;\r\n\r\n  this._validateId(id);\r\n\r\n  // associate dom node with element\r\n  gfx.setAttribute(ELEMENT_ID, id);\r\n\r\n  if (secondaryGfx) {\r\n    secondaryGfx.setAttribute(ELEMENT_ID, id);\r\n  }\r\n\r\n  this._elements[id] = { element: element, gfx: gfx, secondaryGfx: secondaryGfx };\r\n};\r\n\r\n/**\r\n * Removes an element from the registry.\r\n *\r\n * @param {djs.model.Base} element\r\n */\r\nElementRegistry.prototype.remove = function(element) {\r\n  var elements = this._elements,\r\n      id = element.id || element,\r\n      container = id && elements[id];\r\n\r\n  if (container) {\r\n\r\n    // unset element id on gfx\r\n    container.gfx.setAttribute(ELEMENT_ID, null);\r\n\r\n    if (container.secondaryGfx) {\r\n      container.secondaryGfx.setAttribute(ELEMENT_ID, null);\r\n    }\r\n\r\n    delete elements[id];\r\n  }\r\n};\r\n\r\n/**\r\n * Update the id of an element\r\n *\r\n * @param {djs.model.Base} element\r\n * @param {String} newId\r\n */\r\nElementRegistry.prototype.updateId = function(element, newId) {\r\n\r\n  this._validateId(newId);\r\n\r\n  if (typeof element === 'string') {\r\n    element = this.get(element);\r\n  }\r\n\r\n  var gfx = this.getGraphics(element),\r\n      secondaryGfx = this.getGraphics(element, true);\r\n\r\n  this.remove(element);\r\n\r\n  element.id = newId;\r\n\r\n  this.add(element, gfx, secondaryGfx);\r\n};\r\n\r\n/**\r\n * Return the model element for a given id or graphics.\r\n *\r\n * @example\r\n *\r\n * elementRegistry.get('SomeElementId_1');\r\n * elementRegistry.get(gfx);\r\n *\r\n *\r\n * @param {String|SVGElement} filter for selecting the element\r\n *\r\n * @return {djs.model.Base}\r\n */\r\nElementRegistry.prototype.get = function(filter) {\r\n  var id;\r\n\r\n  if (typeof filter === 'string') {\r\n    id = filter;\r\n  } else {\r\n    // get by graphics\r\n    id = filter && filter.getAttribute(ELEMENT_ID);\r\n  }\r\n\r\n  var container = this._elements[id];\r\n  return container && container.element;\r\n};\r\n\r\n/**\r\n * Return all elements that match a given filter function.\r\n *\r\n * @param {Function} fn\r\n *\r\n * @return {Array<djs.model.Base>}\r\n */\r\nElementRegistry.prototype.filter = function(fn) {\r\n\r\n  var filtered = [];\r\n\r\n  this.forEach(function(element, gfx) {\r\n    if (fn(element, gfx)) {\r\n      filtered.push(element);\r\n    }\r\n  });\r\n\r\n  return filtered;\r\n};\r\n\r\n/**\r\n * Iterate over all diagram elements.\r\n *\r\n * @param {Function} fn\r\n */\r\nElementRegistry.prototype.forEach = function(fn) {\r\n\r\n  var map = this._elements;\r\n\r\n  Object.keys(map).forEach(function(id) {\r\n    var container = map[id],\r\n        element = container.element,\r\n        gfx = container.gfx;\r\n\r\n    return fn(element, gfx);\r\n  });\r\n};\r\n\r\n/**\r\n * Return the graphical representation of an element or its id.\r\n *\r\n * @example\r\n * elementRegistry.getGraphics('SomeElementId_1');\r\n * elementRegistry.getGraphics(rootElement); // <g ...>\r\n *\r\n * elementRegistry.getGraphics(rootElement, true); // <svg ...>\r\n *\r\n *\r\n * @param {String|djs.model.Base} filter\r\n * @param {Boolean} [secondary=false] whether to return the secondary connected element\r\n *\r\n * @return {SVGElement}\r\n */\r\nElementRegistry.prototype.getGraphics = function(filter, secondary) {\r\n  var id = filter.id || filter;\r\n\r\n  var container = this._elements[id];\r\n  return container && (secondary ? container.secondaryGfx : container.gfx);\r\n};\r\n\r\n/**\r\n * Validate the suitability of the given id and signals a problem\r\n * with an exception.\r\n *\r\n * @param {String} id\r\n *\r\n * @throws {Error} if id is empty or already assigned\r\n */\r\nElementRegistry.prototype._validateId = function(id) {\r\n  if (!id) {\r\n    throw new Error('element must have an id');\r\n  }\r\n\r\n  if (this._elements[id]) {\r\n    throw new Error('element with id ' + id + ' already added');\r\n  }\r\n};\r\n","'use strict';\r\n\r\nvar forEach = require(575);\r\n\r\n/**\r\n * A factory that creates graphical elements\r\n *\r\n * @param {Renderer} renderer\r\n */\r\nfunction GraphicsFactory(elementRegistry, renderer) {\r\n  this._renderer = renderer;\r\n  this._elementRegistry = elementRegistry;\r\n}\r\n\r\nGraphicsFactory.$inject = [ 'elementRegistry', 'renderer' ];\r\n\r\nmodule.exports = GraphicsFactory;\r\n\r\nGraphicsFactory.prototype.create = function(type, element, parent) {\r\n  var newElement;\r\n  switch(type) {\r\n    case 'row':\r\n      newElement = document.createElement('tr');\r\n      break;\r\n    case 'cell':\r\n      // cells consist of a td element with a nested span which contains the content\r\n      newElement = document.createElement(element.row.useTH ? 'th' : 'td');\r\n      var contentContainer = document.createElement('span');\r\n      newElement.appendChild(contentContainer);\r\n      break;\r\n  }\r\n  if (newElement && type === 'row') {\r\n    if (element.next) {\r\n      parent.insertBefore(newElement, this._elementRegistry.getGraphics(element.next));\r\n    } else {\r\n      parent.appendChild(newElement);\r\n    }\r\n  } else if (type === 'cell') {\r\n    var neighboringCell = this._elementRegistry.filter(function(el) {\r\n      return el.row === element.row && el.column === element.column.next;\r\n    })[0];\r\n    if (neighboringCell) {\r\n      parent.insertBefore(newElement, this._elementRegistry.getGraphics(neighboringCell));\r\n    } else {\r\n      parent.appendChild(newElement);\r\n    }\r\n  }\r\n  return newElement || document.createElement('div');\r\n};\r\n\r\nGraphicsFactory.prototype.moveRow = function(source, target, above) {\r\n  var gfxSource = this._elementRegistry.getGraphics(source);\r\n  var gfxTarget;\r\n\r\n  if(above) {\r\n    gfxTarget = this._elementRegistry.getGraphics(target);\r\n    gfxTarget.parentNode.insertBefore(gfxSource, gfxTarget);\r\n  } else {\r\n    if(source.next) {\r\n      gfxTarget = this._elementRegistry.getGraphics(source.next);\r\n      gfxTarget.parentNode.insertBefore(gfxSource, gfxTarget);\r\n    } else {\r\n      gfxSource.parentNode.appendChild(gfxSource);\r\n    }\r\n  }\r\n};\r\n\r\n\r\nGraphicsFactory.prototype.update = function(type, element, gfx) {\r\n\r\n  // Do not update root element\r\n  if (!element.parent) {\r\n    return;\r\n  }\r\n\r\n  var self = this;\r\n  // redraw\r\n  if (type === 'row') {\r\n    this._renderer.drawRow(gfx, element);\r\n\r\n    // also redraw all cells in this row\r\n    forEach(this._elementRegistry.filter(function(el) {\r\n      return el.row === element;\r\n    }), function(cell) {\r\n      self.update('cell', cell, self._elementRegistry.getGraphics(cell));\r\n    });\r\n  } else\r\n  if (type === 'column') {\r\n    this._renderer.drawColumn(gfx, element);\r\n\r\n    // also redraw all cells in this column\r\n    forEach(this._elementRegistry.filter(function(el) {\r\n      return el.column === element;\r\n    }), function(cell) {\r\n      self.update('cell', cell, self._elementRegistry.getGraphics(cell));\r\n    });\r\n  } else\r\n  if (type === 'cell') {\r\n    this._renderer.drawCell(gfx, element);\r\n  } else {\r\n    throw new Error('unknown type: ' + type);\r\n  }\r\n};\r\n\r\nGraphicsFactory.prototype.remove = function(element) {\r\n  var gfx = this._elementRegistry.getGraphics(element);\r\n\r\n  // remove\r\n  gfx.parentNode && gfx.parentNode.removeChild(gfx);\r\n};\r\n","'use strict';\r\n\r\nvar isNumber = require(624),\r\n    assign = require(627),\r\n    forEach = require(575),\r\n    every = require(574);\r\n\r\nfunction ensurePx(number) {\r\n  return isNumber(number) ? number + 'px' : number;\r\n}\r\n\r\n/**\r\n * Creates a HTML container element for a table element with\r\n * the given configuration\r\n *\r\n * @param  {Object} options\r\n * @return {HTMLElement} the container element\r\n */\r\nfunction createContainer(options) {\r\n\r\n  options = assign({}, { width: '100%', height: '100%' }, options);\r\n\r\n  var container = options.container || document.body;\r\n\r\n  // create a <div> around the table element with the respective size\r\n  // this way we can always get the correct container size\r\n  var parent = document.createElement('div');\r\n  parent.setAttribute('class', 'tjs-container');\r\n\r\n  assign(parent.style, {\r\n    position: 'relative',\r\n    overflow: 'hidden',\r\n    width: ensurePx(options.width),\r\n    height: ensurePx(options.height)\r\n  });\r\n\r\n  container.appendChild(parent);\r\n\r\n  return parent;\r\n}\r\n\r\nvar REQUIRED_MODEL_ATTRS = {\r\n  row: [ 'next', 'previous' ],\r\n  column: [ 'next', 'previous' ],\r\n  cell: [ 'row', 'column' ]\r\n};\r\n\r\n/**\r\n * The main drawing sheet.\r\n *\r\n * @class\r\n * @constructor\r\n *\r\n * @emits Sheet#sheet.init\r\n *\r\n * @param {Object} config\r\n * @param {EventBus} eventBus\r\n * @param {GraphicsFactory} graphicsFactory\r\n * @param {ElementRegistry} elementRegistry\r\n */\r\nfunction Sheet(config, eventBus, elementRegistry, graphicsFactory) {\r\n  this._eventBus = eventBus;\r\n  this._elementRegistry = elementRegistry;\r\n  this._graphicsFactory = graphicsFactory;\r\n\r\n  this._init(config || {});\r\n}\r\n\r\nSheet.$inject = [ 'config.sheet', 'eventBus', 'elementRegistry', 'graphicsFactory' ];\r\n\r\nmodule.exports = Sheet;\r\n\r\n\r\nSheet.prototype.getLastColumn = function() {\r\n  return this._lastColumn;\r\n};\r\n\r\nSheet.prototype.setLastColumn = function(element) {\r\n  this._lastColumn = element;\r\n};\r\n\r\nSheet.prototype.getLastRow = function(type) {\r\n  return this._lastRow[type];\r\n};\r\n\r\nSheet.prototype.setLastRow = function(element, type) {\r\n  this._lastRow[type] = element;\r\n};\r\n\r\nSheet.prototype.setSibling = function(first, second) {\r\n  if (first) first.next = second;\r\n  if (second) second.previous = first;\r\n};\r\n\r\nSheet.prototype.addSiblings = function(type, element) {\r\n  var tmp, subType;\r\n  if (type === 'row') {\r\n    subType = element.isHead ? 'head' : element.isFoot ? 'foot' : 'body';\r\n  }\r\n  if (!element.previous && !element.next) {\r\n    if (type === 'column') {\r\n      // add column to end of table per default\r\n      element.next = null;\r\n      this.setSibling(this.getLastColumn(), element);\r\n      this.setLastColumn(element);\r\n    } else if (type === 'row') {\r\n      // add row to end of table per default\r\n      element.next = null;\r\n      this.setSibling(this.getLastRow(subType), element);\r\n      this.setLastRow(element, subType);\r\n    }\r\n  } else if (element.previous && !element.next) {\r\n    tmp = element.previous.next;\r\n    this.setSibling(element.previous, element);\r\n    this.setSibling(element, tmp);\r\n    if(!tmp) {\r\n      if(type === 'row') {\r\n        this.setLastRow(element, subType);\r\n      } else if (type === 'column') {\r\n        this.setLastColumn(element, subType);\r\n      }\r\n    }\r\n  } else if (!element.previous && element.next) {\r\n    tmp = element.next.previous;\r\n    this.setSibling(tmp, element);\r\n    this.setSibling(element, element.next);\r\n  } else if (element.previous && element.next) {\r\n    if (element.previous.next !== element.next) {\r\n      throw new Error('cannot set both previous and next when adding new element <' + type + '>');\r\n    } else {\r\n      this.setSibling(element.previous, element);\r\n      this.setSibling(element, element.next);\r\n    }\r\n  }\r\n};\r\n\r\nSheet.prototype.removeSiblings = function(type, element) {\r\n  var subType;\r\n  if (type === 'row') {\r\n    subType = element.isHead ? 'head' : element.isFoot ? 'foot' : 'body';\r\n  }\r\n  if (type === 'column') {\r\n    if (this.getLastColumn() === element) {\r\n      this.setLastColumn(element.previous);\r\n    }\r\n  } else\r\n  if (type === 'row') {\r\n    if (this.getLastRow(subType) === element) {\r\n      this.setLastRow(element.previous, subType);\r\n    }\r\n  }\r\n  if (element.previous) {\r\n    element.previous.next = element.next;\r\n  }\r\n  if (element.next) {\r\n    element.next.previous = element.previous;\r\n  }\r\n  delete element.previous;\r\n  delete element.next;\r\n};\r\n\r\nSheet.prototype._init = function(config) {\r\n\r\n  // Creates a <table> element that is wrapped into a <div>.\r\n  // This way we are always able to correctly figure out the size of the table element\r\n  // by querying the parent node.\r\n  //\r\n  // <div class=\"tjs-container\" style=\"width: {desired-width}, height: {desired-height}\">\r\n  //   <table width=\"100%\" height=\"100%\">\r\n  //    ...\r\n  //   </table>\r\n  // </div>\r\n\r\n  // html container\r\n  var eventBus = this._eventBus,\r\n      container = createContainer(config),\r\n      self = this;\r\n\r\n  this._container = container;\r\n\r\n  this._rootNode = document.createElement('table');\r\n\r\n  assign(this._rootNode.style, {\r\n    width: '100%'\r\n  });\r\n\r\n  container.appendChild(this._rootNode);\r\n\r\n  this._head = document.createElement('thead');\r\n  this._body = document.createElement('tbody');\r\n  this._foot = document.createElement('tfoot');\r\n\r\n  this._rootNode.appendChild(this._head);\r\n  this._rootNode.appendChild(this._body);\r\n  this._rootNode.appendChild(this._foot);\r\n\r\n  this._lastColumn = null;\r\n  this._lastRow = {\r\n    head: null,\r\n    body: null,\r\n    foot: null\r\n  };\r\n\r\n  eventBus.on('table.init', function(event) {\r\n\r\n    /**\r\n     * An event indicating that the table is ready to be used.\r\n     *\r\n     * @memberOf Sheet\r\n     *\r\n     * @event sheet.init\r\n     *\r\n     * @type {Object}\r\n     * @property {DOMElement} sheet the created table element\r\n     * @property {Snap<SVGGroup>} viewport the direct parent of diagram elements and shapes\r\n     */\r\n\r\n    eventBus.fire('sheet.init', {sheet: self._rootNode});\r\n  });\r\n\r\n  eventBus.on('table.destroy', function() {\r\n\r\n    var parent = self._container.parentNode;\r\n\r\n    if (parent) {\r\n      parent.removeChild(container);\r\n    }\r\n\r\n    eventBus.fire('sheet.destroy', { sheet: self._rootNode });\r\n  });\r\n\r\n};\r\n\r\n\r\n/**\r\n * Returns the html element that encloses the\r\n * drawing canvas.\r\n *\r\n * @return {DOMNode}\r\n */\r\nSheet.prototype.getContainer = function() {\r\n  return this._container;\r\n};\r\n\r\n\r\n/**\r\n * Returns the table body element of the table.\r\n *\r\n * @return {DOMNode}\r\n */\r\nSheet.prototype.getBody = function() {\r\n  return this._body;\r\n};\r\n\r\n/**\r\n * Moves a row above or below another row\r\n *\r\n */\r\nSheet.prototype.moveRow = function(source, target, above) {\r\n\r\n  if(source === target) {\r\n    return;\r\n  }\r\n\r\n  this._eventBus.fire('row.move', {\r\n    source: source,\r\n    target: target,\r\n    above: above\r\n  });\r\n\r\n  // update the last row if necessary\r\n  if(this.getLastRow('body') === source) {\r\n    this.setLastRow(source.previous, 'body');\r\n  }\r\n\r\n  // re-wire the prev/next relations for the source\r\n  if(source.previous) {\r\n    source.previous.next = source.next;\r\n  }\r\n  if(source.next) {\r\n    source.next.previous = source.previous;\r\n  }\r\n  // re-wire the prev/next relations for the target\r\n  if(above) {\r\n    if(target.previous) {\r\n      // (previous --> source --> target)\r\n      target.previous.next = source;\r\n      source.previous = target.previous;\r\n\r\n      source.next = target;\r\n      target.previous = source;\r\n    } else {\r\n      // (null --> source --> target)\r\n      source.previous = null;\r\n\r\n      source.next = target;\r\n      target.previous = source;\r\n    }\r\n  } else {\r\n    if(target.next) {\r\n      // (target --> source --> next)\r\n      target.next.previous = source;\r\n      source.next = target.next;\r\n\r\n      source.previous = target;\r\n      target.next = source;\r\n    } else {\r\n      // (target --> source --> null)\r\n      source.next = null;\r\n\r\n      source.previous = target;\r\n      target.next = source;\r\n      this.setLastRow(source, 'body');\r\n    }\r\n  }\r\n\r\n  this._graphicsFactory.moveRow(source, target, above);\r\n\r\n  this._eventBus.fire('row.moved', {\r\n    source: source,\r\n    target: target,\r\n    above: above\r\n  });\r\n\r\n};\r\n\r\n\r\n///////////// add functionality ///////////////////////////////\r\n\r\nSheet.prototype._ensureValid = function(type, element) {\r\n  if (!element.id) {\r\n    throw new Error('element must have an id');\r\n  }\r\n\r\n  if (this._elementRegistry.get(element.id)) {\r\n    throw new Error('element with id ' + element.id + ' already exists');\r\n  }\r\n\r\n  var requiredAttrs = REQUIRED_MODEL_ATTRS[type];\r\n\r\n  var valid = every(requiredAttrs, function(attr) {\r\n    return typeof element[attr] !== 'undefined';\r\n  });\r\n\r\n  if (!valid) {\r\n    throw new Error(\r\n      'must supply { ' + requiredAttrs.join(', ') + ' } with ' + type);\r\n  }\r\n};\r\n\r\n/**\r\n * Adds an element to the sheet.\r\n *\r\n * This wires the parent <-> child relationship between the element and\r\n * a explicitly specified parent or an implicit root element.\r\n *\r\n * During add it emits the events\r\n *\r\n *  * <{type}.add> (element, parent)\r\n *  * <{type}.added> (element, gfx)\r\n *\r\n * Extensions may hook into these events to perform their magic.\r\n *\r\n * @param {String} type\r\n * @param {Object|djs.model.Base} element\r\n * @param {Object|djs.model.Base} [parent]\r\n *\r\n * @return {Object|djs.model.Base} the added element\r\n */\r\nSheet.prototype._addElement = function(type, element, parent) {\r\n\r\n  element._type = type;\r\n\r\n  var eventBus = this._eventBus,\r\n      graphicsFactory = this._graphicsFactory;\r\n\r\n  this._ensureValid(type, element);\r\n\r\n  eventBus.fire(type + '.add', element);\r\n\r\n  // create graphics\r\n\r\n  element.parent = parent || this._rootNode;\r\n\r\n  var gfx = graphicsFactory.create(type, element, element.parent);\r\n\r\n  this._elementRegistry.add(element, gfx);\r\n\r\n  // update its visual\r\n  graphicsFactory.update(type, element, gfx);\r\n\r\n  eventBus.fire(type + '.added', { element: element, gfx: gfx });\r\n\r\n  return element;\r\n};\r\n\r\nSheet.prototype.addRow = function(row) {\r\n  this.addSiblings('row', row);\r\n\r\n  var r = this._addElement('row', row, row.isHead ? this._head : row.isFoot ? this._foot : this._body);\r\n\r\n  this._eventBus.fire('cells.add', r);\r\n\r\n  // create new cells\r\n  var self = this;\r\n  forEach(this._elementRegistry.filter(function(el) {\r\n    return el._type === 'column';\r\n  }).sort(function(a, b) {\r\n    var c = a;\r\n    while (!!(c = c.next)) {\r\n      if (c === b) {\r\n        return -1;\r\n      }\r\n    }\r\n    return 1;\r\n  }), function(el) {\r\n    self._addCell({row: r, column: el, id: 'cell_'+el.id+'_'+r.id});\r\n  });\r\n\r\n  this._eventBus.fire('cells.added', r);\r\n\r\n  return r;\r\n};\r\n\r\nSheet.prototype.addColumn = function(column) {\r\n\r\n  this.addSiblings('column', column);\r\n\r\n  var c = this._addElement('column', column);\r\n\r\n  this._eventBus.fire('cells.add', c);\r\n\r\n  // create new cells\r\n  var self = this;\r\n  forEach(this._elementRegistry.filter(function(el) {\r\n    return el._type === 'row';\r\n  }), function(el) {\r\n    self._addCell({row: el, column: c, id: 'cell_'+c.id+'_'+el.id});\r\n  });\r\n\r\n  this._eventBus.fire('cells.added', c);\r\n\r\n  return c;\r\n};\r\n\r\nSheet.prototype._addCell = function(cell) {\r\n  return this._addElement('cell', cell, this._elementRegistry.getGraphics(cell.row.id));\r\n};\r\n\r\nSheet.prototype.setCellContent = function(config) {\r\n  if (typeof config.column === 'object') {\r\n    config.column = config.column.id;\r\n  }\r\n  if (typeof config.row === 'object') {\r\n    config.row = config.row.id;\r\n  }\r\n\r\n  this._elementRegistry.get('cell_'+config.column+'_'+config.row).content = config.content;\r\n  this._graphicsFactory.update('cell', this._elementRegistry.get('cell_'+config.column+'_'+config.row),\r\n    this._elementRegistry.getGraphics('cell_'+config.column+'_'+config.row));\r\n};\r\n\r\nSheet.prototype.getCellContent = function(config) {\r\n  return this._elementRegistry.get('cell_'+config.column+'_'+config.row).content;\r\n};\r\n\r\n\r\n/**\r\n * Internal remove element\r\n */\r\nSheet.prototype._removeElement = function(element, type) {\r\n\r\n  var elementRegistry = this._elementRegistry,\r\n      graphicsFactory = this._graphicsFactory,\r\n      eventBus = this._eventBus;\r\n\r\n  element = elementRegistry.get(element.id || element);\r\n\r\n  if (!element) {\r\n    // element was removed already\r\n    return;\r\n  }\r\n\r\n  eventBus.fire(type + '.remove', { element: element });\r\n\r\n  graphicsFactory.remove(element);\r\n\r\n  element.parent = null;\r\n\r\n  elementRegistry.remove(element);\r\n\r\n  eventBus.fire(type + '.removed', { element: element });\r\n\r\n  return element;\r\n};\r\n\r\nSheet.prototype.removeRow = function(element) {\r\n\r\n  this.removeSiblings('row', element);\r\n\r\n  var el = this._removeElement(element, 'row');\r\n\r\n  // remove cells\r\n  this._eventBus.fire('cells.remove', el);\r\n\r\n  var self = this;\r\n  forEach(this._elementRegistry.filter(function(el) {\r\n    return el.row === element;\r\n  }), function(el) {\r\n    self._removeElement(el.id, 'cell');\r\n  });\r\n\r\n  this._eventBus.fire('cells.removed', el);\r\n\r\n  return el;\r\n};\r\n\r\nSheet.prototype.removeColumn = function(element) {\r\n\r\n  this.removeSiblings('column', element);\r\n\r\n  var el = this._removeElement(element, 'column');\r\n\r\n  // remove cells\r\n  this._eventBus.fire('cells.remove', el);\r\n\r\n  var self = this;\r\n  forEach(this._elementRegistry.filter(function(el) {\r\n    return el.column === element;\r\n  }), function(el) {\r\n    self._removeElement(el.id, 'cell');\r\n  });\r\n\r\n  this._eventBus.fire('cells.removed', el);\r\n\r\n  return el;\r\n};\r\n\r\nSheet.prototype.getRootElement = function() {\r\n  return this._rootNode;\r\n};\r\n\r\nSheet.prototype.setRootElement = function(root) {\r\n  this._rootNode = root;\r\n};\r\n","module.exports = {\r\n  __depends__: [ require(415) ],\r\n  __init__: [ 'sheet' ],\r\n  sheet: [ 'type', require(412) ],\r\n  elementRegistry: [ 'type', require(410) ],\r\n  elementFactory: ['type', require(409)],\r\n  graphicsFactory: [ 'type', require(411) ],\r\n  eventBus: [ 'type', require(463) ]\r\n};\r\n","'use strict';\r\n\r\nvar forEach = require(575),\r\n    colDistance = function colDistance(from, to) {\r\n      var i = 0,\r\n          current = from.column;\r\n      while (current && current !== to.column) {\r\n        current = current.next;\r\n        i++;\r\n      }\r\n      return !current ? -1 : i;\r\n    },\r\n    rowDistance = function rowDistance(from, to) {\r\n      var i = 0,\r\n          current = from.row;\r\n      while (current && current !== to.row) {\r\n        current = current.next;\r\n        i++;\r\n      }\r\n      return !current ? -1 : i;\r\n    };\r\n\r\n/**\r\n * The default renderer used for rows, columns and cells.\r\n *\r\n */\r\nfunction Renderer(elementRegistry, eventBus) {\r\n  this._elementRegistry = elementRegistry;\r\n  this._eventBus = eventBus;\r\n}\r\n\r\nRenderer.$inject = [ 'elementRegistry', 'eventBus' ];\r\n\r\nmodule.exports = Renderer;\r\n\r\nRenderer.prototype.drawRow = function drawRow(gfx, data) {\r\n  this._eventBus.fire('row.render', {\r\n    gfx: gfx,\r\n    data: data\r\n  });\r\n  return gfx;\r\n};\r\n\r\nRenderer.prototype.drawColumn = function drawColumn(gfx, data) {\r\n  this._eventBus.fire('column.render', {\r\n    gfx: gfx,\r\n    data: data\r\n  });\r\n  return gfx;\r\n};\r\n\r\nRenderer.prototype.drawCell = function drawCell(gfx, data) {\r\n  if (data.colspan) {\r\n    gfx.setAttribute('colspan', data.colspan);\r\n  }\r\n  if (data.rowspan) {\r\n    gfx.setAttribute('rowspan', data.rowspan);\r\n  }\r\n\r\n  gfx.setAttribute('style', '');\r\n\r\n  // traverse backwards to find colspanned elements which might overlap us\r\n  var cells = this._elementRegistry.filter(function(element) {\r\n    return element._type === 'cell' && element.row === data.row;\r\n  });\r\n\r\n  forEach(cells, function(cell) {\r\n    var d = colDistance(cell, data);\r\n    if (cell.colspan && d > 0 && d < cell.colspan) {\r\n      gfx.setAttribute('style', 'display: none;');\r\n    }\r\n  });\r\n\r\n  // traverse backwards to find rowspanned elements which might overlap us\r\n  cells = this._elementRegistry.filter(function(element) {\r\n    return element._type === 'cell' && element.column === data.column;\r\n  });\r\n\r\n  forEach(cells, function(cell) {\r\n    var d = rowDistance(cell, data);\r\n    if (cell.rowspan && d > 0 && d < cell.rowspan) {\r\n      gfx.setAttribute('style', 'display: none;');\r\n    }\r\n  });\r\n\r\n  if (data.content) {\r\n    if (typeof data.content === 'string' && !data.content.tagName) {\r\n      gfx.childNodes[0].textContent = data.content;\r\n    } else if (!!data.content.tagName) {\r\n      gfx.childNodes[0].appendChild(data.content);\r\n    }\r\n  } else {\r\n    gfx.childNodes[0].textContent = '';\r\n  }\r\n\r\n  this._eventBus.fire('cell.render', {\r\n    gfx: gfx,\r\n    data: data\r\n  });\r\n\r\n  return gfx;\r\n};\r\n\r\n","module.exports = {\r\n  renderer: [ 'type', require(414) ]\r\n};\r\n","'use strict';\r\n\r\nvar domify = require(637);\r\n\r\n// document wide unique overlay ids\r\nvar ids = new (require(468))('row');\r\n\r\n/**\r\n * Adds a control to the table to add more rows\r\n *\r\n * @param {EventBus} eventBus\r\n */\r\nfunction AddRow(eventBus, sheet, elementRegistry, modeling) {\r\n\r\n  this.row = null;\r\n\r\n  var self = this;\r\n  // add the row control row\r\n  eventBus.on('utilityColumn.added', function(event) {\r\n    var column = event.column;\r\n    self.row = sheet.addRow({\r\n      id: 'tjs-controls',\r\n      isFoot: true\r\n    });\r\n\r\n    var node = domify('<a title=\"Add row\" class=\"table-js-add-row\"><span>+</span></a>');\r\n\r\n    node.addEventListener('mouseup', function() {\r\n      modeling.createRow({ id: ids.next() });\r\n    });\r\n\r\n    sheet.setCellContent({\r\n      row: self.row,\r\n      column: column,\r\n      content: node\r\n    });\r\n\r\n  });\r\n}\r\n\r\nAddRow.$inject = [ 'eventBus', 'sheet', 'elementRegistry', 'modeling' ];\r\n\r\nmodule.exports = AddRow;\r\n\r\nAddRow.prototype.getRow = function() {\r\n  return this.row;\r\n};\r\n","'use strict';\r\n\r\nvar domClasses = require(635);\r\n\r\nfunction AddRowRenderer(\r\n    eventBus,\r\n    addRow) {\r\n\r\n  eventBus.on('cell.render', function(event) {\r\n    if (event.data.row === addRow.getRow() && event.data.content) {\r\n      domClasses(event.gfx).add('add-rule');\r\n      event.gfx.childNodes[0].appendChild(event.data.content);\r\n    }\r\n  });\r\n\r\n  eventBus.on('row.render', function(event) {\r\n    if (event.data === addRow.getRow()) {\r\n      domClasses(event.gfx).add('rules-controls');\r\n    }\r\n  });\r\n\r\n}\r\n\r\nAddRowRenderer.$inject = [\r\n  'eventBus',\r\n  'addRow'\r\n];\r\n\r\nmodule.exports = AddRowRenderer;\r\n","module.exports = {\r\n  __init__: [ 'addRow', 'addRowRenderer'],\r\n  __depends__: [\r\n    require(447),\r\n    require(457)\r\n  ],\r\n  addRow: [ 'type', require(416) ],\r\n  addRowRenderer: [ 'type', require(417) ]\r\n};\r\n","'use strict';\r\n\r\n/**\r\n * Adds change support to the sheet, including\r\n *\r\n * <ul>\r\n *   <li>redrawing rows and cells on change</li>\r\n * </ul>\r\n *\r\n * @param {EventBus} eventBus\r\n * @param {ElementRegistry} elementRegistry\r\n * @param {GraphicsFactory} graphicsFactory\r\n */\r\nfunction ChangeSupport(eventBus, elementRegistry, graphicsFactory) {\r\n\r\n  // redraw row / cells on change\r\n\r\n  eventBus.on('element.changed', function(event) {\r\n\r\n    var element = event.element;\r\n\r\n    if (!event.gfx) {\r\n      event.gfx = elementRegistry.getGraphics(element);\r\n    }\r\n\r\n    // shape + gfx may have been deleted\r\n    if (!event.gfx) {\r\n      return;\r\n    }\r\n\r\n    if (element.column) {\r\n      eventBus.fire('cell.changed', event);\r\n    } else {\r\n      eventBus.fire('row.changed', event);\r\n    }\r\n  });\r\n\r\n  eventBus.on('elements.changed', function(event) {\r\n    for(var i = 0; i < event.elements.length; i++) {\r\n      eventBus.fire('element.changed', { element: event.elements[i] });\r\n    }\r\n  });\r\n\r\n  eventBus.on('cell.changed', function(event) {\r\n    graphicsFactory.update('cell', event.element, event.gfx);\r\n  });\r\n\r\n  eventBus.on('row.changed', function(event) {\r\n    graphicsFactory.update('row', event.element, event.gfx);\r\n\r\n    // also update all cells of the row\r\n    var cells = elementRegistry.filter(function(ea) {\r\n      return ea.row === event.element;\r\n    });\r\n    for(var i = 0; i < cells.length; i++) {\r\n      graphicsFactory.update('cell', cells[i], elementRegistry.getGraphics(cells[i]));\r\n    }\r\n  });\r\n}\r\n\r\nChangeSupport.$inject = [ 'eventBus', 'elementRegistry', 'graphicsFactory' ];\r\n\r\nmodule.exports = ChangeSupport;\r\n","module.exports = {\r\n  __init__: [ 'changeSupport'],\r\n  changeSupport: [ 'type', require(419) ]\r\n};\r\n","'use strict';\r\n\r\n\r\n\r\nvar domify = require(637),\r\n    domClasses = require(635),\r\n    assign = require(627),\r\n    forEach = require(575);\r\n\r\n/**\r\n * Offers the ability to create a combobox which is a combination of an\r\n *\r\n * <ul>\r\n *   <li>input</li>\r\n *   <li>dropdown</li>\r\n *   <li>typeahead</li>\r\n * </ul>\r\n *\r\n * @param {Object}   config\r\n * @param {String}   config.label\r\n *                            Text of the label which will be placed before the input field\r\n * @param {String[]} config.classNames\r\n *                            Array of Strings each identifying a class name of the comboBox container\r\n * @param {String[]} config.options\r\n *                            Array of Strings each specifying one option for the dropdown and typeahead feature\r\n * @param {String[]} config.dropdownClassNames\r\n *                            Array of Strings each identifying a class name of the dropdown container\r\n */\r\nfunction ComboBox(config) {\r\n\r\n  var self = this;\r\n  var template = domify(\"<div>/r/n  <label></label>/r/n  <input tabindex=/\"0/\" />/r/n  <span class=/\"cb-caret/\"></span>/r/n</div>/r/n\");\r\n\r\n  var label = config.label,\r\n      classNames = config.classNames,\r\n      options = config.options,\r\n      dropdownClassNames = config.dropdownClassNames;\r\n\r\n  this._dropdown = document.createElement('ul');\r\n  this._template = template;\r\n  this._dropdownOpen = false;\r\n  this._disabled = false;\r\n\r\n  this._listeners = {};\r\n\r\n  // assign classes to the combobox template\r\n  forEach(classNames, function(className) {\r\n    domClasses(template).add(className);\r\n  });\r\n\r\n  // assign classes to the dropdown node\r\n  forEach(dropdownClassNames, function(className) {\r\n    domClasses(self._dropdown).add(className);\r\n  });\r\n\r\n  // create options\r\n  forEach(options, function(option) {\r\n    var node = document.createElement('li');\r\n    node.setAttribute('tabindex', '1');\r\n    node.textContent = option;\r\n    self._dropdown.appendChild(node);\r\n  });\r\n\r\n  // set the label of the combobox\r\n  template.querySelector('label').textContent = label + ':';\r\n\r\n\r\n  // --- event listeners ---\r\n\r\n  // toggles the dropdown on click on the caret symbol\r\n  template.querySelector('span').addEventListener('click', function(evt) {\r\n    self._toggleDropdown(options);\r\n    evt.stopPropagation();\r\n  });\r\n\r\n  // closes the dropdown when it is open and the user clicks somewhere\r\n  document.body.addEventListener('click', function(evt) {\r\n    self._closeDropdown();\r\n  });\r\n\r\n  // updates the value of the input field when the user\r\n  //   a. clicks on an option in the dropdown\r\n  //   b. focuses an option in the dropdown via keyboard\r\n  var update = function(evt) {\r\n    self.setValue(evt.target.textContent);\r\n  };\r\n  this._dropdown.addEventListener('click', function(evt) {\r\n    update(evt);\r\n\r\n    // stop event propagation to prevent closing potential complex cells\r\n    evt.stopPropagation();\r\n\r\n    // still close the dropdown\r\n    self._closeDropdown();\r\n  });\r\n  this._dropdown.addEventListener('focus', update, true);\r\n\r\n  // keyboard behavior for dropdown and input field\r\n  var keyboardFunction = function(evt) {\r\n    var code = evt.which || evt.keyCode;\r\n\r\n    // ESC\r\n    if (code === 27) {\r\n      self._closeDropdown();\r\n    } else\r\n\r\n    // ENTER\r\n    if (code === 13) {\r\n      self._toggleDropdown(options);\r\n    } else\r\n\r\n    // TAB, DOWN\r\n    if (code === 9 || code === 40) {\r\n      evt.preventDefault();\r\n      self._focusNext(code === 9 && evt.shiftKey);\r\n    } else\r\n\r\n    // UP\r\n    if (code === 38) {\r\n      evt.preventDefault();\r\n      self._focusNext(true);\r\n    }\r\n\r\n  };\r\n  this._dropdown.addEventListener('keydown', keyboardFunction);\r\n  this._template.querySelector('input').addEventListener('keydown', keyboardFunction);\r\n\r\n  // when typing, show only options that match the typed text\r\n  this._template.querySelector('input').addEventListener('input', function(evt) {\r\n    var filteredList = options.filter(function(option) {\r\n      return option.toLowerCase().indexOf(self._template.querySelector('input').value.toLowerCase()) !== -1;\r\n    });\r\n    self._openDropdown(filteredList);\r\n\r\n    self._fireEvent('valueChanged', {\r\n      newValue: self._template.querySelector('input').value\r\n    });\r\n\r\n  });\r\n\r\n  return this;\r\n}\r\n\r\n/**\r\n * Focuses the next field in the dropdown. Opens the dropdown if it is closed.\r\n *\r\n * @param {boolean} reverse Focus previous field instead of next field\r\n */\r\nComboBox.prototype._focusNext = function(reverse) {\r\n\r\n  if (!this._isDropdownOpen()) {\r\n    this._openDropdown();\r\n    return;\r\n  }\r\n\r\n  var element = document.activeElement;\r\n  var focus;\r\n\r\n  // get the element which should have focus\r\n  if (element === this._template.querySelector('input')) {\r\n    focus = this._dropdown[reverse ? 'lastChild' : 'firstChild'];\r\n  } else if (element.parentNode === this._dropdown) {\r\n    focus = element[reverse ? 'previousSibling' : 'nextSibling'];\r\n  }\r\n\r\n  // if the element is not displayed (due to text input),\r\n  // select next visible element instead\r\n  while (focus && focus.style.display === 'none') {\r\n    focus = focus[reverse ? 'previousSibling' : 'nextSibling'];\r\n  }\r\n\r\n  // if no element can be selected (search reached end of list), focus input field\r\n  if (!focus) {\r\n    focus = this._template.querySelector('input');\r\n  }\r\n  focus.focus();\r\n};\r\n\r\nComboBox.prototype._toggleDropdown = function(options) {\r\n  if (this._isDropdownOpen()) {\r\n    this._closeDropdown();\r\n  } else {\r\n    this._openDropdown(options);\r\n  }\r\n};\r\n\r\nComboBox.prototype._openedDropdown = null;\r\n\r\nComboBox.prototype._isDropdownOpen = function() {\r\n  return this._dropdownOpen;\r\n};\r\n\r\nComboBox.prototype._closeDropdown = function() {\r\n  if (this._isDropdownOpen()) {\r\n    this._dropdownOpen = false;\r\n    ComboBox.prototype._openedDropdown = null;\r\n    domClasses(this._template).remove('expanded');\r\n    this._dropdown.parentNode.removeChild(this._dropdown);\r\n  }\r\n};\r\n\r\n/**\r\n *  Opens the dropdown menu for the input field.\r\n *\r\n *  @param {String[]} options Array of options which should be displayed in the dropdown\r\n *        If an option was specified in the constructor, but is not included in this list,\r\n *        it will be hidden via CSS. If the options array is empty, the dropdown is closed.\r\n */\r\nComboBox.prototype._openDropdown = function(options) {\r\n\r\n  if (ComboBox.prototype._openedDropdown) {\r\n    ComboBox.prototype._openedDropdown._closeDropdown();\r\n  }\r\n\r\n  // close dropdown if options array is empty or the comboBox is disabled\r\n  if (options && options.length === 0 || this._disabled) {\r\n    this._closeDropdown();\r\n    return;\r\n  }\r\n\r\n  // update the display of options depending on options array\r\n  forEach(this._dropdown.childNodes, function(child) {\r\n    if (!options || options.indexOf(child.textContent) !== -1) {\r\n      child.style.display = 'block';\r\n    } else {\r\n      child.style.display = 'none';\r\n    }\r\n  });\r\n\r\n  // position the dropdown in relation to the position of the input element\r\n  var input = this._template.querySelector('input');\r\n  var e = input;\r\n  var offset = {x:0,y:0};\r\n  while (e)\r\n  {\r\n      offset.x += e.offsetLeft;\r\n      offset.y += e.offsetTop;\r\n      e = e.offsetParent;\r\n  }\r\n\r\n  assign(this._dropdown.style, {\r\n    'display': 'block',\r\n    'position': 'absolute',\r\n    'top': (offset.y + input.clientHeight)+'px',\r\n    'left': offset.x+'px',\r\n    'width': input.clientWidth+'px',\r\n  });\r\n  document.body.appendChild(this._dropdown);\r\n\r\n  ComboBox.prototype._openedDropdown = this;\r\n  this._dropdownOpen = true;\r\n\r\n  domClasses(this._template).add('expanded');\r\n\r\n};\r\n\r\nComboBox.prototype._fireEvent = function(evt, payload) {\r\n  forEach(this._listeners[evt], function(listener) {\r\n    listener(payload);\r\n  });\r\n};\r\n\r\nComboBox.prototype.setValue = function(newValue) {\r\n  this._fireEvent('valueChanged', {\r\n    oldValue: this._template.querySelector('input').value,\r\n    newValue: newValue\r\n  });\r\n  this._template.querySelector('input').value = newValue;\r\n};\r\n\r\nComboBox.prototype.getValue = function() {\r\n  return this._template.querySelector('input').value;\r\n};\r\n\r\nComboBox.prototype.getNode = function() {\r\n  return this._template;\r\n};\r\n\r\nComboBox.prototype.addEventListener = function(event, fct) {\r\n  this._listeners[event] = this._listeners[event] || [];\r\n  this._listeners[event].push(fct);\r\n};\r\n\r\nComboBox.prototype.disable = function() {\r\n  this._disabled = true;\r\n  this._template.querySelector('input').setAttribute('disabled', 'true');\r\n};\r\n\r\nComboBox.prototype.enable = function() {\r\n  this._disabled = false;\r\n  this._template.querySelector('input').setAttribute('disabled', 'false');\r\n};\r\n\r\n\r\nmodule.exports = ComboBox;\r\n","'use strict';\r\n\r\nvar assign = require(627),\r\n    domClasses = require(635),\r\n    domRemove = require(640);\r\n\r\n\r\n/**\r\n *  A ComplexCell is a table cell that renders a template on click\r\n *  This can be used for cells containing complex data that can not be edited inline\r\n *\r\n *  In order to define a cell as complex, the cell must have a special property complex defining\r\n *  the configuration of the cell such as template or position:\r\n *\r\n *  Complex Property:\r\n *     - template: {DOMNode}\r\n *              HTML template of the complex content\r\n *     - className: {String | String[]} (optional, defaults to 'complex-cell')\r\n *              Defines the classNames which are set on the container of the complex cell\r\n *     - offset: {Object} (option, defaults to {x: 0, y: 0})\r\n *              Defines the offset of the template from the top left corner of the cell\r\n *\r\n *  Additional properties can be added to the complex object to retrieve them in events.\r\n *\r\n * Example:\r\n * cell.complex = {\r\n *      className: 'dmn-clauseexpression-setter',\r\n *      template: domify('<div>Hello World</div>'),\r\n *      type: 'mapping',\r\n *      offset: { x: 0, y: 10 }\r\n * };\r\n */\r\nfunction ComplexCell(eventBus, elementRegistry) {\r\n\r\n  this._eventBus = eventBus;\r\n  this._elementRegistry = elementRegistry;\r\n\r\n  this.setupListeners();\r\n}\r\n\r\n\r\nComplexCell.prototype.setupListeners = function() {\r\n  var self = this;\r\n\r\n  // click on body closes open complex cells\r\n  document.body.addEventListener('click', function(event) {\r\n    if (!event.preventDialogClose) {\r\n      self.close();\r\n    }\r\n  });\r\n\r\n  // also close the dialog on a hashchange, e.g. for single page applications that go to another page\r\n  window.addEventListener('hashchange', function(event) {\r\n    self.close();\r\n  });\r\n\r\n  this._eventBus.on(['table.scroll', 'table.destroy', 'popupmenu.open'], function(event) {\r\n    self.close();\r\n  });\r\n\r\n  // click on elements close potentially open complex cells\r\n  // and open a complex cell at the position of the cell\r\n  this._eventBus.on('element.click', function(event) {\r\n\r\n    self.close();\r\n\r\n    // set flag on original event to prevent closing the opened dialog\r\n    // this only applies if the event has an original event (so it was generated\r\n    // from a browser event that travels the dom tree)\r\n    if (event.originalEvent) {\r\n      event.originalEvent.preventDialogClose = true;\r\n    }\r\n\r\n    if (event.element && event.element.complex) {\r\n\r\n      // calculate position based on the position of the cell\r\n      var gfx = self._elementRegistry.getGraphics(event.element);\r\n\r\n      // traverse the offset parent chain to find the offset sum\r\n      var e = gfx;\r\n      var offset = {x:0,y:0};\r\n      while (e)\r\n      {\r\n          offset.x += e.offsetLeft;\r\n          offset.y += e.offsetTop;\r\n          e = e.offsetParent;\r\n      }\r\n\r\n      // now also traverse the complete parent chain to determine the full scroll offset\r\n      e = gfx;\r\n      while (e && typeof e.scrollTop === 'number' && typeof e.scrollLeft === 'number')\r\n      {\r\n          offset.x -= e.scrollLeft;\r\n          offset.y -= e.scrollTop;\r\n          e = e.parentNode;\r\n      }\r\n\r\n      event.element.complex.position = {\r\n        x: offset.x,\r\n        y: offset.y\r\n      };\r\n\r\n      self.open(event.element.complex);\r\n    }\r\n  });\r\n};\r\n\r\nComplexCell.prototype.close = function() {\r\n  if (this._current) {\r\n    this._eventBus.fire('complexCell.close', this._current);\r\n\r\n    domRemove(this._current.container);\r\n    this._current = null;\r\n  }\r\n};\r\n\r\nComplexCell.prototype.isOpen = function() {\r\n  return !!this._current;\r\n};\r\n\r\n/**\r\n * Creates a container that holds the template\r\n */\r\nComplexCell.prototype._createContainer = function(className, position) {\r\n  var container = document.createElement('div');\r\n\r\n  assign(container.style, {\r\n    position: 'absolute',\r\n    left: position.x + 'px',\r\n    top: position.y  + 'px',\r\n    width: 'auto',\r\n    height: 'auto'\r\n  });\r\n\r\n  // stop propagation of click events on the container to avoid closing the template\r\n  container.addEventListener('click', function(event) {\r\n    event.stopPropagation();\r\n  });\r\n\r\n  if (typeof className === 'string') {\r\n    domClasses(container).add(className);\r\n  } else {\r\n    for(var i = 0; i < className.length; i++) {\r\n      domClasses(container).add(className[i]);\r\n    }\r\n  }\r\n\r\n  return container;\r\n};\r\n\r\nComplexCell.prototype.open = function(config) {\r\n  var className = config.className || 'complex-cell',\r\n      template = config.template;\r\n\r\n  // make sure, only one complex cell dialog is open at a time\r\n  if (this.isOpen()) {\r\n    this.close();\r\n  }\r\n\r\n  // apply the optional offset configuration to the calculated position\r\n  var position = {\r\n    x: config.position.x + (config.offset && config.offset.x || 0),\r\n    y: config.position.y + (config.offset && config.offset.y || 0)\r\n  };\r\n\r\n  var parent = document.body,\r\n\r\n      // create the template container\r\n      container = this._createContainer(className, position);\r\n\r\n  // attach the template container to the document body\r\n  this._attachContainer(container, parent);\r\n\r\n  // attach the template node to the container\r\n  this._attachContent(template, container);\r\n\r\n  // save the currently open complex cell\r\n  this._current = {\r\n    container: container,\r\n    config: config\r\n  };\r\n\r\n  this._eventBus.fire('complexCell.open', this._current);\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Attaches the container to the DOM.\r\n *\r\n * @param {Object} container\r\n * @param {Object} parent\r\n */\r\nComplexCell.prototype._attachContainer = function(container, parent) {\r\n  // Attach to DOM\r\n  parent.appendChild(container);\r\n};\r\n\r\n/**\r\n * Attaches the content to the container.\r\n *\r\n * @param {Object} container\r\n * @param {Object} parent\r\n */\r\nComplexCell.prototype._attachContent = function(content, container) {\r\n  container.appendChild(content);\r\n};\r\n\r\nComplexCell.$inject = [ 'eventBus', 'elementRegistry' ];\r\n\r\nmodule.exports = ComplexCell;\r\n","'use strict';\r\n\r\nmodule.exports = {\r\n  __init__: [ 'complexCell' ],\r\n  complexCell: [ 'type', require(422) ]\r\n};\r\n","'use strict';\r\n\r\nvar domClasses = require(635);\r\n/**\r\n *  The controls module adds a container to the top-right corner of the table which holds\r\n *  some control elements\r\n */\r\nfunction Controls(eventBus) {\r\n\r\n  this._eventBus = eventBus;\r\n  this.controlsContainer;\r\n\r\n  var self = this;\r\n\r\n  eventBus.on('sheet.init', function(evt) {\r\n\r\n    var domNode = document.createElement('div');\r\n    domClasses(domNode).add('tjs-controls');\r\n\r\n    self.controlsContainer = domNode;\r\n    evt.sheet.parentNode.insertBefore(domNode, evt.sheet.parentNode.firstChild);\r\n\r\n    eventBus.fire('controls.init', {\r\n      node: domNode,\r\n      controls: self\r\n    });\r\n\r\n  });\r\n\r\n}\r\n\r\nControls.prototype.addControl = function(label, fct) {\r\n  this._eventBus.fire('controls.add', {\r\n    label: label\r\n  });\r\n\r\n  var newNode = document.createElement('a');\r\n  newNode.textContent = label;\r\n\r\n  newNode.addEventListener('click', fct);\r\n\r\n  this.controlsContainer.appendChild(newNode);\r\n\r\n  this._eventBus.fire('controls.added', {\r\n    label: label,\r\n    node: newNode\r\n  });\r\n};\r\n\r\n\r\nControls.$inject = [ 'eventBus' ];\r\n\r\nmodule.exports = Controls;\r\n","'use strict';\r\n\r\nmodule.exports = {\r\n  __init__: [ 'controls' ],\r\n  controls: [ 'type', require(424) ]\r\n};\r\n","'use strict';\r\n\r\nvar debounce = require(577);\r\nvar DEBOUNCE_DELAY = 300;\r\n\r\nfunction EditBehavior(\r\n    eventBus,\r\n    selection,\r\n    sheet,\r\n    elementRegistry,\r\n    modeling,\r\n    rules,\r\n    graphicsFactory,\r\n    keyboard,\r\n    commandStack,\r\n    tableName) {\r\n\r\n  var replaceFct = function(text) {\r\n    return text\r\n      .replace(/<div><br><//div>/ig, '/n')  // replace div with a br with single linebreak\r\n      .replace(/<br(/s*)//*>/ig, '/n')      // replace single line-breaks\r\n      .replace(/<(div|p)(/s*)//*>/ig, '/n') // add a line break before all div and p tags\r\n      .replace(/&nbsp;/ig, ' ')             // replace non breaking spaces with normal spaces\r\n      .replace(/(<([^>]+)>)/ig, '');        // remove any remaining tags\r\n  };\r\n\r\n  var sanitizeInput = function(text) {\r\n    var encodedString = replaceFct(text).trim();\r\n\r\n    // create an temporary textarea to translate html entities to normal chars\r\n    var textArea = document.createElement('textarea');\r\n        textArea.innerHTML = encodedString;\r\n    return textArea.value;\r\n  };\r\n\r\n  var sanitizeInputWithoutTrim = function(text) {\r\n    var encodedString = replaceFct(text);\r\n\r\n    // create an temporary textarea to translate html entities to normal chars\r\n    var textArea = document.createElement('textarea');\r\n        textArea.innerHTML = encodedString;\r\n    return textArea.value;\r\n  };\r\n\r\n  eventBus.on('element.focus', function(event) {\r\n    if (rules.allowed('cell.edit', {\r\n      row: event.element.row,\r\n      column: event.element.column,\r\n      content: event.element.content\r\n    }) && !event.element.row.isFoot &&\r\n          !event.element.complex) {\r\n\r\n      event.gfx.childNodes[0].focus();\r\n\r\n      var element = event.element;\r\n\r\n      selection.select(element);\r\n\r\n      // select the content of the focused cell\r\n      var sel = window.getSelection();\r\n      sel.selectAllChildren(event.gfx.childNodes[0]);\r\n\r\n      // IE has execCommand, but throws an Exception when trying to use it with\r\n      // enableInlineTableEditing\r\n      // We need this line so that FF does not screw us with its build in\r\n      // table editing features\r\n      try {\r\n        document.execCommand('enableInlineTableEditing', false, 'false');\r\n      } catch(e) {\r\n        // only catch the IE error\r\n        if (e.description !== 'Invalid argument.') {\r\n          // rethrow all other errors\r\n          throw e;\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  eventBus.on('element.mousedown', function(event) {\r\n    if (rules.allowed('cell.edit', {\r\n      row: event.element.row,\r\n      column: event.element.column,\r\n      content: event.element.content\r\n    }) && !event.element.row.isFoot &&\r\n          selection.get() !== event.element &&\r\n          !event.element.complex) {\r\n\r\n      selection.select(event.element);\r\n\r\n      // ensure that we get a focus event afterwards\r\n      // prevent chrome from firing a buildin focus event\r\n      event.preventDefault();\r\n      // cause all browsers to focus the child node\r\n      event.gfx.childNodes[0].focus();\r\n    }\r\n  });\r\n\r\n  eventBus.on('element.blur', function(event) {\r\n    var element = event.element;\r\n\r\n    if (selection.isSelected(element)) {\r\n      selection.deselect();\r\n    }\r\n  });\r\n\r\n  eventBus.on('element.input', debounce(function(event) {\r\n    var element = event.element;\r\n    var gfx = elementRegistry.getGraphics(event.element);\r\n    if (selection.isSelected(element)) {\r\n\r\n      modeling.editCell(element.row.id, element.column.id, sanitizeInputWithoutTrim(gfx.innerHTML));\r\n\r\n    }\r\n  }, DEBOUNCE_DELAY));\r\n\r\n  eventBus.on('selection.changed', function(event) {\r\n    if (event.oldSelection) {\r\n      // apply changes of the diagram to the model\r\n      var gfxOld = elementRegistry.getGraphics(event.oldSelection);\r\n      if (gfxOld) {\r\n        modeling.editCell(event.oldSelection.row.id, event.oldSelection.column.id, sanitizeInput(gfxOld.innerHTML));\r\n        graphicsFactory.update('row', event.oldSelection.row, elementRegistry.getGraphics(event.oldSelection.row));\r\n        graphicsFactory.update('column', event.oldSelection.column,\r\n                elementRegistry.getGraphics(event.oldSelection.column));\r\n      }\r\n    }\r\n    if (event.newSelection) {\r\n      graphicsFactory.update('cell', event.newSelection, elementRegistry.getGraphics(event.newSelection));\r\n      graphicsFactory.update('row', event.newSelection.row, elementRegistry.getGraphics(event.newSelection.row));\r\n      graphicsFactory.update('column', event.newSelection.column,\r\n              elementRegistry.getGraphics(event.newSelection.column));\r\n    }\r\n  });\r\n\r\n  var nameFocus = false;\r\n  var nameElement = null;\r\n  eventBus.on('tableName.init', function(event) {\r\n    if (rules.allowed('name.edit')) {\r\n\r\n      nameElement = event.node;\r\n\r\n      eventBus.fire('tableName.allowEdit', {\r\n        editAllowed: true\r\n      });\r\n\r\n      event.node.setAttribute('contenteditable', true);\r\n\r\n      event.node.addEventListener('focus', function(evt) {\r\n        nameFocus = true;\r\n      }, true);\r\n      event.node.addEventListener('blur', function(evt) {\r\n        nameFocus = false;\r\n        var newName = sanitizeInput(evt.target.innerHTML);\r\n        if (newName !== tableName.getName()) {\r\n          modeling.editName(newName);\r\n        }\r\n      }, true);\r\n    }\r\n  });\r\n\r\n  if (keyboard) {\r\n    keyboard._listeners.unshift(function(key, modifiers) {\r\n      if(key === 13) {\r\n        var evt = modifiers;\r\n        if(modifiers.ctrlKey || modifiers.metaKey) {\r\n          // standard behavior (linebreak) on ctrl+enter\r\n          // http://stackoverflow.com/a/12957539/4582955\r\n            var selectObj = document.getSelection();\r\n            var range = selectObj.getRangeAt(0);\r\n\r\n            var br = document.createElement('br'),\r\n                textNode = document.createTextNode('/u00a0');\r\n                    //Passing ' ' directly will not end up being shown correctly\r\n\r\n            range.deleteContents();             // delete the selection\r\n            range.insertNode(br);               // add a linebreak\r\n            range.collapse(false);              // go after the linebreak\r\n            range.insertNode(textNode);         // add a whitespace (so the linebreak gets displayed)\r\n            range.collapse(true);               // place cursor before whitespace\r\n\r\n            // update the selection with the new range\r\n            selectObj.removeAllRanges();\r\n            selectObj.addRange(range);\r\n\r\n        } else if(modifiers.shiftKey) {\r\n          evt.preventDefault();\r\n          selection.selectAbove();\r\n        } else {\r\n          evt.preventDefault();\r\n          selection.selectBelow();\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nEditBehavior.$inject = [\r\n  'eventBus',\r\n  'selection',\r\n  'sheet',\r\n  'elementRegistry',\r\n  'modeling',\r\n  'rules',\r\n  'graphicsFactory',\r\n  'keyboard',\r\n  'commandStack',\r\n  'tableName' ];\r\n\r\nmodule.exports = EditBehavior;\r\n","'use strict';\r\n\r\nvar domClasses = require(635);\r\n\r\nfunction EditRenderer(\r\n    eventBus,\r\n    rules) {\r\n\r\n  eventBus.on('cell.render', function(event) {\r\n    if (rules.allowed('cell.edit', {\r\n      row: event.data.row,\r\n      column: event.data.column,\r\n      content: event.data.content\r\n    }) && !event.data.row.isFoot  &&\r\n          !event.data.complex) {\r\n      event.gfx.childNodes[0].setAttribute('contenteditable', true);\r\n    } else {\r\n      event.gfx.childNodes[0].setAttribute('contenteditable', false);\r\n    }\r\n\r\n    event.gfx.childNodes[0].setAttribute('spellcheck', 'false');\r\n\r\n    if (event.data.selected) {\r\n      domClasses(event.gfx).add('focused');\r\n    } else {\r\n      domClasses(event.gfx).remove('focused');\r\n    }\r\n\r\n    if (!event.data.row.isFoot) {\r\n\r\n      if (event.data.row.selected && !event.data.isHead) {\r\n        domClasses(event.gfx).add('row-focused');\r\n      } else {\r\n        domClasses(event.gfx).remove('row-focused');\r\n      }\r\n      if (event.data.column.selected && !event.data.row.useTH) {\r\n        domClasses(event.gfx).add('col-focused');\r\n      } else {\r\n        domClasses(event.gfx).remove('col-focused');\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  eventBus.on('row.render', function(event) {\r\n    if (event.data.selected && !event.data.isHead) {\r\n      domClasses(event.gfx).add('row-focused');\r\n    } else {\r\n      domClasses(event.gfx).remove('row-focused');\r\n    }\r\n\r\n  });\r\n}\r\n\r\nEditRenderer.$inject = [\r\n  'eventBus',\r\n  'rules'\r\n];\r\n\r\nmodule.exports = EditRenderer;\r\n","'use strict';\r\n\r\n/**\r\n * A service that offers the current selection in a table.\r\n * Offers the api to control the selection, too.\r\n *\r\n * @class\r\n *\r\n * @param {EventBus} eventBus the event bus\r\n */\r\nfunction Selection(eventBus, elementRegistry) {\r\n\r\n  this._eventBus = eventBus;\r\n  this._elementRegistry = elementRegistry;\r\n\r\n  this._selectedElement = null;\r\n}\r\n\r\nSelection.$inject = [ 'eventBus', 'elementRegistry' ];\r\n\r\nmodule.exports = Selection;\r\n\r\n\r\nSelection.prototype.deselect = function(skipEvent) {\r\n  if (this._selectedElement) {\r\n    var oldSelection = this._selectedElement;\r\n\r\n    this._selectedElement.row.selected = false;\r\n    this._selectedElement.column.selected = false;\r\n    this._selectedElement.selected = false;\r\n    this._selectedElement = null;\r\n    if (!skipEvent) {\r\n      this._eventBus.fire('selection.changed', { oldSelection: oldSelection, newSelection: this._selectedElement });\r\n    }\r\n    return oldSelection;\r\n  }\r\n};\r\n\r\n\r\nSelection.prototype.get = function() {\r\n  return this._selectedElement;\r\n};\r\n\r\nSelection.prototype.isSelected = function(element) {\r\n  return this._selectedElement === element;\r\n};\r\n\r\n\r\n/**\r\n * This method selects a cell in the table.\r\n *\r\n * @method Selection#select\r\n *\r\n * @param  {Object} element element to be selected\r\n */\r\nSelection.prototype.select = function(element) {\r\n  if (!element || this.isSelected(element)) {\r\n    return;\r\n  }\r\n\r\n  var oldSelection = this._selectedElement;\r\n\r\n  if (oldSelection) {\r\n    this.deselect(true);\r\n  }\r\n\r\n  this._selectedElement = element;\r\n  element.selected = true;\r\n  element.row.selected = true;\r\n  element.column.selected = true;\r\n\r\n  this._eventBus.fire('selection.changed', { oldSelection: oldSelection, newSelection: this._selectedElement });\r\n};\r\n\r\n/**\r\n * This method selects the cell above the currently selected cell\r\n *\r\n * @method Selection#selectAbove\r\n */\r\nSelection.prototype.selectAbove = function() {\r\n  var node = this.get();\r\n  if(node && node.row && node.row.previous) {\r\n    var cell = this._elementRegistry.filter(function(element) {\r\n      return element.row && element.row === node.row.previous &&\r\n         element.column && element.column === node.column;\r\n    })[0];\r\n    this.select(cell);\r\n    this._elementRegistry.getGraphics(cell.id).firstChild.focus();\r\n  }\r\n};\r\n\r\n/**\r\n * This method selects the cell below the currently selected cell\r\n *\r\n * @method Selection#selectBelow\r\n */\r\nSelection.prototype.selectBelow = function() {\r\n  var node = this.get();\r\n  if(node && node.row && node.row.next) {\r\n    var cell = this._elementRegistry.filter(function(element) {\r\n      return element.row && element.row === node.row.next &&\r\n         element.column && element.column === node.column;\r\n    })[0];\r\n    this.select(cell);\r\n    this._elementRegistry.getGraphics(cell.id).firstChild.focus();\r\n  }\r\n};\r\n","module.exports = {\r\n  __init__: [ 'editBehavior', 'editRenderer' ],\r\n  __depends__: [\r\n    require(433),\r\n    require(447),\r\n    require(435),\r\n    require(466)\r\n  ],\r\n  selection: [ 'type', require(428) ],\r\n  editBehavior: [ 'type', require(426) ],\r\n  editRenderer: [ 'type', require(427) ]\r\n};\r\n","'use strict';\r\n\r\nvar forEach = require(575);\r\n\r\nvar NOT_REGISTERED_ERROR = 'is not a registered action',\r\n    IS_REGISTERED_ERROR = 'is already registered';\r\n\r\n/**\r\n * An interface that provides access to modeling actions by decoupling\r\n * the one who requests the action to be triggered and the trigger itself.\r\n *\r\n * It's possible to add new actions by registering them with ´registerAction´ and likewise\r\n * unregister existing ones with ´unregisterAction´.\r\n *\r\n */\r\nfunction EditorActions(commandStack) {\r\n\r\n  this._actions = {\r\n    undo: function() {\r\n      commandStack.undo();\r\n    },\r\n    redo: function() {\r\n      commandStack.redo();\r\n    }\r\n  };\r\n}\r\n\r\nEditorActions.$inject = [ 'commandStack' ];\r\n\r\nmodule.exports = EditorActions;\r\n\r\n\r\n/**\r\n * Triggers a registered action\r\n *\r\n * @param  {String} action\r\n * @param  {Object} opts\r\n *\r\n * @return {Unknown} Returns what the registered listener returns\r\n */\r\nEditorActions.prototype.trigger = function(action, opts) {\r\n  if (!this._actions[action]) {\r\n    throw error(action, NOT_REGISTERED_ERROR);\r\n  }\r\n\r\n  return this._actions[action](opts);\r\n};\r\n\r\n\r\n/**\r\n * Registers a collections of actions.\r\n * The key of the object will be the name of the action.\r\n *\r\n * @example\r\n * ´´´\r\n * var actions = {\r\n  *    redo: function() {\r\n  *      commandStack.redo();\r\n  *    },\r\n  *    ruleAdd: function() {\r\n  *      var newRow = {id: Id.next()};\r\n  *      modeling.createRow(newRow);\r\n  *    }\r\n  * ];\r\n * editorActions.register(actions);\r\n *\r\n * editorActions.isRegistered('spaceTool'); // true\r\n * ´´´\r\n *\r\n * @param  {Object} actions\r\n */\r\nEditorActions.prototype.register = function(actions, listener) {\r\n  if (typeof actions === 'string') {\r\n    return this._registerAction(actions, listener);\r\n  }\r\n\r\n  forEach(actions, function(listener, action) {\r\n    this._registerAction(action, listener);\r\n  }, this);\r\n};\r\n\r\n/**\r\n * Registers a listener to an action key\r\n *\r\n * @param  {String} action\r\n * @param  {Function} listener\r\n */\r\nEditorActions.prototype._registerAction = function(action, listener) {\r\n  if (this.isRegistered(action)) {\r\n    throw error(action, IS_REGISTERED_ERROR);\r\n  }\r\n\r\n  this._actions[action] = listener;\r\n};\r\n\r\n/**\r\n * Unregister an existing action\r\n *\r\n * @param {String} action\r\n */\r\nEditorActions.prototype.unregister = function(action) {\r\n  if (!this.isRegistered(action)) {\r\n    throw error(action, NOT_REGISTERED_ERROR);\r\n  }\r\n\r\n  this._actions[action] = undefined;\r\n};\r\n\r\n/**\r\n * Returns the number of actions that are currently registered\r\n *\r\n * @return {Number}\r\n */\r\nEditorActions.prototype.length = function() {\r\n  return Object.keys(this._actions).length;\r\n};\r\n\r\n/**\r\n * Checks wether the given action is registered\r\n *\r\n * @param {String} action\r\n *\r\n * @return {Boolean}\r\n */\r\nEditorActions.prototype.isRegistered = function(action) {\r\n  return !!this._actions[action];\r\n};\r\n\r\n\r\nfunction error(action, message) {\r\n  return new Error(action + ' ' + message);\r\n}\r\n","module.exports = {\r\n  __init__: [ 'editorActions' ],\r\n  editorActions: [ 'type', require(430) ]\r\n};\r\n","'use strict';\r\n\r\nvar forEach = require(575),\r\n    domDelegate = require(636);\r\n\r\n\r\nvar isPrimaryButton = require(469).isPrimaryButton;\r\n\r\n/**\r\n * A plugin that provides interaction events for table elements.\r\n *\r\n * It emits the following events:\r\n *\r\n *   * element.hover\r\n *   * element.out\r\n *   * element.click\r\n *   * element.dblclick\r\n *   * element.mousedown\r\n *   * element.focus\r\n *   * element.blur\r\n *\r\n * Each event is a tuple { element, gfx, originalEvent }.\r\n *\r\n * Canceling the event via Event#preventDefault() prevents the original DOM operation.\r\n *\r\n * @param {EventBus} eventBus\r\n */\r\nfunction InteractionEvents(eventBus, elementRegistry) {\r\n\r\n  function fire(type, event) {\r\n    var target = event.delegateTarget || event.target,\r\n        gfx = target,\r\n        element = elementRegistry.get(gfx),\r\n        returnValue;\r\n\r\n    if (!gfx || !element) {\r\n      return;\r\n    }\r\n\r\n    returnValue = eventBus.fire(type, { element: element, gfx: gfx, originalEvent: event });\r\n\r\n    if (returnValue === false) {\r\n      event.stopPropagation();\r\n      event.preventDefault();\r\n    }\r\n  }\r\n\r\n  var handlers = {};\r\n\r\n  function mouseHandler(type) {\r\n\r\n    var fn = handlers[type];\r\n\r\n    if (!fn) {\r\n      fn = handlers[type] = function(event) {\r\n        // only indicate left mouse button interactions and contextmenu\r\n        if (isPrimaryButton(event) || type === 'element.contextmenu') {\r\n          fire(type, event);\r\n        }\r\n      };\r\n    }\r\n\r\n    return fn;\r\n  }\r\n\r\n  var bindings = {\r\n    mouseover: 'element.hover',\r\n    mouseout: 'element.out',\r\n    click: 'element.click',\r\n    dblclick: 'element.dblclick',\r\n    mousedown: 'element.mousedown',\r\n    mousemove: 'element.mousemove',\r\n    mouseup: 'element.mouseup',\r\n    focus: 'element.focus',\r\n    blur: 'element.blur',\r\n    input: 'element.input',\r\n    contextmenu: 'element.contextmenu'\r\n  };\r\n\r\n  var elementSelector = 'td,th';\r\n\r\n  ///// event registration\r\n\r\n  function isFocusEvent(event) {\r\n    return event === 'focus' || event === 'blur';\r\n  }\r\n\r\n  function registerEvent(node, event, localEvent) {\r\n    var handler = mouseHandler(localEvent);\r\n    handler.$delegate = domDelegate.bind(node, elementSelector, event, handler, isFocusEvent(event));\r\n  }\r\n\r\n  function unregisterEvent(node, event, localEvent) {\r\n    domDelegate.unbind(node, event, mouseHandler(localEvent).$delegate, isFocusEvent(event));\r\n  }\r\n\r\n  function registerEvents(node) {\r\n    forEach(bindings, function(val, key) {\r\n      registerEvent(node, key, val);\r\n    });\r\n  }\r\n\r\n  function unregisterEvents(node) {\r\n    forEach(bindings, function(val, key) {\r\n      unregisterEvent(node, key, val);\r\n    });\r\n  }\r\n\r\n  function scrollHandler(node) {\r\n\r\n    var fn = handlers.scroll;\r\n\r\n    if (!fn) {\r\n      fn = handlers.scroll = function (event) {\r\n        if (event.target.contains(node)) {\r\n          eventBus.fire('table.scroll', { gfx: event.target, originalEvent: event });\r\n        }\r\n      };\r\n    }\r\n\r\n    return fn;\r\n  }\r\n\r\n  function registerScrollEvent(node) {\r\n    document.addEventListener('scroll', scrollHandler(node), true);\r\n  }\r\n\r\n  function unregisterScrollEvent(node) {\r\n    document.removeEventListener('scroll', scrollHandler(node), true);\r\n  }\r\n\r\n  eventBus.on('sheet.destroy', function(event) {\r\n    unregisterEvents(event.sheet);\r\n    unregisterScrollEvent(event.sheet);\r\n  });\r\n\r\n  eventBus.on('sheet.init', function(event) {\r\n    registerEvents(event.sheet);\r\n    registerScrollEvent(event.sheet);\r\n  });\r\n\r\n\r\n  // API\r\n\r\n  this.fire = fire;\r\n\r\n  this.mouseHandler = mouseHandler;\r\n\r\n  this.registerEvent = registerEvent;\r\n  this.unregisterEvent = unregisterEvent;\r\n}\r\n\r\n\r\nInteractionEvents.$inject = [ 'eventBus', 'elementRegistry' ];\r\n\r\nmodule.exports = InteractionEvents;\r\n\r\n\r\n/**\r\n * An event indicating that the mouse hovered over an element\r\n *\r\n * @event element.hover\r\n *\r\n * @type {Object}\r\n * @property {djs.model.Base} element\r\n * @property {element} gfx\r\n * @property {Event} originalEvent\r\n */\r\n\r\n/**\r\n * An event indicating that the mouse has left an element\r\n *\r\n * @event element.out\r\n *\r\n * @type {Object}\r\n * @property {djs.model.Base} element\r\n * @property {element} gfx\r\n * @property {Event} originalEvent\r\n */\r\n\r\n/**\r\n * An event indicating that the mouse has clicked an element\r\n *\r\n * @event element.click\r\n *\r\n * @type {Object}\r\n * @property {djs.model.Base} element\r\n * @property {element} gfx\r\n * @property {Event} originalEvent\r\n */\r\n\r\n/**\r\n * An event indicating that the mouse has double clicked an element\r\n *\r\n * @event element.dblclick\r\n *\r\n * @type {Object}\r\n * @property {djs.model.Base} element\r\n * @property {element} gfx\r\n * @property {Event} originalEvent\r\n */\r\n\r\n/**\r\n * An event indicating that the mouse has gone down on an element.\r\n *\r\n * @event element.mousedown\r\n *\r\n * @type {Object}\r\n * @property {djs.model.Base} element\r\n * @property {element} gfx\r\n * @property {Event} originalEvent\r\n */\r\n\r\n/**\r\n * An event indicating that the mouse has gone up on an element.\r\n *\r\n * @event element.mouseup\r\n *\r\n * @type {Object}\r\n * @property {djs.model.Base} element\r\n * @property {element} gfx\r\n * @property {Event} originalEvent\r\n */\r\n\r\n/**\r\n * An event indicating that the element has gained focus.\r\n *\r\n * @event element.focus\r\n *\r\n * @type {Object}\r\n * @property {djs.model.Base} element\r\n * @property {element} gfx\r\n * @property {Event} originalEvent\r\n */\r\n\r\n/**\r\n * An event indicating that the element has lost focus\r\n *\r\n * @event element.blur\r\n *\r\n * @type {Object}\r\n * @property {djs.model.Base} element\r\n * @property {element} gfx\r\n * @property {Event} originalEvent\r\n */\r\n","module.exports = {\r\n  __init__: [ 'interactionEvents' ],\r\n  interactionEvents: [ 'type', require(432) ]\r\n};\r\n","'use strict';\r\n\r\nvar domEvent = require(638),\r\n    domMatches = require(639);\r\n\r\n/**\r\n * A keyboard abstraction that may be activated and\r\n * deactivated by users at will, consuming key events\r\n * and triggering table actions.\r\n *\r\n * The implementation fires the following key events that allow\r\n * other components to hook into key handling:\r\n *\r\n *  - keyboard.bind\r\n *  - keyboard.unbind\r\n *  - keyboard.init\r\n *  - keyboard.destroy\r\n *\r\n * All events contain the fields (node, listeners).\r\n *\r\n * A default binding for the keyboard may be specified via the\r\n * `keyboard.bindTo` configuration option.\r\n *\r\n * @param {EventBus} eventBus\r\n * @param {CommandStack} commandStack\r\n */\r\nfunction Keyboard(config, eventBus, editorActions) {\r\n  var self = this;\r\n\r\n  this._eventBus = eventBus;\r\n  this._editorActions = editorActions;\r\n\r\n  this._listeners = [];\r\n\r\n  // our key handler is a singleton that passes\r\n  // (keycode, modifiers) to each listener.\r\n  //\r\n  // listeners must indicate that they handled a key event\r\n  // by returning true. This stops the event propagation.\r\n  //\r\n  this._keyHandler = function(event) {\r\n\r\n    var i, l,\r\n        target = event.target,\r\n        listeners = self._listeners,\r\n        code = event.keyCode || event.charCode || -1;\r\n\r\n    if (domMatches(target, 'input, textarea')) {\r\n      return;\r\n    }\r\n\r\n    for (i = 0; !!(l = listeners[i]); i++) {\r\n      if (l(code, event)) {\r\n        event.stopPropagation();\r\n        event.preventDefault();\r\n      }\r\n    }\r\n  };\r\n\r\n  // properly clean dom registrations\r\n  eventBus.on('table.destroy', function() {\r\n    self._fire('destroy');\r\n\r\n    self.unbind();\r\n    self._listeners = null;\r\n  });\r\n\r\n  eventBus.on('table.init', function() {\r\n    self._fire('init');\r\n\r\n    if (config && config.bindTo) {\r\n      self.bind(config.bindTo);\r\n    }\r\n  });\r\n\r\n  this._init();\r\n}\r\n\r\nKeyboard.$inject = [ 'config.keyboard', 'eventBus', 'editorActions' ];\r\n\r\nmodule.exports = Keyboard;\r\n\r\n\r\nKeyboard.prototype.bind = function(node) {\r\n  this._node = node;\r\n\r\n  // bind key events\r\n  domEvent.bind(node, 'keydown', this._keyHandler, true);\r\n\r\n  this._fire('bind');\r\n};\r\n\r\nKeyboard.prototype.getBinding = function() {\r\n  return this._node;\r\n};\r\n\r\nKeyboard.prototype.unbind = function() {\r\n  var node = this._node;\r\n\r\n  if (node) {\r\n    this._fire('unbind');\r\n\r\n    // unbind key events\r\n    domEvent.unbind(node, 'keydown', this._keyHandler, true);\r\n  }\r\n\r\n  this._node = null;\r\n};\r\n\r\n\r\nKeyboard.prototype._fire = function(event) {\r\n  this._eventBus.fire('keyboard.' + event, { node: this._node, listeners: this._listeners });\r\n};\r\n\r\nKeyboard.prototype._init = function() {\r\n  var listeners = this._listeners,\r\n      editorActions = this._editorActions;\r\n\r\n\r\n  // init default listeners\r\n\r\n  // undo\r\n  // (CTRL|CMD) + Z\r\n  function undo(key, modifiers) {\r\n\r\n    if (isCmd(modifiers) && !isShift(modifiers) && key === 90) {\r\n      editorActions.trigger('undo');\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n  // redo\r\n  // CTRL + Y\r\n  // CMD + SHIFT + Z\r\n  function redo(key, modifiers) {\r\n\r\n    if (isCmd(modifiers) && (key === 89 || (key === 90 && isShift(modifiers)))) {\r\n      editorActions.trigger('redo');\r\n\r\n      return true;\r\n    }\r\n  }\r\n\r\n  listeners.push(undo);\r\n  listeners.push(redo);\r\n};\r\n\r\n\r\n/**\r\n * Add a listener function that is notified with (key, modifiers) whenever\r\n * the keyboard is bound and the user presses a key.\r\n *\r\n * @param {Function} listenerFn\r\n */\r\nKeyboard.prototype.addListener = function(listenerFn) {\r\n  this._listeners.push(listenerFn);\r\n};\r\n\r\nKeyboard.prototype.hasModifier = hasModifier;\r\nKeyboard.prototype.isCmd = isCmd;\r\nKeyboard.prototype.isShift = isShift;\r\n\r\n\r\nfunction hasModifier(modifiers) {\r\n  return (modifiers.ctrlKey || modifiers.metaKey || modifiers.shiftKey || modifiers.altKey);\r\n}\r\n\r\nfunction isCmd(modifiers) {\r\n  return modifiers.ctrlKey || modifiers.metaKey;\r\n}\r\n\r\nfunction isShift(modifiers) {\r\n  return modifiers.shiftKey;\r\n}\r\n","module.exports = {\r\n  __depends__: [\r\n    require(431)\r\n  ],\r\n  __init__: [ 'keyboard' ],\r\n  keyboard: [ 'type', require(434) ]\r\n};\r\n","'use strict';\r\n\r\nvar debounce = require(577);\r\n\r\nfunction LineNumbers(eventBus, sheet) {\r\n\r\n  this._sheet = sheet;\r\n  this._utilityColumn = null;\r\n\r\n  var self = this;\r\n\r\n  eventBus.on('utilityColumn.added', function(event) {\r\n    var column = event.column;\r\n    self._utilityColumn = column;\r\n    self.updateLineNumbers();\r\n  });\r\n  eventBus.on([ 'cells.added', 'row.removed', 'row.moved' ], debounce(self.updateLineNumbers.bind(self), 100, {\r\n    'leading': true,\r\n    'trailing': true\r\n  }));\r\n}\r\n\r\n\r\nLineNumbers.$inject = [ 'eventBus', 'sheet' ];\r\n\r\nmodule.exports = LineNumbers;\r\n\r\nLineNumbers.prototype.updateLineNumbers = function() {\r\n  if (!this._utilityColumn || !this._sheet.getLastRow('body')) {\r\n    // only render line numbers if utility column has been added\r\n    return;\r\n  }\r\n\r\n  // find the first row\r\n  var currentRow = this._sheet.getLastRow('body');\r\n  while (currentRow.previous) {\r\n    currentRow = currentRow.previous;\r\n  }\r\n\r\n  // update the row number for all rows\r\n  var i = 1;\r\n  while (currentRow) {\r\n    this._sheet.setCellContent({\r\n      row: currentRow,\r\n      column: this._utilityColumn,\r\n      content: i\r\n    });\r\n    i++;\r\n    currentRow = currentRow.next;\r\n  }\r\n};\r\n","module.exports = {\r\n  __init__: [ 'lineNumbers' ],\r\n  __depends__: [\r\n    require(457)\r\n  ],\r\n  lineNumbers: [ 'type', require(436) ]\r\n};\r\n","'use strict';\r\n\r\nvar forEach = require(575);\r\n\r\n\r\n/**\r\n * The basic modeling entry point.\r\n *\r\n * @param {EventBus} eventBus\r\n * @param {ElementFactory} elementFactory\r\n * @param {CommandStack} commandStack\r\n */\r\nfunction Modeling(eventBus, elementFactory, commandStack, sheet) {\r\n  this._eventBus = eventBus;\r\n  this._elementFactory = elementFactory;\r\n  this._commandStack = commandStack;\r\n  this._sheet = sheet;\r\n\r\n  var self = this;\r\n\r\n  // high priority listener to make sure listeners are initialized when\r\n  // subsequent setup steps ask whether operations are possible\r\n  eventBus.on('table.init', 1500, function() {\r\n    // register modeling handlers\r\n    self._registerHandlers(commandStack);\r\n  });\r\n}\r\n\r\nModeling.$inject = [ 'eventBus', 'elementFactory', 'commandStack', 'sheet' ];\r\n\r\nmodule.exports = Modeling;\r\n\r\n\r\nModeling.prototype.getHandlers = function() {\r\n  return {\r\n    'row.create': require(441),\r\n    'row.delete': require(443),\r\n    'row.clear': require(439),\r\n    'row.move': require(446),\r\n\r\n    'column.create': require(440),\r\n    'column.delete': require(442),\r\n\r\n    'cell.edit': require(444),\r\n\r\n    'name.edit': require(445)\r\n  };\r\n};\r\n\r\n/**\r\n * Register handlers with the command stack\r\n *\r\n * @param {CommandStack} commandStack\r\n */\r\nModeling.prototype._registerHandlers = function(commandStack) {\r\n  forEach(this.getHandlers(), function(handler, id) {\r\n    commandStack.registerHandler(id, handler);\r\n  });\r\n};\r\n\r\n\r\n///// modeling helpers /////////////////////////////////////////\r\n\r\nModeling.prototype.createRow = function(row) {\r\n\r\n  row = this._elementFactory.create('row', row);\r\n\r\n  var context = {\r\n    row: row\r\n  };\r\n  this._commandStack.execute('row.create', context);\r\n\r\n  return context.row;\r\n};\r\n\r\nModeling.prototype.moveRow = function(source, target, above) {\r\n  var context = {\r\n    source: source,\r\n    target: target,\r\n    above: above\r\n  };\r\n\r\n  this._commandStack.execute('row.move', context);\r\n\r\n  return context;\r\n};\r\n\r\nModeling.prototype.createColumn = function(column) {\r\n\r\n  column = this._elementFactory.create('column', column);\r\n\r\n  var context = {\r\n    column: column\r\n  };\r\n\r\n  this._commandStack.execute('column.create', context);\r\n\r\n  return context.column;\r\n};\r\n\r\nModeling.prototype.deleteRow = function(row) {\r\n\r\n  var context = {\r\n    row: row\r\n  };\r\n\r\n  this._commandStack.execute('row.delete', context);\r\n\r\n  return context.row;\r\n};\r\n\r\nModeling.prototype.clearRow = function(row) {\r\n\r\n  var context = {\r\n    row: row\r\n  };\r\n\r\n  this._commandStack.execute('row.clear', context);\r\n\r\n  return context.row;\r\n};\r\n\r\nModeling.prototype.deleteColumn = function(column) {\r\n\r\n  var context = {\r\n    column: column\r\n  };\r\n\r\n  this._commandStack.execute('column.delete', context);\r\n\r\n  return context.column;\r\n};\r\n\r\nModeling.prototype.editCell = function(row, column, content) {\r\n\r\n  var context = {\r\n    row: row,\r\n    column: column,\r\n    content: content\r\n  };\r\n\r\n  if (content.trim() !== this._sheet.getCellContent(context)) {\r\n    // only execute edit command if content changed\r\n    this._commandStack.execute('cell.edit', context);\r\n  }\r\n\r\n  return context;\r\n};\r\n\r\nModeling.prototype.editName = function(newName) {\r\n  var context = {\r\n    newName : newName\r\n  };\r\n\r\n  this._commandStack.execute('name.edit', context);\r\n\r\n  return context;\r\n};\r\n","'use strict';\r\n\r\nvar forEach = require(575);\r\n\r\n/**\r\n * A handler that implements reversible clear of rows\r\n *\r\n * @param {sheet} sheet\r\n */\r\nfunction DeleteRowHandler(sheet, elementRegistry, utilityColumn) {\r\n  this._sheet = sheet;\r\n  this._elementRegistry = elementRegistry;\r\n  this._utilityColumn = utilityColumn;\r\n}\r\n\r\nDeleteRowHandler.$inject = [ 'sheet', 'elementRegistry', 'utilityColumn' ];\r\n\r\nmodule.exports = DeleteRowHandler;\r\n\r\n\r\n\r\n////// api /////////////////////////////////////////\r\n\r\n\r\n/**\r\n * Clear a row\r\n *\r\n * @param {Object} context\r\n */\r\nDeleteRowHandler.prototype.execute = function(context) {\r\n  var self = this;\r\n  var utilityColumn = this._utilityColumn && this._utilityColumn.getColumn();\r\n  var cells = this._elementRegistry.filter(function(element) {\r\n    if (utilityColumn) {\r\n      return element._type === 'cell' && element.row === context.row && element.column !== utilityColumn;\r\n    } else {\r\n      return element._type === 'cell' && element.row === context.row;\r\n    }\r\n  });\r\n  context._oldContent = [];\r\n  forEach(cells, function(cell) {\r\n    context._oldContent.push(cell.content);\r\n    self._sheet.setCellContent({row: context.row, column: cell.column, content: null});\r\n  });\r\n};\r\n\r\n\r\n/**\r\n * Undo clear by resetting the content\r\n */\r\nDeleteRowHandler.prototype.revert = function(context) {\r\n  var self = this;\r\n  var utilityColumn = this._utilityColumn && this._utilityColumn.getColumn();\r\n  var cells = this._elementRegistry.filter(function(element) {\r\n    if (utilityColumn) {\r\n      return element._type === 'cell' && element.row === context.row && element.column !== utilityColumn;\r\n    } else {\r\n      return element._type === 'cell' && element.row === context.row;\r\n    }\r\n  });\r\n  var i = 0;\r\n  forEach(cells, function(cell) {\r\n    self._sheet.setCellContent({row: context.row, column: cell.column, content: context._oldContent[i++]});\r\n  });\r\n};\r\n","'use strict';\r\n\r\n/**\r\n * A handler that implements reversible addition of columns.\r\n *\r\n * @param {sheet} sheet\r\n */\r\nfunction CreateColumnHandler(sheet) {\r\n  this._sheet = sheet;\r\n}\r\n\r\nCreateColumnHandler.$inject = [ 'sheet' ];\r\n\r\nmodule.exports = CreateColumnHandler;\r\n\r\n\r\n\r\n////// api /////////////////////////////////////////\r\n\r\n\r\n/**\r\n * Appends a column to the sheet\r\n *\r\n * @param {Object} context\r\n */\r\nCreateColumnHandler.prototype.execute = function(context) {\r\n  if (context._previousColumn) {\r\n    context.column.previous = context._previousColumn;\r\n  }\r\n  if (context._nextColumn) {\r\n    context.column.next = context._nextColumn;\r\n  }\r\n\r\n  this._sheet.addColumn(context.column);\r\n\r\n  context._previousColumn = context.column.previous;\r\n  context._nextColumn = context.column.next;\r\n\r\n  return context.column;\r\n};\r\n\r\n\r\n/**\r\n * Undo create by removing the column\r\n */\r\nCreateColumnHandler.prototype.revert = function(context) {\r\n  this._sheet.removeColumn(context.column);\r\n};\r\n","'use strict';\r\n\r\n/**\r\n * A handler that implements reversible addition of rows.\r\n *\r\n * @param {sheet} sheet\r\n */\r\nfunction CreateRowHandler(sheet) {\r\n  this._sheet = sheet;\r\n}\r\n\r\nCreateRowHandler.$inject = [ 'sheet' ];\r\n\r\nmodule.exports = CreateRowHandler;\r\n\r\n\r\n\r\n////// api /////////////////////////////////////////\r\n\r\n\r\n/**\r\n * Appends a row to the sheet\r\n *\r\n * @param {Object} context\r\n */\r\nCreateRowHandler.prototype.execute = function(context) {\r\n  if (context._previousRow) {\r\n    context.row.previous = context._previousRow;\r\n  }\r\n  if (context._nextRow) {\r\n    context.row.next = context._nextRow;\r\n  }\r\n\r\n  this._sheet.addRow(context.row);\r\n\r\n  context._previousRow = context.row.previous;\r\n  context._nextRow = context.row.next;\r\n\r\n  return context.row;\r\n};\r\n\r\n\r\n/**\r\n * Undo create by removing the row\r\n */\r\nCreateRowHandler.prototype.revert = function(context) {\r\n  this._sheet.removeRow(context.row);\r\n};\r\n","'use strict';\r\n\r\nvar forEach = require(575);\r\n\r\n/**\r\n * A handler that implements reversible addition of columns.\r\n *\r\n * @param {sheet} sheet\r\n */\r\nfunction DeleteColumnHandler(sheet, elementRegistry) {\r\n  this._sheet = sheet;\r\n  this._elementRegistry = elementRegistry;\r\n}\r\n\r\nDeleteColumnHandler.$inject = [ 'sheet', 'elementRegistry' ];\r\n\r\nmodule.exports = DeleteColumnHandler;\r\n\r\n\r\n\r\n////// api /////////////////////////////////////////\r\n\r\n\r\n/**\r\n * Appends a column to the sheet\r\n *\r\n * @param {Object} context\r\n */\r\nDeleteColumnHandler.prototype.execute = function(context) {\r\n\r\n  // save the neighbors\r\n  context._next = context.column.next;\r\n  context._previous = context.column.previous;\r\n\r\n  // save the cells\r\n  context._cells = this._elementRegistry.filter(function(element) {\r\n    return element._type === 'cell' && element.column === context.column;\r\n  });\r\n\r\n  this._sheet.removeColumn(context.column);\r\n  return context.column;\r\n};\r\n\r\n\r\n/**\r\n * Undo create by removing the column\r\n */\r\nDeleteColumnHandler.prototype.revert = function(context) {\r\n  context.column.next = context._next;\r\n  context.column.previous = context._previous;\r\n\r\n  this._sheet.addColumn(context.column);\r\n\r\n  var self = this;\r\n\r\n  // relive the cells\r\n  forEach(context._cells, function(cell) {\r\n    self._sheet.setCellContent({row: cell.row, column: context.column, content: cell.content});\r\n  });\r\n};\r\n","'use strict';\r\n\r\nvar forEach = require(575);\r\n\r\n/**\r\n * A handler that implements reversible addition of rows.\r\n *\r\n * @param {sheet} sheet\r\n */\r\nfunction DeleteRowHandler(sheet, elementRegistry) {\r\n  this._sheet = sheet;\r\n  this._elementRegistry = elementRegistry;\r\n}\r\n\r\nDeleteRowHandler.$inject = [ 'sheet', 'elementRegistry' ];\r\n\r\nmodule.exports = DeleteRowHandler;\r\n\r\n\r\n\r\n////// api /////////////////////////////////////////\r\n\r\n\r\n/**\r\n * Appends a row to the sheet\r\n *\r\n * @param {Object} context\r\n */\r\nDeleteRowHandler.prototype.execute = function(context) {\r\n\r\n  // save the neighbors\r\n  context._next = context.row.next;\r\n  context._previous = context.row.previous;\r\n\r\n  // save the cells\r\n  context._cells = this._elementRegistry.filter(function(element) {\r\n    return element._type === 'cell' && element.row === context.row;\r\n  });\r\n\r\n  this._sheet.removeRow(context.row);\r\n  return context.row;\r\n};\r\n\r\n\r\n/**\r\n * Undo create by removing the row\r\n */\r\nDeleteRowHandler.prototype.revert = function(context) {\r\n  context.row.next = context._next;\r\n  context.row.previous = context._previous;\r\n\r\n  this._sheet.addRow(context.row);\r\n\r\n  var self = this;\r\n\r\n  // relive the cells\r\n  forEach(context._cells, function(cell) {\r\n    self._sheet.setCellContent({column: cell.column, row: context.row, content: cell.content});\r\n  });\r\n};\r\n","'use strict';\r\n\r\n/**\r\n * A handler that implements reversible addition of rows.\r\n *\r\n * @param {sheet} sheet\r\n */\r\nfunction EditCellHandler(sheet) {\r\n  this._sheet = sheet;\r\n}\r\n\r\nEditCellHandler.$inject = [ 'sheet' ];\r\n\r\nmodule.exports = EditCellHandler;\r\n\r\n\r\n\r\n////// api /////////////////////////////////////////\r\n\r\n\r\n/**\r\n * Edits the content of the cell\r\n *\r\n * @param {Object} context\r\n */\r\nEditCellHandler.prototype.execute = function(context) {\r\n  context.oldContent = this._sheet.getCellContent(context);\r\n  this._sheet.setCellContent(context);\r\n  return context;\r\n};\r\n\r\n\r\n/**\r\n * Undo Edit by resetting the content\r\n */\r\nEditCellHandler.prototype.revert = function(context) {\r\n  this._sheet.setCellContent({row: context.row, column: context.column, content: context.oldContent});\r\n  return context;\r\n};\r\n","'use strict';\r\n\r\n/**\r\n * A handler that implements reversible editing of the table name.\r\n *\r\n * @param {tableName} tableName\r\n */\r\nfunction EditNameHandler(tableName) {\r\n  this._tableName = tableName;\r\n}\r\n\r\nEditNameHandler.$inject = [ 'tableName' ];\r\n\r\nmodule.exports = EditNameHandler;\r\n\r\n\r\n\r\n////// api /////////////////////////////////////////\r\n\r\n\r\n/**\r\n * Edits the table name\r\n *\r\n * @param {Object} context\r\n */\r\nEditNameHandler.prototype.execute = function(context) {\r\n  context.oldName = this._tableName.getName();\r\n  this._tableName.setName(context.newName);\r\n  return context;\r\n};\r\n\r\n\r\n/**\r\n * Undo Edit by resetting the content\r\n */\r\nEditNameHandler.prototype.revert = function(context) {\r\n  this._tableName.setName(context.oldName);\r\n  return context;\r\n};\r\n","'use strict';\r\n\r\n/**\r\n * A handler that implements reversible move of rows\r\n *\r\n * @param {sheet} sheet\r\n */\r\nfunction MoveRowHandler(sheet) {\r\n  this._sheet = sheet;\r\n}\r\n\r\nMoveRowHandler.$inject = [ 'sheet' ];\r\n\r\nmodule.exports = MoveRowHandler;\r\n\r\n\r\n\r\n////// api /////////////////////////////////////////\r\n\r\n\r\n/**\r\n * Move a row\r\n *\r\n * @param {Object} context\r\n */\r\nMoveRowHandler.prototype.execute = function(context) {\r\n\r\n  context.previousBelow = context.source.next;\r\n  this._sheet.moveRow(context.source, context.target, context.above);\r\n\r\n};\r\n\r\n\r\n/**\r\n * Undo move\r\n *\r\n * @param {Object} context\r\n */\r\nMoveRowHandler.prototype.revert = function(context) {\r\n  if(context.previousBelow) {\r\n    // if it had a row below previously, we can move it back there again\r\n    this._sheet.moveRow(context.source, context.previousBelow, true);\r\n  } else {\r\n    // if it was the last row before moving it, move it back there again\r\n    this._sheet.moveRow(context.source, this._sheet.getLastRow('body'), false);\r\n  }\r\n};\r\n","module.exports = {\r\n  __depends__: [\r\n    require(462),\r\n    require(420),\r\n    require(466),\r\n    require(457)\r\n  ],\r\n  __init__: [ 'modeling' ],\r\n  modeling: [ 'type', require(438) ]\r\n};\r\n","'use strict';\r\n\r\nvar forEach = require(575),\r\n    assign = require(627),\r\n    domDelegate = require(636),\r\n    domify = require(637),\r\n    domClasses = require(635),\r\n    domAttr = require(634),\r\n    domRemove = require(640);\r\n\r\n\r\nvar DATA_REF = 'data-id';\r\n\r\n/**\r\n * A popup menu that can be used to display a list of actions.\r\n *\r\n * {@link PopupMenu#open} is used to create and open the popup menu.\r\n * With {@link PopupMenu#update} it is possible to update certain entries in the popup menu\r\n * (see examples below).\r\n *\r\n * @example\r\n *\r\n * // create a basic popup menu\r\n * popupMenu.open(\r\n *   {\r\n *     position: { x: 100, y: 100 },\r\n *     entries: [\r\n *       {\r\n *         id: 'entry-1',\r\n *         label: 'Entry 1',\r\n *         action: function(event, entry) {\r\n *           // do some stuff\r\n *         }\r\n *       },\r\n *       {\r\n *         id: 'entry-2',\r\n *         label: 'Entry 2'\r\n *       }\r\n *     ]\r\n *   }\r\n * );\r\n *\r\n * // create a more complex popup menu\r\n * popupMenu.open({\r\n *   position: { x: 100, y: 100 },\r\n *   entries: [\r\n *     {\r\n *       id: 'entry-1',\r\n *       label: 'Entry 1',\r\n *       action: function(event, entry) {\r\n *         if (entry.active) {\r\n *           // Removes the HTML class 'active' from the entry div, if it is clicked.\r\n *           popupMenu.update(entry, { active: false });\r\n *         } else {\r\n*           // Adds the HTML class 'active' from the entry div, if it is clicked.\r\n *           popupMenu.update(entry, { active: true });\r\n *         }\r\n *       }\r\n *     }\r\n *   ]\r\n * });\r\n *\r\n * // With popupMenu.update() it is possbile to update a certain entry by id.\r\n * // This functionality can be used to add the HTML classes 'active' or\r\n * // 'disabled' to a certain entry div element. This can be useful in action\r\n * // handler functions (see complex example above).\r\n * popupMenu.update('header-entry-a', { active: true });\r\n * popupMenu.update('header-entry-a', { disabled: true });\r\n *\r\n * // It is also possible to remove these classes:\r\n * popupMenu.update('header-entry-a', { active: false });\r\n * popupMenu.update('header-entry-a', { disabled: false });\r\n *\r\n *\r\n * @param {EventBus} eventBus\r\n * @param {Sheet} sheet\r\n *\r\n * @class\r\n * @constructor\r\n */\r\nfunction PopupMenu(eventBus, sheet) {\r\n\r\n  this._eventBus = eventBus;\r\n  this._sheet  = sheet;\r\n\r\n  var self = this;\r\n  this._eventBus.on('table.scroll', function(event) {\r\n    self.close();\r\n  });\r\n}\r\n\r\nPopupMenu.$inject = [ 'eventBus', 'sheet' ];\r\n\r\n\r\n/**\r\n * Creates the popup menu, adds entries and attaches it to the DOM.\r\n *\r\n * @param {Object} menu\r\n * @param {Object} menu.position\r\n * @param {String} [menu.className] a custom HTML class name for the popup menu\r\n *\r\n * @param {Array.<Object>} menu.entries\r\n * @param {String} menu.entries[].id\r\n * @param {String} menu.entries[].content Either an embedded entries array or an object describing the entry\r\n * @param {String} menu.entries[].content.label\r\n * @param {String} [menu.entries[].content.className] a custom HTML class name for the entry div element\r\n * @param {Object} [menu.entries[].content.action] a handler function that will be called on a click on the entry\r\n *\r\n * @return {PopupMenu}\r\n */\r\nPopupMenu.prototype.open = function(menu) {\r\n\r\n  var className = menu.className || 'tjs-menu',\r\n      position = menu.position,\r\n      entries = menu.entries;\r\n\r\n  if (!position) {\r\n    throw new Error('the position argument is missing');\r\n  }\r\n\r\n  if (!entries) {\r\n    throw new Error('the entries argument is missing');\r\n  }\r\n\r\n  // make sure, only one popup menu is open at a time\r\n  if (this.isOpen()) {\r\n    this.close();\r\n  }\r\n\r\n  var //sheet = this._sheet,\r\n      parent = document.body, //sheet.getContainer(),\r\n      container = this._createContainer(className, position);\r\n\r\n  this._createEntries(entries, container);\r\n\r\n  this._attachContainer(container, parent);\r\n\r\n  this._current = {\r\n    container: container,\r\n    menu: menu\r\n  };\r\n\r\n  this._eventBus.fire('popupmenu.open', this._current);\r\n\r\n  return this;\r\n};\r\n\r\n\r\n/**\r\n * Removes the popup menu and unbinds the event handlers.\r\n */\r\nPopupMenu.prototype.close = function() {\r\n\r\n  if (!this.isOpen()) {\r\n    return;\r\n  }\r\n\r\n  this._eventBus.fire('popupmenu.close', this._current);\r\n\r\n  domRemove(this._current.container);\r\n  this._current = null;\r\n};\r\n\r\n\r\n/**\r\n * Determines, if an open popup menu exist.\r\n * @return {Boolean}\r\n */\r\nPopupMenu.prototype.isOpen = function() {\r\n  return !!this._current;\r\n};\r\n\r\n\r\n/**\r\n * Trigger an action associated with an entry.\r\n *\r\n * @param {Object} event\r\n */\r\nPopupMenu.prototype.trigger = function(event) {\r\n\r\n  // silence other actions\r\n  event.preventDefault();\r\n\r\n  var element = event.delegateTarget || event.target,\r\n      entryId = domAttr(element, DATA_REF);\r\n\r\n  var entry = this._getEntry(entryId);\r\n\r\n  if (entry.action) {\r\n    return entry.action.call(null, event, entry);\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Updates the attributes of an entry instance.\r\n *\r\n * The properties `active` and `disabled` will be added to entries as class names.\r\n * This allows for state specific styling.\r\n *\r\n * @example\r\n *\r\n * popupMenu.update('header-entry-a', { active: true });\r\n * popupMenu.update('header-entry-a', { disabled: true });\r\n *\r\n * @param  {String|Object} entry the id of an entry or the entry instance itself\r\n * @param  {Object} updatedAttrs an object with the attributes that will be updated\r\n */\r\nPopupMenu.prototype.update = function(entry, updatedAttrs) {\r\n\r\n  if (typeof entry === 'string') {\r\n    entry = this._getEntry(entry);\r\n  }\r\n\r\n  assign(entry, updatedAttrs);\r\n\r\n  // redraw the menu by reopening it\r\n  this.open(this._current.menu);\r\n};\r\n\r\n\r\n/**\r\n * Gets an entry instance (either entry or headerEntry) by id.\r\n *\r\n * @param  {String} entryId\r\n *\r\n * @return {Object} entry instance\r\n */\r\nPopupMenu.prototype._getEntry = function(entryId) {\r\n\r\n  var menu = this._current.menu;\r\n\r\n  var searchFct = function(haystack, needle) {\r\n    for(var i = 0; i < haystack.length; i++) {\r\n      if (haystack[i].id === needle) {\r\n        return haystack[i];\r\n      }\r\n      if (haystack[i].content.entries) {\r\n        var found = searchFct(haystack[i].content.entries, needle);\r\n        if (found) {\r\n          return found;\r\n        }\r\n      }\r\n    }\r\n  };\r\n  var entry = searchFct(menu.entries, entryId);\r\n\r\n  if (!entry) {\r\n    throw new Error('entry not found');\r\n  }\r\n\r\n  return entry;\r\n};\r\n\r\n\r\n/**\r\n * Creates the popup menu container.\r\n *\r\n * @param {String} event\r\n * @param {Object} position\r\n */\r\nPopupMenu.prototype._createContainer = function(className, position) {\r\n  var container = domify('<nav class=\"tjs-context-menu\">');\r\n\r\n  assign(container.style, {\r\n    position: 'absolute',\r\n    left: position.x + 'px',\r\n    top: position.y  + 'px'\r\n  });\r\n\r\n  domClasses(container).add(className);\r\n\r\n  return container;\r\n};\r\n\r\n\r\n/**\r\n * Attaches the container to the DOM and binds the event handlers.\r\n *\r\n * @param {Object} container\r\n * @param {Object} parent\r\n */\r\nPopupMenu.prototype._attachContainer = function(container, parent) {\r\n  var self = this;\r\n\r\n   // Event handler\r\n  domDelegate.bind(container, '.tjs-entry' ,'click', function(event) {\r\n    self.trigger(event);\r\n  });\r\n\r\n  // Prevent default for mousedown events (so that selection does not get lost)\r\n  domDelegate.bind(container, '.tjs-entry' ,'mousedown', function(event) {\r\n    event.preventDefault();\r\n  });\r\n  // Attach to DOM\r\n  parent.appendChild(container);\r\n};\r\n\r\n\r\n/**\r\n * Creates and attaches entries to the popup menu.\r\n *\r\n * @param {Array<Object>} entries an array of entry objects\r\n * @param {Object} container the parent DOM container\r\n * @param {String} className the class name of the entry container\r\n */\r\nPopupMenu.prototype._createEntries = function(entries, container) {\r\n\r\n  var entriesContainer = domify('<ul class=\"tjs-dropdown-menu\">'),\r\n      self = this;\r\n\r\n  forEach(entries, function(entry) {\r\n    self._createEntry(entry, entriesContainer);\r\n  });\r\n\r\n  // domClasses(entriesContainer).add('tjs-dropdown-menu');\r\n\r\n  container.appendChild(entriesContainer);\r\n};\r\n\r\n\r\n/**\r\n * Creates a single entry and attaches it to the specified DOM container.\r\n *\r\n * @param  {Object} entry\r\n * @param  {Object} container\r\n */\r\nPopupMenu.prototype._createEntry = function(entry, container) {\r\n\r\n    if (!entry.id) {\r\n      throw new Error ('every entry must have the id property set');\r\n    }\r\n\r\n    var entryContainer = domify('<li class=\"tjs-entry\">'),\r\n        entryClasses = domClasses(entryContainer),\r\n        link = domify('<a>'),\r\n        linkClasses = domClasses(link);\r\n\r\n    entryContainer.appendChild(link);\r\n\r\n    if (entry.content.className) {\r\n      entryClasses.add(entry.content.className);\r\n    }\r\n    if (entry.content.linkClass) {\r\n      linkClasses.add(entry.content.linkClass);\r\n    }\r\n\r\n    domAttr(entryContainer, DATA_REF, entry.id);\r\n\r\n    // icon\r\n    var icon = domify('<span class=\"tjs-icon\">'),\r\n        iconClasses = domClasses(icon);\r\n\r\n    if (entry.content.icon) {\r\n      iconClasses.add(entry.content.icon);\r\n    }\r\n    link.appendChild(icon);\r\n\r\n    // label\r\n    var label = domify('<span class=\"tjs-label\">');\r\n    link.appendChild(label);\r\n\r\n\r\n    if (entry.content.entries) {\r\n      // create a nested menu\r\n      label.textContent = entry.content.label;\r\n      entryClasses.add('tjs-dropdown');\r\n      this._createEntries(entry.content.entries, entryContainer);\r\n    } else {\r\n      // create a normal entry\r\n      if (entry.content.label) {\r\n        label.textContent = entry.content.label;\r\n      }\r\n\r\n      if (entry.content.imageUrl) {\r\n        entryContainer.appendChild(domify('<img src=\"' + entry.content.imageUrl + '\" />'));\r\n      }\r\n\r\n      if (entry.content.active === true) {\r\n        entryClasses.add('active');\r\n      }\r\n\r\n      if (entry.content.disabled === true) {\r\n        entryClasses.add('disabled');\r\n      }\r\n\r\n    }\r\n\r\n    container.appendChild(entryContainer);\r\n};\r\n\r\n\r\nmodule.exports = PopupMenu;\r\n","'use strict';\r\n\r\nmodule.exports = {\r\n  __init__: [ 'popupMenu' ],\r\n  popupMenu: [ 'type', require(448) ]\r\n};\r\n","'use strict';\r\n\r\nvar domClasses = require(635);\r\n\r\nfunction DragRenderer(\r\n    eventBus,\r\n    utilityColumn) {\r\n\r\n  eventBus.on('cell.render', function(event) {\r\n    if (event.data.column === utilityColumn.getColumn() && !event.data.row.isFoot && !event.data.row.isHead) {\r\n      domClasses(event.gfx).add('draggable');\r\n    }\r\n  });\r\n}\r\n\r\nDragRenderer.$inject = [\r\n  'eventBus',\r\n  'utilityColumn'\r\n];\r\n\r\nmodule.exports = DragRenderer;\r\n","'use strict';\r\n\r\nvar domify = require(637);\r\nvar domClasses = require(635);\r\n\r\nvar DRAG_THRESHOLD = 10;\r\n\r\nfunction RowDrag(eventBus, sheet, elementRegistry, modeling) {\r\n\r\n  this._sheet = sheet;\r\n  this._elementRegistry = elementRegistry;\r\n  this._utilityColumn = null;\r\n  this._modeling = modeling;\r\n\r\n  var self = this;\r\n\r\n  eventBus.on('utilityColumn.added', function(event) {\r\n    var column = event.column;\r\n    self._utilityColumn = column;\r\n  });\r\n\r\n  this.dragDistance = 0;\r\n  this.draggedElement = null;\r\n  this.previousCoordinates = {\r\n    x: 0,\r\n    y: 0\r\n  };\r\n  this.highlightedBorder = null;\r\n  this.moveAbove = false;\r\n\r\n  eventBus.on('element.mousedown', function(event) {\r\n    event.preventDefault();\r\n    if(event.element.column === self._utilityColumn) {\r\n      self.startDragging(event.element.row);\r\n      self.setLastDragPoint(event.originalEvent);\r\n    }\r\n  });\r\n  document.body.addEventListener('mouseup', function(event) {\r\n    if(self.isDragging()) {\r\n      self.stopDragging();\r\n    }\r\n  });\r\n  document.body.addEventListener('mousemove', function(event) {\r\n    if(self.isDragging()) {\r\n      event.preventDefault();\r\n      self.updateDragDistance(event);\r\n      if(self.dragDistance > DRAG_THRESHOLD) {\r\n        self.updateVisuals(event);\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nRowDrag.$inject = [ 'eventBus', 'sheet', 'elementRegistry', 'modeling' ];\r\n\r\nmodule.exports = RowDrag;\r\n\r\nRowDrag.prototype.setLastDragPoint = function(event) {\r\n  this.previousCoordinates.x = event.clientX;\r\n  this.previousCoordinates.y = event.clientY;\r\n};\r\n\r\nRowDrag.prototype.updateVisuals = function(event) {\r\n\r\n  if(!this.dragVisual) {\r\n    this.dragVisual = this.createDragVisual(this.draggedElement);\r\n  }\r\n\r\n  var container = this._sheet.getContainer();\r\n  container.appendChild(this.dragVisual);\r\n\r\n  this.dragVisual.style.position = 'fixed';\r\n  this.dragVisual.style.left = (this.previousCoordinates.x + 5) + 'px';\r\n  this.dragVisual.style.top = (this.previousCoordinates.y + 5) + 'px';\r\n\r\n  // clear the indicator for the previous run\r\n  if(this.highlightedBorder) {\r\n    domClasses(this.highlightedBorder).remove('drop');\r\n    domClasses(this.highlightedBorder).remove('above');\r\n    domClasses(this.highlightedBorder).remove('below');\r\n    this.highlightedBorder = null;\r\n  }\r\n\r\n  // get the element we are hovering over\r\n  var tr = event.target;\r\n  while(tr && (tr.tagName || '').toLowerCase() !== 'tr') {\r\n    tr = tr.parentNode;\r\n  }\r\n  if(tr) {\r\n    // tr must be child of tbody\r\n    if(this._sheet.getBody().contains(tr)) {\r\n      // check if we hover over the top or the bottom half of the row\r\n      var e = tr;\r\n      var offset = {x:0,y:0};\r\n      while (e)\r\n      {\r\n          offset.x += e.offsetLeft;\r\n          offset.y += e.offsetTop;\r\n          e = e.offsetParent;\r\n      }\r\n      if(event.clientY < offset.y + tr.clientHeight / 2) {\r\n        domClasses(tr).add('drop');\r\n        domClasses(tr).add('above');\r\n        this.moveAbove = true;\r\n      } else {\r\n        domClasses(tr).add('drop');\r\n        domClasses(tr).add('below');\r\n        this.moveAbove = false;\r\n      }\r\n      this.highlightedBorder = tr;\r\n    }\r\n  }\r\n};\r\n\r\nRowDrag.prototype.updateDragDistance = function(event) {\r\n  this.dragDistance +=\r\n      Math.abs(event.clientX - this.previousCoordinates.x) +\r\n      Math.abs(event.clientY - this.previousCoordinates.y);\r\n\r\n  this.setLastDragPoint(event);\r\n};\r\n\r\nRowDrag.prototype.startDragging = function(element) {\r\n  this.draggedElement = element;\r\n  this.dragDistance = 0;\r\n\r\n  this.dragVisual = null;\r\n};\r\n\r\nRowDrag.prototype.createDragVisual = function(element) {\r\n  // get the html representation of the row\r\n  var gfx = this._elementRegistry.getGraphics(element);\r\n\r\n  // create a clone\r\n  var clone = gfx.cloneNode(true);\r\n\r\n  // fix the line number field width\r\n  clone.firstChild.setAttribute('class', 'hit number');\r\n\r\n  // put it in a table tbody\r\n  var table = domify('<table><tbody></tbody></table>');\r\n  table.setAttribute('class','dragTable');\r\n  table.firstChild.appendChild(clone);\r\n\r\n  // fade the original element\r\n  domClasses(gfx).add('dragged');\r\n\r\n  return table;\r\n};\r\n\r\nRowDrag.prototype.stopDragging = function() {\r\n  if(this.highlightedBorder) {\r\n    // make sure we drop it to the element we have previously highlighted\r\n    var targetElement = this._elementRegistry.get(this.highlightedBorder.getAttribute('data-element-id'));\r\n    this._modeling.moveRow(this.draggedElement, targetElement, this.moveAbove);\r\n  }\r\n  if(this.dragVisual) {\r\n    this.dragVisual.parentNode.removeChild(this.dragVisual);\r\n    // restore opacity of the element\r\n    domClasses(this._elementRegistry.getGraphics(this.draggedElement)).remove('dragged');\r\n    this._elementRegistry.getGraphics(this.draggedElement).style.opacity = '';\r\n  }\r\n  if(this.highlightedBorder) {\r\n    domClasses(this.highlightedBorder).remove('drop');\r\n    domClasses(this.highlightedBorder).remove('above');\r\n    domClasses(this.highlightedBorder).remove('below');\r\n    this.highlightedBorder = null;\r\n  }\r\n\r\n  this.draggedElement = null;\r\n};\r\n\r\nRowDrag.prototype.isDragging = function() {\r\n  return !!this.draggedElement;\r\n};\r\n","module.exports = {\r\n  __init__: [ 'rowDrag', 'dragRenderer' ],\r\n  __depends__: [\r\n    require(457)\r\n  ],\r\n  rowDrag: [ 'type', require(451) ],\r\n  dragRenderer: [ 'type', require(450) ]\r\n};\r\n","'use strict';\r\n\r\nvar domify = require(637);\r\n\r\n/**\r\n * Adds a header to the table containing the table name\r\n *\r\n * @param {EventBus} eventBus\r\n */\r\nfunction TableName(eventBus, sheet, tableName) {\r\n\r\n  this.tableName = tableName;\r\n\r\n  this.node = domify('<header><h3 class=\"tjs-table-name\">'+this.tableName+'</h3></header');\r\n\r\n  var self = this;\r\n  eventBus.on('sheet.init', function(event) {\r\n    sheet.getContainer().insertBefore(self.node, sheet.getRootElement());\r\n    eventBus.fire('tableName.init', {node: self.node.querySelector('h3')});\r\n  });\r\n  eventBus.on('sheet.destroy', function(event) {\r\n    sheet.getContainer().removeChild(self.node);\r\n    eventBus.fire('tableName.destroy', {node: self.node.querySelector('h3')});\r\n  });\r\n}\r\n\r\nTableName.$inject = [ 'eventBus', 'sheet', 'config.tableName' ];\r\n\r\nmodule.exports = TableName;\r\n\r\nTableName.prototype.setName = function(newName) {\r\n  this.tableName = newName;\r\n  this.node.querySelector('h3').textContent = newName;\r\n};\r\n\r\nTableName.prototype.getName = function() {\r\n  return this.tableName;\r\n};\r\n\r\nTableName.prototype.getNode = function() {\r\n  return this.node.querySelector('h3');\r\n};\r\n","'use strict';\r\n\r\n/**\r\n * Adds a dedicated column to the table dedicated to hold controls and meta information\r\n *\r\n * @param {EventBus} eventBus\r\n */\r\nfunction UtilityColumn(eventBus, sheet) {\r\n\r\n  // add the row control row\r\n  this.column = null;\r\n  var self = this;\r\n  eventBus.on('sheet.init', function(event) {\r\n\r\n    eventBus.fire('utilityColumn.add', event);\r\n\r\n    self.column = sheet.addColumn({\r\n      id: 'utilityColumn'\r\n    });\r\n\r\n    eventBus.fire('utilityColumn.added', {column: self.column});\r\n  });\r\n  eventBus.on('sheet.destroy', function(event) {\r\n\r\n    eventBus.fire('utilityColumn.destroy', {column: self.column});\r\n\r\n    sheet.removeColumn({\r\n      id: 'utilityColumn'\r\n    });\r\n\r\n    eventBus.fire('utilityColumn.destroyed', {column: self.column});\r\n  });\r\n}\r\n\r\nUtilityColumn.$inject = [ 'eventBus', 'sheet' ];\r\n\r\nmodule.exports = UtilityColumn;\r\n\r\n\r\nUtilityColumn.prototype.getColumn = function() {\r\n  return this.column;\r\n};\r\n","'use strict';\r\n\r\nvar domClasses = require(635);\r\n\r\nfunction UtilityColumnRenderer(\r\n    eventBus,\r\n    utilityColumn) {\r\n\r\n  eventBus.on('cell.render', function(event) {\r\n    if (event.data.column === utilityColumn.getColumn() && !event.data.row.isFoot) {\r\n      event.gfx.childNodes[0].textContent = event.data.content;\r\n      domClasses(event.gfx).add(event.data.row.isHead ? 'hit' : 'number');\r\n    }\r\n  });\r\n}\r\n\r\nUtilityColumnRenderer.$inject = [\r\n  'eventBus',\r\n  'utilityColumn'\r\n];\r\n\r\nmodule.exports = UtilityColumnRenderer;\r\n","'use strict';\r\n\r\nvar inherits = require(572);\r\n\r\nvar RuleProvider = require(464);\r\n\r\n/**\r\n * LineNumber specific modeling rule\r\n */\r\nfunction UtilityColumnRules(eventBus, utilityColumn) {\r\n  RuleProvider.call(this, eventBus);\r\n\r\n  this._utilityColumn = utilityColumn;\r\n}\r\n\r\ninherits(UtilityColumnRules, RuleProvider);\r\n\r\nUtilityColumnRules.$inject = [ 'eventBus', 'utilityColumn' ];\r\n\r\nmodule.exports = UtilityColumnRules;\r\n\r\nUtilityColumnRules.prototype.init = function() {\r\n  var self = this;\r\n  this.addRule('cell.edit', function(context) {\r\n    if (context.column === self._utilityColumn.getColumn()) {\r\n      return false;\r\n    }\r\n  });\r\n\r\n};\r\n","module.exports = {\r\n  __init__: [ 'utilityColumn', 'utilityColumnRules', 'utilityColumnRenderer' ],\r\n  __depends__: [\r\n    require(466)\r\n  ],\r\n  utilityColumn: [ 'type', require(454) ],\r\n  utilityColumnRules: [ 'type', require(456) ],\r\n  utilityColumnRenderer: [ 'type', require(455) ]\r\n};\r\n","'use strict';\r\n\r\nvar assign = require(627),\r\n    inherits = require(572);\r\n\r\nfunction Base() {\r\n  Object.defineProperty(this, 'businessObject', {\r\n    writable: true\r\n  });\r\n}\r\n\r\nfunction Table() {\r\n  Base.call(this);\r\n}\r\n\r\ninherits(Table, Base);\r\n\r\nfunction Row() {\r\n  Base.call(this);\r\n}\r\n\r\ninherits(Row, Base);\r\n\r\nfunction Column() {\r\n  Base.call(this);\r\n}\r\n\r\ninherits(Column, Base);\r\n\r\n\r\nvar types = {\r\n  table: Table,\r\n  row: Row,\r\n  column: Column\r\n};\r\n\r\n/**\r\n * Creates a new model element of the specified type\r\n *\r\n * @method create\r\n *\r\n * @example\r\n *\r\n * var shape1 = Model.create('shape', { x: 10, y: 10, width: 100, height: 100 });\r\n * var shape2 = Model.create('shape', { x: 210, y: 210, width: 100, height: 100 });\r\n *\r\n * var connection = Model.create('connection', { waypoints: [ { x: 110, y: 55 }, {x: 210, y: 55 } ] });\r\n *\r\n * @param  {String} type lower-cased model name\r\n * @param  {Object} attrs attributes to initialize the new model instance with\r\n *\r\n * @return {Base} the new model instance\r\n */\r\nmodule.exports.create = function(type, attrs) {\r\n  var Type = types[type];\r\n  if (!Type) {\r\n    throw new Error('unknown type: <' + type + '>');\r\n  }\r\n  return assign(new Type(), attrs);\r\n};\r\n\r\n\r\nmodule.exports.Table = Table;\r\nmodule.exports.Row = Row;\r\nmodule.exports.Column = Column;\r\n","'use strict';\r\n\r\nfunction calculateSelectionUpdate(selection, currentValue, newValue) {\r\n\r\n  currentValue = currentValue || '';\r\n  newValue = newValue || '';\r\n\r\n  if(newValue === currentValue) {\r\n    return selection;\r\n  }\r\n\r\n  var newSelection = selection.start,\r\n      diff = newValue.length - currentValue.length,\r\n      idx,\r\n      broken = false;\r\n\r\n  if(currentValue === newValue.substr(0, currentValue.length)) {\r\n    return range(newValue.length);\r\n  }\r\n\r\n  for (idx = newValue.length; idx >= diff; idx--) {\r\n    if (currentValue.charAt(idx - diff) !== newValue.charAt(idx)) {\r\n\r\n      newSelection = idx + 1;\r\n      broken = true;\r\n      break;\r\n    }\r\n  }\r\n  if(!broken) {\r\n    newSelection = diff;\r\n  }\r\n\r\n  return range(newSelection);\r\n}\r\n\r\nmodule.exports.calculateSelectionUpdate = calculateSelectionUpdate;\r\n\r\n\r\nfunction range(start, end) {\r\n  return {\r\n    start: start,\r\n    end: end === undefined ? start : end\r\n  };\r\n}\r\n","'use strict';\r\n\r\nvar unique = require(474),\r\n    isArray = require(553),\r\n    assign = require(559);\r\n\r\nvar InternalEvent = require(463).Event;\r\n\r\n\r\n/**\r\n * A service that offers un- and redoable execution of commands.\r\n *\r\n * The command stack is responsible for executing modeling actions\r\n * in a un- and redoable manner. To do this it delegates the actual\r\n * command execution to {@link CommandHandler}s.\r\n *\r\n * Command handlers provide {@link CommandHandler#execute(ctx)} and\r\n * {@link CommandHandler#revert(ctx)} methods to un- and redo a command\r\n * identified by a command context.\r\n *\r\n *\r\n * ## Life-Cycle events\r\n *\r\n * In the process the command stack fires a number of life-cycle events\r\n * that other components to participate in the command execution.\r\n *\r\n *    * preExecute\r\n *    * preExecuted\r\n *    * execute\r\n *    * executed\r\n *    * postExecute\r\n *    * postExecuted\r\n *    * revert\r\n *    * reverted\r\n *\r\n * A special event is used for validating, whether a command can be\r\n * performed prior to its execution.\r\n *\r\n *    * canExecute\r\n *\r\n * Each of the events is fired as `commandStack.{eventName}` and\r\n * `commandStack.{commandName}.{eventName}`, respectively. This gives\r\n * components fine grained control on where to hook into.\r\n *\r\n * The event object fired transports `command`, the name of the\r\n * command and `context`, the command context.\r\n *\r\n *\r\n * ## Creating Command Handlers\r\n *\r\n * Command handlers should provide the {@link CommandHandler#execute(ctx)}\r\n * and {@link CommandHandler#revert(ctx)} methods to implement\r\n * redoing and undoing of a command. They must ensure undo is performed\r\n * properly in order not to break the undo chain.\r\n *\r\n * Command handlers may execute other modeling operations (and thus\r\n * commands) in their `preExecute` and `postExecute` phases. The command\r\n * stack will properly group all commands together into a logical unit\r\n * that may be re- and undone atomically.\r\n *\r\n * Command handlers must not execute other commands from within their\r\n * core implementation (`execute`, `revert`).\r\n *\r\n *\r\n * ## Change Tracking\r\n *\r\n * During the execution of the CommandStack it will keep track of all\r\n * elements that have been touched during the command's execution.\r\n *\r\n * At the end of the CommandStack execution it will notify interested\r\n * components via an 'elements.changed' event with all the dirty\r\n * elements.\r\n *\r\n * The event can be picked up by components that are interested in the fact\r\n * that elements have been changed. One use case for this is updating\r\n * their graphical representation after moving / resizing or deletion.\r\n *\r\n *\r\n * @param {EventBus} eventBus\r\n * @param {Injector} injector\r\n */\r\nfunction CommandStack(eventBus, injector) {\r\n\r\n  /**\r\n   * A map of all registered command handlers.\r\n   *\r\n   * @type {Object}\r\n   */\r\n  this._handlerMap = {};\r\n\r\n  /**\r\n   * A stack containing all re/undoable actions on the diagram\r\n   *\r\n   * @type {Array<Object>}\r\n   */\r\n  this._stack = [];\r\n\r\n  /**\r\n   * The current index on the stack\r\n   *\r\n   * @type {Number}\r\n   */\r\n  this._stackIdx = -1;\r\n\r\n  /**\r\n   * Current active commandStack execution\r\n   *\r\n   * @type {Object}\r\n   */\r\n  this._currentExecution = {\r\n    actions: [],\r\n    dirty: []\r\n  };\r\n\r\n\r\n  this._injector = injector;\r\n  this._eventBus = eventBus;\r\n\r\n  this._uid = 1;\r\n}\r\n\r\nCommandStack.$inject = [ 'eventBus', 'injector' ];\r\n\r\nmodule.exports = CommandStack;\r\n\r\n\r\n/**\r\n * Execute a command\r\n *\r\n * @param {String} command the command to execute\r\n * @param {Object} context the environment to execute the command in\r\n */\r\nCommandStack.prototype.execute = function(command, context) {\r\n  if (!command) {\r\n    throw new Error('command required');\r\n  }\r\n\r\n  var action = { command: command, context: context };\r\n\r\n  this._pushAction(action);\r\n  this._internalExecute(action);\r\n  this._popAction(action);\r\n};\r\n\r\n\r\n/**\r\n * Ask whether a given command can be executed.\r\n *\r\n * Implementors may hook into the mechanism on two ways:\r\n *\r\n *   * in event listeners:\r\n *\r\n *     Users may prevent the execution via an event listener.\r\n *     It must prevent the default action for `commandStack.(<command>.)canExecute` events.\r\n *\r\n *   * in command handlers:\r\n *\r\n *     If the method {@link CommandHandler#canExecute} is implemented in a handler\r\n *     it will be called to figure out whether the execution is allowed.\r\n *\r\n * @param  {String} command the command to execute\r\n * @param  {Object} context the environment to execute the command in\r\n *\r\n * @return {Boolean} true if the command can be executed\r\n */\r\nCommandStack.prototype.canExecute = function(command, context) {\r\n\r\n  var action = { command: command, context: context };\r\n\r\n  var handler = this._getHandler(command);\r\n\r\n  if (!handler) {\r\n    return false;\r\n  }\r\n\r\n  var result = this._fire(command, 'canExecute', action);\r\n\r\n  // handler#canExecute will only be called if no listener\r\n  // decided on a result already\r\n  if (result === undefined && handler.canExecute) {\r\n    result = handler.canExecute(context);\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\n\r\n/**\r\n * Clear the command stack, erasing all undo / redo history\r\n */\r\nCommandStack.prototype.clear = function() {\r\n  this._stack.length = 0;\r\n  this._stackIdx = -1;\r\n\r\n  this._fire('changed');\r\n};\r\n\r\n\r\n/**\r\n * Undo last command(s)\r\n */\r\nCommandStack.prototype.undo = function() {\r\n  var action = this._getUndoAction(),\r\n      next;\r\n\r\n  if (action) {\r\n    this._pushAction(action);\r\n\r\n    while (action) {\r\n      this._internalUndo(action);\r\n      next = this._getUndoAction();\r\n\r\n      if (!next || next.id !== action.id) {\r\n        break;\r\n      }\r\n\r\n      action = next;\r\n    }\r\n\r\n    this._popAction();\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Redo last command(s)\r\n */\r\nCommandStack.prototype.redo = function() {\r\n  var action = this._getRedoAction(),\r\n      next;\r\n\r\n  if (action) {\r\n    this._pushAction(action);\r\n\r\n    while (action) {\r\n      this._internalExecute(action, true);\r\n      next = this._getRedoAction();\r\n\r\n      if (!next || next.id !== action.id) {\r\n        break;\r\n      }\r\n\r\n      action = next;\r\n    }\r\n\r\n    this._popAction();\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Register a handler instance with the command stack\r\n *\r\n * @param {String} command\r\n * @param {CommandHandler} handler\r\n */\r\nCommandStack.prototype.register = function(command, handler) {\r\n  this._setHandler(command, handler);\r\n};\r\n\r\n\r\n/**\r\n * Register a handler type with the command stack\r\n * by instantiating it and injecting its dependencies.\r\n *\r\n * @param {String} command\r\n * @param {Function} a constructor for a {@link CommandHandler}\r\n */\r\nCommandStack.prototype.registerHandler = function(command, handlerCls) {\r\n\r\n  if (!command || !handlerCls) {\r\n    throw new Error('command and handlerCls must be defined');\r\n  }\r\n\r\n  var handler = this._injector.instantiate(handlerCls);\r\n  this.register(command, handler);\r\n};\r\n\r\nCommandStack.prototype.canUndo = function() {\r\n  return !!this._getUndoAction();\r\n};\r\n\r\nCommandStack.prototype.canRedo = function() {\r\n  return !!this._getRedoAction();\r\n};\r\n\r\n////// stack access  //////////////////////////////////////\r\n\r\nCommandStack.prototype._getRedoAction = function() {\r\n  return this._stack[this._stackIdx + 1];\r\n};\r\n\r\n\r\nCommandStack.prototype._getUndoAction = function() {\r\n  return this._stack[this._stackIdx];\r\n};\r\n\r\n\r\n////// internal functionality /////////////////////////////\r\n\r\nCommandStack.prototype._internalUndo = function(action) {\r\n  var command = action.command,\r\n      context = action.context;\r\n\r\n  var handler = this._getHandler(command);\r\n\r\n  this._fire(command, 'revert', action);\r\n\r\n  this._markDirty(handler.revert(context));\r\n\r\n  this._revertedAction(action);\r\n\r\n  this._fire(command, 'reverted', action);\r\n};\r\n\r\n\r\nCommandStack.prototype._fire = function(command, qualifier, event) {\r\n  if (arguments.length < 3) {\r\n    event = qualifier;\r\n    qualifier = null;\r\n  }\r\n\r\n  var names = qualifier ? [ command + '.' + qualifier, qualifier ] : [ command ],\r\n      i, name, result;\r\n\r\n  event = assign(new InternalEvent(), event);\r\n\r\n  for (i = 0; !!(name = names[i]); i++) {\r\n    result = this._eventBus.fire('commandStack.' + name, event);\r\n\r\n    if (event.cancelBubble) {\r\n      break;\r\n    }\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\nCommandStack.prototype._createId = function() {\r\n  return this._uid++;\r\n};\r\n\r\n\r\nCommandStack.prototype._internalExecute = function(action, redo) {\r\n  var command = action.command,\r\n      context = action.context;\r\n\r\n  var handler = this._getHandler(command);\r\n\r\n  if (!handler) {\r\n    throw new Error('no command handler registered for <' + command + '>');\r\n  }\r\n\r\n  this._pushAction(action);\r\n\r\n  if (!redo) {\r\n    this._fire(command, 'preExecute', action);\r\n\r\n    if (handler.preExecute) {\r\n      handler.preExecute(context);\r\n    }\r\n\r\n    this._fire(command, 'preExecuted', action);\r\n  }\r\n\r\n  this._fire(command, 'execute', action);\r\n\r\n  // execute\r\n  this._markDirty(handler.execute(context));\r\n\r\n  // log to stack\r\n  this._executedAction(action, redo);\r\n\r\n  this._fire(command, 'executed', action);\r\n\r\n  if (!redo) {\r\n    this._fire(command, 'postExecute', action);\r\n\r\n    if (handler.postExecute) {\r\n      handler.postExecute(context);\r\n    }\r\n\r\n    this._fire(command, 'postExecuted', action);\r\n  }\r\n\r\n  this._popAction(action);\r\n};\r\n\r\n\r\nCommandStack.prototype._pushAction = function(action) {\r\n\r\n  var execution = this._currentExecution,\r\n      actions = execution.actions;\r\n\r\n  var baseAction = actions[0];\r\n\r\n  if (!action.id) {\r\n    action.id = (baseAction && baseAction.id) || this._createId();\r\n  }\r\n\r\n  actions.push(action);\r\n};\r\n\r\n\r\nCommandStack.prototype._popAction = function() {\r\n  var execution = this._currentExecution,\r\n      actions = execution.actions,\r\n      dirty = execution.dirty;\r\n\r\n  actions.pop();\r\n\r\n  if (!actions.length) {\r\n    this._eventBus.fire('elements.changed', { elements: unique(dirty) });\r\n\r\n    dirty.length = 0;\r\n\r\n    this._fire('changed');\r\n  }\r\n};\r\n\r\n\r\nCommandStack.prototype._markDirty = function(elements) {\r\n  var execution = this._currentExecution;\r\n\r\n  if (!elements) {\r\n    return;\r\n  }\r\n\r\n  elements = isArray(elements) ? elements : [ elements ];\r\n\r\n  execution.dirty = execution.dirty.concat(elements);\r\n};\r\n\r\n\r\nCommandStack.prototype._executedAction = function(action, redo) {\r\n  var stackIdx = ++this._stackIdx;\r\n\r\n  if (!redo) {\r\n    this._stack.splice(stackIdx, this._stack.length, action);\r\n  }\r\n};\r\n\r\n\r\nCommandStack.prototype._revertedAction = function(action) {\r\n  this._stackIdx--;\r\n};\r\n\r\n\r\nCommandStack.prototype._getHandler = function(command) {\r\n  return this._handlerMap[command];\r\n};\r\n\r\nCommandStack.prototype._setHandler = function(command, handler) {\r\n  if (!command || !handler) {\r\n    throw new Error('command and handler required');\r\n  }\r\n\r\n  if (this._handlerMap[command]) {\r\n    throw new Error('overriding handler for command <' + command + '>');\r\n  }\r\n\r\n  this._handlerMap[command] = handler;\r\n};\r\n","module.exports = {\r\n  commandStack: [ 'type', require(461) ]\r\n};\r\n","'use strict';\r\n\r\nvar isFunction = require(554),\r\n    isArray = require(553),\r\n    isNumber = require(556),\r\n    bind = require(478),\r\n    assign = require(559);\r\n\r\nvar DEFAULT_PRIORITY = 1000;\r\n\r\n\r\n/**\r\n * A general purpose event bus.\r\n *\r\n * This component is used to communicate across a diagram instance.\r\n * Other parts of a diagram can use it to listen to and broadcast events.\r\n *\r\n *\r\n * ## Registering for Events\r\n *\r\n * The event bus provides the {@link EventBus#on} and {@link EventBus#once}\r\n * methods to register for events. {@link EventBus#off} can be used to\r\n * remove event registrations. Listeners receive an instance of {@link Event}\r\n * as the first argument. It allows them to hook into the event execution.\r\n *\r\n * ```javascript\r\n *\r\n * // listen for event\r\n * eventBus.on('foo', function(event) {\r\n *\r\n *   // access event type\r\n *   event.type; // 'foo'\r\n *\r\n *   // stop propagation to other listeners\r\n *   event.stopPropagation();\r\n *\r\n *   // prevent event default\r\n *   event.preventDefault();\r\n * });\r\n *\r\n * // listen for event with custom payload\r\n * eventBus.on('bar', function(event, payload) {\r\n *   console.log(payload);\r\n * });\r\n *\r\n * // listen for event returning value\r\n * eventBus.on('foobar', function(event) {\r\n *\r\n *   // stop event propagation + prevent default\r\n *   return false;\r\n *\r\n *   // stop event propagation + return custom result\r\n *   return {\r\n *     complex: 'listening result'\r\n *   };\r\n * });\r\n *\r\n *\r\n * // listen with custom priority (default=1000, higher is better)\r\n * eventBus.on('priorityfoo', 1500, function(event) {\r\n *   console.log('invoked first!');\r\n * });\r\n *\r\n *\r\n * // listen for event and pass the context (`this`)\r\n * eventBus.on('foobar', function(event) {\r\n *   this.foo();\r\n * }, this);\r\n * ```\r\n *\r\n *\r\n * ## Emitting Events\r\n *\r\n * Events can be emitted via the event bus using {@link EventBus#fire}.\r\n *\r\n * ```javascript\r\n *\r\n * // false indicates that the default action\r\n * // was prevented by listeners\r\n * if (eventBus.fire('foo') === false) {\r\n *   console.log('default has been prevented!');\r\n * };\r\n *\r\n *\r\n * // custom args + return value listener\r\n * eventBus.on('sum', function(event, a, b) {\r\n *   return a + b;\r\n * });\r\n *\r\n * // you can pass custom arguments + retrieve result values.\r\n * var sum = eventBus.fire('sum', 1, 2);\r\n * console.log(sum); // 3\r\n * ```\r\n */\r\nfunction EventBus() {\r\n  this._listeners = {};\r\n\r\n  // cleanup on destroy\r\n\r\n  var self = this;\r\n\r\n  // destroy on lowest priority to allow\r\n  // message passing until the bitter end\r\n  this.on('diagram.destroy', 1, function() {\r\n    self._listeners = null;\r\n  });\r\n}\r\n\r\nmodule.exports = EventBus;\r\n\r\n\r\n/**\r\n * Register an event listener for events with the given name.\r\n *\r\n * The callback will be invoked with `event, ...additionalArguments`\r\n * that have been passed to {@link EventBus#fire}.\r\n *\r\n * Returning false from a listener will prevent the events default action\r\n * (if any is specified). To stop an event from being processed further in\r\n * other listeners execute {@link Event#stopPropagation}.\r\n *\r\n * Returning anything but `undefined` from a listener will stop the listener propagation.\r\n *\r\n * @param {String|Array<String>} events\r\n * @param {Number} [priority=1000] the priority in which this listener is called, larger is higher\r\n * @param {Function} callback\r\n * @param {Object} [that] Pass context (`this`) to the callback\r\n */\r\nEventBus.prototype.on = function(events, priority, callback, that) {\r\n\r\n  events = isArray(events) ? events : [ events ];\r\n\r\n  if (isFunction(priority)) {\r\n    that = callback;\r\n    callback = priority;\r\n    priority = DEFAULT_PRIORITY;\r\n  }\r\n\r\n  if (!isNumber(priority)) {\r\n    throw new Error('priority must be a number');\r\n  }\r\n\r\n  if (that) {\r\n    callback = bind(callback, that);\r\n  }\r\n\r\n  var self = this,\r\n      listener = { priority: priority, callback: callback };\r\n\r\n  events.forEach(function(e) {\r\n    self._addListener(e, listener);\r\n  });\r\n};\r\n\r\n\r\n/**\r\n * Register an event listener that is executed only once.\r\n *\r\n * @param {String} event the event name to register for\r\n * @param {Function} callback the callback to execute\r\n * @param {Object} [that] Pass context (`this`) to the callback\r\n */\r\nEventBus.prototype.once = function(event, callback, that) {\r\n  var self = this;\r\n\r\n  function wrappedCallback() {\r\n    callback.apply(that || self, arguments);\r\n    self.off(event, wrappedCallback);\r\n  }\r\n\r\n  this.on(event, wrappedCallback);\r\n};\r\n\r\n\r\n/**\r\n * Removes event listeners by event and callback.\r\n *\r\n * If no callback is given, all listeners for a given event name are being removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} [callback]\r\n */\r\nEventBus.prototype.off = function(event, callback) {\r\n  var listeners = this._getListeners(event),\r\n      listener, idx;\r\n\r\n  if (callback) {\r\n\r\n    // move through listeners from back to front\r\n    // and remove matching listeners\r\n    for (idx = listeners.length - 1; !!(listener = listeners[idx]); idx--) {\r\n      if (listener.callback === callback) {\r\n        listeners.splice(idx, 1);\r\n      }\r\n    }\r\n  } else {\r\n    // clear listeners\r\n    listeners.length = 0;\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Fires a named event.\r\n *\r\n * @example\r\n *\r\n * // fire event by name\r\n * events.fire('foo');\r\n *\r\n * // fire event object with nested type\r\n * var event = { type: 'foo' };\r\n * events.fire(event);\r\n *\r\n * // fire event with explicit type\r\n * var event = { x: 10, y: 20 };\r\n * events.fire('element.moved', event);\r\n *\r\n * // pass additional arguments to the event\r\n * events.on('foo', function(event, bar) {\r\n *   alert(bar);\r\n * });\r\n *\r\n * events.fire({ type: 'foo' }, 'I am bar!');\r\n *\r\n * @param {String} [name] the optional event name\r\n * @param {Object} [event] the event object\r\n * @param {...Object} additional arguments to be passed to the callback functions\r\n *\r\n * @return {Boolean} the events return value, if specified or false if the\r\n *                   default action was prevented by listeners\r\n */\r\nEventBus.prototype.fire = function(type, data) {\r\n\r\n  var event,\r\n      originalType,\r\n      listeners, idx, listener,\r\n      returnValue,\r\n      args;\r\n\r\n  args = Array.prototype.slice.call(arguments);\r\n\r\n  if (typeof type === 'object') {\r\n    event = type;\r\n    type = event.type;\r\n  }\r\n\r\n  if (!type) {\r\n    throw new Error('no event type specified');\r\n  }\r\n\r\n  listeners = this._listeners[type];\r\n\r\n  if (!listeners) {\r\n    return;\r\n  }\r\n\r\n  // we make sure we fire instances of our home made\r\n  // events here. We wrap them only once, though\r\n  if (data instanceof Event) {\r\n    // we are fine, we alread have an event\r\n    event = data;\r\n  } else {\r\n    event = new Event();\r\n    event.init(data);\r\n  }\r\n\r\n  // ensure we pass the event as the first parameter\r\n  args[0] = event;\r\n\r\n  // original event type (in case we delegate)\r\n  originalType = event.type;\r\n\r\n  try {\r\n\r\n    // update event type before delegation\r\n    if (type !== originalType) {\r\n      event.type = type;\r\n    }\r\n\r\n    for (idx = 0; !!(listener = listeners[idx]); idx++) {\r\n\r\n      // handle stopped propagation\r\n      if (event.cancelBubble) {\r\n        break;\r\n      }\r\n\r\n      try {\r\n        // returning false prevents the default action\r\n        returnValue = event.returnValue = listener.callback.apply(null, args);\r\n\r\n        // stop propagation on return value\r\n        if (returnValue !== undefined) {\r\n          event.stopPropagation();\r\n        }\r\n\r\n        // prevent default on return false\r\n        if (returnValue === false) {\r\n          event.preventDefault();\r\n        }\r\n      } catch (e) {\r\n        if (!this.handleError(e)) {\r\n          console.error('unhandled error in event listener');\r\n          console.error(e.stack);\r\n\r\n          throw e;\r\n        }\r\n      }\r\n    }\r\n  } finally {\r\n    // reset event type after delegation\r\n    if (type !== originalType) {\r\n      event.type = originalType;\r\n    }\r\n  }\r\n\r\n  // set the return value to false if the event default\r\n  // got prevented and no other return value exists\r\n  if (returnValue === undefined && event.defaultPrevented) {\r\n    returnValue = false;\r\n  }\r\n\r\n  return returnValue;\r\n};\r\n\r\n\r\nEventBus.prototype.handleError = function(error) {\r\n  return this.fire('error', { error: error }) === false;\r\n};\r\n\r\n\r\n/*\r\n * Add new listener with a certain priority to the list\r\n * of listeners (for the given event).\r\n *\r\n * The semantics of listener registration / listener execution are\r\n * first register, first serve: New listeners will always be inserted\r\n * after existing listeners with the same priority.\r\n *\r\n * Example: Inserting two listeners with priority 1000 and 1300\r\n *\r\n *    * before: [ 1500, 1500, 1000, 1000 ]\r\n *    * after: [ 1500, 1500, (new=1300), 1000, 1000, (new=1000) ]\r\n *\r\n * @param {String} event\r\n * @param {Object} listener { priority, callback }\r\n */\r\nEventBus.prototype._addListener = function(event, newListener) {\r\n\r\n  var listeners = this._getListeners(event),\r\n      existingListener,\r\n      idx;\r\n\r\n  // ensure we order listeners by priority from\r\n  // 0 (high) to n > 0 (low)\r\n  for (idx = 0; !!(existingListener = listeners[idx]); idx++) {\r\n    if (existingListener.priority < newListener.priority) {\r\n\r\n      // prepend newListener at before existingListener\r\n      listeners.splice(idx, 0, newListener);\r\n      return;\r\n    }\r\n  }\r\n\r\n  listeners.push(newListener);\r\n};\r\n\r\n\r\nEventBus.prototype._getListeners = function(name) {\r\n  var listeners = this._listeners[name];\r\n\r\n  if (!listeners) {\r\n    this._listeners[name] = listeners = [];\r\n  }\r\n\r\n  return listeners;\r\n};\r\n\r\n\r\n/**\r\n * A event that is emitted via the event bus.\r\n */\r\nfunction Event() { }\r\n\r\nmodule.exports.Event = Event;\r\n\r\nEvent.prototype.stopPropagation = function() {\r\n  this.cancelBubble = true;\r\n};\r\n\r\nEvent.prototype.preventDefault = function() {\r\n  this.defaultPrevented = true;\r\n};\r\n\r\nEvent.prototype.init = function(data) {\r\n  assign(this, data || {});\r\n};\r\n","'use strict';\r\n\r\n/**\r\n * A service that provides rules for certain diagram actions.\r\n *\r\n * @param {CommandStack} commandStack\r\n */\r\nfunction Rules(commandStack) {\r\n  this._commandStack = commandStack;\r\n}\r\n\r\nRules.$inject = [ 'commandStack' ];\r\n\r\nmodule.exports = Rules;\r\n\r\n\r\n/**\r\n * This method can be queried to ask whether certain modeling actions\r\n * are allowed or not.\r\n *\r\n * @param  {String} action the action to be checked\r\n * @param  {Object} [context] the context to check the action in\r\n *\r\n * @return {Boolean} returns true, false or null depending on whether the\r\n *                   operation is allowed, not allowed or should be ignored.\r\n */\r\nRules.prototype.allowed = function(action, context) {\r\n  var allowed = this._commandStack.canExecute(action, context);\r\n\r\n  // map undefined to true, i.e. no rules\r\n  return allowed === undefined ? true : allowed;\r\n};","module.exports = {\r\n  __depends__: [ require(462) ],\r\n  __init__: [ 'rules' ],\r\n  rules: [ 'type', require(465) ]\r\n};\r\n","'use strict';\r\n\r\nfunction __preventDefault(event) {\r\n  return event && event.preventDefault();\r\n}\r\n\r\nfunction __stopPropagation(event, immediate) {\r\n  if (!event) {\r\n    return;\r\n  }\r\n\r\n  if (event.stopPropagation) {\r\n    event.stopPropagation();\r\n  }\r\n\r\n  if (immediate && event.stopImmediatePropagation) {\r\n    event.stopImmediatePropagation();\r\n  }\r\n}\r\n\r\n\r\nfunction getOriginal(event) {\r\n  return event.originalEvent || event.srcEvent;\r\n}\r\n\r\nmodule.exports.getOriginal = getOriginal;\r\n\r\n\r\nfunction stopEvent(event, immediate) {\r\n  stopPropagation(event, immediate);\r\n  preventDefault(event);\r\n}\r\n\r\nmodule.exports.stopEvent = stopEvent;\r\n\r\n\r\nfunction preventDefault(event) {\r\n  __preventDefault(event);\r\n  __preventDefault(getOriginal(event));\r\n}\r\n\r\nmodule.exports.preventDefault = preventDefault;\r\n\r\n\r\nfunction stopPropagation(event, immediate) {\r\n  __stopPropagation(event, immediate);\r\n  __stopPropagation(getOriginal(event), immediate);\r\n}\r\n\r\nmodule.exports.stopPropagation = stopPropagation;\r\n\r\n\r\nfunction toPoint(event) {\r\n\r\n  if (event.pointers && event.pointers.length) {\r\n    event = event.pointers[0];\r\n  }\r\n\r\n  if (event.touches && event.touches.length) {\r\n    event = event.touches[0];\r\n  }\r\n\r\n  return event ? {\r\n    x: event.clientX,\r\n    y: event.clientY\r\n  } : null;\r\n}\r\n\r\nmodule.exports.toPoint = toPoint;\r\n","'use strict';\r\n\r\nvar getOriginalEvent = require(467).getOriginal;\r\n\r\nvar isMac = require(470).isMac;\r\n\r\n\r\nfunction isPrimaryButton(event) {\r\n  // button === 0 -> left áka primary mouse button\r\n  return !(getOriginalEvent(event) || event).button;\r\n}\r\n\r\nmodule.exports.isPrimaryButton = isPrimaryButton;\r\n\r\nmodule.exports.isMac = isMac;\r\n\r\nmodule.exports.hasPrimaryModifier = function(event) {\r\n  var originalEvent = getOriginalEvent(event) || event;\r\n\r\n  if (!isPrimaryButton(event)) {\r\n    return false;\r\n  }\r\n\r\n  // Use alt as primary modifier key for mac OS\r\n  if (isMac()) {\r\n    return originalEvent.altKey;\r\n  } else {\r\n    return originalEvent.ctrlKey;\r\n  }\r\n};\r\n\r\n\r\nmodule.exports.hasSecondaryModifier = function(event) {\r\n  var originalEvent = getOriginalEvent(event) || event;\r\n\r\n  return isPrimaryButton(event) && originalEvent.shiftKey;\r\n};\r\n","'use strict';\r\n\r\nmodule.exports.isMac = function isMac() {\r\n  return (/mac/i).test(navigator.platform);\r\n};","var baseCallback = require(488),\n    baseUniq = require(508),\n    isIterateeCall = require(535),\n    sortedUniq = require(548);\n\n/**\n * Creates a duplicate-free version of an array, using\n * [`SameValueZero`](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-samevaluezero)\n * for equality comparisons, in which only the first occurence of each element\n * is kept. Providing `true` for `isSorted` performs a faster search algorithm\n * for sorted arrays. If an iteratee function is provided it is invoked for\n * each element in the array to generate the criterion by which uniqueness\n * is computed. The `iteratee` is bound to `thisArg` and invoked with three\n * arguments: (value, index, array).\n *\n * If a property name is provided for `iteratee` the created `_.property`\n * style callback returns the property value of the given element.\n *\n * If a value is also provided for `thisArg` the created `_.matchesProperty`\n * style callback returns `true` for elements that have a matching property\n * value, else `false`.\n *\n * If an object is provided for `iteratee` the created `_.matches` style\n * callback returns `true` for elements that have the properties of the given\n * object, else `false`.\n *\n * @static\n * @memberOf _\n * @alias unique\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {boolean} [isSorted] Specify the array is sorted.\n * @param {Function|Object|string} [iteratee] The function invoked per iteration.\n * @param {*} [thisArg] The `this` binding of `iteratee`.\n * @returns {Array} Returns the new duplicate-value-free array.\n * @example\n *\n * _.uniq([2, 1, 2]);\n * // => [2, 1]\n *\n * // using `isSorted`\n * _.uniq([1, 1, 2], true);\n * // => [1, 2]\n *\n * // using an iteratee function\n * _.uniq([1, 2.5, 1.5, 2], function(n) {\n *   return this.floor(n);\n * }, Math);\n * // => [1, 2.5]\n *\n * // using the `_.property` callback shorthand\n * _.uniq([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');\n * // => [{ 'x': 1 }, { 'x': 2 }]\n */\nfunction uniq(array, isSorted, iteratee, thisArg) {\n  var length = array ? array.length : 0;\n  if (!length) {\n    return [];\n  }\n  if (isSorted != null && typeof isSorted != 'boolean') {\n    thisArg = iteratee;\n    iteratee = isIterateeCall(array, isSorted, thisArg) ? null : isSorted;\n    isSorted = false;\n  }\n  iteratee = iteratee == null ? iteratee : baseCallback(iteratee, thisArg, 3);\n  return (isSorted)\n    ? sortedUniq(array, iteratee)\n    : baseUniq(array, iteratee);\n}\n\nmodule.exports = uniq;\n","module.exports = require(473);\n","var LazyWrapper = require(480),\n    LodashWrapper = require(481),\n    baseLodash = require(500),\n    isArray = require(553),\n    isObjectLike = require(539),\n    wrapperClone = require(551);\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates a `lodash` object which wraps `value` to enable implicit chaining.\n * Methods that operate on and return arrays, collections, and functions can\n * be chained together. Methods that return a boolean or single value will\n * automatically end the chain returning the unwrapped value. Explicit chaining\n * may be enabled using `_.chain`. The execution of chained methods is lazy,\n * that is, execution is deferred until `_#value` is implicitly or explicitly\n * called.\n *\n * Lazy evaluation allows several methods to support shortcut fusion. Shortcut\n * fusion is an optimization that merges iteratees to avoid creating intermediate\n * arrays and reduce the number of iteratee executions.\n *\n * Chaining is supported in custom builds as long as the `_#value` method is\n * directly or indirectly included in the build.\n *\n * In addition to lodash methods, wrappers have `Array` and `String` methods.\n *\n * The wrapper `Array` methods are:\n * `concat`, `join`, `pop`, `push`, `reverse`, `shift`, `slice`, `sort`,\n * `splice`, and `unshift`\n *\n * The wrapper `String` methods are:\n * `replace` and `split`\n *\n * The wrapper methods that support shortcut fusion are:\n * `compact`, `drop`, `dropRight`, `dropRightWhile`, `dropWhile`, `filter`,\n * `first`, `initial`, `last`, `map`, `pluck`, `reject`, `rest`, `reverse`,\n * `slice`, `take`, `takeRight`, `takeRightWhile`, `takeWhile`, `toArray`,\n * and `where`\n *\n * The chainable wrapper methods are:\n * `after`, `ary`, `assign`, `at`, `before`, `bind`, `bindAll`, `bindKey`,\n * `callback`, `chain`, `chunk`, `commit`, `compact`, `concat`, `constant`,\n * `countBy`, `create`, `curry`, `debounce`, `defaults`, `defer`, `delay`,\n * `difference`, `drop`, `dropRight`, `dropRightWhile`, `dropWhile`, `fill`,\n * `filter`, `flatten`, `flattenDeep`, `flow`, `flowRight`, `forEach`,\n * `forEachRight`, `forIn`, `forInRight`, `forOwn`, `forOwnRight`, `functions`,\n * `groupBy`, `indexBy`, `initial`, `intersection`, `invert`, `invoke`, `keys`,\n * `keysIn`, `map`, `mapKeys`, `mapValues`, `matches`, `matchesProperty`,\n * `memoize`, `merge`, `method`, `methodOf`, `mixin`, `negate`, `omit`, `once`,\n * `pairs`, `partial`, `partialRight`, `partition`, `pick`, `plant`, `pluck`,\n * `property`, `propertyOf`, `pull`, `pullAt`, `push`, `range`, `rearg`,\n * `reject`, `remove`, `rest`, `restParam`, `reverse`, `set`, `shuffle`,\n * `slice`, `sort`, `sortBy`, `sortByAll`, `sortByOrder`, `splice`, `spread`,\n * `take`, `takeRight`, `takeRightWhile`, `takeWhile`, `tap`, `throttle`,\n * `thru`, `times`, `toArray`, `toPlainObject`, `transform`, `union`, `uniq`,\n * `unshift`, `unzip`, `unzipWith`, `values`, `valuesIn`, `where`, `without`,\n * `wrap`, `xor`, `zip`, `zipObject`, `zipWith`\n *\n * The wrapper methods that are **not** chainable by default are:\n * `add`, `attempt`, `camelCase`, `capitalize`, `clone`, `cloneDeep`, `deburr`,\n * `endsWith`, `escape`, `escapeRegExp`, `every`, `find`, `findIndex`, `findKey`,\n * `findLast`, `findLastIndex`, `findLastKey`, `findWhere`, `first`, `get`,\n * `gt`, `gte`, `has`, `identity`, `includes`, `indexOf`, `inRange`, `isArguments`,\n * `isArray`, `isBoolean`, `isDate`, `isElement`, `isEmpty`, `isEqual`, `isError`,\n * `isFinite` `isFunction`, `isMatch`, `isNative`, `isNaN`, `isNull`, `isNumber`,\n * `isObject`, `isPlainObject`, `isRegExp`, `isString`, `isUndefined`,\n * `isTypedArray`, `join`, `kebabCase`, `last`, `lastIndexOf`, `lt`, `lte`,\n * `max`, `min`, `noConflict`, `noop`, `now`, `pad`, `padLeft`, `padRight`,\n * `parseInt`, `pop`, `random`, `reduce`, `reduceRight`, `repeat`, `result`,\n * `runInContext`, `shift`, `size`, `snakeCase`, `some`, `sortedIndex`,\n * `sortedLastIndex`, `startCase`, `startsWith`, `sum`, `template`, `trim`,\n * `trimLeft`, `trimRight`, `trunc`, `unescape`, `uniqueId`, `value`, and `words`\n *\n * The wrapper method `sample` will return a wrapped value when `n` is provided,\n * otherwise an unwrapped value is returned.\n *\n * @name _\n * @constructor\n * @category Chain\n * @param {*} value The value to wrap in a `lodash` instance.\n * @returns {Object} Returns the new `lodash` wrapper instance.\n * @example\n *\n * var wrapped = _([1, 2, 3]);\n *\n * // returns an unwrapped value\n * wrapped.reduce(function(total, n) {\n *   return total + n;\n * });\n * // => 6\n *\n * // returns a wrapped value\n * var squares = wrapped.map(function(n) {\n *   return n * n;\n * });\n *\n * _.isArray(squares);\n * // => false\n *\n * _.isArray(squares.value());\n * // => true\n */\nfunction lodash(value) {\n  if (isObjectLike(value) && !isArray(value) && !(value instanceof LazyWrapper)) {\n    if (value instanceof LodashWrapper) {\n      return value;\n    }\n    if (hasOwnProperty.call(value, '__chain__') && hasOwnProperty.call(value, '__wrapped__')) {\n      return wrapperClone(value);\n    }\n  }\n  return new LodashWrapper(value);\n}\n\n// Ensure wrappers are instances of `baseLodash`.\nlodash.prototype = baseLodash.prototype;\n\nmodule.exports = lodash;\n","var getNative = require(531);\n\n/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeNow = getNative(Date, 'now');\n\n/**\n * Gets the number of milliseconds that have elapsed since the Unix epoch\n * (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @category Date\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => logs the number of milliseconds it took for the deferred function to be invoked\n */\nvar now = nativeNow || function() {\n  return new Date().getTime();\n};\n\nmodule.exports = now;\n","var createWrapper = require(523),\n    replaceHolders = require(545),\n    restParam = require(479);\n\n/** Used to compose bitmasks for wrapper metadata. */\nvar BIND_FLAG = 1,\n    PARTIAL_FLAG = 32;\n\n/**\n * Creates a function that invokes `func` with the `this` binding of `thisArg`\n * and prepends any additional `_.bind` arguments to those provided to the\n * bound function.\n *\n * The `_.bind.placeholder` value, which defaults to `_` in monolithic builds,\n * may be used as a placeholder for partially applied arguments.\n *\n * **Note:** Unlike native `Function#bind` this method does not set the \"length\"\n * property of bound functions.\n *\n * @static\n * @memberOf _\n * @category Function\n * @param {Function} func The function to bind.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {...*} [partials] The arguments to be partially applied.\n * @returns {Function} Returns the new bound function.\n * @example\n *\n * var greet = function(greeting, punctuation) {\n *   return greeting + ' ' + this.user + punctuation;\n * };\n *\n * var object = { 'user': 'fred' };\n *\n * var bound = _.bind(greet, object, 'hi');\n * bound('!');\n * // => 'hi fred!'\n *\n * // using placeholders\n * var bound = _.bind(greet, object, _, '!');\n * bound('hi');\n * // => 'hi fred!'\n */\nvar bind = restParam(function(func, thisArg, partials) {\n  var bitmask = BIND_FLAG;\n  if (partials.length) {\n    var holders = replaceHolders(partials, bind.placeholder);\n    bitmask |= PARTIAL_FLAG;\n  }\n  return createWrapper(func, bitmask, thisArg, partials, holders);\n});\n\n// Assign default placeholders.\nbind.placeholder = {};\n\nmodule.exports = bind;\n","var baseCreate = require(490),\n    baseLodash = require(500);\n\n/** Used as references for `-Infinity` and `Infinity`. */\nvar POSITIVE_INFINITY = Number.POSITIVE_INFINITY;\n\n/**\n * Creates a lazy wrapper object which wraps `value` to enable lazy evaluation.\n *\n * @private\n * @param {*} value The value to wrap.\n */\nfunction LazyWrapper(value) {\n  this.__wrapped__ = value;\n  this.__actions__ = null;\n  this.__dir__ = 1;\n  this.__dropCount__ = 0;\n  this.__filtered__ = false;\n  this.__iteratees__ = null;\n  this.__takeCount__ = POSITIVE_INFINITY;\n  this.__views__ = null;\n}\n\nLazyWrapper.prototype = baseCreate(baseLodash.prototype);\nLazyWrapper.prototype.constructor = LazyWrapper;\n\nmodule.exports = LazyWrapper;\n","var baseCreate = require(490),\n    baseLodash = require(500);\n\n/**\n * The base constructor for creating `lodash` wrapper objects.\n *\n * @private\n * @param {*} value The value to wrap.\n * @param {boolean} [chainAll] Enable chaining for all wrapper methods.\n * @param {Array} [actions=[]] Actions to peform to resolve the unwrapped value.\n */\nfunction LodashWrapper(value, chainAll, actions) {\n  this.__wrapped__ = value;\n  this.__actions__ = actions || [];\n  this.__chain__ = !!chainAll;\n}\n\nLodashWrapper.prototype = baseCreate(baseLodash.prototype);\nLodashWrapper.prototype.constructor = LodashWrapper;\n\nmodule.exports = LodashWrapper;\n","(function (global){\nvar cachePush = require(511),\n    getNative = require(531);\n\n/** Native method references. */\nvar Set = getNative(global, 'Set');\n\n/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeCreate = getNative(Object, 'create');\n\n/**\n *\n * Creates a cache object to store unique values.\n *\n * @private\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var length = values ? values.length : 0;\n\n  this.data = { 'hash': nativeCreate(null), 'set': new Set };\n  while (length--) {\n    this.push(values[length]);\n  }\n}\n\n// Add functions to the `Set` cache.\nSetCache.prototype.push = cachePush;\n\nmodule.exports = SetCache;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy90YWJsZS1qcy9ub2RlX21vZHVsZXMvZGlhZ3JhbS1qcy9ub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL1NldENhY2hlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbInZhciBjYWNoZVB1c2ggPSByZXF1aXJlKCcuL2NhY2hlUHVzaCcpLFxuICAgIGdldE5hdGl2ZSA9IHJlcXVpcmUoJy4vZ2V0TmF0aXZlJyk7XG5cbi8qKiBOYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgU2V0ID0gZ2V0TmF0aXZlKGdsb2JhbCwgJ1NldCcpO1xuXG4vKiBOYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZUNyZWF0ZSA9IGdldE5hdGl2ZShPYmplY3QsICdjcmVhdGUnKTtcblxuLyoqXG4gKlxuICogQ3JlYXRlcyBhIGNhY2hlIG9iamVjdCB0byBzdG9yZSB1bmlxdWUgdmFsdWVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBbdmFsdWVzXSBUaGUgdmFsdWVzIHRvIGNhY2hlLlxuICovXG5mdW5jdGlvbiBTZXRDYWNoZSh2YWx1ZXMpIHtcbiAgdmFyIGxlbmd0aCA9IHZhbHVlcyA/IHZhbHVlcy5sZW5ndGggOiAwO1xuXG4gIHRoaXMuZGF0YSA9IHsgJ2hhc2gnOiBuYXRpdmVDcmVhdGUobnVsbCksICdzZXQnOiBuZXcgU2V0IH07XG4gIHdoaWxlIChsZW5ndGgtLSkge1xuICAgIHRoaXMucHVzaCh2YWx1ZXNbbGVuZ3RoXSk7XG4gIH1cbn1cblxuLy8gQWRkIGZ1bmN0aW9ucyB0byB0aGUgYFNldGAgY2FjaGUuXG5TZXRDYWNoZS5wcm90b3R5cGUucHVzaCA9IGNhY2hlUHVzaDtcblxubW9kdWxlLmV4cG9ydHMgPSBTZXRDYWNoZTtcbiJdfQ==","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction arrayCopy(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayCopy;\n","var isObject = require(557);\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(prototype) {\n    if (isObject(prototype)) {\n      object.prototype = prototype;\n      var result = new object;\n      object.prototype = null;\n    }\n    return result || {};\n  };\n}());\n\nmodule.exports = baseCreate;\n","/**\n * The function whose prototype all chaining wrappers inherit from.\n *\n * @private\n */\nfunction baseLodash() {\n  // No operation performed.\n}\n\nmodule.exports = baseLodash;\n","var identity = require(565),\n    metaMap = require(542);\n\n/**\n * The base implementation of `setData` without support for hot loop detection.\n *\n * @private\n * @param {Function} func The function to associate metadata with.\n * @param {*} data The metadata.\n * @returns {Function} Returns `func`.\n */\nvar baseSetData = !metaMap ? identity : function(func, data) {\n  metaMap.set(func, data);\n  return func;\n};\n\nmodule.exports = baseSetData;\n","var baseIndexOf = require(495),\n    cacheIndexOf = require(510),\n    createCache = require(518);\n\n/**\n * The base implementation of `_.uniq` without support for callback shorthands\n * and `this` binding.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The function invoked per iteration.\n * @returns {Array} Returns the new duplicate-value-free array.\n */\nfunction baseUniq(array, iteratee) {\n  var index = -1,\n      indexOf = baseIndexOf,\n      length = array.length,\n      isCommon = true,\n      isLarge = isCommon && length >= 200,\n      seen = isLarge ? createCache() : null,\n      result = [];\n\n  if (seen) {\n    indexOf = cacheIndexOf;\n    isCommon = false;\n  } else {\n    isLarge = false;\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value, index, array) : value;\n\n    if (isCommon && value === value) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (indexOf(seen, computed, 0) < 0) {\n      if (iteratee || isLarge) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseUniq;\n","/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates an array that is the composition of partially applied arguments,\n * placeholders, and provided arguments into a single array of arguments.\n *\n * @private\n * @param {Array|Object} args The provided arguments.\n * @param {Array} partials The arguments to prepend to those provided.\n * @param {Array} holders The `partials` placeholder indexes.\n * @returns {Array} Returns the new array of composed arguments.\n */\nfunction composeArgs(args, partials, holders) {\n  var holdersLength = holders.length,\n      argsIndex = -1,\n      argsLength = nativeMax(args.length - holdersLength, 0),\n      leftIndex = -1,\n      leftLength = partials.length,\n      result = Array(argsLength + leftLength);\n\n  while (++leftIndex < leftLength) {\n    result[leftIndex] = partials[leftIndex];\n  }\n  while (++argsIndex < holdersLength) {\n    result[holders[argsIndex]] = args[argsIndex];\n  }\n  while (argsLength--) {\n    result[leftIndex++] = args[argsIndex++];\n  }\n  return result;\n}\n\nmodule.exports = composeArgs;\n","/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * This function is like `composeArgs` except that the arguments composition\n * is tailored for `_.partialRight`.\n *\n * @private\n * @param {Array|Object} args The provided arguments.\n * @param {Array} partials The arguments to append to those provided.\n * @param {Array} holders The `partials` placeholder indexes.\n * @returns {Array} Returns the new array of composed arguments.\n */\nfunction composeArgsRight(args, partials, holders) {\n  var holdersIndex = -1,\n      holdersLength = holders.length,\n      argsIndex = -1,\n      argsLength = nativeMax(args.length - holdersLength, 0),\n      rightIndex = -1,\n      rightLength = partials.length,\n      result = Array(argsLength + rightLength);\n\n  while (++argsIndex < argsLength) {\n    result[argsIndex] = args[argsIndex];\n  }\n  var offset = argsIndex;\n  while (++rightIndex < rightLength) {\n    result[offset + rightIndex] = partials[rightIndex];\n  }\n  while (++holdersIndex < holdersLength) {\n    result[offset + holders[holdersIndex]] = args[argsIndex++];\n  }\n  return result;\n}\n\nmodule.exports = composeArgsRight;\n","(function (global){\nvar createCtorWrapper = require(519);\n\n/**\n * Creates a function that wraps `func` and invokes it with the `this`\n * binding of `thisArg`.\n *\n * @private\n * @param {Function} func The function to bind.\n * @param {*} [thisArg] The `this` binding of `func`.\n * @returns {Function} Returns the new bound function.\n */\nfunction createBindWrapper(func, thisArg) {\n  var Ctor = createCtorWrapper(func);\n\n  function wrapper() {\n    var fn = (this && this !== global && this instanceof wrapper) ? Ctor : func;\n    return fn.apply(thisArg, arguments);\n  }\n  return wrapper;\n}\n\nmodule.exports = createBindWrapper;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy90YWJsZS1qcy9ub2RlX21vZHVsZXMvZGlhZ3JhbS1qcy9ub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2NyZWF0ZUJpbmRXcmFwcGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgY3JlYXRlQ3RvcldyYXBwZXIgPSByZXF1aXJlKCcuL2NyZWF0ZUN0b3JXcmFwcGVyJyk7XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgd3JhcHMgYGZ1bmNgIGFuZCBpbnZva2VzIGl0IHdpdGggdGhlIGB0aGlzYFxuICogYmluZGluZyBvZiBgdGhpc0FyZ2AuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGJpbmQuXG4gKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGZ1bmNgLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYm91bmQgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUJpbmRXcmFwcGVyKGZ1bmMsIHRoaXNBcmcpIHtcbiAgdmFyIEN0b3IgPSBjcmVhdGVDdG9yV3JhcHBlcihmdW5jKTtcblxuICBmdW5jdGlvbiB3cmFwcGVyKCkge1xuICAgIHZhciBmbiA9ICh0aGlzICYmIHRoaXMgIT09IGdsb2JhbCAmJiB0aGlzIGluc3RhbmNlb2Ygd3JhcHBlcikgPyBDdG9yIDogZnVuYztcbiAgICByZXR1cm4gZm4uYXBwbHkodGhpc0FyZywgYXJndW1lbnRzKTtcbiAgfVxuICByZXR1cm4gd3JhcHBlcjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVCaW5kV3JhcHBlcjtcbiJdfQ==","(function (global){\nvar SetCache = require(482),\n    constant = require(564),\n    getNative = require(531);\n\n/** Native method references. */\nvar Set = getNative(global, 'Set');\n\n/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeCreate = getNative(Object, 'create');\n\n/**\n * Creates a `Set` cache object to optimize linear searches of large arrays.\n *\n * @private\n * @param {Array} [values] The values to cache.\n * @returns {null|Object} Returns the new cache object if `Set` is supported, else `null`.\n */\nvar createCache = !(nativeCreate && Set) ? constant(null) : function(values) {\n  return new SetCache(values);\n};\n\nmodule.exports = createCache;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy90YWJsZS1qcy9ub2RlX21vZHVsZXMvZGlhZ3JhbS1qcy9ub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2NyZWF0ZUNhY2hlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgU2V0Q2FjaGUgPSByZXF1aXJlKCcuL1NldENhY2hlJyksXG4gICAgY29uc3RhbnQgPSByZXF1aXJlKCcuLi91dGlsaXR5L2NvbnN0YW50JyksXG4gICAgZ2V0TmF0aXZlID0gcmVxdWlyZSgnLi9nZXROYXRpdmUnKTtcblxuLyoqIE5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBTZXQgPSBnZXROYXRpdmUoZ2xvYmFsLCAnU2V0Jyk7XG5cbi8qIE5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlQ3JlYXRlID0gZ2V0TmF0aXZlKE9iamVjdCwgJ2NyZWF0ZScpO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBgU2V0YCBjYWNoZSBvYmplY3QgdG8gb3B0aW1pemUgbGluZWFyIHNlYXJjaGVzIG9mIGxhcmdlIGFycmF5cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheX0gW3ZhbHVlc10gVGhlIHZhbHVlcyB0byBjYWNoZS5cbiAqIEByZXR1cm5zIHtudWxsfE9iamVjdH0gUmV0dXJucyB0aGUgbmV3IGNhY2hlIG9iamVjdCBpZiBgU2V0YCBpcyBzdXBwb3J0ZWQsIGVsc2UgYG51bGxgLlxuICovXG52YXIgY3JlYXRlQ2FjaGUgPSAhKG5hdGl2ZUNyZWF0ZSAmJiBTZXQpID8gY29uc3RhbnQobnVsbCkgOiBmdW5jdGlvbih2YWx1ZXMpIHtcbiAgcmV0dXJuIG5ldyBTZXRDYWNoZSh2YWx1ZXMpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVDYWNoZTtcbiJdfQ==","var baseCreate = require(490),\n    isObject = require(557);\n\n/**\n * Creates a function that produces an instance of `Ctor` regardless of\n * whether it was invoked as part of a `new` expression or by `call` or `apply`.\n *\n * @private\n * @param {Function} Ctor The constructor to wrap.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createCtorWrapper(Ctor) {\n  return function() {\n    // Use a `switch` statement to work with class constructors.\n    // See https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-function-objects-call-thisargument-argumentslist\n    // for more details.\n    var args = arguments;\n    switch (args.length) {\n      case 0: return new Ctor;\n      case 1: return new Ctor(args[0]);\n      case 2: return new Ctor(args[0], args[1]);\n      case 3: return new Ctor(args[0], args[1], args[2]);\n      case 4: return new Ctor(args[0], args[1], args[2], args[3]);\n      case 5: return new Ctor(args[0], args[1], args[2], args[3], args[4]);\n    }\n    var thisBinding = baseCreate(Ctor.prototype),\n        result = Ctor.apply(thisBinding, args);\n\n    // Mimic the constructor's `return` behavior.\n    // See https://es5.github.io/#x13.2.2 for more details.\n    return isObject(result) ? result : thisBinding;\n  };\n}\n\nmodule.exports = createCtorWrapper;\n","(function (global){\nvar arrayCopy = require(483),\n    composeArgs = require(512),\n    composeArgsRight = require(513),\n    createCtorWrapper = require(519),\n    isLaziable = require(537),\n    reorder = require(544),\n    replaceHolders = require(545),\n    setData = require(546);\n\n/** Used to compose bitmasks for wrapper metadata. */\nvar BIND_FLAG = 1,\n    BIND_KEY_FLAG = 2,\n    CURRY_BOUND_FLAG = 4,\n    CURRY_FLAG = 8,\n    CURRY_RIGHT_FLAG = 16,\n    PARTIAL_FLAG = 32,\n    PARTIAL_RIGHT_FLAG = 64,\n    ARY_FLAG = 128;\n\n/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates a function that wraps `func` and invokes it with optional `this`\n * binding of, partial application, and currying.\n *\n * @private\n * @param {Function|string} func The function or method name to reference.\n * @param {number} bitmask The bitmask of flags. See `createWrapper` for more details.\n * @param {*} [thisArg] The `this` binding of `func`.\n * @param {Array} [partials] The arguments to prepend to those provided to the new function.\n * @param {Array} [holders] The `partials` placeholder indexes.\n * @param {Array} [partialsRight] The arguments to append to those provided to the new function.\n * @param {Array} [holdersRight] The `partialsRight` placeholder indexes.\n * @param {Array} [argPos] The argument positions of the new function.\n * @param {number} [ary] The arity cap of `func`.\n * @param {number} [arity] The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createHybridWrapper(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity) {\n  var isAry = bitmask & ARY_FLAG,\n      isBind = bitmask & BIND_FLAG,\n      isBindKey = bitmask & BIND_KEY_FLAG,\n      isCurry = bitmask & CURRY_FLAG,\n      isCurryBound = bitmask & CURRY_BOUND_FLAG,\n      isCurryRight = bitmask & CURRY_RIGHT_FLAG,\n      Ctor = isBindKey ? null : createCtorWrapper(func);\n\n  function wrapper() {\n    // Avoid `arguments` object use disqualifying optimizations by\n    // converting it to an array before providing it to other functions.\n    var length = arguments.length,\n        index = length,\n        args = Array(length);\n\n    while (index--) {\n      args[index] = arguments[index];\n    }\n    if (partials) {\n      args = composeArgs(args, partials, holders);\n    }\n    if (partialsRight) {\n      args = composeArgsRight(args, partialsRight, holdersRight);\n    }\n    if (isCurry || isCurryRight) {\n      var placeholder = wrapper.placeholder,\n          argsHolders = replaceHolders(args, placeholder);\n\n      length -= argsHolders.length;\n      if (length < arity) {\n        var newArgPos = argPos ? arrayCopy(argPos) : null,\n            newArity = nativeMax(arity - length, 0),\n            newsHolders = isCurry ? argsHolders : null,\n            newHoldersRight = isCurry ? null : argsHolders,\n            newPartials = isCurry ? args : null,\n            newPartialsRight = isCurry ? null : args;\n\n        bitmask |= (isCurry ? PARTIAL_FLAG : PARTIAL_RIGHT_FLAG);\n        bitmask &= ~(isCurry ? PARTIAL_RIGHT_FLAG : PARTIAL_FLAG);\n\n        if (!isCurryBound) {\n          bitmask &= ~(BIND_FLAG | BIND_KEY_FLAG);\n        }\n        var newData = [func, bitmask, thisArg, newPartials, newsHolders, newPartialsRight, newHoldersRight, newArgPos, ary, newArity],\n            result = createHybridWrapper.apply(undefined, newData);\n\n        if (isLaziable(func)) {\n          setData(result, newData);\n        }\n        result.placeholder = placeholder;\n        return result;\n      }\n    }\n    var thisBinding = isBind ? thisArg : this,\n        fn = isBindKey ? thisBinding[func] : func;\n\n    if (argPos) {\n      args = reorder(args, argPos);\n    }\n    if (isAry && ary < args.length) {\n      args.length = ary;\n    }\n    if (this && this !== global && this instanceof wrapper) {\n      fn = Ctor || createCtorWrapper(func);\n    }\n    return fn.apply(thisBinding, args);\n  }\n  return wrapper;\n}\n\nmodule.exports = createHybridWrapper;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy90YWJsZS1qcy9ub2RlX21vZHVsZXMvZGlhZ3JhbS1qcy9ub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2NyZWF0ZUh5YnJpZFdyYXBwZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXJyYXlDb3B5ID0gcmVxdWlyZSgnLi9hcnJheUNvcHknKSxcbiAgICBjb21wb3NlQXJncyA9IHJlcXVpcmUoJy4vY29tcG9zZUFyZ3MnKSxcbiAgICBjb21wb3NlQXJnc1JpZ2h0ID0gcmVxdWlyZSgnLi9jb21wb3NlQXJnc1JpZ2h0JyksXG4gICAgY3JlYXRlQ3RvcldyYXBwZXIgPSByZXF1aXJlKCcuL2NyZWF0ZUN0b3JXcmFwcGVyJyksXG4gICAgaXNMYXppYWJsZSA9IHJlcXVpcmUoJy4vaXNMYXppYWJsZScpLFxuICAgIHJlb3JkZXIgPSByZXF1aXJlKCcuL3Jlb3JkZXInKSxcbiAgICByZXBsYWNlSG9sZGVycyA9IHJlcXVpcmUoJy4vcmVwbGFjZUhvbGRlcnMnKSxcbiAgICBzZXREYXRhID0gcmVxdWlyZSgnLi9zZXREYXRhJyk7XG5cbi8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIHdyYXBwZXIgbWV0YWRhdGEuICovXG52YXIgQklORF9GTEFHID0gMSxcbiAgICBCSU5EX0tFWV9GTEFHID0gMixcbiAgICBDVVJSWV9CT1VORF9GTEFHID0gNCxcbiAgICBDVVJSWV9GTEFHID0gOCxcbiAgICBDVVJSWV9SSUdIVF9GTEFHID0gMTYsXG4gICAgUEFSVElBTF9GTEFHID0gMzIsXG4gICAgUEFSVElBTF9SSUdIVF9GTEFHID0gNjQsXG4gICAgQVJZX0ZMQUcgPSAxMjg7XG5cbi8qIE5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXg7XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgd3JhcHMgYGZ1bmNgIGFuZCBpbnZva2VzIGl0IHdpdGggb3B0aW9uYWwgYHRoaXNgXG4gKiBiaW5kaW5nIG9mLCBwYXJ0aWFsIGFwcGxpY2F0aW9uLCBhbmQgY3VycnlpbmcuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb258c3RyaW5nfSBmdW5jIFRoZSBmdW5jdGlvbiBvciBtZXRob2QgbmFtZSB0byByZWZlcmVuY2UuXG4gKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBvZiBmbGFncy4gU2VlIGBjcmVhdGVXcmFwcGVyYCBmb3IgbW9yZSBkZXRhaWxzLlxuICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cbiAqIEBwYXJhbSB7QXJyYXl9IFtwYXJ0aWFsc10gVGhlIGFyZ3VtZW50cyB0byBwcmVwZW5kIHRvIHRob3NlIHByb3ZpZGVkIHRvIHRoZSBuZXcgZnVuY3Rpb24uXG4gKiBAcGFyYW0ge0FycmF5fSBbaG9sZGVyc10gVGhlIGBwYXJ0aWFsc2AgcGxhY2Vob2xkZXIgaW5kZXhlcy5cbiAqIEBwYXJhbSB7QXJyYXl9IFtwYXJ0aWFsc1JpZ2h0XSBUaGUgYXJndW1lbnRzIHRvIGFwcGVuZCB0byB0aG9zZSBwcm92aWRlZCB0byB0aGUgbmV3IGZ1bmN0aW9uLlxuICogQHBhcmFtIHtBcnJheX0gW2hvbGRlcnNSaWdodF0gVGhlIGBwYXJ0aWFsc1JpZ2h0YCBwbGFjZWhvbGRlciBpbmRleGVzLlxuICogQHBhcmFtIHtBcnJheX0gW2FyZ1Bvc10gVGhlIGFyZ3VtZW50IHBvc2l0aW9ucyBvZiB0aGUgbmV3IGZ1bmN0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IFthcnldIFRoZSBhcml0eSBjYXAgb2YgYGZ1bmNgLlxuICogQHBhcmFtIHtudW1iZXJ9IFthcml0eV0gVGhlIGFyaXR5IG9mIGBmdW5jYC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHdyYXBwZWQgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUh5YnJpZFdyYXBwZXIoZnVuYywgYml0bWFzaywgdGhpc0FyZywgcGFydGlhbHMsIGhvbGRlcnMsIHBhcnRpYWxzUmlnaHQsIGhvbGRlcnNSaWdodCwgYXJnUG9zLCBhcnksIGFyaXR5KSB7XG4gIHZhciBpc0FyeSA9IGJpdG1hc2sgJiBBUllfRkxBRyxcbiAgICAgIGlzQmluZCA9IGJpdG1hc2sgJiBCSU5EX0ZMQUcsXG4gICAgICBpc0JpbmRLZXkgPSBiaXRtYXNrICYgQklORF9LRVlfRkxBRyxcbiAgICAgIGlzQ3VycnkgPSBiaXRtYXNrICYgQ1VSUllfRkxBRyxcbiAgICAgIGlzQ3VycnlCb3VuZCA9IGJpdG1hc2sgJiBDVVJSWV9CT1VORF9GTEFHLFxuICAgICAgaXNDdXJyeVJpZ2h0ID0gYml0bWFzayAmIENVUlJZX1JJR0hUX0ZMQUcsXG4gICAgICBDdG9yID0gaXNCaW5kS2V5ID8gbnVsbCA6IGNyZWF0ZUN0b3JXcmFwcGVyKGZ1bmMpO1xuXG4gIGZ1bmN0aW9uIHdyYXBwZXIoKSB7XG4gICAgLy8gQXZvaWQgYGFyZ3VtZW50c2Agb2JqZWN0IHVzZSBkaXNxdWFsaWZ5aW5nIG9wdGltaXphdGlvbnMgYnlcbiAgICAvLyBjb252ZXJ0aW5nIGl0IHRvIGFuIGFycmF5IGJlZm9yZSBwcm92aWRpbmcgaXQgdG8gb3RoZXIgZnVuY3Rpb25zLlxuICAgIHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoLFxuICAgICAgICBpbmRleCA9IGxlbmd0aCxcbiAgICAgICAgYXJncyA9IEFycmF5KGxlbmd0aCk7XG5cbiAgICB3aGlsZSAoaW5kZXgtLSkge1xuICAgICAgYXJnc1tpbmRleF0gPSBhcmd1bWVudHNbaW5kZXhdO1xuICAgIH1cbiAgICBpZiAocGFydGlhbHMpIHtcbiAgICAgIGFyZ3MgPSBjb21wb3NlQXJncyhhcmdzLCBwYXJ0aWFscywgaG9sZGVycyk7XG4gICAgfVxuICAgIGlmIChwYXJ0aWFsc1JpZ2h0KSB7XG4gICAgICBhcmdzID0gY29tcG9zZUFyZ3NSaWdodChhcmdzLCBwYXJ0aWFsc1JpZ2h0LCBob2xkZXJzUmlnaHQpO1xuICAgIH1cbiAgICBpZiAoaXNDdXJyeSB8fCBpc0N1cnJ5UmlnaHQpIHtcbiAgICAgIHZhciBwbGFjZWhvbGRlciA9IHdyYXBwZXIucGxhY2Vob2xkZXIsXG4gICAgICAgICAgYXJnc0hvbGRlcnMgPSByZXBsYWNlSG9sZGVycyhhcmdzLCBwbGFjZWhvbGRlcik7XG5cbiAgICAgIGxlbmd0aCAtPSBhcmdzSG9sZGVycy5sZW5ndGg7XG4gICAgICBpZiAobGVuZ3RoIDwgYXJpdHkpIHtcbiAgICAgICAgdmFyIG5ld0FyZ1BvcyA9IGFyZ1BvcyA/IGFycmF5Q29weShhcmdQb3MpIDogbnVsbCxcbiAgICAgICAgICAgIG5ld0FyaXR5ID0gbmF0aXZlTWF4KGFyaXR5IC0gbGVuZ3RoLCAwKSxcbiAgICAgICAgICAgIG5ld3NIb2xkZXJzID0gaXNDdXJyeSA/IGFyZ3NIb2xkZXJzIDogbnVsbCxcbiAgICAgICAgICAgIG5ld0hvbGRlcnNSaWdodCA9IGlzQ3VycnkgPyBudWxsIDogYXJnc0hvbGRlcnMsXG4gICAgICAgICAgICBuZXdQYXJ0aWFscyA9IGlzQ3VycnkgPyBhcmdzIDogbnVsbCxcbiAgICAgICAgICAgIG5ld1BhcnRpYWxzUmlnaHQgPSBpc0N1cnJ5ID8gbnVsbCA6IGFyZ3M7XG5cbiAgICAgICAgYml0bWFzayB8PSAoaXNDdXJyeSA/IFBBUlRJQUxfRkxBRyA6IFBBUlRJQUxfUklHSFRfRkxBRyk7XG4gICAgICAgIGJpdG1hc2sgJj0gfihpc0N1cnJ5ID8gUEFSVElBTF9SSUdIVF9GTEFHIDogUEFSVElBTF9GTEFHKTtcblxuICAgICAgICBpZiAoIWlzQ3VycnlCb3VuZCkge1xuICAgICAgICAgIGJpdG1hc2sgJj0gfihCSU5EX0ZMQUcgfCBCSU5EX0tFWV9GTEFHKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbmV3RGF0YSA9IFtmdW5jLCBiaXRtYXNrLCB0aGlzQXJnLCBuZXdQYXJ0aWFscywgbmV3c0hvbGRlcnMsIG5ld1BhcnRpYWxzUmlnaHQsIG5ld0hvbGRlcnNSaWdodCwgbmV3QXJnUG9zLCBhcnksIG5ld0FyaXR5XSxcbiAgICAgICAgICAgIHJlc3VsdCA9IGNyZWF0ZUh5YnJpZFdyYXBwZXIuYXBwbHkodW5kZWZpbmVkLCBuZXdEYXRhKTtcblxuICAgICAgICBpZiAoaXNMYXppYWJsZShmdW5jKSkge1xuICAgICAgICAgIHNldERhdGEocmVzdWx0LCBuZXdEYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQucGxhY2Vob2xkZXIgPSBwbGFjZWhvbGRlcjtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIHRoaXNCaW5kaW5nID0gaXNCaW5kID8gdGhpc0FyZyA6IHRoaXMsXG4gICAgICAgIGZuID0gaXNCaW5kS2V5ID8gdGhpc0JpbmRpbmdbZnVuY10gOiBmdW5jO1xuXG4gICAgaWYgKGFyZ1Bvcykge1xuICAgICAgYXJncyA9IHJlb3JkZXIoYXJncywgYXJnUG9zKTtcbiAgICB9XG4gICAgaWYgKGlzQXJ5ICYmIGFyeSA8IGFyZ3MubGVuZ3RoKSB7XG4gICAgICBhcmdzLmxlbmd0aCA9IGFyeTtcbiAgICB9XG4gICAgaWYgKHRoaXMgJiYgdGhpcyAhPT0gZ2xvYmFsICYmIHRoaXMgaW5zdGFuY2VvZiB3cmFwcGVyKSB7XG4gICAgICBmbiA9IEN0b3IgfHwgY3JlYXRlQ3RvcldyYXBwZXIoZnVuYyk7XG4gICAgfVxuICAgIHJldHVybiBmbi5hcHBseSh0aGlzQmluZGluZywgYXJncyk7XG4gIH1cbiAgcmV0dXJuIHdyYXBwZXI7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlSHlicmlkV3JhcHBlcjtcbiJdfQ==","(function (global){\nvar createCtorWrapper = require(519);\n\n/** Used to compose bitmasks for wrapper metadata. */\nvar BIND_FLAG = 1;\n\n/**\n * Creates a function that wraps `func` and invokes it with the optional `this`\n * binding of `thisArg` and the `partials` prepended to those provided to\n * the wrapper.\n *\n * @private\n * @param {Function} func The function to partially apply arguments to.\n * @param {number} bitmask The bitmask of flags. See `createWrapper` for more details.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} partials The arguments to prepend to those provided to the new function.\n * @returns {Function} Returns the new bound function.\n */\nfunction createPartialWrapper(func, bitmask, thisArg, partials) {\n  var isBind = bitmask & BIND_FLAG,\n      Ctor = createCtorWrapper(func);\n\n  function wrapper() {\n    // Avoid `arguments` object use disqualifying optimizations by\n    // converting it to an array before providing it `func`.\n    var argsIndex = -1,\n        argsLength = arguments.length,\n        leftIndex = -1,\n        leftLength = partials.length,\n        args = Array(argsLength + leftLength);\n\n    while (++leftIndex < leftLength) {\n      args[leftIndex] = partials[leftIndex];\n    }\n    while (argsLength--) {\n      args[leftIndex++] = arguments[++argsIndex];\n    }\n    var fn = (this && this !== global && this instanceof wrapper) ? Ctor : func;\n    return fn.apply(isBind ? thisArg : this, args);\n  }\n  return wrapper;\n}\n\nmodule.exports = createPartialWrapper;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy90YWJsZS1qcy9ub2RlX21vZHVsZXMvZGlhZ3JhbS1qcy9ub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2NyZWF0ZVBhcnRpYWxXcmFwcGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgY3JlYXRlQ3RvcldyYXBwZXIgPSByZXF1aXJlKCcuL2NyZWF0ZUN0b3JXcmFwcGVyJyk7XG5cbi8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIHdyYXBwZXIgbWV0YWRhdGEuICovXG52YXIgQklORF9GTEFHID0gMTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCB3cmFwcyBgZnVuY2AgYW5kIGludm9rZXMgaXQgd2l0aCB0aGUgb3B0aW9uYWwgYHRoaXNgXG4gKiBiaW5kaW5nIG9mIGB0aGlzQXJnYCBhbmQgdGhlIGBwYXJ0aWFsc2AgcHJlcGVuZGVkIHRvIHRob3NlIHByb3ZpZGVkIHRvXG4gKiB0aGUgd3JhcHBlci5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gcGFydGlhbGx5IGFwcGx5IGFyZ3VtZW50cyB0by5cbiAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIG9mIGZsYWdzLiBTZWUgYGNyZWF0ZVdyYXBwZXJgIGZvciBtb3JlIGRldGFpbHMuXG4gKiBAcGFyYW0geyp9IHRoaXNBcmcgVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cbiAqIEBwYXJhbSB7QXJyYXl9IHBhcnRpYWxzIFRoZSBhcmd1bWVudHMgdG8gcHJlcGVuZCB0byB0aG9zZSBwcm92aWRlZCB0byB0aGUgbmV3IGZ1bmN0aW9uLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYm91bmQgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVBhcnRpYWxXcmFwcGVyKGZ1bmMsIGJpdG1hc2ssIHRoaXNBcmcsIHBhcnRpYWxzKSB7XG4gIHZhciBpc0JpbmQgPSBiaXRtYXNrICYgQklORF9GTEFHLFxuICAgICAgQ3RvciA9IGNyZWF0ZUN0b3JXcmFwcGVyKGZ1bmMpO1xuXG4gIGZ1bmN0aW9uIHdyYXBwZXIoKSB7XG4gICAgLy8gQXZvaWQgYGFyZ3VtZW50c2Agb2JqZWN0IHVzZSBkaXNxdWFsaWZ5aW5nIG9wdGltaXphdGlvbnMgYnlcbiAgICAvLyBjb252ZXJ0aW5nIGl0IHRvIGFuIGFycmF5IGJlZm9yZSBwcm92aWRpbmcgaXQgYGZ1bmNgLlxuICAgIHZhciBhcmdzSW5kZXggPSAtMSxcbiAgICAgICAgYXJnc0xlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGgsXG4gICAgICAgIGxlZnRJbmRleCA9IC0xLFxuICAgICAgICBsZWZ0TGVuZ3RoID0gcGFydGlhbHMubGVuZ3RoLFxuICAgICAgICBhcmdzID0gQXJyYXkoYXJnc0xlbmd0aCArIGxlZnRMZW5ndGgpO1xuXG4gICAgd2hpbGUgKCsrbGVmdEluZGV4IDwgbGVmdExlbmd0aCkge1xuICAgICAgYXJnc1tsZWZ0SW5kZXhdID0gcGFydGlhbHNbbGVmdEluZGV4XTtcbiAgICB9XG4gICAgd2hpbGUgKGFyZ3NMZW5ndGgtLSkge1xuICAgICAgYXJnc1tsZWZ0SW5kZXgrK10gPSBhcmd1bWVudHNbKythcmdzSW5kZXhdO1xuICAgIH1cbiAgICB2YXIgZm4gPSAodGhpcyAmJiB0aGlzICE9PSBnbG9iYWwgJiYgdGhpcyBpbnN0YW5jZW9mIHdyYXBwZXIpID8gQ3RvciA6IGZ1bmM7XG4gICAgcmV0dXJuIGZuLmFwcGx5KGlzQmluZCA/IHRoaXNBcmcgOiB0aGlzLCBhcmdzKTtcbiAgfVxuICByZXR1cm4gd3JhcHBlcjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVQYXJ0aWFsV3JhcHBlcjtcbiJdfQ==","var baseSetData = require(505),\n    createBindWrapper = require(517),\n    createHybridWrapper = require(521),\n    createPartialWrapper = require(522),\n    getData = require(527),\n    mergeData = require(541),\n    setData = require(546);\n\n/** Used to compose bitmasks for wrapper metadata. */\nvar BIND_FLAG = 1,\n    BIND_KEY_FLAG = 2,\n    PARTIAL_FLAG = 32,\n    PARTIAL_RIGHT_FLAG = 64;\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates a function that either curries or invokes `func` with optional\n * `this` binding and partially applied arguments.\n *\n * @private\n * @param {Function|string} func The function or method name to reference.\n * @param {number} bitmask The bitmask of flags.\n *  The bitmask may be composed of the following flags:\n *     1 - `_.bind`\n *     2 - `_.bindKey`\n *     4 - `_.curry` or `_.curryRight` of a bound function\n *     8 - `_.curry`\n *    16 - `_.curryRight`\n *    32 - `_.partial`\n *    64 - `_.partialRight`\n *   128 - `_.rearg`\n *   256 - `_.ary`\n * @param {*} [thisArg] The `this` binding of `func`.\n * @param {Array} [partials] The arguments to be partially applied.\n * @param {Array} [holders] The `partials` placeholder indexes.\n * @param {Array} [argPos] The argument positions of the new function.\n * @param {number} [ary] The arity cap of `func`.\n * @param {number} [arity] The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createWrapper(func, bitmask, thisArg, partials, holders, argPos, ary, arity) {\n  var isBindKey = bitmask & BIND_KEY_FLAG;\n  if (!isBindKey && typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var length = partials ? partials.length : 0;\n  if (!length) {\n    bitmask &= ~(PARTIAL_FLAG | PARTIAL_RIGHT_FLAG);\n    partials = holders = null;\n  }\n  length -= (holders ? holders.length : 0);\n  if (bitmask & PARTIAL_RIGHT_FLAG) {\n    var partialsRight = partials,\n        holdersRight = holders;\n\n    partials = holders = null;\n  }\n  var data = isBindKey ? null : getData(func),\n      newData = [func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity];\n\n  if (data) {\n    mergeData(newData, data);\n    bitmask = newData[1];\n    arity = newData[9];\n  }\n  newData[9] = arity == null\n    ? (isBindKey ? 0 : func.length)\n    : (nativeMax(arity - length, 0) || 0);\n\n  if (bitmask == BIND_FLAG) {\n    var result = createBindWrapper(newData[0], newData[2]);\n  } else if ((bitmask == PARTIAL_FLAG || bitmask == (BIND_FLAG | PARTIAL_FLAG)) && !newData[4].length) {\n    result = createPartialWrapper.apply(undefined, newData);\n  } else {\n    result = createHybridWrapper.apply(undefined, newData);\n  }\n  var setter = data ? baseSetData : setData;\n  return setter(result, newData);\n}\n\nmodule.exports = createWrapper;\n","var metaMap = require(542),\n    noop = require(566);\n\n/**\n * Gets metadata for `func`.\n *\n * @private\n * @param {Function} func The function to query.\n * @returns {*} Returns the metadata for `func`.\n */\nvar getData = !metaMap ? noop : function(func) {\n  return metaMap.get(func);\n};\n\nmodule.exports = getData;\n","var realNames = require(543);\n\n/**\n * Gets the name of `func`.\n *\n * @private\n * @param {Function} func The function to query.\n * @returns {string} Returns the function name.\n */\nfunction getFuncName(func) {\n  var result = func.name,\n      array = realNames[result],\n      length = array ? array.length : 0;\n\n  while (length--) {\n    var data = array[length],\n        otherFunc = data.func;\n    if (otherFunc == null || otherFunc == func) {\n      return data.name;\n    }\n  }\n  return result;\n}\n\nmodule.exports = getFuncName;\n","var LazyWrapper = require(480),\n    getData = require(527),\n    getFuncName = require(528),\n    lodash = require(475);\n\n/**\n * Checks if `func` has a lazy counterpart.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` has a lazy counterpart, else `false`.\n */\nfunction isLaziable(func) {\n  var funcName = getFuncName(func);\n  if (!(funcName in LazyWrapper.prototype)) {\n    return false;\n  }\n  var other = lodash[funcName];\n  if (func === other) {\n    return true;\n  }\n  var data = getData(other);\n  return !!data && func === data[0];\n}\n\nmodule.exports = isLaziable;\n","var arrayCopy = require(483),\n    composeArgs = require(512),\n    composeArgsRight = require(513),\n    replaceHolders = require(545);\n\n/** Used to compose bitmasks for wrapper metadata. */\nvar BIND_FLAG = 1,\n    CURRY_BOUND_FLAG = 4,\n    CURRY_FLAG = 8,\n    ARY_FLAG = 128,\n    REARG_FLAG = 256;\n\n/** Used as the internal argument placeholder. */\nvar PLACEHOLDER = '__lodash_placeholder__';\n\n/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * Merges the function metadata of `source` into `data`.\n *\n * Merging metadata reduces the number of wrappers required to invoke a function.\n * This is possible because methods like `_.bind`, `_.curry`, and `_.partial`\n * may be applied regardless of execution order. Methods like `_.ary` and `_.rearg`\n * augment function arguments, making the order in which they are executed important,\n * preventing the merging of metadata. However, we make an exception for a safe\n * common case where curried functions have `_.ary` and or `_.rearg` applied.\n *\n * @private\n * @param {Array} data The destination metadata.\n * @param {Array} source The source metadata.\n * @returns {Array} Returns `data`.\n */\nfunction mergeData(data, source) {\n  var bitmask = data[1],\n      srcBitmask = source[1],\n      newBitmask = bitmask | srcBitmask,\n      isCommon = newBitmask < ARY_FLAG;\n\n  var isCombo =\n    (srcBitmask == ARY_FLAG && bitmask == CURRY_FLAG) ||\n    (srcBitmask == ARY_FLAG && bitmask == REARG_FLAG && data[7].length <= source[8]) ||\n    (srcBitmask == (ARY_FLAG | REARG_FLAG) && bitmask == CURRY_FLAG);\n\n  // Exit early if metadata can't be merged.\n  if (!(isCommon || isCombo)) {\n    return data;\n  }\n  // Use source `thisArg` if available.\n  if (srcBitmask & BIND_FLAG) {\n    data[2] = source[2];\n    // Set when currying a bound function.\n    newBitmask |= (bitmask & BIND_FLAG) ? 0 : CURRY_BOUND_FLAG;\n  }\n  // Compose partial arguments.\n  var value = source[3];\n  if (value) {\n    var partials = data[3];\n    data[3] = partials ? composeArgs(partials, value, source[4]) : arrayCopy(value);\n    data[4] = partials ? replaceHolders(data[3], PLACEHOLDER) : arrayCopy(source[4]);\n  }\n  // Compose partial right arguments.\n  value = source[5];\n  if (value) {\n    partials = data[5];\n    data[5] = partials ? composeArgsRight(partials, value, source[6]) : arrayCopy(value);\n    data[6] = partials ? replaceHolders(data[5], PLACEHOLDER) : arrayCopy(source[6]);\n  }\n  // Use source `argPos` if available.\n  value = source[7];\n  if (value) {\n    data[7] = arrayCopy(value);\n  }\n  // Use source `ary` if it's smaller.\n  if (srcBitmask & ARY_FLAG) {\n    data[8] = data[8] == null ? source[8] : nativeMin(data[8], source[8]);\n  }\n  // Use source `arity` if one is not provided.\n  if (data[9] == null) {\n    data[9] = source[9];\n  }\n  // Use source `func` and merge bitmasks.\n  data[0] = source[0];\n  data[1] = newBitmask;\n\n  return data;\n}\n\nmodule.exports = mergeData;\n","(function (global){\nvar getNative = require(531);\n\n/** Native method references. */\nvar WeakMap = getNative(global, 'WeakMap');\n\n/** Used to store function metadata. */\nvar metaMap = WeakMap && new WeakMap;\n\nmodule.exports = metaMap;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy90YWJsZS1qcy9ub2RlX21vZHVsZXMvZGlhZ3JhbS1qcy9ub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL21ldGFNYXAuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZ2V0TmF0aXZlID0gcmVxdWlyZSgnLi9nZXROYXRpdmUnKTtcblxuLyoqIE5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBXZWFrTWFwID0gZ2V0TmF0aXZlKGdsb2JhbCwgJ1dlYWtNYXAnKTtcblxuLyoqIFVzZWQgdG8gc3RvcmUgZnVuY3Rpb24gbWV0YWRhdGEuICovXG52YXIgbWV0YU1hcCA9IFdlYWtNYXAgJiYgbmV3IFdlYWtNYXA7XG5cbm1vZHVsZS5leHBvcnRzID0gbWV0YU1hcDtcbiJdfQ==","/** Used to lookup unminified function names. */\nvar realNames = {};\n\nmodule.exports = realNames;\n","var arrayCopy = require(483),\n    isIndex = require(534);\n\n/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * Reorder `array` according to the specified indexes where the element at\n * the first index is assigned as the first element, the element at\n * the second index is assigned as the second element, and so on.\n *\n * @private\n * @param {Array} array The array to reorder.\n * @param {Array} indexes The arranged array indexes.\n * @returns {Array} Returns `array`.\n */\nfunction reorder(array, indexes) {\n  var arrLength = array.length,\n      length = nativeMin(indexes.length, arrLength),\n      oldArray = arrayCopy(array);\n\n  while (length--) {\n    var index = indexes[length];\n    array[length] = isIndex(index, arrLength) ? oldArray[index] : undefined;\n  }\n  return array;\n}\n\nmodule.exports = reorder;\n","/** Used as the internal argument placeholder. */\nvar PLACEHOLDER = '__lodash_placeholder__';\n\n/**\n * Replaces all `placeholder` elements in `array` with an internal placeholder\n * and returns an array of their indexes.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {*} placeholder The placeholder to replace.\n * @returns {Array} Returns the new array of placeholder indexes.\n */\nfunction replaceHolders(array, placeholder) {\n  var index = -1,\n      length = array.length,\n      resIndex = -1,\n      result = [];\n\n  while (++index < length) {\n    if (array[index] === placeholder) {\n      array[index] = PLACEHOLDER;\n      result[++resIndex] = index;\n    }\n  }\n  return result;\n}\n\nmodule.exports = replaceHolders;\n","var baseSetData = require(505),\n    now = require(477);\n\n/** Used to detect when a function becomes hot. */\nvar HOT_COUNT = 150,\n    HOT_SPAN = 16;\n\n/**\n * Sets metadata for `func`.\n *\n * **Note:** If this function becomes hot, i.e. is invoked a lot in a short\n * period of time, it will trip its breaker and transition to an identity function\n * to avoid garbage collection pauses in V8. See [V8 issue 2070](https://code.google.com/p/v8/issues/detail?id=2070)\n * for more details.\n *\n * @private\n * @param {Function} func The function to associate metadata with.\n * @param {*} data The metadata.\n * @returns {Function} Returns `func`.\n */\nvar setData = (function() {\n  var count = 0,\n      lastCalled = 0;\n\n  return function(key, value) {\n    var stamp = now(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return key;\n      }\n    } else {\n      count = 0;\n    }\n    return baseSetData(key, value);\n  };\n}());\n\nmodule.exports = setData;\n","/**\n * An implementation of `_.uniq` optimized for sorted arrays without support\n * for callback shorthands and `this` binding.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The function invoked per iteration.\n * @returns {Array} Returns the new duplicate-value-free array.\n */\nfunction sortedUniq(array, iteratee) {\n  var seen,\n      index = -1,\n      length = array.length,\n      resIndex = -1,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value, index, array) : value;\n\n    if (!index || seen !== computed) {\n      seen = computed;\n      result[++resIndex] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = sortedUniq;\n","var LazyWrapper = require(480),\n    LodashWrapper = require(481),\n    arrayCopy = require(483);\n\n/**\n * Creates a clone of `wrapper`.\n *\n * @private\n * @param {Object} wrapper The wrapper to clone.\n * @returns {Object} Returns the cloned wrapper.\n */\nfunction wrapperClone(wrapper) {\n  return wrapper instanceof LazyWrapper\n    ? wrapper.clone()\n    : new LodashWrapper(wrapper.__wrapped__, wrapper.__chain__, arrayCopy(wrapper.__actions__));\n}\n\nmodule.exports = wrapperClone;\n","(function (global){\nvar baseIsFunction = require(498),\n    getNative = require(531);\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]';\n\n/** Used for native method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](https://people.mozilla.org/~jorendorff/es6-draft.html#sec-object.prototype.tostring)\n * of values.\n */\nvar objToString = objectProto.toString;\n\n/** Native method references. */\nvar Uint8Array = getNative(global, 'Uint8Array');\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nvar isFunction = !(baseIsFunction(/x/) || (Uint8Array && !baseIsFunction(Uint8Array))) ? baseIsFunction : function(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in older versions of Chrome and Safari which return 'function' for regexes\n  // and Safari 8 equivalents which return 'object' for typed array constructors.\n  return objToString.call(value) == funcTag;\n};\n\nmodule.exports = isFunction;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy90YWJsZS1qcy9ub2RlX21vZHVsZXMvZGlhZ3JhbS1qcy9ub2RlX21vZHVsZXMvbG9kYXNoL2xhbmcvaXNGdW5jdGlvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbInZhciBiYXNlSXNGdW5jdGlvbiA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2Jhc2VJc0Z1bmN0aW9uJyksXG4gICAgZ2V0TmF0aXZlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvZ2V0TmF0aXZlJyk7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBmdW5jVGFnID0gJ1tvYmplY3QgRnVuY3Rpb25dJztcblxuLyoqIFVzZWQgZm9yIG5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZSBbYHRvU3RyaW5nVGFnYF0oaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmpUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKiogTmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIFVpbnQ4QXJyYXkgPSBnZXROYXRpdmUoZ2xvYmFsLCAnVWludDhBcnJheScpO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgRnVuY3Rpb25gIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0Z1bmN0aW9uKF8pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNGdW5jdGlvbigvYWJjLyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG52YXIgaXNGdW5jdGlvbiA9ICEoYmFzZUlzRnVuY3Rpb24oL3gvKSB8fCAoVWludDhBcnJheSAmJiAhYmFzZUlzRnVuY3Rpb24oVWludDhBcnJheSkpKSA/IGJhc2VJc0Z1bmN0aW9uIDogZnVuY3Rpb24odmFsdWUpIHtcbiAgLy8gVGhlIHVzZSBvZiBgT2JqZWN0I3RvU3RyaW5nYCBhdm9pZHMgaXNzdWVzIHdpdGggdGhlIGB0eXBlb2ZgIG9wZXJhdG9yXG4gIC8vIGluIG9sZGVyIHZlcnNpb25zIG9mIENocm9tZSBhbmQgU2FmYXJpIHdoaWNoIHJldHVybiAnZnVuY3Rpb24nIGZvciByZWdleGVzXG4gIC8vIGFuZCBTYWZhcmkgOCBlcXVpdmFsZW50cyB3aGljaCByZXR1cm4gJ29iamVjdCcgZm9yIHR5cGVkIGFycmF5IGNvbnN0cnVjdG9ycy5cbiAgcmV0dXJuIG9ialRvU3RyaW5nLmNhbGwodmFsdWUpID09IGZ1bmNUYWc7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGlzRnVuY3Rpb247XG4iXX0=","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @category Utility\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var object = { 'user': 'fred' };\n * var getter = _.constant(object);\n *\n * getter() === object;\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n","/**\n * A no-operation function that returns `undefined` regardless of the\n * arguments it receives.\n *\n * @static\n * @memberOf _\n * @category Utility\n * @example\n *\n * var object = { 'user': 'fred' };\n *\n * _.noop(object) === undefined;\n * // => true\n */\nfunction noop() {\n  // No operation performed.\n}\n\nmodule.exports = noop;\n","\r\nvar isArray = function(obj) {\r\n  return Object.prototype.toString.call(obj) === '[object Array]';\r\n};\r\n\r\nvar annotate = function() {\r\n  var args = Array.prototype.slice.call(arguments);\r\n  \r\n  if (args.length === 1 && isArray(args[0])) {\r\n    args = args[0];\r\n  }\r\n\r\n  var fn = args.pop();\r\n\r\n  fn.$inject = args;\r\n\r\n  return fn;\r\n};\r\n\r\n\r\n// Current limitations:\r\n// - can't put into \"function arg\" comments\r\n// function /* (no parenthesis like this) */ (){}\r\n// function abc( /* xx (no parenthesis like this) */ a, b) {}\r\n//\r\n// Just put the comment before function or inside:\r\n// /* (((this is fine))) */ function(a, b) {}\r\n// function abc(a) { /* (((this is fine))) */}\r\n\r\nvar FN_ARGS = /^function/s*[^/(]*/(/s*([^/)]*)/)/m;\r\nvar FN_ARG = ////*([^/*]*)/*///m;\r\n\r\nvar parse = function(fn) {\r\n  if (typeof fn !== 'function') {\r\n    throw new Error('Cannot annotate \"' + fn + '\". Expected a function!');\r\n  }\r\n\r\n  var match = fn.toString().match(FN_ARGS);\r\n  return match[1] && match[1].split(',').map(function(arg) {\r\n    match = arg.match(FN_ARG);\r\n    return match ? match[1].trim() : arg.trim();\r\n  }) || [];\r\n};\r\n\r\n\r\nexports.annotate = annotate;\r\nexports.parse = parse;\r\nexports.isArray = isArray;\r\n","module.exports = {\r\n  annotate: require(568).annotate,\r\n  Module: require(571),\r\n  Injector: require(570)\r\n};\r\n","var Module = require(571);\r\nvar autoAnnotate = require(568).parse;\r\nvar annotate = require(568).annotate;\r\nvar isArray = require(568).isArray;\r\n\r\n\r\nvar Injector = function(modules, parent) {\r\n  parent = parent || {\r\n    get: function(name) {\r\n      currentlyResolving.push(name);\r\n      throw error('No provider for \"' + name + '\"!');\r\n    }\r\n  };\r\n\r\n  var currentlyResolving = [];\r\n  var providers = this._providers = Object.create(parent._providers || null);\r\n  var instances = this._instances = Object.create(null);\r\n\r\n  var self = instances.injector = this;\r\n\r\n  var error = function(msg) {\r\n    var stack = currentlyResolving.join(' -> ');\r\n    currentlyResolving.length = 0;\r\n    return new Error(stack ? msg + ' (Resolving: ' + stack + ')' : msg);\r\n  };\r\n\r\n  var get = function(name) {\r\n    if (!providers[name] && name.indexOf('.') !== -1) {\r\n      var parts = name.split('.');\r\n      var pivot = get(parts.shift());\r\n\r\n      while(parts.length) {\r\n        pivot = pivot[parts.shift()];\r\n      }\r\n\r\n      return pivot;\r\n    }\r\n\r\n    if (Object.hasOwnProperty.call(instances, name)) {\r\n      return instances[name];\r\n    }\r\n\r\n    if (Object.hasOwnProperty.call(providers, name)) {\r\n      if (currentlyResolving.indexOf(name) !== -1) {\r\n        currentlyResolving.push(name);\r\n        throw error('Cannot resolve circular dependency!');\r\n      }\r\n\r\n      currentlyResolving.push(name);\r\n      instances[name] = providers[name][0](providers[name][1]);\r\n      currentlyResolving.pop();\r\n\r\n      return instances[name];\r\n    }\r\n\r\n    return parent.get(name);\r\n  };\r\n\r\n  var instantiate = function(Type) {\r\n    var instance = Object.create(Type.prototype);\r\n    var returned = invoke(Type, instance);\r\n\r\n    return typeof returned === 'object' ? returned : instance;\r\n  };\r\n\r\n  var invoke = function(fn, context) {\r\n    if (typeof fn !== 'function') {\r\n      if (isArray(fn)) {\r\n        fn = annotate(fn.slice());\r\n      } else {\r\n        throw new Error('Cannot invoke \"' + fn + '\". Expected a function!');\r\n      }\r\n    }\r\n\r\n    var inject = fn.$inject && fn.$inject || autoAnnotate(fn);\r\n    var dependencies = inject.map(function(dep) {\r\n      return get(dep);\r\n    });\r\n\r\n    // TODO(vojta): optimize without apply\r\n    return fn.apply(context, dependencies);\r\n  };\r\n\r\n\r\n  var createPrivateInjectorFactory = function(privateChildInjector) {\r\n    return annotate(function(key) {\r\n      return privateChildInjector.get(key);\r\n    });\r\n  };\r\n\r\n  var createChild = function(modules, forceNewInstances) {\r\n    if (forceNewInstances && forceNewInstances.length) {\r\n      var fromParentModule = Object.create(null);\r\n      var matchedScopes = Object.create(null);\r\n\r\n      var privateInjectorsCache = [];\r\n      var privateChildInjectors = [];\r\n      var privateChildFactories = [];\r\n\r\n      var provider;\r\n      var cacheIdx;\r\n      var privateChildInjector;\r\n      var privateChildInjectorFactory;\r\n      for (var name in providers) {\r\n        provider = providers[name];\r\n\r\n        if (forceNewInstances.indexOf(name) !== -1) {\r\n          if (provider[2] === 'private') {\r\n            cacheIdx = privateInjectorsCache.indexOf(provider[3]);\r\n            if (cacheIdx === -1) {\r\n              privateChildInjector = provider[3].createChild([], forceNewInstances);\r\n              privateChildInjectorFactory = createPrivateInjectorFactory(privateChildInjector);\r\n              privateInjectorsCache.push(provider[3]);\r\n              privateChildInjectors.push(privateChildInjector);\r\n              privateChildFactories.push(privateChildInjectorFactory);\r\n              fromParentModule[name] = [privateChildInjectorFactory, name, 'private', privateChildInjector];\r\n            } else {\r\n              fromParentModule[name] = [privateChildFactories[cacheIdx], name, 'private', privateChildInjectors[cacheIdx]];\r\n            }\r\n          } else {\r\n            fromParentModule[name] = [provider[2], provider[1]];\r\n          }\r\n          matchedScopes[name] = true;\r\n        }\r\n\r\n        if ((provider[2] === 'factory' || provider[2] === 'type') && provider[1].$scope) {\r\n          forceNewInstances.forEach(function(scope) {\r\n            if (provider[1].$scope.indexOf(scope) !== -1) {\r\n              fromParentModule[name] = [provider[2], provider[1]];\r\n              matchedScopes[scope] = true;\r\n            }\r\n          });\r\n        }\r\n      }\r\n\r\n      forceNewInstances.forEach(function(scope) {\r\n        if (!matchedScopes[scope]) {\r\n          throw new Error('No provider for \"' + scope + '\". Cannot use provider from the parent!');\r\n        }\r\n      });\r\n\r\n      modules.unshift(fromParentModule);\r\n    }\r\n\r\n    return new Injector(modules, self);\r\n  };\r\n\r\n  var factoryMap = {\r\n    factory: invoke,\r\n    type: instantiate,\r\n    value: function(value) {\r\n      return value;\r\n    }\r\n  };\r\n\r\n  modules.forEach(function(module) {\r\n\r\n    function arrayUnwrap(type, value) {\r\n      if (type !== 'value' && isArray(value)) {\r\n        value = annotate(value.slice());\r\n      }\r\n\r\n      return value;\r\n    }\r\n\r\n    // TODO(vojta): handle wrong inputs (modules)\r\n    if (module instanceof Module) {\r\n      module.forEach(function(provider) {\r\n        var name = provider[0];\r\n        var type = provider[1];\r\n        var value = provider[2];\r\n\r\n        providers[name] = [factoryMap[type], arrayUnwrap(type, value), type];\r\n      });\r\n    } else if (typeof module === 'object') {\r\n      if (module.__exports__) {\r\n        var clonedModule = Object.keys(module).reduce(function(m, key) {\r\n          if (key.substring(0, 2) !== '__') {\r\n            m[key] = module[key];\r\n          }\r\n          return m;\r\n        }, Object.create(null));\r\n\r\n        var privateInjector = new Injector((module.__modules__ || []).concat([clonedModule]), self);\r\n        var getFromPrivateInjector = annotate(function(key) {\r\n          return privateInjector.get(key);\r\n        });\r\n        module.__exports__.forEach(function(key) {\r\n          providers[key] = [getFromPrivateInjector, key, 'private', privateInjector];\r\n        });\r\n      } else {\r\n        Object.keys(module).forEach(function(name) {\r\n          if (module[name][2] === 'private') {\r\n            providers[name] = module[name];\r\n            return;\r\n          }\r\n\r\n          var type = module[name][0];\r\n          var value = module[name][1];\r\n\r\n          providers[name] = [factoryMap[type], arrayUnwrap(type, value), type];\r\n        });\r\n      }\r\n    }\r\n  });\r\n\r\n  // public API\r\n  this.get = get;\r\n  this.invoke = invoke;\r\n  this.instantiate = instantiate;\r\n  this.createChild = createChild;\r\n};\r\n\r\nmodule.exports = Injector;\r\n","var Module = function() {\r\n  var providers = [];\r\n\r\n  this.factory = function(name, factory) {\r\n    providers.push([name, 'factory', factory]);\r\n    return this;\r\n  };\r\n\r\n  this.value = function(name, value) {\r\n    providers.push([name, 'value', value]);\r\n    return this;\r\n  };\r\n\r\n  this.type = function(name, type) {\r\n    providers.push([name, 'type', type]);\r\n    return this;\r\n  };\r\n\r\n  this.forEach = function(iterator) {\r\n    providers.forEach(iterator);\r\n  };\r\n};\r\n\r\nmodule.exports = Module;\r\n","var arrayEvery = require(580),\n    baseCallback = require(584),\n    baseEvery = require(587),\n    isArray = require(622),\n    isIterateeCall = require(613);\n\n/**\n * Checks if `predicate` returns truthy for **all** elements of `collection`.\n * The predicate is bound to `thisArg` and invoked with three arguments:\n * (value, index|key, collection).\n *\n * If a property name is provided for `predicate` the created `_.property`\n * style callback returns the property value of the given element.\n *\n * If a value is also provided for `thisArg` the created `_.matchesProperty`\n * style callback returns `true` for elements that have a matching property\n * value, else `false`.\n *\n * If an object is provided for `predicate` the created `_.matches` style\n * callback returns `true` for elements that have the properties of the given\n * object, else `false`.\n *\n * @static\n * @memberOf _\n * @alias all\n * @category Collection\n * @param {Array|Object|string} collection The collection to iterate over.\n * @param {Function|Object|string} [predicate=_.identity] The function invoked\n *  per iteration.\n * @param {*} [thisArg] The `this` binding of `predicate`.\n * @returns {boolean} Returns `true` if all elements pass the predicate check,\n *  else `false`.\n * @example\n *\n * _.every([true, 1, null, 'yes'], Boolean);\n * // => false\n *\n * var users = [\n *   { 'user': 'barney', 'active': false },\n *   { 'user': 'fred',   'active': false }\n * ];\n *\n * // using the `_.matches` callback shorthand\n * _.every(users, { 'user': 'barney', 'active': false });\n * // => false\n *\n * // using the `_.matchesProperty` callback shorthand\n * _.every(users, 'active', false);\n * // => true\n *\n * // using the `_.property` callback shorthand\n * _.every(users, 'active');\n * // => false\n */\nfunction every(collection, predicate, thisArg) {\n  var func = isArray(collection) ? arrayEvery : baseEvery;\n  if (thisArg && isIterateeCall(collection, predicate, thisArg)) {\n    predicate = null;\n  }\n  if (typeof predicate != 'function' || thisArg !== undefined) {\n    predicate = baseCallback(predicate, thisArg, 3);\n  }\n  return func(collection, predicate);\n}\n\nmodule.exports = every;\n","var isObject = require(625),\n    now = require(576);\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Native method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed invocations. Provide an options object to indicate that `func`\n * should be invoked on the leading and/or trailing edge of the `wait` timeout.\n * Subsequent calls to the debounced function return the result of the last\n * `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is invoked\n * on the trailing edge of the timeout only if the the debounced function is\n * invoked more than once during the `wait` timeout.\n *\n * See [David Corbacho's article](http://drupalmotion.com/article/debounce-and-throttle-visual-explanation)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options] The options object.\n * @param {boolean} [options.leading=false] Specify invoking on the leading\n *  edge of the timeout.\n * @param {number} [options.maxWait] The maximum time `func` is allowed to be\n *  delayed before it is invoked.\n * @param {boolean} [options.trailing=true] Specify invoking on the trailing\n *  edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // avoid costly calculations while the window size is in flux\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // invoke `sendMail` when the click event is fired, debouncing subsequent calls\n * jQuery('#postbox').on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // ensure `batchLog` is invoked once after 1 second of debounced calls\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', _.debounce(batchLog, 250, {\n *   'maxWait': 1000\n * }));\n *\n * // cancel a debounced call\n * var todoChanges = _.debounce(batchLog, 1000);\n * Object.observe(models.todo, todoChanges);\n *\n * Object.observe(models, function(changes) {\n *   if (_.find(changes, { 'user': 'todo', 'type': 'delete'})) {\n *     todoChanges.cancel();\n *   }\n * }, ['delete']);\n *\n * // ...at some point `models.todo` is changed\n * models.todo.completed = true;\n *\n * // ...before 1 second has passed `models.todo` is deleted\n * // which cancels the debounced `todoChanges` call\n * delete models.todo;\n */\nfunction debounce(func, wait, options) {\n  var args,\n      maxTimeoutId,\n      result,\n      stamp,\n      thisArg,\n      timeoutId,\n      trailingCall,\n      lastCalled = 0,\n      maxWait = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = wait < 0 ? 0 : (+wait || 0);\n  if (options === true) {\n    var leading = true;\n    trailing = false;\n  } else if (isObject(options)) {\n    leading = options.leading;\n    maxWait = 'maxWait' in options && nativeMax(+options.maxWait || 0, wait);\n    trailing = 'trailing' in options ? options.trailing : trailing;\n  }\n\n  function cancel() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n    if (maxTimeoutId) {\n      clearTimeout(maxTimeoutId);\n    }\n    maxTimeoutId = timeoutId = trailingCall = undefined;\n  }\n\n  function delayed() {\n    var remaining = wait - (now() - stamp);\n    if (remaining <= 0 || remaining > wait) {\n      if (maxTimeoutId) {\n        clearTimeout(maxTimeoutId);\n      }\n      var isCalled = trailingCall;\n      maxTimeoutId = timeoutId = trailingCall = undefined;\n      if (isCalled) {\n        lastCalled = now();\n        result = func.apply(thisArg, args);\n        if (!timeoutId && !maxTimeoutId) {\n          args = thisArg = null;\n        }\n      }\n    } else {\n      timeoutId = setTimeout(delayed, remaining);\n    }\n  }\n\n  function maxDelayed() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n    maxTimeoutId = timeoutId = trailingCall = undefined;\n    if (trailing || (maxWait !== wait)) {\n      lastCalled = now();\n      result = func.apply(thisArg, args);\n      if (!timeoutId && !maxTimeoutId) {\n        args = thisArg = null;\n      }\n    }\n  }\n\n  function debounced() {\n    args = arguments;\n    stamp = now();\n    thisArg = this;\n    trailingCall = trailing && (timeoutId || !leading);\n\n    if (maxWait === false) {\n      var leadingCall = leading && !timeoutId;\n    } else {\n      if (!maxTimeoutId && !leading) {\n        lastCalled = stamp;\n      }\n      var remaining = maxWait - (stamp - lastCalled),\n          isCalled = remaining <= 0 || remaining > maxWait;\n\n      if (isCalled) {\n        if (maxTimeoutId) {\n          maxTimeoutId = clearTimeout(maxTimeoutId);\n        }\n        lastCalled = stamp;\n        result = func.apply(thisArg, args);\n      }\n      else if (!maxTimeoutId) {\n        maxTimeoutId = setTimeout(maxDelayed, remaining);\n      }\n    }\n    if (isCalled && timeoutId) {\n      timeoutId = clearTimeout(timeoutId);\n    }\n    else if (!timeoutId && wait !== maxWait) {\n      timeoutId = setTimeout(delayed, wait);\n    }\n    if (leadingCall) {\n      isCalled = true;\n      result = func.apply(thisArg, args);\n    }\n    if (isCalled && !timeoutId && !maxTimeoutId) {\n      args = thisArg = null;\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","/**\n * A specialized version of `_.every` for arrays without support for callback\n * shorthands and `this` binding.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if all elements pass the predicate check,\n *  else `false`.\n */\nfunction arrayEvery(array, predicate) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    if (!predicate(array[index], index, array)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = arrayEvery;\n","var baseEach = require(586);\n\n/**\n * The base implementation of `_.every` without support for callback\n * shorthands and `this` binding.\n *\n * @private\n * @param {Array|Object|string} collection The collection to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if all elements pass the predicate check,\n *  else `false`\n */\nfunction baseEvery(collection, predicate) {\n  var result = true;\n  baseEach(collection, function(value, index, collection) {\n    result = !!predicate(value, index, collection);\n    return result;\n  });\n  return result;\n}\n\nmodule.exports = baseEvery;\n","/**\n * Set attribute `name` to `val`, or get attr `name`.\n *\n * @param {Element} el\n * @param {String} name\n * @param {String} [val]\n * @api public\n */\n\nmodule.exports = function(el, name, val) {\n  // get\n  if (arguments.length == 2) {\n    return el.getAttribute(name);\n  }\n\n  // remove\n  if (val === null) {\n    return el.removeAttribute(name);\n  }\n\n  // set\n  el.setAttribute(name, val);\n\n  return el;\n};","module.exports = require(644);","module.exports = require(645);","module.exports = require(646);","var matches = require(646)\n\nmodule.exports = function (element, selector, checkYoSelf, root) {\n  element = checkYoSelf ? {parentNode: element} : element\n\n  root = root || document\n\n  // Make sure `element !== document` and `element != null`\n  // otherwise we get an illegal invocation\n  while ((element = element.parentNode) && element !== document) {\n    if (matches(element, selector))\n      return element\n    // After `matches` on the edge case that\n    // the selector matches the root\n    // (when the root is not the document)\n    if (element === root)\n      return\n  }\n}\n","/**\n * Module dependencies.\n */\n\nvar closest = require(643)\n  , event = require(645);\n\n/**\n * Delegate event `type` to `selector`\n * and invoke `fn(e)`. A callback function\n * is returned which may be passed to `.unbind()`.\n *\n * @param {Element} el\n * @param {String} selector\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @return {Function}\n * @api public\n */\n\nexports.bind = function(el, selector, type, fn, capture){\n  return event.bind(el, type, function(e){\n    var target = e.target || e.srcElement;\n    e.delegateTarget = closest(target, selector, true, el);\n    if (e.delegateTarget) fn.call(el, e);\n  }, capture);\n};\n\n/**\n * Unbind event `type`'s callback `fn`.\n *\n * @param {Element} el\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @api public\n */\n\nexports.unbind = function(el, type, fn, capture){\n  event.unbind(el, type, fn, capture);\n};\n","var bind = window.addEventListener ? 'addEventListener' : 'attachEvent',\n    unbind = window.removeEventListener ? 'removeEventListener' : 'detachEvent',\n    prefix = bind !== 'addEventListener' ? 'on' : '';\n\n/**\n * Bind `el` event `type` to `fn`.\n *\n * @param {Element} el\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @return {Function}\n * @api public\n */\n\nexports.bind = function(el, type, fn, capture){\n  el[bind](prefix + type, fn, capture || false);\n  return fn;\n};\n\n/**\n * Unbind `el` event `type`'s callback `fn`.\n *\n * @param {Element} el\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @return {Function}\n * @api public\n */\n\nexports.unbind = function(el, type, fn, capture){\n  el[unbind](prefix + type, fn, capture || false);\n  return fn;\n};","/**\n * Module dependencies.\n */\n\nvar query = require(647);\n\n/**\n * Element prototype.\n */\n\nvar proto = Element.prototype;\n\n/**\n * Vendor function.\n */\n\nvar vendor = proto.matches\n  || proto.webkitMatchesSelector\n  || proto.mozMatchesSelector\n  || proto.msMatchesSelector\n  || proto.oMatchesSelector;\n\n/**\n * Expose `match()`.\n */\n\nmodule.exports = match;\n\n/**\n * Match `el` to `selector`.\n *\n * @param {Element} el\n * @param {String} selector\n * @return {Boolean}\n * @api public\n */\n\nfunction match(el, selector) {\n  if (!el || el.nodeType !== 1) return false;\n  if (vendor) return vendor.call(el, selector);\n  var nodes = query.all(selector, el.parentNode);\n  for (var i = 0; i < nodes.length; ++i) {\n    if (nodes[i] == el) return true;\n  }\n  return false;\n}\n","\n/**\n * Expose `parse`.\n */\n\nmodule.exports = parse;\n\n/**\n * Tests for browser support.\n */\n\nvar div = document.createElement('div');\n// Setup\ndiv.innerHTML = '  <link/><table></table><a href=\"/a\">a</a><input type=\"checkbox\"/>';\n// Make sure that link elements get serialized correctly by innerHTML\n// This requires a wrapper element in IE\nvar innerHTMLBug = !div.getElementsByTagName('link').length;\ndiv = undefined;\n\n/**\n * Wrap map from jquery.\n */\n\nvar map = {\n  legend: [1, '<fieldset>', '</fieldset>'],\n  tr: [2, '<table><tbody>', '</tbody></table>'],\n  col: [2, '<table><tbody></tbody><colgroup>', '</colgroup></table>'],\n  // for script/link/style tags to work in IE6-8, you have to wrap\n  // in a div with a non-whitespace character in front, ha!\n  _default: innerHTMLBug ? [1, 'X<div>', '</div>'] : [0, '', '']\n};\n\nmap.td =\nmap.th = [3, '<table><tbody><tr>', '</tr></tbody></table>'];\n\nmap.option =\nmap.optgroup = [1, '<select multiple=\"multiple\">', '</select>'];\n\nmap.thead =\nmap.tbody =\nmap.colgroup =\nmap.caption =\nmap.tfoot = [1, '<table>', '</table>'];\n\nmap.polyline =\nmap.ellipse =\nmap.polygon =\nmap.circle =\nmap.text =\nmap.line =\nmap.path =\nmap.rect =\nmap.g = [1, '<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">','</svg>'];\n\n/**\n * Parse `html` and return a DOM Node instance, which could be a TextNode,\n * HTML DOM Node of some kind (<div> for example), or a DocumentFragment\n * instance, depending on the contents of the `html` string.\n *\n * @param {String} html - HTML string to \"domify\"\n * @param {Document} doc - The `document` instance to create the Node for\n * @return {DOMNode} the TextNode, DOM Node, or DocumentFragment instance\n * @api private\n */\n\nfunction parse(html, doc) {\n  if ('string' != typeof html) throw new TypeError('String expected');\n\n  // default to the global `document` object\n  if (!doc) doc = document;\n\n  // tag name\n  var m = /<([/w:]+)/.exec(html);\n  if (!m) return doc.createTextNode(html);\n\n  html = html.replace(/^/s+|/s+$/g, ''); // Remove leading/trailing whitespace\n\n  var tag = m[1];\n\n  // body support\n  if (tag == 'body') {\n    var el = doc.createElement('html');\n    el.innerHTML = html;\n    return el.removeChild(el.lastChild);\n  }\n\n  // wrap map\n  var wrap = map[tag] || map._default;\n  var depth = wrap[0];\n  var prefix = wrap[1];\n  var suffix = wrap[2];\n  var el = doc.createElement('div');\n  el.innerHTML = prefix + html + suffix;\n  while (depth--) el = el.lastChild;\n\n  // one element\n  if (el.firstChild == el.lastChild) {\n    return el.removeChild(el.firstChild);\n  }\n\n  // several elements\n  var fragment = doc.createDocumentFragment();\n  while (el.firstChild) {\n    fragment.appendChild(el.removeChild(el.firstChild));\n  }\n\n  return fragment;\n}\n"]}